"use strict";(self.webpackChunkmoney_app=self.webpackChunkmoney_app||[]).push([[179],{2011:(lt,Ae,F)=>{F.d(Ae,{Dh:()=>ue,GT:()=>ye,cc:()=>ke,hO:()=>$e,on:()=>G,pX:()=>ce,xv:()=>he});var d=F(4650),j=F(127),N=F(6351);lt=F.hmd(lt);const oe=["ngOnDestroy"],ce=(me,Xe,Qe,Ve={})=>new Proxy(me,{get:(Ne,be)=>Qe.runOutsideAngular(()=>{var ze;if(me[be])return!(null===(ze=Ve?.spy)||void 0===ze)&&ze.get&&Ve.spy.get(be,me[be]),me[be];if(oe.indexOf(be)>-1)return()=>{};const se=Xe.toPromise().then(le=>{const _e=le&&le[be];return"function"==typeof _e?_e.bind(le):_e&&_e.then?_e.then(Q=>Qe.run(()=>Q)):Qe.run(()=>_e)});return new Proxy(()=>{},{get:(le,_e)=>se[_e],apply:(le,_e,Q)=>se.then(X=>{var fe;const ae=X&&X(...Q);return!(null===(fe=Ve?.spy)||void 0===fe)&&fe.apply&&Ve.spy.apply(be,Q,ae),ae})})})}),ye=(me,Xe)=>{Xe.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(Ve=>{Object.defineProperty(me.prototype,Ve,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,Ve))})})};class pe{constructor(Xe){return Xe}}const ue=new d.OlP("angularfire2.app.options"),he=new d.OlP("angularfire2.app.name");function G(me,Xe,Qe){const Ne="object"==typeof Qe&&Qe||{};Ne.name=Ne.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const ze=j.Z.apps.filter(se=>se&&se.name===Ne.name)[0]||Xe.runOutsideAngular(()=>j.Z.initializeApp(me,Ne));try{JSON.stringify(me)!==JSON.stringify(ze.options)&&z("error",`${ze.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(ze)}const z=(me,...Xe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[me](...Xe)},J={provide:pe,useFactory:G,deps:[ue,d.R0b,[new d.FiY,he]]};let $e=(()=>{class me{constructor(Qe){j.Z.registerVersion("angularfire",N.q4.full,"core"),j.Z.registerVersion("angularfire",N.q4.full,"app-compat"),j.Z.registerVersion("angular",d.q4F.full,Qe.toString())}static initializeApp(Qe,Ve){return{ngModule:me,providers:[{provide:ue,useValue:Qe},{provide:he,useValue:Ve}]}}}return me.\u0275fac=function(Qe){return new(Qe||me)(d.LFG(d.Lbi))},me.\u0275mod=d.oAB({type:me}),me.\u0275inj=d.cJS({providers:[J]}),me})();function ke(me,Xe,Qe,Ve,Ne){const[,be,ze]=globalThis.\u0275AngularfireInstanceCache.find(se=>se[0]===me)||[];if(be)return function Ce(me,Xe){try{return me.toString()===Xe.toString()}catch{return me===Xe}}(Ne,ze)||(ve("error",`${Xe} was already initialized on the ${Qe} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:Ne,was:ze})),be;{const se=Ve();return globalThis.\u0275AngularfireInstanceCache.push([me,se,Ne]),se}}const it=!!lt.hot,ve=(me,...Xe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[me](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(lt,Ae,F)=>{F.d(Ae,{q4:()=>uc,iC:()=>fi,fc:()=>hc,HU:()=>Aa,vb:()=>Cl,JM:()=>lc});var d=F(4650),j=F(5867),N=F(5861),oe=F(9681),ce=F(2090),ye=F(4859),pe=F(1877),ue=F(8766);const he="@firebase/installations",G="0.5.16",J=`w:${G}`,$e="FIS_v2",Xe=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qe(C){return C instanceof ce.ZR&&C.code.includes("request-failed")}function Ve({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ne(C){return{token:C.token,requestStatus:2,expiresIn:X(C.expiresIn),creationTime:Date.now()}}function be(C,D){return ze.apply(this,arguments)}function ze(){return(ze=(0,N.Z)(function*(C,D){const L=(yield D.json()).error;return Xe.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function se({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function le(C,{refreshToken:D}){const M=se(C);return M.append("Authorization",function fe(C){return`${$e} ${C}`}(D)),M}function _e(C){return Q.apply(this,arguments)}function Q(){return(Q=(0,N.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function X(C){return Number(C.replace("s","000"))}function ae(C,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:M}){const L=Ve(C),Y=se(C),re=D.getImmediate({optional:!0});if(re){const Ft=yield re.getHeartbeatsHeader();Ft&&Y.append("x-firebase-client",Ft)}const Ge={method:"POST",headers:Y,body:JSON.stringify({fid:M,authVersion:$e,appId:C.appId,sdkVersion:J})},bt=yield _e(()=>fetch(L,Ge));if(bt.ok){const Ft=yield bt.json();return{fid:Ft.fid||M,registrationStatus:2,refreshToken:Ft.refreshToken,authToken:Ne(Ft.authToken)}}throw yield be("Create Installation",bt)})).apply(this,arguments)}function je(C){return new Promise(D=>{setTimeout(D,C)})}const tn=/^[cdef][\w-]{21}$/;function Ze(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function on(C){return function yt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return tn.test(M)?M:""}catch{return""}}function mn(C){return`${C.appName}!${C.appId}`}const en=new Map;function Xt(C,D){const M=mn(C);mr(M,D),function Ei(C,D){const M=function An(){return!br&&"BroadcastChannel"in self&&(br=new BroadcastChannel("[Firebase] FID Change"),br.onmessage=C=>{mr(C.data.key,C.data.fid)}),br}();M&&M.postMessage({key:C,fid:D}),function ji(){0===en.size&&br&&(br.close(),br=null)}()}(M,D)}function mr(C,D){const M=en.get(C);if(M)for(const L of M)L(D)}let br=null;const Ln="firebase-installations-store";let ci=null;function Hi(){return ci||(ci=(0,ue.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Ln)}})),ci}function Je(C,D){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,N.Z)(function*(C,D){const M=mn(C),Y=(yield Hi()).transaction(Ln,"readwrite"),re=Y.objectStore(Ln),Ee=yield re.get(M);return yield re.put(D,M),yield Y.done,(!Ee||Ee.fid!==D.fid)&&Xt(C,D.fid),D})).apply(this,arguments)}function Vn(C){return pn.apply(this,arguments)}function pn(){return(pn=(0,N.Z)(function*(C){const D=mn(C),L=(yield Hi()).transaction(Ln,"readwrite");yield L.objectStore(Ln).delete(D),yield L.done})).apply(this,arguments)}function sr(C,D){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,N.Z)(function*(C,D){const M=mn(C),Y=(yield Hi()).transaction(Ln,"readwrite"),re=Y.objectStore(Ln),Ee=yield re.get(M),Ge=D(Ee);return void 0===Ge?yield re.delete(M):yield re.put(Ge,M),yield Y.done,Ge&&(!Ee||Ee.fid!==Ge.fid)&&Xt(C,Ge.fid),Ge})).apply(this,arguments)}function yn(C){return _n.apply(this,arguments)}function _n(){return(_n=(0,N.Z)(function*(C){let D;const M=yield sr(C.appConfig,L=>{const Y=fn(L),re=ft(C,Y);return D=re.registrationPromise,re.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function fn(C){return Dt(C||{fid:Ze(),registrationStatus:0})}function ft(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Xe.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},L=function pt(C,D){return At.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:L}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:kr(C)}:{installationEntry:D}}function At(){return(At=(0,N.Z)(function*(C,D){try{const M=yield ae(C,D);return Je(C.appConfig,M)}catch(M){throw Qe(M)&&409===M.customData.serverCode?yield Vn(C.appConfig):yield Je(C.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function kr(C){return zn.apply(this,arguments)}function zn(){return(zn=(0,N.Z)(function*(C){let D=yield yr(C.appConfig);for(;1===D.registrationStatus;)yield je(100),D=yield yr(C.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:L}=yield yn(C);return L||M}return D})).apply(this,arguments)}function yr(C){return sr(C,D=>{if(!D)throw Xe.create("installation-not-found");return Dt(D)})}function Dt(C){return function Dr(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Pt(C,D){return zr.apply(this,arguments)}function zr(){return(zr=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:D},M){const L=Zt(C,M),Y=le(C,M),re=D.getImmediate({optional:!0});if(re){const Ft=yield re.getHeartbeatsHeader();Ft&&Y.append("x-firebase-client",Ft)}const Ge={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:J,appId:C.appId}})},bt=yield _e(()=>fetch(L,Ge));if(bt.ok)return Ne(yield bt.json());throw yield be("Generate Auth Token",bt)})).apply(this,arguments)}function Zt(C,{fid:D}){return`${Ve(C)}/${D}/authTokens:generate`}function nr(C){return In.apply(this,arguments)}function In(){return(In=(0,N.Z)(function*(C,D=!1){let M;const L=yield sr(C.appConfig,re=>{if(!Qt(re))throw Xe.create("not-registered");const Ee=re.authToken;if(!D&&q(Ee))return re;if(1===Ee.requestStatus)return M=et(C,D),re;{if(!navigator.onLine)throw Xe.create("app-offline");const Ge=Z(re);return M=wt(C,Ge),Ge}});return M?yield M:L.authToken})).apply(this,arguments)}function et(C,D){return Se.apply(this,arguments)}function Se(){return(Se=(0,N.Z)(function*(C,D){let M=yield tt(C.appConfig);for(;1===M.authToken.requestStatus;)yield je(100),M=yield tt(C.appConfig);const L=M.authToken;return 0===L.requestStatus?nr(C,D):L})).apply(this,arguments)}function tt(C){return sr(C,D=>{if(!Qt(D))throw Xe.create("not-registered");return function B(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function wt(C,D){return It.apply(this,arguments)}function It(){return(It=(0,N.Z)(function*(C,D){try{const M=yield Pt(C,D),L=Object.assign(Object.assign({},D),{authToken:M});return yield Je(C.appConfig,L),M}catch(M){if(!Qe(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const L=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Je(C.appConfig,L)}else yield Vn(C.appConfig);throw M}})).apply(this,arguments)}function Qt(C){return void 0!==C&&2===C.registrationStatus}function q(C){return 2===C.requestStatus&&!function $(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function Z(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function V(){return(V=(0,N.Z)(function*(C){const D=C,{installationEntry:M,registrationPromise:L}=yield yn(D);return L?L.catch(console.error):nr(D).catch(console.error),M.fid})).apply(this,arguments)}function Fe(){return(Fe=(0,N.Z)(function*(C,D=!1){const M=C;return yield at(M),(yield nr(M,D)).token})).apply(this,arguments)}function at(C){return ut.apply(this,arguments)}function ut(){return(ut=(0,N.Z)(function*(C){const{registrationPromise:D}=yield yn(C);D&&(yield D)})).apply(this,arguments)}function Rs(C){return Xe.create("missing-app-config-values",{valueName:C})}const mo="installations",Os=C=>{const D=C.getProvider("app").getImmediate(),M=function vn(C){if(!C||!C.options)throw Rs("App Configuration");if(!C.name)throw Rs("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!C.options[M])throw Rs(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Ns=C=>{const D=C.getProvider("app").getImmediate(),M=(0,oe._getProvider)(D,mo).getImmediate();return{getId:()=>function R(C){return V.apply(this,arguments)}(M),getToken:Y=>function ie(C){return Fe.apply(this,arguments)}(M,Y)}};(function Ka(){(0,oe._registerComponent)(new ye.wA(mo,Os,"PUBLIC")),(0,oe._registerComponent)(new ye.wA("installations-internal",Ns,"PRIVATE"))})(),(0,oe.registerVersion)(he,G),(0,oe.registerVersion)(he,G,"esm2017");const zi="@firebase/remote-config",Bn=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qa{constructor(D,M,L,Y){this.client=D,this.storage=M,this.storageCache=L,this.logger=Y}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-M,Y=L<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var M=this;return(0,N.Z)(function*(){const[L,Y]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Y&&M.isCachedDataFresh(D.cacheMaxAgeMillis,L))return Y;D.eTag=Y&&Y.eTag;const re=yield M.client.fetch(D),Ee=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Ee.push(M.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Ee),re})()}}function aa(C=navigator){return C.languages&&C.languages[0]||C.language}class Ls{constructor(D,M,L,Y,re,Ee){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=L,this.projectId=Y,this.apiKey=re,this.appId=Ee}fetch(D){var M=this;return(0,N.Z)(function*(){var L,Y,re;const[Ee,Ge]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ft=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ct={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ct={sdk_version:M.sdkVersion,app_instance_id:Ee,app_instance_id_token:Ge,app_id:M.appId,language_code:aa()},zt={method:"POST",headers:Ct,body:JSON.stringify(ct)},En=fetch(Ft,zt),xi=new Promise((Ri,Ot)=>{D.signal.addEventListener(()=>{const ti=new Error("The operation was aborted.");ti.name="AbortError",Ot(ti)})});let Mi;try{yield Promise.race([En,xi]),Mi=yield En}catch(Ri){let Ot="fetch-client-network";throw"AbortError"===(null===(L=Ri)||void 0===L?void 0:L.name)&&(Ot="fetch-timeout"),Bn.create(Ot,{originalErrorMessage:null===(Y=Ri)||void 0===Y?void 0:Y.message})}let pi=Mi.status;const Ho=Mi.headers.get("ETag")||void 0;let Zs,Ks;if(200===Mi.status){let Ri;try{Ri=yield Mi.json()}catch(Ot){throw Bn.create("fetch-client-parse",{originalErrorMessage:null===(re=Ot)||void 0===re?void 0:re.message})}Zs=Ri.entries,Ks=Ri.state}if("INSTANCE_STATE_UNSPECIFIED"===Ks?pi=500:"NO_CHANGE"===Ks?pi=304:("NO_TEMPLATE"===Ks||"EMPTY_CONFIG"===Ks)&&(Zs={}),304!==pi&&200!==pi)throw Bn.create("fetch-status",{httpStatus:pi});return{status:pi,eTag:Ho,config:Zs}})()}}class Wi{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,N.Z)(function*(){const L=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,L)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:L}){var Y=this;return(0,N.Z)(function*(){yield function Kr(C,D){return new Promise((M,L)=>{const Y=Math.max(D-Date.now(),0),re=setTimeout(M,Y);C.addEventListener(()=>{clearTimeout(re),L(Bn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const re=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),re}catch(re){if(!function ap(C){if(!(C instanceof ce.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(re))throw re;const Ee={throttleEndTimeMillis:Date.now()+(0,ce.$s)(L),backoffCount:L+1};return yield Y.storage.setThrottleMetadata(Ee),Y.attemptFetch(D,Ee)}})()}}class $u{constructor(D,M,L,Y,re){this.app=D,this._client=M,this._storageCache=L,this._storage=Y,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ua(C,D){var M;const L=C.target.error||void 0;return Bn.create(D,{originalErrorMessage:L&&(null===(M=L)||void 0===M?void 0:M.message)})}const _o="app_namespace_store";class Hu{constructor(D,M,L,Y=function lp(){return new Promise((C,D)=>{var M;try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=Y=>{D(ua(Y,"storage-open"))},L.onsuccess=Y=>{C(Y.target.result)},L.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(_o,{keyPath:"compositeKey"})}}catch(L){D(Bn.create("storage-open",{originalErrorMessage:null===(M=L)||void 0===M?void 0:M.message}))}})}()){this.appId=D,this.appName=M,this.namespace=L,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,N.Z)(function*(){const L=yield M.openDbPromise;return new Promise((Y,re)=>{var Ee;const bt=L.transaction([_o],"readonly").objectStore(_o),Ft=M.createCompositeKey(D);try{const Ct=bt.get(Ft);Ct.onerror=ct=>{re(ua(ct,"storage-get"))},Ct.onsuccess=ct=>{const zt=ct.target.result;Y(zt?zt.value:void 0)}}catch(Ct){re(Bn.create("storage-get",{originalErrorMessage:null===(Ee=Ct)||void 0===Ee?void 0:Ee.message}))}})})()}set(D,M){var L=this;return(0,N.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((re,Ee)=>{var Ge;const Ft=Y.transaction([_o],"readwrite").objectStore(_o),Ct=L.createCompositeKey(D);try{const ct=Ft.put({compositeKey:Ct,value:M});ct.onerror=zt=>{Ee(ua(zt,"storage-set"))},ct.onsuccess=()=>{re()}}catch(ct){Ee(Bn.create("storage-set",{originalErrorMessage:null===(Ge=ct)||void 0===Ge?void 0:Ge.message}))}})})()}delete(D){var M=this;return(0,N.Z)(function*(){const L=yield M.openDbPromise;return new Promise((Y,re)=>{var Ee;const bt=L.transaction([_o],"readwrite").objectStore(_o),Ft=M.createCompositeKey(D);try{const Ct=bt.delete(Ft);Ct.onerror=ct=>{re(ua(ct,"storage-delete"))},Ct.onsuccess=()=>{Y()}}catch(Ct){re(Bn.create("storage-delete",{originalErrorMessage:null===(Ee=Ct)||void 0===Ee?void 0:Ee.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class vo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const M=D.storage.getLastFetchStatus(),L=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),re=yield M;re&&(D.lastFetchStatus=re);const Ee=yield L;Ee&&(D.lastSuccessfulFetchTimestampMillis=Ee);const Ge=yield Y;Ge&&(D.activeConfig=Ge)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Qm(){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,N.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function rl(){(0,oe._registerComponent)(new ye.wA("remote-config",function C(D,{instanceIdentifier:M}){const L=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Bn.create("registration-window");if(!(0,ce.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:re,apiKey:Ee,appId:Ge}=L.options;if(!re)throw Bn.create("registration-project-id");if(!Ee)throw Bn.create("registration-api-key");if(!Ge)throw Bn.create("registration-app-id");const bt=new Hu(Ge,L.name,M=M||"firebase"),Ft=new vo(bt),Ct=new pe.Yd(zi);Ct.logLevel=pe.in.ERROR;const ct=new Ls(Y,oe.SDK_VERSION,M,re,Ee,Ge),zt=new Wi(ct,bt),En=new Qa(zt,bt,Ft,Ct),xi=new $u(L,En,Ft,bt,Ct);return function bn(C){const D=(0,ce.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(xi),xi},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(zi,"0.3.15"),(0,oe.registerVersion)(zi,"0.3.15","esm2017")}();const lr="/firebase-messaging-sw.js",Eo="/firebase-cloud-messaging-push-scope",us="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xa="google.c.a.c_id",Gu="google.c.a.c_l",sl="google.c.a.ts",Io="google.c.a.e";var Yr=(()=>{return(C=Yr||(Yr={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Yr;var C})();function Zi(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vr(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(M),Y=new Uint8Array(L.length);for(let re=0;re<L.length;++re)Y[re]=L.charCodeAt(re);return Y}const Vs="fcm_token_details_db",Us="fcm_token_object_Store";function hp(C){return zu.apply(this,arguments)}function zu(){return zu=(0,N.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Vs))return null;let D=null;return(yield(0,ue.X3)(Vs,5,{upgrade:(L=(0,N.Z)(function*(Y,re,Ee,Ge){var bt;if(re<2||!Y.objectStoreNames.contains(Us))return;const Ft=Ge.objectStore(Us),Ct=yield Ft.index("fcmSenderId").get(C);if(yield Ft.clear(),Ct)if(2===re){const ct=Ct;if(!ct.auth||!ct.p256dh||!ct.endpoint)return;D={token:ct.fcmToken,createTime:null!==(bt=ct.createTime)&&void 0!==bt?bt:Date.now(),subscriptionOptions:{auth:ct.auth,p256dh:ct.p256dh,endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:"string"==typeof ct.vapidKey?ct.vapidKey:Zi(ct.vapidKey)}}}else if(3===re){const ct=Ct;D={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:Zi(ct.auth),p256dh:Zi(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:Zi(ct.vapidKey)}}}else if(4===re){const ct=Ct;D={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:Zi(ct.auth),p256dh:Zi(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:Zi(ct.vapidKey)}}}}),function(re,Ee,Ge,bt){return L.apply(this,arguments)})})).close(),yield(0,ue.Lj)(Vs),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),xn(D)?D:null;var L}),zu.apply(this,arguments)}function xn(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const di="firebase-messaging-store";let dr=null;function eu(){return dr||(dr=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(di)}})),dr}function Bs(C){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,N.Z)(function*(C){const D=Qr(C),L=yield(yield eu()).transaction(di).objectStore(di).get(D);if(L)return L;{const Y=yield hp(C.appConfig.senderId);if(Y)return yield nn(C,Y),Y}})).apply(this,arguments)}function nn(C,D){return qu.apply(this,arguments)}function qu(){return(qu=(0,N.Z)(function*(C,D){const M=Qr(C),Y=(yield eu()).transaction(di,"readwrite");return yield Y.objectStore(di).put(D,M),yield Y.done,D})).apply(this,arguments)}function cs(C){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,N.Z)(function*(C){const D=Qr(C),L=(yield eu()).transaction(di,"readwrite");yield L.objectStore(di).delete(D),yield L.done})).apply(this,arguments)}function Qr({appConfig:C}){return C.appId}const On=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Mt(C,D){return da.apply(this,arguments)}function da(){return(da=(0,N.Z)(function*(C,D){var M;const L=yield pa(C),Y=Oe(D),re={method:"POST",headers:L,body:JSON.stringify(Y)};let Ee;try{Ee=yield(yield fetch(js(C.appConfig),re)).json()}catch(Ge){throw On.create("token-subscribe-failed",{errorInfo:null===(M=Ge)||void 0===M?void 0:M.toString()})}if(Ee.error)throw On.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw On.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function fp(C,D){return ha.apply(this,arguments)}function ha(){return(ha=(0,N.Z)(function*(C,D){var M;const L=yield pa(C),Y=Oe(D.subscriptionOptions),re={method:"PATCH",headers:L,body:JSON.stringify(Y)};let Ee;try{Ee=yield(yield fetch(`${js(C.appConfig)}/${D.token}`,re)).json()}catch(Ge){throw On.create("token-update-failed",{errorInfo:null===(M=Ge)||void 0===M?void 0:M.toString()})}if(Ee.error)throw On.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw On.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function al(C,D){return fa.apply(this,arguments)}function fa(){return(fa=(0,N.Z)(function*(C,D){var M;const Y={method:"DELETE",headers:yield pa(C)};try{const Ee=yield(yield fetch(`${js(C.appConfig)}/${D}`,Y)).json();if(Ee.error)throw On.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(re){throw On.create("token-unsubscribe-failed",{errorInfo:null===(M=re)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function js({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function pa(C){return bo.apply(this,arguments)}function bo(){return(bo=(0,N.Z)(function*({appConfig:C,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Oe({p256dh:C,auth:D,endpoint:M,vapidKey:L}){const Y={web:{endpoint:M,auth:D,p256dh:C}};return L!==us&&(Y.web.applicationPubKey=L),Y}const qt=6048e5;function eh(C){return Co.apply(this,arguments)}function Co(){return(Co=(0,N.Z)(function*(C){const D=yield th(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:Zi(D.getKey("auth")),p256dh:Zi(D.getKey("p256dh"))},L=yield Bs(C.firebaseDependencies);if(L){if(pp(L.subscriptionOptions,M))return Date.now()>=L.createTime+qt?tu(C,{token:L.token,createTime:Date.now(),subscriptionOptions:M}):L.token;try{yield al(C.firebaseDependencies,L.token)}catch(Y){console.warn(Y)}return nu(C.firebaseDependencies,M)}return nu(C.firebaseDependencies,M)})).apply(this,arguments)}function Wn(C){return Do.apply(this,arguments)}function Do(){return(Do=(0,N.Z)(function*(C){const D=yield Bs(C.firebaseDependencies);D&&(yield al(C.firebaseDependencies,D.token),yield cs(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function tu(C,D){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,N.Z)(function*(C,D){try{const M=yield fp(C.firebaseDependencies,D),L=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield nn(C.firebaseDependencies,L),M}catch(M){throw yield Wn(C),M}})).apply(this,arguments)}function nu(C,D){return So.apply(this,arguments)}function So(){return(So=(0,N.Z)(function*(C,D){const L={token:yield Mt(C,D),createTime:Date.now(),subscriptionOptions:D};return yield nn(C,L),L.token})).apply(this,arguments)}function th(C,D){return ga.apply(this,arguments)}function ga(){return(ga=(0,N.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vr(D)})})).apply(this,arguments)}function pp(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function $s(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Zn(C,D){if(!D.notification)return;C.notification={};const M=D.notification.title;M&&(C.notification.title=M);const L=D.notification.body;L&&(C.notification.body=L);const Y=D.notification.image;Y&&(C.notification.image=Y);const re=D.notification.icon;re&&(C.notification.icon=re)}(D,C),function bi(C,D){!D.data||(C.data=D.data)}(D,C),function ma(C,D){var M,L,Y,re,Ee;if(!(D.fcmOptions||null!==(M=D.notification)&&void 0!==M&&M.click_action))return;C.fcmOptions={};const Ge=null!==(Y=null===(L=D.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==Y?Y:null===(re=D.notification)||void 0===re?void 0:re.click_action;Ge&&(C.fcmOptions.link=Ge);const bt=null===(Ee=D.fcmOptions)||void 0===Ee?void 0:Ee.analytics_label;bt&&(C.fcmOptions.analyticsLabel=bt)}(D,C),D}function ya(C){return"object"==typeof C&&!!C&&Xa in C}function Ki(C,D){const M=[];for(let L=0;L<C.length;L++)M.push(C.charAt(L)),L<D.length&&M.push(D.charAt(L));return M.join("")}function Zu(C){return On.create("missing-app-config-values",{valueName:C})}Ki("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ki("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cl{constructor(D,M,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function ul(C){if(!C||!C.options)throw Zu("App Configuration Object");if(!C.name)throw Zu("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const L of D)if(!M[L])throw Zu(L);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:M,analyticsProvider:L}}_delete(){return Promise.resolve()}}function nh(C){return To.apply(this,arguments)}function To(){return(To=(0,N.Z)(function*(C){var D;try{C.swRegistration=yield navigator.serviceWorker.register(lr,{scope:Eo}),C.swRegistration.update().catch(()=>{})}catch(M){throw On.create("failed-service-worker-registration",{browserErrorMessage:null===(D=M)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function Ku(C,D){return _a.apply(this,arguments)}function _a(){return(_a=(0,N.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield nh(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw On.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function Yu(C,D){return va.apply(this,arguments)}function va(){return(va=(0,N.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=us)})).apply(this,arguments)}function Ao(){return(Ao=(0,N.Z)(function*(C,D){if(!navigator)throw On.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw On.create("permission-blocked");return yield Yu(C,D?.vapidKey),yield Ku(C,D?.serviceWorkerRegistration),eh(C)})).apply(this,arguments)}function rh(C,D,M){return wa.apply(this,arguments)}function wa(){return(wa=(0,N.Z)(function*(C,D,M){const L=ih(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:M[Xa],message_name:M[Gu],message_time:M[sl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ih(C){switch(C){case Yr.NOTIFICATION_CLICKED:return"notification_open";case Yr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ls(){return(ls=(0,N.Z)(function*(C,D){const M=D.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===Yr.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler($s(M)):C.onMessageHandler.next($s(M)));const L=M.data;ya(L)&&"1"===L[Io]&&(yield rh(C,M.messageType,L))})).apply(this,arguments)}const ds="@firebase/messaging",Dn=C=>{const D=new cl(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function dl(C,D){return ls.apply(this,arguments)}(D,M)),D},Yi=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:L=>function ll(C,D){return Ao.apply(this,arguments)}(D,L)}};function Qu(){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,N.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Sn(){(0,oe._registerComponent)(new ye.wA("messaging",Dn,"PUBLIC")),(0,oe._registerComponent)(new ye.wA("messaging-internal",Yi,"PRIVATE")),(0,oe.registerVersion)(ds,"0.11.0"),(0,oe.registerVersion)(ds,"0.11.0","esm2017")}();const Ro="analytics",gl="firebase_id",nc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ml="https://www.googletagmanager.com/gtag/js",Nn=new pe.Yd("@firebase/analytics");function iu(C){return Promise.all(C.map(D=>D.catch(M=>M)))}function su(C,D){const M=document.createElement("script");M.src=`${ml}?l=${C}&id=${D}`,M.async=!0,document.head.appendChild(M)}function sh(C,D,M,L,Y,re){return au.apply(this,arguments)}function au(){return(au=(0,N.Z)(function*(C,D,M,L,Y,re){const Ee=L[Y];try{if(Ee)yield D[Ee];else{const bt=(yield iu(M)).find(Ft=>Ft.measurementId===Y);bt&&(yield D[bt.appId])}}catch(Ge){Nn.error(Ge)}C("config",Y,re)})).apply(this,arguments)}function Qi(C,D,M,L,Y){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,N.Z)(function*(C,D,M,L,Y){try{let re=[];if(Y&&Y.send_to){let Ee=Y.send_to;Array.isArray(Ee)||(Ee=[Ee]);const Ge=yield iu(M);for(const bt of Ee){const Ft=Ge.find(ct=>ct.measurementId===bt),Ct=Ft&&D[Ft.appId];if(!Ct){re=[];break}re.push(Ct)}}0===re.length&&(re=Object.values(D)),yield Promise.all(re),C("event",L,Y||{})}catch(re){Nn.error(re)}})).apply(this,arguments)}function yl(C){const D=window.document.getElementsByTagName("script");for(const M of Object.values(D))if(M.src&&M.src.includes(ml)&&M.src.includes(C))return M;return null}const Kn=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ba=new class ic{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Oo(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function uh(C){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,N.Z)(function*(C){var D;const{appId:M,apiKey:L}=C,Y={method:"GET",headers:Oo(L)},re=nc.replace("{app-id}",M),Ee=yield fetch(re,Y);if(200!==Ee.status&&304!==Ee.status){let Ge="";try{const bt=yield Ee.json();null!==(D=bt.error)&&void 0!==D&&D.message&&(Ge=bt.error.message)}catch{}throw Kn.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:Ge})}return Ee.json()})).apply(this,arguments)}function _l(C){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,N.Z)(function*(C,D=ba,M){const{appId:L,apiKey:Y,measurementId:re}=C.options;if(!L)throw Kn.create("no-app-id");if(!Y){if(re)return{measurementId:re,appId:L};throw Kn.create("no-api-key")}const Ee=D.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new Ca;return setTimeout((0,N.Z)(function*(){Ge.abort()}),void 0!==M?M:6e4),vl({appId:L,apiKey:Y,measurementId:re},Ee,Ge,D)})).apply(this,arguments)}function vl(C,D,M){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,N.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:M},L,Y=ba){var re,Ee;const{appId:Ge,measurementId:bt}=C;try{yield sc(L,D)}catch(Ft){if(bt)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${null===(re=Ft)||void 0===re?void 0:re.message}]`),{appId:Ge,measurementId:bt};throw Ft}try{const Ft=yield uh(C);return Y.deleteThrottleMetadata(Ge),Ft}catch(Ft){const Ct=Ft;if(!uu(Ct)){if(Y.deleteThrottleMetadata(Ge),bt)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Ct?.message}]`),{appId:Ge,measurementId:bt};throw Ft}const ct=503===Number(null===(Ee=Ct?.customData)||void 0===Ee?void 0:Ee.httpStatus)?(0,ce.$s)(M,Y.intervalMillis,30):(0,ce.$s)(M,Y.intervalMillis),zt={throttleEndTimeMillis:Date.now()+ct,backoffCount:M+1};return Y.setThrottleMetadata(Ge,zt),Nn.debug(`Calling attemptFetch again in ${ct} millis`),vl(C,zt,L,Y)}})).apply(this,arguments)}function sc(C,D){return new Promise((M,L)=>{const Y=Math.max(D-Date.now(),0),re=setTimeout(M,Y);C.addEventListener(()=>{clearTimeout(re),L(Kn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function uu(C){if(!(C instanceof ce.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ca{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Hs,lu;function No(){return(No=(0,N.Z)(function*(C,D,M,L,Y){if(Y&&Y.global)C("event",M,L);else{const re=yield D;C("event",M,Object.assign(Object.assign({},L),{send_to:re}))}})).apply(this,arguments)}function Lo(C){lu=C}function oc(C){Hs=C}function fs(){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,N.Z)(function*(){var C;if(!(0,ce.hl)())return Nn.warn(Kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(D){return Nn.warn(Kn.create("indexeddb-unavailable",{errorInfo:null===(C=D)||void 0===C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function Uo(){return(Uo=(0,N.Z)(function*(C,D,M,L,Y,re,Ee){var Ge;const bt=_l(C);bt.then(En=>{M[En.measurementId]=En.appId,C.options.measurementId&&En.measurementId!==C.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${En.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(En=>Nn.error(En)),D.push(bt);const Ft=fs().then(En=>{if(En)return L.getId()}),[Ct,ct]=yield Promise.all([bt,Ft]);yl(re)||su(re,Ct.measurementId),lu&&(Y("consent","default",lu),Lo(void 0)),Y("js",new Date);const zt=null!==(Ge=Ee?.config)&&void 0!==Ge?Ge:{};return zt.origin="firebase",zt.update=!0,null!=ct&&(zt[gl]=ct),Y("config",Ct.measurementId,zt),Hs&&(Y("set",Hs),oc(void 0)),Ct.measurementId})).apply(this,arguments)}class du{constructor(D){this.app=D}_delete(){return delete _r[this.app.options.appId],Promise.resolve()}}let _r={},Bo=[];const Gs={};let $o,Di,jo="dataLayer",El=!1;function dh(C,D,M){!function gp(){const C=[];if((0,ce.ru)()&&C.push("This is a browser extension environment."),(0,ce.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((L,Y)=>`(${Y+1}) ${L}`).join(" "),M=Kn.create("invalid-analytics-context",{errorInfo:D});Nn.warn(M.message)}}();const L=C.options.appId;if(!L)throw Kn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Kn.create("no-api-key");Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_r[L])throw Kn.create("already-exists",{id:L});if(!El){!function ou(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(jo);const{wrappedGtag:re,gtagCore:Ee}=function Ia(C,D,M,L,Y){let re=function(...Ee){window[L].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(re=window[Y]),window[Y]=function rc(C,D,M,L){function re(){return(re=(0,N.Z)(function*(Ee,Ge,bt){try{"event"===Ee?yield Qi(C,D,M,Ge,bt):"config"===Ee?yield sh(C,D,M,L,Ge,bt):"consent"===Ee?C("consent","update",bt):C("set",Ge)}catch(Ft){Nn.error(Ft)}})).apply(this,arguments)}return function Y(Ee,Ge,bt){return re.apply(this,arguments)}}(re,C,D,M),{gtagCore:re,wrappedGtag:window[Y]}}(_r,Bo,Gs,jo,"gtag");Di=re,$o=Ee,El=!0}return _r[L]=function lh(C,D,M,L,Y,re,Ee){return Uo.apply(this,arguments)}(C,Bo,Gs,D,$o,jo,M),new du(C)}function Xm(){return hh.apply(this,arguments)}function hh(){return(hh=(0,N.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const nt="@firebase/analytics";!function gn(){(0,oe._registerComponent)(new ye.wA(Ro,(D,{options:M})=>dh(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new ye.wA("analytics-internal",function C(D){try{const M=D.getProvider(Ro).getImmediate();return{logEvent:(L,Y,re)=>function Jt(C,D,M,L){C=(0,ce.m9)(C),function Da(C,D,M,L,Y){return No.apply(this,arguments)}(Di,_r[C.app.options.appId],D,M,L).catch(Y=>Nn.error(Y))}(M,L,Y,re)}}catch(M){throw Kn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(nt,"0.8.4"),(0,oe.registerVersion)(nt,"0.8.4","esm2017")}();var es=F(233),zs=F(4986),Tn=F(8505),ps=F(5363),Il=F(9468);const uc=new d.GfV("7.4.1"),cc="__angularfire_symbol__analyticsIsSupportedValue",ts="__angularfire_symbol__analyticsIsSupported",fu="__angularfire_symbol__remoteConfigIsSupportedValue",gs="__angularfire_symbol__remoteConfigIsSupported",rt="__angularfire_symbol__messagingIsSupportedValue",Ta="__angularfire_symbol__messagingIsSupported";function lc(C,D,M){if(D){if(1===D.length)return D[0];const re=D.filter(Ee=>Ee.app===M);if(1===re.length)return re[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[ts]||(globalThis[ts]=Xm().then(C=>globalThis[cc]=C).catch(()=>globalThis[cc]=!1)),globalThis[Ta]||(globalThis[Ta]=Qu().then(C=>globalThis[rt]=C).catch(()=>globalThis[rt]=!1)),globalThis[gs]||(globalThis[gs]=Qm().then(C=>globalThis[fu]=C).catch(()=>globalThis[fu]=!1));const Cl=(C,D)=>{const M=D?[D]:(0,j.C6)(),L=[];return M.forEach(Y=>{Y.container.getProvider(C).instances.forEach(Ee=>{L.includes(Ee)||L.push(Ee)})}),L};function ms(){}class dc{constructor(D,M=es.N){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,L){const Y=this.zone;return this.delegate.schedule(function(Ee){Y.runGuarded(()=>{D.apply(this,[Ee])})},M,L)}}class qs{constructor(D){this.zone=D,this.task=null}call(D,M){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ms,{},ms,ms)),M.pipe((0,Tn.b)({next:L,complete:L,error:L})).subscribe(D).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Aa=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new dc(Zone.current)),this.insideAngular=M.run(()=>new dc(Zone.current,zs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(d.LFG(d.R0b))},C.\u0275prov=d.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Xr(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function hc(C){return C.pipe((0,ps.Q)(Xr().outsideAngular))}function fi(C){return Xr(),function Ai(C){return function(M){return(M=M.lift(new qs(C.ngZone))).pipe((0,Il.R)(C.outsideAngular),(0,ps.Q)(C.insideAngular))}}(Xr())(C)}},8247:(lt,Ae,F)=>{F.d(Ae,{$:()=>js,A:()=>z,B:()=>ke,G:()=>Ns,H:()=>Fr,J:()=>Wi,L:()=>q,M:()=>Ja,N:()=>ca,P:()=>cc,Q:()=>Xa,R:()=>ey,T:()=>Gu,U:()=>us,V:()=>Yr,W:()=>Zi,X:()=>hp,Y:()=>la,Z:()=>Mt,_:()=>fp,a:()=>hs,a0:()=>eh,a1:()=>Wn,a2:()=>tu,a3:()=>nu,a4:()=>th,a5:()=>pp,a6:()=>Zn,a7:()=>bi,a8:()=>ya,a9:()=>Ki,aA:()=>$,aB:()=>En,aC:()=>Qn,aD:()=>Dl,aE:()=>_t,aI:()=>Oo,aL:()=>Io,aa:()=>nh,ab:()=>Ku,ac:()=>Yu,af:()=>rh,ag:()=>ih,ah:()=>dl,ak:()=>di,al:()=>Xu,an:()=>ml,ao:()=>au,ap:()=>_e,aq:()=>Ue,ar:()=>at,as:()=>Qe,at:()=>gu,au:()=>ti,av:()=>xt,aw:()=>Ve,ax:()=>se,ay:()=>Zs,az:()=>X,b:()=>Kn,c:()=>Yn,d:()=>dc,e:()=>Cl,f:()=>M,g:()=>bt,h:()=>re,i:()=>Vo,j:()=>ct,k:()=>vh,l:()=>Br,m:()=>ys,o:()=>ue,r:()=>es,s:()=>Xi,u:()=>Il});var d=F(5861),j=F(2090),N=F(9681),oe=F(1877),ce=F(655),ye=F(4859);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ke=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ce=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),me=new oe.Yd("@firebase/auth");function Xe(v,...g){me.logLevel<=oe.in.ERROR&&me.error(`Auth (${N.SDK_VERSION}): ${v}`,...g)}function Qe(v,...g){throw ze(v,...g)}function Ve(v,...g){return ze(v,...g)}function Ne(v,g,m){const E=Object.assign(Object.assign({},Ce()),{[g]:m});return new j.LL("auth","Firebase",E).create(g,{appName:v.name})}function be(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&Qe(v,"argument-error"),Ne(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(v,...g){if("string"!=typeof v){const m=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return it.create(v,...g)}function se(v,g,...m){if(!v)throw ze(g,...m)}function le(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Xe(g),new Error(g)}function _e(v,g){v||le(g)}const Q=new Map;function X(v){_e(v instanceof Function,"Expected a class definition");let g=Q.get(v);return g?(_e(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,Q.set(v,g),g)}function Be(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function je(){return"http:"===yt()||"https:"===yt()}function yt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ze{constructor(g,m){this.shortDelay=g,this.longDelay=m,_e(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function tn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function on(v,g){_e(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class mn{static initialize(g,m,E){this.fetchImpl=g,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void le("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void le("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void le("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xt=new Ze(3e4,6e4);function $t(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function kt(v,g,m,E){return mr.apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(v,g,m,E,A={}){return Ei(v,A,(0,d.Z)(function*(){let P={},ne={};E&&("GET"===g?ne=E:P={body:JSON.stringify(E)});const Me=(0,j.xO)(Object.assign({key:v.config.apiKey},ne)).slice(1),st=yield v._getAdditionalHeaders();return st["Content-Type"]="application/json",v.languageCode&&(st["X-Firebase-Locale"]=v.languageCode),mn.fetch()($i(v,v.config.apiHost,m,Me),Object.assign({method:g,headers:st,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Ei(v,g,m){return br.apply(this,arguments)}function br(){return(br=(0,d.Z)(function*(v,g,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},en),g);try{const A=new Cr(v),P=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const ne=yield P.json();if("needConfirmation"in ne)throw Ln(v,"account-exists-with-different-credential",ne);if(P.ok&&!("errorMessage"in ne))return ne;{const Me=P.ok?ne.errorMessage:ne.error.message,[st,Et]=Me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===st)throw Ln(v,"credential-already-in-use",ne);if("EMAIL_EXISTS"===st)throw Ln(v,"email-already-in-use",ne);if("USER_DISABLED"===st)throw Ln(v,"user-disabled",ne);const Wt=E[st]||st.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw Ne(v,Wt,Et);Qe(v,Wt)}}catch(A){if(A instanceof j.ZR)throw A;Qe(v,"network-request-failed")}})).apply(this,arguments)}function An(v,g,m,E){return ji.apply(this,arguments)}function ji(){return(ji=(0,d.Z)(function*(v,g,m,E,A={}){const P=yield kt(v,g,m,E,A);return"mfaPendingCredential"in P&&Qe(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function $i(v,g,m,E){const A=`${g}${m}?${E}`;return v.config.emulator?on(v.config,A):`${v.config.apiScheme}://${A}`}class Cr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ve(this.auth,"network-request-failed")),Xt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ln(v,g,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=Ve(v,g,E);return A.customData._tokenResponse=m,A}function Hi(){return(Hi=(0,d.Z)(function*(v,g){return kt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Je(v,g){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,d.Z)(function*(v,g){return kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Vn(v,g){return pn.apply(this,arguments)}function pn(){return(pn=(0,d.Z)(function*(v,g){return kt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function sr(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function _n(){return(_n=(0,d.Z)(function*(v,g=!1){const m=(0,j.m9)(v),E=yield m.getIdToken(g),A=ft(E);se(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const P="object"==typeof A.firebase?A.firebase:void 0,ne=P?.sign_in_provider;return{claims:A,token:E,authTime:sr(fn(A.auth_time)),issuedAtTime:sr(fn(A.iat)),expirationTime:sr(fn(A.exp)),signInProvider:ne||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function fn(v){return 1e3*Number(v)}function ft(v){var g;const[m,E,A]=v.split(".");if(void 0===m||void 0===E||void 0===A)return Xe("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,j.tV)(E);return P?JSON.parse(P):(Xe("Failed to decode base64 JWT payload"),null)}catch(P){return Xe("Caught error parsing JWT payload as JSON",null===(g=P)||void 0===g?void 0:g.toString()),null}}function At(v,g){return kr.apply(this,arguments)}function kr(){return(kr=(0,d.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(E){throw E instanceof j.ZR&&zn(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function zn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class yr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),E)}iteration(){var g=this;return(0,d.Z)(function*(){var m;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&g.schedule(!0))}g.schedule()})()}}class Dt{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=sr(this.lastLoginAt),this.creationTime=sr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Dr(v){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(v){var g;const m=v.auth,E=yield v.getIdToken(),A=yield At(v,Vn(m,{idToken:E}));se(A?.users.length,m,"internal-error");const P=A.users[0];v._notifyReloadListener(P);const ne=null!==(g=P.providerUserInfo)&&void 0!==g&&g.length?In(P.providerUserInfo):[],Me=nr(v.providerData,ne),Wt=!!v.isAnonymous&&!(v.email&&P.passwordHash||Me?.length),cn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Me,metadata:new Dt(P.createdAt,P.lastLoginAt),isAnonymous:Wt};Object.assign(v,cn)})).apply(this,arguments)}function Zt(){return(Zt=(0,d.Z)(function*(v){const g=(0,j.m9)(v);yield Dr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function nr(v,g){return[...v.filter(E=>!g.some(A=>A.providerId===E.providerId)),...g]}function In(v){return v.map(g=>{var{providerId:m}=g,E=(0,ce._T)(g,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Se(){return(Se=(0,d.Z)(function*(v,g){const m=yield Ei(v,{},(0,d.Z)(function*(){const E=(0,j.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:A,apiKey:P}=v.config,ne=$i(v,A,"/v1/token",`key=${P}`),Me=yield v._getAdditionalHeaders();return Me["Content-Type"]="application/x-www-form-urlencoded",mn.fetch()(ne,{method:"POST",headers:Me,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){se(g.idToken,"internal-error"),se(typeof g.idToken<"u","internal-error"),se(typeof g.refreshToken<"u","internal-error");const m="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function pt(v){const g=ft(v);return se(g,"internal-error"),se(typeof g.exp<"u","internal-error"),se(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var E=this;return(0,d.Z)(function*(){return se(!E.accessToken||E.refreshToken,g,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var E=this;return(0,d.Z)(function*(){const{accessToken:A,refreshToken:P,expiresIn:ne}=yield function et(v,g){return Se.apply(this,arguments)}(g,m);E.updateTokensAndExpiration(A,P,Number(ne))})()}updateTokensAndExpiration(g,m,E){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,m){const{refreshToken:E,accessToken:A,expirationTime:P}=m,ne=new tt;return E&&(se("string"==typeof E,"internal-error",{appName:g}),ne.refreshToken=E),A&&(se("string"==typeof A,"internal-error",{appName:g}),ne.accessToken=A),P&&(se("number"==typeof P,"internal-error",{appName:g}),ne.expirationTime=P),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new tt,this.toJSON())}_performRefresh(){return le("not implemented")}}function wt(v,g){se("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class It{constructor(g){var{uid:m,auth:E,stsTokenManager:A}=g,P=(0,ce._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Dt(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,d.Z)(function*(){const E=yield At(m,m.stsTokenManager.getToken(m.auth,g));return se(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(g){return function yn(v){return _n.apply(this,arguments)}(this,g)}reload(){return function zr(v){return Zt.apply(this,arguments)}(this)}_assign(g){this!==g&&(se(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new It(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var E=this;return(0,d.Z)(function*(){let A=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),A=!0),m&&(yield Dr(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,d.Z)(function*(){const m=yield g.getIdToken();return yield At(g,function ci(v,g){return Hi.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var E,A,P,ne,Me,st,Et,Wt;const cn=null!==(E=m.displayName)&&void 0!==E?E:void 0,Tr=null!==(A=m.email)&&void 0!==A?A:void 0,Ni=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,Ml=null!==(ne=m.photoURL)&&void 0!==ne?ne:void 0,Rl=null!==(Me=m.tenantId)&&void 0!==Me?Me:void 0,Ol=null!==(st=m._redirectEventId)&&void 0!==st?st:void 0,Ra=null!==(Et=m.createdAt)&&void 0!==Et?Et:void 0,Ip=null!==(Wt=m.lastLoginAt)&&void 0!==Wt?Wt:void 0,{uid:Ch,emailVerified:Nl,isAnonymous:mc,providerData:yc,stsTokenManager:Go}=m;se(Ch&&Go,g,"internal-error");const sy=tt.fromJSON(this.name,Go);se("string"==typeof Ch,g,"internal-error"),wt(cn,g.name),wt(Tr,g.name),se("boolean"==typeof Nl,g,"internal-error"),se("boolean"==typeof mc,g,"internal-error"),wt(Ni,g.name),wt(Ml,g.name),wt(Rl,g.name),wt(Ol,g.name),wt(Ra,g.name),wt(Ip,g.name);const Mn=new It({uid:Ch,auth:g,email:Tr,emailVerified:Nl,displayName:cn,isAnonymous:mc,photoURL:Ml,phoneNumber:Ni,tenantId:Rl,stsTokenManager:sy,createdAt:Ra,lastLoginAt:Ip});return yc&&Array.isArray(yc)&&(Mn.providerData=yc.map(oy=>Object.assign({},oy))),Ol&&(Mn._redirectEventId=Ol),Mn}static _fromIdTokenResponse(g,m,E=!1){return(0,d.Z)(function*(){const A=new tt;A.updateFromServerResponse(m);const P=new It({uid:m.localId,auth:g,stsTokenManager:A,isAnonymous:E});return yield Dr(P),P})()}}const q=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,d.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,d.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,d.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function $(v,g,m){return`firebase:${v}:${g}:${m}`}class Z{constructor(g,m,E){this.persistence=g,this.auth=m,this.userKey=E;const{config:A,name:P}=this.auth;this.fullUserKey=$(this.userKey,A.apiKey,P),this.fullPersistenceKey=$("persistence",A.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?It._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,d.Z)(function*(){if(m.persistence===g)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,E="authUser"){return(0,d.Z)(function*(){if(!m.length)return new Z(X(q),g,E);const A=(yield Promise.all(m.map(function(){var Et=(0,d.Z)(function*(Wt){if(yield Wt._isAvailable())return Wt});return function(Wt){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let P=A[0]||X(q);const ne=$(E,g.config.apiKey,g.name);let Me=null;for(const Et of m)try{const Wt=yield Et._get(ne);if(Wt){const cn=It._fromJSON(g,Wt);Et!==P&&(Me=cn),P=Et;break}}catch{}const st=A.filter(Et=>Et._shouldAllowMigration);return P._shouldAllowMigration&&st.length?(P=st[0],Me&&(yield P._set(ne,Me.toJSON())),yield Promise.all(m.map(function(){var Et=(0,d.Z)(function*(Wt){if(Wt!==P)try{yield Wt._remove(ne)}catch{}});return function(Wt){return Et.apply(this,arguments)}}())),new Z(P,g,E)):new Z(P,g,E)})()}}function B(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Fe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(R(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(ut(g))return"Blackberry";if(xe(g))return"Webos";if(V(g))return"Safari";if((g.includes("chrome/")||ie(g))&&!g.includes("edge/"))return"Chrome";if(at(g))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function R(v=(0,j.z$)()){return/firefox\//i.test(v)}function V(v=(0,j.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ie(v=(0,j.z$)()){return/crios\//i.test(v)}function Fe(v=(0,j.z$)()){return/iemobile/i.test(v)}function at(v=(0,j.z$)()){return/android/i.test(v)}function ut(v=(0,j.z$)()){return/blackberry/i.test(v)}function xe(v=(0,j.z$)()){return/webos/i.test(v)}function Ue(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function xt(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function un(v=(0,j.z$)()){return Ue(v)||at(v)||xe(v)||ut(v)||/windows phone/i.test(v)||Fe(v)}function vn(v,g=[]){let m;switch(v){case"Browser":m=B((0,j.z$)());break;case"Worker":m=`${B((0,j.z$)())}-${v}`;break;default:m=v}const E=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${N.SDK_VERSION}/${E}`}class Rs{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const E=P=>new Promise((ne,Me)=>{try{ne(g(P))}catch(st){Me(st)}});E.onAbort=m,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,d.Z)(function*(){var E;if(m.auth.currentUser===g)return;const A=[];try{for(const P of m.queue)yield P(g),P.onAbort&&A.push(P.onAbort)}catch(P){A.reverse();for(const ne of A)try{ne()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=P)||void 0===E?void 0:E.message})}})()}}class mo{constructor(g,m,E){this.app=g,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Os(this),this.idTokenSubscription=new Os(this),this.beforeStateQueue=new Rs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,m){var E=this;return m&&(this._popupRedirectResolver=X(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var A,P;if(!E._deleted&&(E.persistenceManager=yield Z.create(E,g),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,d.Z)(function*(){var E;const A=yield m.assertedPersistence.getCurrentUser();let P=A,ne=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Me=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,st=P?._redirectEventId,Et=yield m.tryRedirectSignIn(g);(!Me||Me===st)&&Et?.user&&(P=Et.user,ne=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(ne)try{yield m.beforeStateQueue.runMiddleware(P)}catch(Me){P=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Me))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return se(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(g){var m=this;return(0,d.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,d.Z)(function*(){var E;try{yield Dr(g)}catch(A){if("auth/network-request-failed"!==(null===(E=A)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Vt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,d.Z)(function*(){const E=g?(0,j.m9)(g):null;return E&&se(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(g,m=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return g&&se(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(X(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new j.LL("auth","Firebase",g())}onAuthStateChanged(g,m,E){return this.registerStateListener(this.authStateSubscription,g,m,E)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,E){return this.registerStateListener(this.idTokenSubscription,g,m,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var E=this;return(0,d.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===g?A.removeCurrentUser():A.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const E=g&&X(g)||m._popupRedirectResolver;se(E,m,"argument-error"),m.redirectPersistenceManager=yield Z.create(m,[X(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,d.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===g?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,d.Z)(function*(){if(g===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,E,A){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return se(ne,this,"internal-error"),ne.then(()=>P(this.currentUser)),"function"==typeof m?g.addObserver(m,E,A):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=vn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var m;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const A=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function _t(v){return(0,j.m9)(v)}class Os{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ns(v,g,m){const E=_t(v);se(E._canInitEmulator,E,"emulator-config-failed"),se(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const A=!!m?.disableWarnings,P=Ka(g),{host:ne,port:Me}=function zi(v){const g=Ka(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const P=A[1];return{host:P,port:Un(E.substr(P.length+1))}}{const[P,ne]=E.split(":");return{host:P,port:Un(ne)}}}(g);E.config.emulator={url:`${P}//${ne}${null===Me?"":`:${Me}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ne,port:Me,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Ps(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Ka(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function Un(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Fr{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return le("not implemented")}_getIdTokenResponse(g){return le("not implemented")}_linkToIdToken(g,m){return le("not implemented")}_getReauthenticationResolver(g){return le("not implemented")}}function qr(v,g){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(v,g){return kt(v,"POST","/v1/accounts:resetPassword",$t(v,g))})).apply(this,arguments)}function Ya(v,g){return rn.apply(this,arguments)}function rn(){return(rn=(0,d.Z)(function*(v,g){return kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Qd(v,g){return ia.apply(this,arguments)}function ia(){return(ia=(0,d.Z)(function*(v,g){return kt(v,"POST","/v1/accounts:update",$t(v,g))})).apply(this,arguments)}function ks(){return(ks=(0,d.Z)(function*(v,g){return An(v,"POST","/v1/accounts:signInWithPassword",$t(v,g))})).apply(this,arguments)}function Wr(v,g){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,d.Z)(function*(v,g){return kt(v,"POST","/v1/accounts:sendOobCode",$t(v,g))})).apply(this,arguments)}function qi(v,g){return bn.apply(this,arguments)}function bn(){return(bn=(0,d.Z)(function*(v,g){return Wr(v,g)})).apply(this,arguments)}function Jd(v,g){return qn.apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(v,g){return Wr(v,g)})).apply(this,arguments)}function Zr(v,g){return yo.apply(this,arguments)}function yo(){return(yo=(0,d.Z)(function*(v,g){return Wr(v,g)})).apply(this,arguments)}function Bu(v,g){return oa.apply(this,arguments)}function oa(){return(oa=(0,d.Z)(function*(v,g){return Wr(v,g)})).apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(v,g){return An(v,"POST","/v1/accounts:signInWithEmailLink",$t(v,g))})).apply(this,arguments)}function Qa(){return(Qa=(0,d.Z)(function*(v,g){return An(v,"POST","/v1/accounts:signInWithEmailLink",$t(v,g))})).apply(this,arguments)}class aa extends Fr{constructor(g,m,E,A=null){super("password",E),this._email=g,this._password=m,this._tenantId=A}static _fromEmailAndPassword(g,m){return new aa(g,m,"password")}static _fromEmailAndCode(g,m,E=null){return new aa(g,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function sa(v,g){return ks.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Lr(v,g){return ju.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:Qe(g,"internal-error")}})()}_linkToIdToken(g,m){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return Ya(g,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function op(v,g){return Qa.apply(this,arguments)}(g,{idToken:m,email:E._email,oobCode:E._password});default:Qe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ls(v,g){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,d.Z)(function*(v,g){return An(v,"POST","/v1/accounts:signInWithIdp",$t(v,g))})).apply(this,arguments)}class Wi extends Fr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Wi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):Qe("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:A}=m,P=(0,ce._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const ne=new Wi(E,A);return ne.idToken=P.idToken||void 0,ne.accessToken=P.accessToken||void 0,ne.secret=P.secret,ne.nonce=P.nonce,ne.pendingToken=P.pendingToken||null,ne}_getIdTokenResponse(g){return Ls(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,Ls(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ls(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,j.xO)(m)}return g}}function up(v,g){return tl.apply(this,arguments)}function tl(){return(tl=(0,d.Z)(function*(v,g){return kt(v,"POST","/v1/accounts:sendVerificationCode",$t(v,g))})).apply(this,arguments)}function ua(){return(ua=(0,d.Z)(function*(v,g){return An(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,g))})).apply(this,arguments)}function nl(){return(nl=(0,d.Z)(function*(v,g){const m=yield An(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,g));if(m.temporaryProof)throw Ln(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const cp={USER_NOT_FOUND:"user-not-found"};function Hu(){return(Hu=(0,d.Z)(function*(v,g){return An(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),cp)})).apply(this,arguments)}class vo extends Fr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new vo({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new vo({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function $u(v,g){return ua.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function _o(v,g){return nl.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function lp(v,g){return Hu.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:P}=g;return E||m||A||P?new vo({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:P}):null}}class wo{constructor(g){var m,E,A,P,ne,Me;const st=(0,j.zd)((0,j.pd)(g)),Et=null!==(m=st.apiKey)&&void 0!==m?m:null,Wt=null!==(E=st.oobCode)&&void 0!==E?E:null,cn=function rl(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=st.mode)&&void 0!==A?A:null);se(Et&&Wt&&cn,"argument-error"),this.apiKey=Et,this.operation=cn,this.code=Wt,this.continueUrl=null!==(P=st.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(ne=st.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(Me=st.tenantId)&&void 0!==Me?Me:null}static parseLink(g){const m=function il(v){const g=(0,j.zd)((0,j.pd)(v)).link,m=g?(0,j.zd)((0,j.pd)(g)).deep_link_id:null,E=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(E?(0,j.zd)((0,j.pd)(E)).link:null)||E||m||g||v}(g);try{return new wo(m)}catch{return null}}}let Ja=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return aa._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=wo.parseLink(E);return se(A,"argument-error"),aa._fromEmailAndCode(m,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class lr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Eo extends lr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class us extends Eo{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return se("providerId"in m&&"signInMethod"in m,"argument-error"),Wi._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return se(g.idToken||g.accessToken,"argument-error"),Wi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return us.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return us.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:P,nonce:ne,providerId:Me}=g;if(!E&&!A&&!m&&!P||!Me)return null;try{return new us(Me)._credential({idToken:m,accessToken:E,nonce:ne,pendingToken:P})}catch{return null}}}let ca=(()=>{class v extends Eo{constructor(){super("facebook.com")}static credential(m){return Wi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Xa=(()=>{class v extends Eo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Wi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return v.credential(E,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Gu=(()=>{class v extends Eo{constructor(){super("github.com")}static credential(m){return Wi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Io extends Fr{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Ls(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,Ls(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ls(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:A,pendingToken:P}=m;return E&&A&&P&&E===A?new Io(E,P):null}static _create(g,m){return new Io(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Yr extends lr{constructor(g){se(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Yr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Yr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=Io.fromJSON(g);return se(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:E}=g;if(!m||!E)return null;try{return Io._create(E,m)}catch{return null}}}let Zi=(()=>{class v extends Eo{constructor(){super("twitter.com")}static credential(m,E){return Wi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return v.credential(E,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Vr(v,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,d.Z)(function*(v,g){return An(v,"POST","/v1/accounts:signUp",$t(v,g))})).apply(this,arguments)}class li{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,E,A=!1){return(0,d.Z)(function*(){const P=yield It._fromIdTokenResponse(g,E,A),ne=Us(E);return new li({user:P,providerId:ne,_tokenResponse:E,operationType:m})})()}static _forOperation(g,m,E){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const A=Us(E);return new li({user:g,providerId:A,_tokenResponse:E,operationType:m})})()}}function Us(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function hp(v){return zu.apply(this,arguments)}function zu(){return(zu=(0,d.Z)(function*(v){var g;const m=_t(v);if(yield m._initializationPromise,null!==(g=m.currentUser)&&void 0!==g&&g.isAnonymous)return new li({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Vr(m,{returnSecureToken:!0}),A=yield li._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class xn extends j.ZR{constructor(g,m,E,A){var P;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,xn.prototype),this.customData={appName:g.name,tenantId:null!==(P=g.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,m,E,A){return new xn(g,m,E,A)}}function ol(v,g,m,E){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?xn._fromErrorAndOperation(v,P,g,E):P})}function Xd(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function di(v,g){return dr.apply(this,arguments)}function dr(){return(dr=(0,d.Z)(function*(v,g){const m=(0,j.m9)(v);yield Ii(!0,m,g);const{providerUserInfo:E}=yield Je(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),A=Xd(E||[]);return m.providerData=m.providerData.filter(P=>A.has(P.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function eu(v,g){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(v,g,m=!1){const E=yield At(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return li._forOperation(v,"link",E)})).apply(this,arguments)}function Ii(v,g,m){return nn.apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(v,g,m){yield Dr(g);const A=!1===v?"provider-already-linked":"no-such-provider";se(Xd(g.providerData).has(m)===v,g.auth,A)})).apply(this,arguments)}function qu(v,g){return cs.apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(v,g,m=!1){var E;const{auth:A}=v,P="reauthenticate";try{const ne=yield At(v,ol(A,P,g,v),m);se(ne.idToken,A,"internal-error");const Me=ft(ne.idToken);se(Me,A,"internal-error");const{sub:st}=Me;return se(v.uid===st,A,"user-mismatch"),li._forOperation(v,P,ne)}catch(ne){throw"auth/user-not-found"===(null===(E=ne)||void 0===E?void 0:E.code)&&Qe(A,"user-mismatch"),ne}})).apply(this,arguments)}function Wu(v,g){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,d.Z)(function*(v,g,m=!1){const E="signIn",A=yield ol(v,E,g),P=yield li._fromIdTokenResponse(v,E,A);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function la(v,g){return On.apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(v,g){return Wu(_t(v),g)})).apply(this,arguments)}function Mt(v,g){return da.apply(this,arguments)}function da(){return(da=(0,d.Z)(function*(v,g){const m=(0,j.m9)(v);return yield Ii(!1,m,g.providerId),eu(m,g)})).apply(this,arguments)}function fp(v,g){return ha.apply(this,arguments)}function ha(){return(ha=(0,d.Z)(function*(v,g){return qu((0,j.m9)(v),g)})).apply(this,arguments)}function al(v,g){return fa.apply(this,arguments)}function fa(){return(fa=(0,d.Z)(function*(v,g){return An(v,"POST","/v1/accounts:signInWithCustomToken",$t(v,g))})).apply(this,arguments)}function js(v,g){return pa.apply(this,arguments)}function pa(){return(pa=(0,d.Z)(function*(v,g){const m=_t(v),E=yield al(m,{token:g,returnSecureToken:!0}),A=yield li._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class bo{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?Oe._fromServerResponse(g,m):Qe(g,"internal-error")}}class Oe extends bo{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new Oe(m)}}function qt(v,g,m){var E;se((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),se(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(se(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(se(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function eh(v,g,m){return Co.apply(this,arguments)}function Co(){return(Co=(0,d.Z)(function*(v,g,m){const E=(0,j.m9)(v),A={requestType:"PASSWORD_RESET",email:g};m&&qt(E,A,m),yield Jd(E,A)})).apply(this,arguments)}function Wn(v,g,m){return Do.apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(v,g,m){yield qr((0,j.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function tu(v,g){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,d.Z)(function*(v,g){yield Qd((0,j.m9)(v),{oobCode:g})})).apply(this,arguments)}function nu(v,g){return So.apply(this,arguments)}function So(){return(So=(0,d.Z)(function*(v,g){const m=(0,j.m9)(v),E=yield qr(m,{oobCode:g}),A=E.requestType;switch(se(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":se(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":se(E.mfaInfo,m,"internal-error");default:se(E.email,m,"internal-error")}let P=null;return E.mfaInfo&&(P=bo._fromServerResponse(_t(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:A}})).apply(this,arguments)}function th(v,g){return ga.apply(this,arguments)}function ga(){return(ga=(0,d.Z)(function*(v,g){const{data:m}=yield nu((0,j.m9)(v),g);return m.email})).apply(this,arguments)}function pp(v,g,m){return $s.apply(this,arguments)}function $s(){return($s=(0,d.Z)(function*(v,g,m){const E=_t(v),A=yield Vr(E,{returnSecureToken:!0,email:g,password:m}),P=yield li._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function Zn(v,g,m){return la((0,j.m9)(v),Ja.credential(g,m))}function bi(v,g,m){return ma.apply(this,arguments)}function ma(){return(ma=(0,d.Z)(function*(v,g,m){const E=(0,j.m9)(v),A={requestType:"EMAIL_SIGNIN",email:g};se(m.handleCodeInApp,E,"argument-error"),m&&qt(E,A,m),yield Zr(E,A)})).apply(this,arguments)}function ya(v,g){return"EMAIL_SIGNIN"===wo.parseLink(g)?.operation}function Ki(v,g,m){return ul.apply(this,arguments)}function ul(){return(ul=(0,d.Z)(function*(v,g,m){const E=(0,j.m9)(v),A=Ja.credentialWithLink(g,m||Be());return se(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),la(E,A)})).apply(this,arguments)}function Zu(v,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,d.Z)(function*(v,g){return kt(v,"POST","/v1/accounts:createAuthUri",$t(v,g))})).apply(this,arguments)}function nh(v,g){return To.apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(v,g){const E={identifier:g,continueUri:je()?Be():"http://localhost"},{signinMethods:A}=yield Zu((0,j.m9)(v),E);return A||[]})).apply(this,arguments)}function Ku(v,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,d.Z)(function*(v,g){const m=(0,j.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&qt(m.auth,A,g);const{email:P}=yield qi(m.auth,A);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function Yu(v,g,m){return va.apply(this,arguments)}function va(){return(va=(0,d.Z)(function*(v,g,m){const E=(0,j.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&qt(E.auth,P,m);const{email:ne}=yield Bu(E.auth,P);ne!==v.email&&(yield v.reload())})).apply(this,arguments)}function ll(v,g){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,d.Z)(function*(v,g){return kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function rh(v,g){return wa.apply(this,arguments)}function wa(){return(wa=(0,d.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const E=(0,j.m9)(v),P={idToken:yield E.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},ne=yield At(E,ll(E.auth,P));E.displayName=ne.displayName||null,E.photoURL=ne.photoUrl||null;const Me=E.providerData.find(({providerId:st})=>"password"===st);Me&&(Me.displayName=E.displayName,Me.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ne)})).apply(this,arguments)}function ih(v,g){return ls((0,j.m9)(v),g,null)}function dl(v,g){return ls((0,j.m9)(v),null,g)}function ls(v,g,m){return ds.apply(this,arguments)}function ds(){return(ds=(0,d.Z)(function*(v,g,m){const{auth:E}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(P.email=g),m&&(P.password=m);const ne=yield At(v,Ya(E,P));yield v._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class Dn{constructor(g,m,E={}){this.isNewUser=g,this.providerId=m,this.profile=E}}class Yi extends Dn{constructor(g,m,E,A){super(g,m,E),this.username=A}}class Sn extends Dn{constructor(g,m){super(g,"facebook.com",m)}}class Qu extends Yi{constructor(g,m){super(g,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Ju extends Dn{constructor(g,m){super(g,"google.com",m)}}class fl extends Yi{constructor(g,m,E){super(g,"twitter.com",m,E)}}function Xu(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function hl(v){var g,m;if(!v)return null;const{providerId:E}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const ne=null===(m=null===(g=ft(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(ne)return new Dn(P,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!E)return null;switch(E){case"facebook.com":return new Sn(P,A);case"github.com":return new Qu(P,A);case"google.com":return new Ju(P,A);case"twitter.com":return new fl(P,A,v.screenName||null);case"custom":case"anonymous":return new Dn(P,null);default:return new Dn(P,E,A)}}(m)}class Jr{constructor(g,m,E){this.type=g,this.credential=m,this.auth=E}static _fromIdtoken(g,m){return new Jr("enroll",g,m)}static _fromMfaPendingCredential(g){return new Jr("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,E;if(g?.multiFactorSession){if(null!==(m=g.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Jr._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return Jr._fromIdtoken(g.multiFactorSession.idToken)}return null}}class nc{constructor(g,m,E){this.session=g,this.hints=m,this.signInResolver=E}static _fromError(g,m){const E=_t(g),A=m.customData._serverResponse,P=(A.mfaInfo||[]).map(Me=>bo._fromServerResponse(E,Me));se(A.mfaPendingCredential,E,"internal-error");const ne=Jr._fromMfaPendingCredential(A.mfaPendingCredential);return new nc(ne,P,function(){var Me=(0,d.Z)(function*(st){const Et=yield st._process(E,ne);delete A.mfaInfo,delete A.mfaPendingCredential;const Wt=Object.assign(Object.assign({},A),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(m.operationType){case"signIn":const cn=yield li._fromIdTokenResponse(E,m.operationType,Wt);return yield E._updateCurrentUser(cn.user),cn;case"reauthenticate":return se(m.user,E,"internal-error"),li._forOperation(m.user,m.operationType,Wt);default:Qe(E,"internal-error")}});return function(st){return Me.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,d.Z)(function*(){return m.signInResolver(g)})()}}function ml(v,g){var m;const E=(0,j.m9)(v),A=g;return se(g.customData.operationType,E,"argument-error"),se(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),nc._fromError(E,A)}function Nn(v,g){return kt(v,"POST","/v2/accounts/mfaEnrollment:start",$t(v,g))}class ou{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>bo._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new ou(g)}getSession(){var g=this;return(0,d.Z)(function*(){return Jr._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var E=this;return(0,d.Z)(function*(){const A=g,P=yield E.getSession(),ne=yield At(E.user,A._process(E.user.auth,P,m));return yield E.user._updateTokensIfNecessary(ne),E.user.reload()})()}unenroll(g){var m=this;return(0,d.Z)(function*(){var E;const A="string"==typeof g?g:g.uid,P=yield m.user.getIdToken(),ne=yield At(m.user,function su(v,g){return kt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(v,g))}(m.user.auth,{idToken:P,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Me})=>Me!==A),yield m.user._updateTokensIfNecessary(ne);try{yield m.user.reload()}catch(Me){if("auth/user-token-expired"!==(null===(E=Me)||void 0===E?void 0:E.code))throw Me}})()}}const sh=new WeakMap;function au(v){const g=(0,j.m9)(v);return sh.has(g)||sh.set(g,ou._fromUser(g)),sh.get(g)}const Qi="__sak";class Ea{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Qi,"1"),this.storage.removeItem(Qi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kn=(()=>{class v extends Ea{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rc(){const v=(0,j.z$)();return V(v)||Ue(v)}()&&function Gi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=un(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),P=this.localCache[E];A!==P&&m(E,P,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((Me,st,Et)=>{this.notifyListeners(Me,Et)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Me=this.storage.getItem(A);if(m.newValue!==Me)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const P=()=>{const Me=this.storage.getItem(A);!E&&this.localCache[A]===Me||this.notifyListeners(A,Me)},ne=this.storage.getItem(A);!function Rt(){return(0,j.w1)()&&10===document.documentMode}()||ne===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const P of Array.from(A))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,P=this;return(0,d.Z)(function*(){yield A().call(P,m,E),P.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,d.Z)(function*(){const P=yield E().call(A,m);return A.localCache[m]=JSON.stringify(P),P})()}_remove(m){var E=()=>super._remove,A=this;return(0,d.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return v.type="LOCAL",v})(),hs=(()=>{class v extends Ea{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let ba=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(P=>P.isListeningto(m));if(E)return E;const A=new v(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,d.Z)(function*(){const A=m,{eventId:P,eventType:ne,data:Me}=A.data,st=E.handlersMap[ne];if(!st?.size)return;A.ports[0].postMessage({status:"ack",eventId:P,eventType:ne});const Et=Array.from(st).map(function(){var cn=(0,d.Z)(function*(Tr){return Tr(A.origin,Me)});return function(Tr){return cn.apply(this,arguments)}}()),Wt=yield function ic(v){return Promise.all(v.map(function(){var g=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return g.apply(this,arguments)}}()))}(Et);A.ports[0].postMessage({status:"done",eventId:P,eventType:ne,response:Wt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Oo(v="",g=10){let m="";for(let E=0;E<g;E++)m+=Math.floor(10*Math.random());return v+m}class uh{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,E=50){var A=this;return(0,d.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let ne,Me;return new Promise((st,Et)=>{const Wt=Oo("",20);P.port1.start();const cn=setTimeout(()=>{Et(new Error("unsupported_event"))},E);Me={messageChannel:P,onMessage(Tr){const Ni=Tr;if(Ni.data.eventId===Wt)switch(Ni.data.status){case"ack":clearTimeout(cn),ne=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),st(Ni.data.response);break;default:clearTimeout(cn),clearTimeout(ne),Et(new Error("invalid_response"))}}},A.handlers.add(Me),P.port1.addEventListener("message",Me.onMessage),A.target.postMessage({eventType:g,eventId:Wt,data:m},[P.port2])}).finally(()=>{Me&&A.removeMessageHandler(Me)})})()}}function Pn(){return window}function Ur(){return typeof Pn().WorkerGlobalScope<"u"&&"function"==typeof Pn().importScripts}function Ji(){return(Ji=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ca="firebaseLocalStorageDb",Da="firebaseLocalStorage",No="fbase_key";class Po{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ko(v,g){return v.transaction([Da],g?"readwrite":"readonly").objectStore(Da)}function cu(){const v=indexedDB.open(Ca,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Da,{keyPath:No})}catch(A){m(A)}}),v.addEventListener("success",(0,d.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Da)?g(E):(E.close(),yield function wl(){const v=indexedDB.deleteDatabase(Ca);return new Po(v).toPromise()}(),g(yield cu()))}))})}function Sa(v,g,m){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,d.Z)(function*(v,g,m){const E=ko(v,!0).put({[No]:g,value:m});return new Po(E).toPromise()})).apply(this,arguments)}function Fo(){return(Fo=(0,d.Z)(function*(v,g){const m=ko(v,!1).get(g),E=yield new Po(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function lu(v,g){const m=ko(v,!0).delete(g);return new Po(m).toPromise()}const Vo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield cu()),m.db})()}_withRetries(m){var E=this;return(0,d.Z)(function*(){let A=0;for(;;)try{const P=yield E._openDb();return yield m(P)}catch(P){if(A++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return Ur()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=ba._getInstance(function uu(){return Ur()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(A,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(A,P){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(A,P){return["keyChanged"]});return function(A,P){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function vl(){return Ji.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new uh(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(E=P[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=P[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function sc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield cu();return yield Sa(m,Qi,"1"),yield lu(m,Qi),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,d.Z)(function*(){return A._withPendingWrite((0,d.Z)(function*(){return yield A._withRetries(P=>Sa(P,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,d.Z)(function*(){const A=yield E._withRetries(P=>function ch(v,g){return Fo.apply(this,arguments)}(P,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(A=>lu(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const E=yield m._withRetries(ne=>{const Me=ko(ne,!1).getAll();return new Po(Me).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],P=new Set;for(const{fbase_key:ne,value:Me}of E)P.add(ne),JSON.stringify(m.localCache[ne])!==JSON.stringify(Me)&&(m.notifyListeners(ne,Me),A.push(ne));for(const ne of Object.keys(m.localCache))m.localCache[ne]&&!P.has(ne)&&(m.notifyListeners(ne,null),A.push(ne));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const P of Array.from(A))P(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function lh(v,g){return kt(v,"POST","/v2/accounts/mfaSignIn:start",$t(v,g))}function _r(){return(_r=(0,d.Z)(function*(v){return(yield kt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Gs(v){return new Promise((g,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=g,E.onerror=A=>{const P=Ve("internal-error");P.customData=A,m(P)},E.type="text/javascript",E.charset="UTF-8",function Bo(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(E)})}function jo(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Di=1e12;class El{constructor(g){this.auth=g,this.counter=Di,this._widgets=new Map}render(g,m){const E=this.counter;return this._widgets.set(E,new wn(g,this.auth.name,m||{})),this.counter++,E}reset(g){var m;const E=g||Di;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Di))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,d.Z)(function*(){var E;return null===(E=m._widgets.get(g||Di))||void 0===E||E.execute(),""})()}}class wn{constructor(g,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof g?document.getElementById(g):g;se(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gp(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const dh=jo("rcb"),r0=new Ze(3e4,6e4);class Xm{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Pn().grecaptcha)||void 0===g||!g.render)}load(g,m=""){return se(function hh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Pn().grecaptcha):new Promise((E,A)=>{const P=Pn().setTimeout(()=>{A(Ve(g,"network-request-failed"))},r0.get());Pn()[dh]=()=>{Pn().clearTimeout(P),delete Pn()[dh];const Me=Pn().grecaptcha;if(!Me)return void A(Ve(g,"internal-error"));const st=Me.render;Me.render=(Et,Wt)=>{const cn=st(Et,Wt);return this.counter++,cn},this.hostLanguage=m,E(Me)},Gs(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:dh,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),A(Ve(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!(null===(m=Pn().grecaptcha)||void 0===m||!m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class s0{load(g){return(0,d.Z)(function*(){return new El(g)})()}clearedOneInstance(){}}const hu="recaptcha",o0={theme:"light",type:"image"};class ey{constructor(g,m=Object.assign({},o0),E){this.parameters=m,this.type=hu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_t(E),this.isInvisible="invisible"===this.parameters.size,se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof g?document.getElementById(g):g;se(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new s0:new Xm,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(m)||new Promise(P=>{const ne=Me=>{!Me||(g.tokenChangeListeners.delete(ne),P(Me))};g.tokenChangeListeners.add(ne),g.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){se(!this.parameters.sitekey,this.auth,"argument-error"),se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof g)g(m);else if("string"==typeof g){const E=Pn()[g];"function"==typeof E&&E(m)}}}assertNotDestroyed(){se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){se(je()&&!Ur(),g.auth,"internal-error"),yield function or(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function du(v){return _r.apply(this,arguments)}(g.auth);se(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jt{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=vo._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function Xi(v,g,m){return nt.apply(this,arguments)}function nt(){return(nt=(0,d.Z)(function*(v,g,m){const E=_t(v),A=yield Tn(E,g,(0,j.m9)(m));return new Jt(A,P=>la(E,P))})).apply(this,arguments)}function Br(v,g,m){return gn.apply(this,arguments)}function gn(){return(gn=(0,d.Z)(function*(v,g,m){const E=(0,j.m9)(v);yield Ii(!1,E,"phone");const A=yield Tn(E.auth,g,(0,j.m9)(m));return new Jt(A,P=>Mt(E,P))})).apply(this,arguments)}function es(v,g,m){return zs.apply(this,arguments)}function zs(){return(zs=(0,d.Z)(function*(v,g,m){const E=(0,j.m9)(v),A=yield Tn(E.auth,g,(0,j.m9)(m));return new Jt(A,P=>fp(E,P))})).apply(this,arguments)}function Tn(v,g,m){return ps.apply(this,arguments)}function ps(){return(ps=(0,d.Z)(function*(v,g,m){var E;const A=yield m.verify();try{let P;if(se("string"==typeof A,v,"argument-error"),se(m.type===hu,v,"argument-error"),P="string"==typeof g?{phoneNumber:g}:g,"session"in P){const ne=P.session;if("phoneNumber"in P)return se("enroll"===ne.type,v,"internal-error"),(yield Nn(v,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{se("signin"===ne.type,v,"internal-error");const Me=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return se(Me,v,"missing-multi-factor-info"),(yield lh(v,{mfaPendingCredential:ne.credential,mfaEnrollmentId:Me,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield up(v,{phoneNumber:P.phoneNumber,recaptchaToken:A});return ne}}finally{m._reset()}})).apply(this,arguments)}function Il(v,g){return uc.apply(this,arguments)}function uc(){return(uc=(0,d.Z)(function*(v,g){yield eu((0,j.m9)(v),g)})).apply(this,arguments)}let cc=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=_t(m)}verifyPhoneNumber(m,E){return Tn(this.auth,m,(0,j.m9)(E))}static credential(m,E){return vo._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?vo._fromTokenResponse(E,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ts(v,g){return g?X(g):(se(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class fu extends Fr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ls(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Ls(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Ls(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function gs(v){return Wu(v.auth,new fu(v),v.bypassAuthState)}function rt(v){const{auth:g,user:m}=v;return se(m,g,"internal-error"),qu(m,new fu(v),v.bypassAuthState)}function Ta(v){return Si.apply(this,arguments)}function Si(){return(Si=(0,d.Z)(function*(v){const{auth:g,user:m}=v;return se(m,g,"internal-error"),eu(m,new fu(v),v.bypassAuthState)})).apply(this,arguments)}class fh{constructor(g,m,E,A,P=!1){this.auth=g,this.resolver=E,this.user=A,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,d.Z)(function*(E,A){g.pendingPromise={resolve:E,reject:A};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(P){g.reject(P)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:P,tenantId:ne,error:Me,type:st}=g;if(Me)return void m.reject(Me);const Et={auth:m.auth,requestUri:E,sessionId:A,tenantId:ne||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(st)(Et))}catch(Wt){m.reject(Wt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return gs;case"linkViaPopup":case"linkViaRedirect":return Ta;case"reauthViaPopup":case"reauthViaRedirect":return rt;default:Qe(this.auth,"internal-error")}}resolve(g){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bl=new Ze(2e3,1e4);function Yn(v,g,m){return lc.apply(this,arguments)}function lc(){return(lc=(0,d.Z)(function*(v,g,m){const E=_t(v);be(v,g,lr);const A=ts(E,m);return new Aa(E,"signInViaPopup",g,A).executeNotNull()})).apply(this,arguments)}function Cl(v,g,m){return ms.apply(this,arguments)}function ms(){return(ms=(0,d.Z)(function*(v,g,m){const E=(0,j.m9)(v);be(E.auth,g,lr);const A=ts(E.auth,m);return new Aa(E.auth,"reauthViaPopup",g,A,E).executeNotNull()})).apply(this,arguments)}function dc(v,g,m){return qs.apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(v,g,m){const E=(0,j.m9)(v);be(E.auth,g,lr);const A=ts(E.auth,m);return new Aa(E.auth,"linkViaPopup",g,A,E).executeNotNull()})).apply(this,arguments)}let Aa=(()=>{class v extends fh{constructor(m,E,A,P,ne){super(m,E,P,ne),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const E=yield m.execute();return se(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,d.Z)(function*(){_e(1===m.filter.length,"Popup operations only handle one event");const E=Oo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Ve(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,bl.get())};m()}}return v.currentPopupAction=null,v})();const Ti=new Map;class ei extends fh{constructor(g,m,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,d.Z)(function*(){let E=Ti.get(m.auth._key());if(!E){try{const P=(yield function hc(v,g){return Ws.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;E=()=>Promise.resolve(P)}catch(A){E=()=>Promise.reject(A)}Ti.set(m.auth._key(),E)}return m.bypassAuthState||Ti.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(E,g);if("unknown"!==g.type){if(g.eventId){const A=yield E.auth._redirectUserForId(g.eventId);if(A)return E.user=A,m().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Ws(){return(Ws=(0,d.Z)(function*(v,g){const m=D(g),E=C(v);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function fi(v,g){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,d.Z)(function*(v,g){return C(v)._set(D(g),"true")})).apply(this,arguments)}function Dl(){Ti.clear()}function Qn(v,g){Ti.set(v._key(),g)}function C(v){return X(v._redirectPersistence)}function D(v){return $("pendingRedirect",v.config.apiKey,v.name)}function M(v,g,m){return function L(v,g,m){return Y.apply(this,arguments)}(v,g,m)}function Y(){return(Y=(0,d.Z)(function*(v,g,m){const E=_t(v);be(v,g,lr);const A=ts(E,m);return yield fi(A,E),A._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function re(v,g,m){return function Ee(v,g,m){return Ge.apply(this,arguments)}(v,g,m)}function Ge(){return(Ge=(0,d.Z)(function*(v,g,m){const E=(0,j.m9)(v);be(E.auth,g,lr);const A=ts(E.auth,m);yield fi(A,E.auth);const P=yield Mi(E);return A._openRedirect(E.auth,g,"reauthViaRedirect",P)})).apply(this,arguments)}function bt(v,g,m){return function Ft(v,g,m){return Ct.apply(this,arguments)}(v,g,m)}function Ct(){return(Ct=(0,d.Z)(function*(v,g,m){const E=(0,j.m9)(v);be(E.auth,g,lr);const A=ts(E.auth,m);yield Ii(!1,E,g.providerId),yield fi(A,E.auth);const P=yield Mi(E);return A._openRedirect(E.auth,g,"linkViaRedirect",P)})).apply(this,arguments)}function ct(v,g){return zt.apply(this,arguments)}function zt(){return(zt=(0,d.Z)(function*(v,g){return yield _t(v)._initializationPromise,En(v,g,!1)})).apply(this,arguments)}function En(v,g){return xi.apply(this,arguments)}function xi(){return(xi=(0,d.Z)(function*(v,g,m=!1){const E=_t(v),A=ts(E,g),ne=yield new ei(E,A,m).execute();return ne&&!m&&(delete ne.user._redirectEventId,yield E._persistUserIfCurrent(ne.user),yield E._setRedirectUser(null,g)),ne})).apply(this,arguments)}function Mi(v){return pi.apply(this,arguments)}function pi(){return(pi=(0,d.Z)(function*(v){const g=Oo(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class Zs{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(m=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ot(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ri(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var E;if(g.error&&!Ri(g)){const A=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ve(this.auth,A))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const E=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ks(g))}saveEventToCache(g){this.cachedEventUids.add(Ks(g)),this.lastProcessedEventTime=Date.now()}}function Ks(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Ri({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function ti(v){return xa.apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(v,g={}){return kt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const pu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a0=/^https?/;function Oi(){return(Oi=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield ti(v);for(const m of g)try{if(ty(m))return}catch{}Qe(v,"unauthorized-domain")})).apply(this,arguments)}function ty(v){const g=Be(),{protocol:m,hostname:E}=new URL(g);if(v.startsWith("chrome-extension://")){const ne=new URL(v);return""===ne.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&ne.hostname===E}if(!a0.test(m))return!1;if(pu.test(v))return E===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const yp=new Ze(3e4,6e4);function ph(){const v=Pn().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let kn=null;function Ys(v){return kn=kn||function u0(v){return new Promise((g,m)=>{var E,A,P;function ne(){ph(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ph(),m(Ve(v,"network-request-failed"))},timeout:yp.get()})}if(null!==(A=null===(E=Pn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)g(gapi.iframes.getContext());else{if(null===(P=Pn().gapi)||void 0===P||!P.load){const Me=jo("iframefcb");return Pn()[Me]=()=>{gapi.load?ne():m(Ve(v,"network-request-failed"))},Gs(`https://apis.google.com/js/api.js?onload=${Me}`).catch(st=>m(st))}ne()}}).catch(g=>{throw kn=null,g})}(v),kn}const gh=new Ze(5e3,15e3),mh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ny=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yh(v){const g=v.config;se(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?on(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:v.name,v:N.SDK_VERSION},A=ny.get(v.config.apiHost);A&&(E.eid=A);const P=v._getFrameworks();return P.length&&(E.fw=P.join(",")),`${m}?${(0,j.xO)(E).slice(1)}`}function Sl(){return Sl=(0,d.Z)(function*(v){const g=yield Ys(v),m=Pn().gapi;return se(m,v,"internal-error"),g.open({where:document.body,url:yh(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mh,dontclear:!0},E=>new Promise(function(){var A=(0,d.Z)(function*(P,ne){yield E.restyle({setHideOnLeave:!1});const Me=Ve(v,"network-request-failed"),st=Pn().setTimeout(()=>{ne(Me)},gh.get());function Et(){Pn().clearTimeout(st),P(E)}E.ping(Et).then(Et,()=>{ne(Me)})});return function(P,ne){return A.apply(this,arguments)}}()))}),Sl.apply(this,arguments)}const fc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gu(v,g,m,E,A,P){se(v.config.authDomain,v,"auth-domain-config-required"),se(v.config.apiKey,v,"invalid-api-key");const ne={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:N.SDK_VERSION,eventId:A};if(g instanceof lr){g.setDefaultLanguage(v.languageCode),ne.providerId=g.providerId||"",(0,j.xb)(g.getCustomParameters())||(ne.customParameters=JSON.stringify(g.getCustomParameters()));for(const[st,Et]of Object.entries(P||{}))ne[st]=Et}if(g instanceof Eo){const st=g.getScopes().filter(Et=>""!==Et);st.length>0&&(ne.scopes=st.join(","))}v.tenantId&&(ne.tid=v.tenantId);const Me=ne;for(const st of Object.keys(Me))void 0===Me[st]&&delete Me[st];return`${function Ep({config:v}){return v.emulator?on(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,j.xO)(Me).slice(1)}`}const mu="webStorageSupport",vh=class gc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hs,this._completeRedirectFn=En,this._overrideRedirectResult=Qn}_openPopup(g,m,E,A){var P=this;return(0,d.Z)(function*(){var ne;_e(null===(ne=P.eventManagers[g._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const Me=gu(g,m,E,Be(),A);return function Al(v,g,m,E=500,A=600){const P=Math.max((window.screen.availHeight-A)/2,0).toString(),ne=Math.max((window.screen.availWidth-E)/2,0).toString();let Me="";const st=Object.assign(Object.assign({},fc),{width:E.toString(),height:A.toString(),top:P,left:ne}),Et=(0,j.z$)().toLowerCase();m&&(Me=ie(Et)?"_blank":m),R(Et)&&(g=g||"http://localhost",st.scrollbars="yes");const Wt=Object.entries(st).reduce((Tr,[Ni,Ml])=>`${Tr}${Ni}=${Ml},`,"");if(function an(v=(0,j.z$)()){var g;return Ue(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Et)&&"_self"!==Me)return function Js(v,g){const m=document.createElement("a");m.href=v,m.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(g||"",Me),new pc(null);const cn=window.open(g||"",Me,Wt);se(cn,v,"popup-blocked");try{cn.focus()}catch{}return new pc(cn)}(g,Me,Oo())})()}_openRedirect(g,m,E,A){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(g),function _l(v){Pn().location.href=v}(gu(g,m,E,Be(),A)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:A,promise:P}=this.eventManagers[m];return A?Promise.resolve(A):(_e(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(g);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(g){var m=this;return(0,d.Z)(function*(){const E=yield function vp(v){return Sl.apply(this,arguments)}(g),A=new Zs(g);return E.register("authEvent",P=>(se(P?.authEvent,g,"invalid-auth-event"),{status:A.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:A},m.iframes[g._key()]=E,A})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(mu,{type:mu},A=>{var P;const ne=null===(P=A?.[0])||void 0===P?void 0:P[mu];void 0!==ne&&m(!!ne),Qe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function mp(v){return Oi.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return un()||V()||Ue()}};class wh extends class xl{constructor(g){this.factorId=g}_process(g,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,E);case"signin":return this._finalizeSignIn(g,m.credential);default:return le("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new wh(g)}_finalizeEnroll(g,m,E){return function iu(v,g){return kt(v,"POST","/v2/accounts/mfaEnrollment:finalize",$t(v,g))}(g,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function Uo(v,g){return kt(v,"POST","/v2/accounts/mfaSignIn:finalize",$t(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ys=(()=>{class v{constructor(){}static assertion(m){return wh._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Xs="@firebase/auth",Eh="0.20.11";class ry{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(E=>{var A;g((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,j.Pz)("authIdTokenMaxAge"),function d0(v){(0,N._registerComponent)(new ye.wA("auth",(g,{options:m})=>{const E=g.getProvider("app").getImmediate(),A=g.getProvider("heartbeat"),{apiKey:P,authDomain:ne}=E.options;return((Me,st)=>{se(P&&!P.includes(":"),"invalid-api-key",{appName:Me.name}),se(!ne?.includes(":"),"argument-error",{appName:Me.name});const Et={apiKey:P,authDomain:ne,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vn(v)},Wt=new mo(Me,st,Et);return function ae(v,g){const m=g?.persistence||[],E=(Array.isArray(m)?m:[m]).map(X);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(E,g?.popupRedirectResolver)}(Wt,m),Wt})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,E)=>{g.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ye.wA("auth-internal",g=>{const m=_t(g.getProvider("auth").getImmediate());return new ry(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Xs,Eh,function l0(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,N.registerVersion)(Xs,Eh,"esm2017")}("Browser")},2090:(lt,Ae,F)=>{F.d(Ae,{$s:()=>tt,BH:()=>Vt,G6:()=>be,L:()=>ue,LL:()=>en,Pz:()=>tn,Sg:()=>Ze,UG:()=>Ce,US:()=>ye,ZB:()=>z,ZR:()=>mn,aH:()=>yt,b$:()=>me,eu:()=>se,hl:()=>ze,jU:()=>it,m9:()=>Qt,ne:()=>_n,pd:()=>Ms,r3:()=>Cr,ru:()=>ve,tV:()=>he,uI:()=>ke,vZ:()=>Je,w1:()=>Qe,xO:()=>pn,xb:()=>ci,z$:()=>$e,zI:()=>le,zd:()=>sr});const oe=function(q){const $=[];let Z=0;for(let B=0;B<q.length;B++){let R=q.charCodeAt(B);R<128?$[Z++]=R:R<2048?($[Z++]=R>>6|192,$[Z++]=63&R|128):55296==(64512&R)&&B+1<q.length&&56320==(64512&q.charCodeAt(B+1))?(R=65536+((1023&R)<<10)+(1023&q.charCodeAt(++B)),$[Z++]=R>>18|240,$[Z++]=R>>12&63|128,$[Z++]=R>>6&63|128,$[Z++]=63&R|128):($[Z++]=R>>12|224,$[Z++]=R>>6&63|128,$[Z++]=63&R|128)}return $},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,$){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let R=0;R<q.length;R+=3){const V=q[R],ie=R+1<q.length,Fe=ie?q[R+1]:0,at=R+2<q.length,ut=at?q[R+2]:0;let xt=(15&Fe)<<2|ut>>6,an=63&ut;at||(an=64,ie||(xt=64)),B.push(Z[V>>2],Z[(3&V)<<4|Fe>>4],Z[xt],Z[an])}return B.join("")},encodeString(q,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(q):this.encodeByteArray(oe(q),$)},decodeString(q,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(q):function(q){const $=[];let Z=0,B=0;for(;Z<q.length;){const R=q[Z++];if(R<128)$[B++]=String.fromCharCode(R);else if(R>191&&R<224){const V=q[Z++];$[B++]=String.fromCharCode((31&R)<<6|63&V)}else if(R>239&&R<365){const at=((7&R)<<18|(63&q[Z++])<<12|(63&q[Z++])<<6|63&q[Z++])-65536;$[B++]=String.fromCharCode(55296+(at>>10)),$[B++]=String.fromCharCode(56320+(1023&at))}else{const V=q[Z++],ie=q[Z++];$[B++]=String.fromCharCode((15&R)<<12|(63&V)<<6|63&ie)}}return $.join("")}(this.decodeStringToByteArray(q,$))},decodeStringToByteArray(q,$){this.init_();const Z=$?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let R=0;R<q.length;){const V=Z[q.charAt(R++)],Fe=R<q.length?Z[q.charAt(R)]:0;++R;const ut=R<q.length?Z[q.charAt(R)]:64;++R;const Ue=R<q.length?Z[q.charAt(R)]:64;if(++R,null==V||null==Fe||null==ut||null==Ue)throw Error();B.push(V<<2|Fe>>4),64!==ut&&(B.push(Fe<<4&240|ut>>2),64!==Ue&&B.push(ut<<6&192|Ue))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},ue=function(q){return function(q){const $=oe(q);return ye.encodeByteArray($,!0)}(q).replace(/\./g,"")},he=function(q){try{return ye.decodeString(q,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function z(q,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return $}for(const Z in $)!$.hasOwnProperty(Z)||!J(Z)||(q[Z]=z(q[Z],$[Z]));return q}function J(q){return"__proto__"!==q}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ke(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function it(){return"object"==typeof self&&self.self===self}function ve(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qe(){const q=$e();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function be(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ze(){return"object"==typeof indexedDB}function se(){return new Promise((q,$)=>{try{let Z=!0;const B="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(B);R.onsuccess=()=>{R.result.close(),Z||self.indexedDB.deleteDatabase(B),q(!0)},R.onupgradeneeded=()=>{Z=!1},R.onerror=()=>{var V;$((null===(V=R.error)||void 0===V?void 0:V.message)||"")}}catch(Z){$(Z)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ae=()=>{try{return function _e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=q&&he(q[1]);return $&&JSON.parse($)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},yt=()=>{var q;return null===(q=ae())||void 0===q?void 0:q.config},tn=q=>{var $;return null===($=ae())||void 0===$?void 0:$[`_${q}`]};class Vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,Z)=>{this.resolve=$,this.reject=Z})}wrapCallback($){return(Z,B)=>{Z?this.reject(Z):this.resolve(B),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(Z):$(Z,B))}}}function Ze(q,$){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=$||"demo-project",R=q.iat||0,V=q.sub||q.user_id;if(!V)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ie=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:R,exp:R+3600,auth_time:R,sub:V,user_id:V,firebase:{sign_in_provider:"custom",identities:{}}},q);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(ie)),""].join(".")}class mn extends Error{constructor($,Z,B){super(Z),this.code=$,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,en.prototype.create)}}class en{constructor($,Z,B){this.service=$,this.serviceName=Z,this.errors=B}create($,...Z){const B=Z[0]||{},R=`${this.service}/${$}`,V=this.errors[$],ie=V?function Xt(q,$){return q.replace($t,(Z,B)=>{const R=$[B];return null!=R?String(R):`<${B}?>`})}(V,B):"Error";return new mn(R,`${this.serviceName}: ${ie} (${R}).`,B)}}const $t=/\{\$([^}]+)}/g;function Cr(q,$){return Object.prototype.hasOwnProperty.call(q,$)}function ci(q){for(const $ in q)if(Object.prototype.hasOwnProperty.call(q,$))return!1;return!0}function Je(q,$){if(q===$)return!0;const Z=Object.keys(q),B=Object.keys($);for(const R of Z){if(!B.includes(R))return!1;const V=q[R],ie=$[R];if(Gn(V)&&Gn(ie)){if(!Je(V,ie))return!1}else if(V!==ie)return!1}for(const R of B)if(!Z.includes(R))return!1;return!0}function Gn(q){return null!==q&&"object"==typeof q}function pn(q){const $=[];for(const[Z,B]of Object.entries(q))Array.isArray(B)?B.forEach(R=>{$.push(encodeURIComponent(Z)+"="+encodeURIComponent(R))}):$.push(encodeURIComponent(Z)+"="+encodeURIComponent(B));return $.length?"&"+$.join("&"):""}function sr(q){const $={};return q.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[R,V]=B.split("=");$[decodeURIComponent(R)]=decodeURIComponent(V)}}),$}function Ms(q){const $=q.indexOf("?");if(!$)return"";const Z=q.indexOf("#",$);return q.substring($,Z>0?Z:void 0)}function _n(q,$){const Z=new fn(q,$);return Z.subscribe.bind(Z)}class fn{constructor($,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{$(this)}).catch(B=>{this.error(B)})}next($){this.forEachObserver(Z=>{Z.next($)})}error($){this.forEachObserver(Z=>{Z.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,Z,B){let R;if(void 0===$&&void 0===Z&&void 0===B)throw new Error("Missing Observer.");R=function pt(q,$){if("object"!=typeof q||null===q)return!1;for(const Z of $)if(Z in q&&"function"==typeof q[Z])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:Z,complete:B},void 0===R.next&&(R.next=At),void 0===R.error&&(R.error=At),void 0===R.complete&&(R.complete=At);const V=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),V}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,$)}sendOne($,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{Z(this.observers[$])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function At(){}function tt(q,$=1e3,Z=2){const B=$*Math.pow(Z,q),R=Math.round(.5*B*(Math.random()-.5)*2);return Math.min(144e5,B+R)}function Qt(q){return q&&q._delegate?q._delegate:q}},7434:(lt,Ae,F)=>{var d=F(4650);let j=null;function N(){return j}const pe=new d.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function he(){return(0,d.LFG)(z)}()},providedIn:"platform"}),n})();const G=new d.OlP("Location Initialized");let z=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function $e(){return new z((0,d.LFG)(pe))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ce(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function it(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Xe)},providedIn:"root"}),n})();const me=new d.OlP("appBaseHref");let Xe=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+it(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const l=this.prepareExternalUrl(i+it(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){const l=this.prepareExternalUrl(i+it(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qe=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let l=this.prepareExternalUrl(i+it(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){let l=this.prepareExternalUrl(i+it(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ce(ze(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+it(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=it,n.joinWithSlash=ke,n.stripTrailingSlash=Ce,n.\u0275fac=function(t){return new(t||n)(d.LFG(ve))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ne(){return new Ve((0,d.LFG)(ve))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}const se={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var le=(()=>((le=le||{})[le.Decimal=0]="Decimal",le[le.Percent=1]="Percent",le[le.Currency=2]="Currency",le[le.Scientific=3]="Scientific",le))(),Q=(()=>((Q=Q||{})[Q.Format=0]="Format",Q[Q.Standalone=1]="Standalone",Q))(),X=(()=>((X=X||{})[X.Narrow=0]="Narrow",X[X.Abbreviated=1]="Abbreviated",X[X.Wide=2]="Wide",X[X.Short=3]="Short",X))(),fe=(()=>((fe=fe||{})[fe.Short=0]="Short",fe[fe.Medium=1]="Medium",fe[fe.Long=2]="Long",fe[fe.Full=3]="Full",fe))(),ae=(()=>((ae=ae||{})[ae.Decimal=0]="Decimal",ae[ae.Group=1]="Group",ae[ae.List=2]="List",ae[ae.PercentSign=3]="PercentSign",ae[ae.PlusSign=4]="PlusSign",ae[ae.MinusSign=5]="MinusSign",ae[ae.Exponential=6]="Exponential",ae[ae.SuperscriptingExponent=7]="SuperscriptingExponent",ae[ae.PerMille=8]="PerMille",ae[ae.Infinity=9]="Infinity",ae[ae.NaN=10]="NaN",ae[ae.TimeSeparator=11]="TimeSeparator",ae[ae.CurrencyDecimal=12]="CurrencyDecimal",ae[ae.CurrencyGroup=13]="CurrencyGroup",ae))();function en(n,e){return Je((0,d.cg1)(n)[d.wAp.DateFormat],e)}function Xt(n,e){return Je((0,d.cg1)(n)[d.wAp.TimeFormat],e)}function $t(n,e){return Je((0,d.cg1)(n)[d.wAp.DateTimeFormat],e)}function kt(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ae.CurrencyDecimal)return t[d.wAp.NumberSymbols][ae.Decimal];if(e===ae.CurrencyGroup)return t[d.wAp.NumberSymbols][ae.Group]}return r}function Cr(n){if(!n[d.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[d.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Je(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Gn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Ms=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,yn={},_n=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var fn=(()=>((fn=fn||{})[fn.Short=0]="Short",fn[fn.ShortGMT=1]="ShortGMT",fn[fn.Long=2]="Long",fn[fn.Extended=3]="Extended",fn))(),ft=(()=>((ft=ft||{})[ft.FullYear=0]="FullYear",ft[ft.Month=1]="Month",ft[ft.Date=2]="Date",ft[ft.Hours=3]="Hours",ft[ft.Minutes=4]="Minutes",ft[ft.Seconds=5]="Seconds",ft[ft.FractionalSeconds=6]="FractionalSeconds",ft[ft.Day=7]="Day",ft))(),pt=(()=>((pt=pt||{})[pt.DayPeriods=0]="DayPeriods",pt[pt.Days=1]="Days",pt[pt.Months=2]="Months",pt[pt.Eras=3]="Eras",pt))();function At(n,e,t,r){let i=function V(n){if(Fe(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,u=1,l=1]=n.split("-").map(p=>+p);return kr(i,u-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Ms))return function ie(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,p=Number(n[5]||0)-r,_=Number(n[6]||0),I=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,l,p,_,I),e}(r)}const e=new Date(n);if(!Fe(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=zn(t,e)||e;let p,l=[];for(;e;){if(p=_n.exec(e),!p){l.push(e);break}{l=l.concat(p.slice(1));const S=l.pop();if(!S)break;e=S}}let _=i.getTimezoneOffset();r&&(_=Z(r,_),i=function R(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function B(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Z(e,i)-i))}(i,r,!0));let I="";return l.forEach(S=>{const x=function $(n){if(q[n])return q[n];let e;switch(n){case"G":case"GG":case"GGG":e=Zt(pt.Eras,X.Abbreviated);break;case"GGGG":e=Zt(pt.Eras,X.Wide);break;case"GGGGG":e=Zt(pt.Eras,X.Narrow);break;case"y":e=Pt(ft.FullYear,1,0,!1,!0);break;case"yy":e=Pt(ft.FullYear,2,0,!0,!0);break;case"yyy":e=Pt(ft.FullYear,3,0,!1,!0);break;case"yyyy":e=Pt(ft.FullYear,4,0,!1,!0);break;case"Y":e=Qt(1);break;case"YY":e=Qt(2,!0);break;case"YYY":e=Qt(3);break;case"YYYY":e=Qt(4);break;case"M":case"L":e=Pt(ft.Month,1,1);break;case"MM":case"LL":e=Pt(ft.Month,2,1);break;case"MMM":e=Zt(pt.Months,X.Abbreviated);break;case"MMMM":e=Zt(pt.Months,X.Wide);break;case"MMMMM":e=Zt(pt.Months,X.Narrow);break;case"LLL":e=Zt(pt.Months,X.Abbreviated,Q.Standalone);break;case"LLLL":e=Zt(pt.Months,X.Wide,Q.Standalone);break;case"LLLLL":e=Zt(pt.Months,X.Narrow,Q.Standalone);break;case"w":e=It(1);break;case"ww":e=It(2);break;case"W":e=It(1,!0);break;case"d":e=Pt(ft.Date,1);break;case"dd":e=Pt(ft.Date,2);break;case"c":case"cc":e=Pt(ft.Day,1);break;case"ccc":e=Zt(pt.Days,X.Abbreviated,Q.Standalone);break;case"cccc":e=Zt(pt.Days,X.Wide,Q.Standalone);break;case"ccccc":e=Zt(pt.Days,X.Narrow,Q.Standalone);break;case"cccccc":e=Zt(pt.Days,X.Short,Q.Standalone);break;case"E":case"EE":case"EEE":e=Zt(pt.Days,X.Abbreviated);break;case"EEEE":e=Zt(pt.Days,X.Wide);break;case"EEEEE":e=Zt(pt.Days,X.Narrow);break;case"EEEEEE":e=Zt(pt.Days,X.Short);break;case"a":case"aa":case"aaa":e=Zt(pt.DayPeriods,X.Abbreviated);break;case"aaaa":e=Zt(pt.DayPeriods,X.Wide);break;case"aaaaa":e=Zt(pt.DayPeriods,X.Narrow);break;case"b":case"bb":case"bbb":e=Zt(pt.DayPeriods,X.Abbreviated,Q.Standalone,!0);break;case"bbbb":e=Zt(pt.DayPeriods,X.Wide,Q.Standalone,!0);break;case"bbbbb":e=Zt(pt.DayPeriods,X.Narrow,Q.Standalone,!0);break;case"B":case"BB":case"BBB":e=Zt(pt.DayPeriods,X.Abbreviated,Q.Format,!0);break;case"BBBB":e=Zt(pt.DayPeriods,X.Wide,Q.Format,!0);break;case"BBBBB":e=Zt(pt.DayPeriods,X.Narrow,Q.Format,!0);break;case"h":e=Pt(ft.Hours,1,-12);break;case"hh":e=Pt(ft.Hours,2,-12);break;case"H":e=Pt(ft.Hours,1);break;case"HH":e=Pt(ft.Hours,2);break;case"m":e=Pt(ft.Minutes,1);break;case"mm":e=Pt(ft.Minutes,2);break;case"s":e=Pt(ft.Seconds,1);break;case"ss":e=Pt(ft.Seconds,2);break;case"S":e=Pt(ft.FractionalSeconds,1);break;case"SS":e=Pt(ft.FractionalSeconds,2);break;case"SSS":e=Pt(ft.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=In(fn.Short);break;case"ZZZZZ":e=In(fn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=In(fn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=In(fn.Long);break;default:return null}return q[n]=e,e}(S);I+=x?x(i,t,_):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),I}function kr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function zn(n,e){const t=function je(n){return(0,d.cg1)(n)[d.wAp.LocaleId]}(n);if(yn[t]=yn[t]||{},yn[t][e])return yn[t][e];let r="";switch(e){case"shortDate":r=en(n,fe.Short);break;case"mediumDate":r=en(n,fe.Medium);break;case"longDate":r=en(n,fe.Long);break;case"fullDate":r=en(n,fe.Full);break;case"shortTime":r=Xt(n,fe.Short);break;case"mediumTime":r=Xt(n,fe.Medium);break;case"longTime":r=Xt(n,fe.Long);break;case"fullTime":r=Xt(n,fe.Full);break;case"short":const i=zn(n,"shortTime"),u=zn(n,"shortDate");r=yr($t(n,fe.Short),[i,u]);break;case"medium":const l=zn(n,"mediumTime"),p=zn(n,"mediumDate");r=yr($t(n,fe.Medium),[l,p]);break;case"long":const _=zn(n,"longTime"),I=zn(n,"longDate");r=yr($t(n,fe.Long),[_,I]);break;case"full":const S=zn(n,"fullTime"),x=zn(n,"fullDate");r=yr($t(n,fe.Full),[S,x])}return r&&(yn[t][e]=r),r}function yr(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Dt(n,e,t="-",r,i){let u="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,u=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),u+l}function Pt(n,e,t=0,r=!1,i=!1){return function(u,l){let p=function zr(n,e){switch(n){case ft.FullYear:return e.getFullYear();case ft.Month:return e.getMonth();case ft.Date:return e.getDate();case ft.Hours:return e.getHours();case ft.Minutes:return e.getMinutes();case ft.Seconds:return e.getSeconds();case ft.FractionalSeconds:return e.getMilliseconds();case ft.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||p>-t)&&(p+=t),n===ft.Hours)0===p&&-12===t&&(p=12);else if(n===ft.FractionalSeconds)return function Dr(n,e){return Dt(n,3).substring(0,e)}(p,e);const _=kt(l,ae.MinusSign);return Dt(p,e,_,r,i)}}function Zt(n,e,t=Q.Format,r=!1){return function(i,u){return function nr(n,e,t,r,i,u){switch(t){case pt.Months:return function Vt(n,e,t){const r=(0,d.cg1)(n),u=Je([r[d.wAp.MonthsFormat],r[d.wAp.MonthsStandalone]],e);return Je(u,t)}(e,i,r)[n.getMonth()];case pt.Days:return function tn(n,e,t){const r=(0,d.cg1)(n),u=Je([r[d.wAp.DaysFormat],r[d.wAp.DaysStandalone]],e);return Je(u,t)}(e,i,r)[n.getDay()];case pt.DayPeriods:const l=n.getHours(),p=n.getMinutes();if(u){const I=function Ln(n){const e=(0,d.cg1)(n);return Cr(e),(e[d.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Gn(r):[Gn(r[0]),Gn(r[1])])}(e),S=function ci(n,e,t){const r=(0,d.cg1)(n);Cr(r);const u=Je([r[d.wAp.ExtraData][0],r[d.wAp.ExtraData][1]],e)||[];return Je(u,t)||[]}(e,i,r),x=I.findIndex(U=>{if(Array.isArray(U)){const[H,K]=U,Te=l>=H.hours&&p>=H.minutes,De=l<K.hours||l===K.hours&&p<K.minutes;if(H.hours<K.hours){if(Te&&De)return!0}else if(Te||De)return!0}else if(U.hours===l&&U.minutes===p)return!0;return!1});if(-1!==x)return S[x]}return function yt(n,e,t){const r=(0,d.cg1)(n),u=Je([r[d.wAp.DayPeriodsFormat],r[d.wAp.DayPeriodsStandalone]],e);return Je(u,t)}(e,i,r)[l<12?0:1];case pt.Eras:return function Ze(n,e){return Je((0,d.cg1)(n)[d.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,u,n,e,t,r)}}function In(n){return function(e,t,r){const i=-1*r,u=kt(t,ae.MinusSign),l=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case fn.Short:return(i>=0?"+":"")+Dt(l,2,u)+Dt(Math.abs(i%60),2,u);case fn.ShortGMT:return"GMT"+(i>=0?"+":"")+Dt(l,1,u);case fn.Long:return"GMT"+(i>=0?"+":"")+Dt(l,2,u)+":"+Dt(Math.abs(i%60),2,u);case fn.Extended:return 0===r?"Z":(i>=0?"+":"")+Dt(l,2,u)+":"+Dt(Math.abs(i%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function wt(n){return kr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function It(n,e=!1){return function(t,r){let i;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();i=1+Math.floor((l+u)/7)}else{const u=wt(t),l=function tt(n){const e=kr(n,0,1).getDay();return kr(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),p=u.getTime()-l.getTime();i=1+Math.round(p/6048e5)}return Dt(i,n,kt(r,ae.MinusSign))}}function Qt(n,e=!1){return function(t,r){return Dt(wt(t).getFullYear(),n,kt(r,ae.MinusSign),e)}}const q={};function Z(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Fe(n){return n instanceof Date&&!isNaN(n.valueOf())}const at=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Rs(n,e,t,r,i){const l=function Os(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],u=r[1],l=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],p=l[0],_=l[1]||"";t.posPre=p.substring(0,p.indexOf("#"));for(let S=0;S<_.length;S++){const x=_.charAt(S);"0"===x?t.minFrac=t.maxFrac=S+1:"#"===x?t.maxFrac=S+1:t.posSuf+=x}const I=p.split(",");if(t.gSize=I[1]?I[1].length:0,t.lgSize=I[2]||I[1]?(I[2]||I[1]).length:0,u){const S=i.length-t.posPre.length-t.posSuf.length,x=u.indexOf("#");t.negPre=u.substring(0,x).replace(/'/g,""),t.negSuf=u.slice(x+S).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function mr(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,le.Currency),kt(e,ae.MinusSign));return l.minFrac=function sr(n){let e;const t=se[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),l.maxFrac=l.minFrac,function vn(n,e,t,r,i,u,l=!1){let p="",_=!1;if(isFinite(n)){let I=function Ka(n){let r,i,u,l,p,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(i<0&&(i=u),i+=+e.slice(u+1),e=e.substring(0,u)):i<0&&(i=e.length),u=0;"0"===e.charAt(u);u++);if(u===(p=e.length))r=[0],i=1;else{for(p--;"0"===e.charAt(p);)p--;for(i-=u,r=[],l=0;u<=p;u++,l++)r[l]=Number(e.charAt(u))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(I=function Ns(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(I));let S=e.minInt,x=e.minFrac,U=e.maxFrac;if(u){const vt=u.match(at);if(null===vt)throw new Error(`${u} is not a valid digit info`);const ht=vt[1],dt=vt[3],Tt=vt[5];null!=ht&&(S=Un(ht)),null!=dt&&(x=Un(dt)),null!=Tt?U=Un(Tt):null!=dt&&x>U&&(U=x)}!function zi(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const u=Math.min(Math.max(e,i),t);let l=u+n.integerLen,p=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let x=l;x<r.length;x++)r[x]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=u+1),r[0]=0;for(let x=1;x<l;x++)r[x]=0}if(p>=5)if(l-1<0){for(let x=0;x>l;x--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,u);i++)r.push(0);let _=0!==u;const I=e+n.integerLen,S=r.reduceRight(function(x,U,H,K){return K[H]=(U+=x)<10?U:U-10,_&&(0===K[H]&&H>=I?K.pop():_=!1),U>=10?1:0},0);S&&(r.unshift(S),n.integerLen++)}(I,x,U);let H=I.digits,K=I.integerLen;const Te=I.exponent;let De=[];for(_=H.every(vt=>!vt);K<S;K++)H.unshift(0);for(;K<0;K++)H.unshift(0);K>0?De=H.splice(K,H.length):(De=H,H=[0]);const ot=[];for(H.length>=e.lgSize&&ot.unshift(H.splice(-e.lgSize,H.length).join(""));H.length>e.gSize;)ot.unshift(H.splice(-e.gSize,H.length).join(""));H.length&&ot.unshift(H.join("")),p=ot.join(kt(t,r)),De.length&&(p+=kt(t,i)+De.join("")),Te&&(p+=kt(t,ae.Exponential)+"+"+Te)}else p=kt(t,ae.Infinity);return p=n<0&&!_?e.negPre+p+e.negSuf:e.posPre+p+e.posSuf,p}(n,l,e,ae.CurrencyGroup,ae.CurrencyDecimal,i).replace("\xa4",t).replace("\xa4","").trim()}function Un(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Ya(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}let rn=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ks{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ks(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,l),Fs(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Fs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Fs(n,e){n.context.$implicit=e.item}let bn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Jd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Jd{constructor(){this.$implicit=null,this.ngIf=null}}function qn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Qa=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,u]=t.split("."),l=-1===i.indexOf("-")?void 0:d.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,u?`${r}${u}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.aQg),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();function Kr(n,e){return new d.vHH(2100,!1)}class ap{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Wi{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const up=new Wi,tl=new ap;let $u=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return up;if((0,d.F4k)(t))return tl;throw Kr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const lp=new d.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Hu=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,u){if(null==t||""===t||t!=t)return null;try{return At(t,r,u||this.locale,i??this.defaultTimezone??void 0)}catch(l){throw Kr()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16),d.Y36(lp,24))},n.\u0275pipe=d.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),ca=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",u,l){if(!function Xa(n){return!(null==n||""===n||n!=n)}(t))return null;l=l||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let p=r||this._defaultCurrencyCode;"code"!==i&&(p="symbol"===i||"symbol-narrow"===i?function Vn(n,e,t="en"){const r=function ji(n){return(0,d.cg1)(n)[d.wAp.Currencies]}(t)[n]||se[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(p,"symbol"===i?"wide":"narrow",l):i);try{return Rs(function Gu(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),l,p,r,u)}catch(_){throw Kr()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16),d.Y36(d.EJc,16))},n.\u0275pipe=d.Yjl({name:"currency",type:n,pure:!0,standalone:!0}),n})();let dp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Us(n){return"server"===n}let ol=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Xd((0,d.LFG)(pe),window)}),n})();class Xd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function dr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=di(this.window.history)||di(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function di(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Bs{}class ls extends class dl extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ce(n){j||(j=n)}(new ls)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function hl(){return ds=ds||document.querySelector("base"),ds?ds.getAttribute("href"):null}();return null==t?null:function Yi(n){Dn=Dn||document.createElement("a"),Dn.setAttribute("href",n);const e=Dn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ds=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ya(document.cookie,e)}}let Dn,ds=null;const Sn=new d.OlP("TRANSITION_ID"),Ju=[{provide:d.ip1,useFactory:function Qu(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Sn,pe,d.zs3],multi:!0}];let Xu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ec=new d.OlP("EventManagerPlugins");let tc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const l=i[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ec),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ru{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let xo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Mo=(()=>{class n extends xo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(pl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(pl))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function pl(n){N().remove(n)}const Ro={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gl=/%COMP%/g;function su(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?su(n,i,t):(i=i.replace(gl,n),t.push(i))}return t}function ou(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let au=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Qi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new yl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new oh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=su(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(tc),d.LFG(Mo),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Qi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ro[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ia(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ia(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Ro[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ro[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ou(r)):this.eventManager.addEventListener(e,t,ou(r))}}function Ia(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class yl extends Qi{constructor(e,t,r,i){super(e),this.component=r;const u=su(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Nn(n){return"_ngcontent-%COMP%".replace(gl,n)}(i+"-"+r.id),this.hostAttr=function iu(n){return"_nghost-%COMP%".replace(gl,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class oh extends Qi{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=su(i.id,i.styles,[]);for(let l=0;l<u.length;l++){const p=document.createElement("style");p.textContent=u[l],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Kn=(()=>{class n extends ru{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ah=["alt","control","meta","shift"],hs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ic={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ba=(()=>{class n extends ru{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let l="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),l="code."),ah.forEach(I=>{const S=r.indexOf(I);S>-1&&(r.splice(S,1),l+=I+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=hs[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ah.forEach(l=>{l!==i&&(0,ic[l])(t)&&(u+=l+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ca=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function vl(){ls.makeCurrent()},multi:!0},{provide:pe,useFactory:function sc(){return(0,d.RDi)(document),document},deps:[]}]),Hs=new d.OlP(""),Da=[{provide:d.rWj,useClass:class fl{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let u=i.length,l=!1;const p=function(_){l=l||_,u--,0==u&&r(l)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],No=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Ji(){return new d.qLn},deps:[]},{provide:ec,useClass:Kn,multi:!0,deps:[pe,d.R0b,d.Lbi]},{provide:ec,useClass:ba,multi:!0,deps:[pe]},{provide:au,useClass:au,deps:[tc,Mo,d.AFp]},{provide:d.FYo,useExisting:au},{provide:xo,useExisting:Mo},{provide:Mo,useClass:Mo,deps:[pe]},{provide:tc,useClass:tc,deps:[ec,d.R0b]},{provide:Bs,useClass:Xu,deps:[]},[]];let Po=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Sn,useExisting:d.AFp},Ju]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hs,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...No,...Da],imports:[dp,d.hGG]}),n})(),Ci=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Sa(){return new Ci((0,d.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Jt=F(8996),Xi=F(7669);function nt(...n){const e=(0,Xi.yG)(n);return(0,Jt.D)(n,e)}var Br=F(7579);class gn extends Br.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const zs=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Tn=F(9751);const{isArray:ps}=Array,{getPrototypeOf:Il,prototype:uc,keys:cc}=Object;function ts(n){if(1===n.length){const e=n[0];if(ps(e))return{args:e,keys:null};if(function fu(n){return n&&"object"==typeof n&&Il(n)===uc}(e)){const t=cc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var gs=F(4671),rt=F(4004);const{isArray:Ta}=Array;function fh(n){return(0,rt.U)(e=>function Si(n,e){return Ta(e)?n(...e):n(e)}(n,e))}function bl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Yn=F(5403),lc=F(9672);function Cl(...n){const e=(0,Xi.yG)(n),t=(0,Xi.jO)(n),{args:r,keys:i}=ts(n);if(0===r.length)return(0,Jt.D)([],e);const u=new Tn.y(function ms(n,e,t=gs.y){return r=>{dc(e,()=>{const{length:i}=n,u=new Array(i);let l=i,p=i;for(let _=0;_<i;_++)dc(e,()=>{const I=(0,Jt.D)(n[_],e);let S=!1;I.subscribe((0,Yn.x)(r,x=>{u[_]=x,S||(S=!0,p--),p||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>bl(i,l):gs.y));return t?u.pipe(fh(t)):u}function dc(n,e,t){n?(0,lc.f)(t,n,e):e()}var qs=F(8189);function Xr(...n){return function Aa(){return(0,qs.J)(1)}()((0,Jt.D)(n,(0,Xi.yG)(n)))}var Ti=F(8421);function ei(n){return new Tn.y(e=>{(0,Ti.Xf)(n()).subscribe(e)})}var hc=F(9635),Ws=F(576);function fi(n,e){const t=(0,Ws.m)(n)?n:()=>n,r=i=>i.error(t());return new Tn.y(e?i=>e.schedule(r,0,i):r)}var Ai=F(515),Dl=F(727),Qn=F(4482);function C(){return(0,Qn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class D extends Tn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Qn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Dl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Dl.w0.EMPTY)}return e}refCount(){return C()(this)}}function M(n,e){return(0,Qn.e)((t,r)=>{let i=null,u=0,l=!1;const p=()=>l&&!i&&r.complete();t.subscribe((0,Yn.x)(r,_=>{i?.unsubscribe();let I=0;const S=u++;(0,Ti.Xf)(n(_,S)).subscribe(i=(0,Yn.x)(r,x=>r.next(e?e(_,x,S,I++):x),()=>{i=null,p()}))},()=>{l=!0,p()}))})}function L(n){return n<=0?()=>Ai.E:(0,Qn.e)((e,t)=>{let r=0;e.subscribe((0,Yn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Y(...n){const e=(0,Xi.yG)(n);return(0,Qn.e)((t,r)=>{(e?Xr(n,t,e):Xr(n,t)).subscribe(r)})}function re(n,e){return(0,Qn.e)((t,r)=>{let i=0;t.subscribe((0,Yn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var Ee=F(5577);function Ge(n){return(0,Qn.e)((e,t)=>{let r=!1;e.subscribe((0,Yn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function bt(n=Ft){return(0,Qn.e)((e,t)=>{let r=!1;e.subscribe((0,Yn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ft(){return new zs}function Ct(n,e){const t=arguments.length>=2;return r=>r.pipe(n?re((i,u)=>n(i,u,r)):gs.y,L(1),t?Ge(e):bt(()=>new zs))}function ct(n,e){return(0,Ws.m)(e)?(0,Ee.z)(n,e,1):(0,Ee.z)(n,1)}var zt=F(8505);function En(n){return(0,Qn.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Yn.x)(t,void 0,void 0,l=>{u=(0,Ti.Xf)(n(l,En(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function xi(n,e,t,r,i){return(u,l)=>{let p=t,_=e,I=0;u.subscribe((0,Yn.x)(l,S=>{const x=I++;_=p?n(_,S,x):(p=!0,S),r&&l.next(_)},i&&(()=>{p&&l.next(_),l.complete()})))}}function Mi(n,e){return(0,Qn.e)(xi(n,e,arguments.length>=2,!0))}function pi(n){return n<=0?()=>Ai.E:(0,Qn.e)((e,t)=>{let r=[];e.subscribe((0,Yn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ho(n,e){const t=arguments.length>=2;return r=>r.pipe(n?re((i,u)=>n(i,u,r)):gs.y,pi(1),t?Ge(e):bt(()=>new zs))}function Ri(n){return(0,Qn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ot="primary",ti=Symbol("RouteTitle");class xa{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function pu(n){return new xa(n)}function a0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const l=r[u],p=n[u];if(l.startsWith(":"))i[l.substring(1)]=p;else if(l!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Oi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!ty(n[i],e[i]))return!1;return!0}function ty(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function yp(n){return Array.prototype.concat.apply([],n)}function ph(n){return n.length>0?n[n.length-1]:null}function kn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ys(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Jt.D)(Promise.resolve(n)):nt(n)}const c0={exact:function vp(n,e,t){if(!Js(n.segments,e.segments)||!Qs(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!vp(n.children[r],e.children[r],t))return!1;return!0},subset:fc},mh={exact:function yh(n,e){return Oi(n,e)},subset:function Sl(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ty(n[t],e[t]))},ignored:()=>!0};function ny(n,e,t){return c0[t.paths](n.root,e.root,t.matrixParams)&&mh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function fc(n,e,t){return Tl(n,e,e.segments,t)}function Tl(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Js(i,t)||e.hasChildren()||!Qs(i,t,r))}if(n.segments.length===t.length){if(!Js(n.segments,t)||!Qs(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!fc(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Js(n.segments,i)&&Qs(n.segments,i,r)&&n.children[Ot])&&Tl(n.children[Ot],e,u,r)}}function Qs(n,e,t){return e.every((r,i)=>mh[t](n[i].parameters,r.parameters))}class Ma{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pu(this.queryParams)),this._queryParamMap}toString(){return Ep.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,kn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mu(this)}}class pc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=pu(this.parameters)),this._parameterMap}toString(){return ry(this)}}function Js(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let _h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new gu},providedIn:"root"}),n})();class gu{parse(e){const t=new g(e);return new Ma(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${gc(e.root,!0)}`,r=function d0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${xl(t)}=${xl(i)}`).join("&"):`${xl(t)}=${xl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function wh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ep=new gu;function mu(n){return n.segments.map(e=>ry(e)).join("/")}function gc(n,e){if(!n.hasChildren())return mu(n);if(e){const t=n.children[Ot]?gc(n.children[Ot],!1):"",r=[];return kn(n.children,(i,u)=>{u!==Ot&&r.push(`${u}:${gc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function wp(n,e){let t=[];return kn(n.children,(r,i)=>{i===Ot&&(t=t.concat(e(r,i)))}),kn(n.children,(r,i)=>{i!==Ot&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ot?[gc(n.children[Ot],!1)]:[`${i}:${gc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${mu(n)}/${t[0]}`:`${mu(n)}/(${t.join("//")})`}}function vh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xl(n){return vh(n).replace(/%3B/gi,";")}function ys(n){return vh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xs(n){return decodeURIComponent(n)}function Eh(n){return Xs(n.replace(/\+/g,"%20"))}function ry(n){return`${ys(n.path)}${function l0(n){return Object.keys(n).map(e=>`;${ys(e)}=${ys(n[e])}`).join("")}(n.parameters)}`}const h0=/^[^\/()?;=#]+/;function Ih(n){const e=n.match(h0);return e?e[0]:""}const bh=/^[^=?&#]+/,f0=/^[^&#]+/;class g{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new Kt(e,t)),r}parseSegment(){const e=Ih(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new pc(Xs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ih(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ih(this.remaining);i&&(r=i,this.capture(r))}e[Xs(t)]=Xs(r)}parseQueryParam(e){const t=function iy(n){const e=n.match(bh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function v(n){const e=n.match(f0);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Eh(t),u=Eh(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ih(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ot);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Ot]:new Kt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function m(n){return n.segments.length>0?new Kt([],{[Ot]:n}):n}function E(n){const e={};for(const r of Object.keys(n.children)){const u=E(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function A(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}function P(n){return n instanceof Ma}function Wt(n,e,t,r,i){if(0===t.length)return Ni(e.root,e.root,e.root,r,i);const u=function Ol(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Rl(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return kn(u.outlets,(_,I)=>{p[I]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===l?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new Rl(t,e,r)}(t);return u.toRoot()?Ni(e.root,e.root,new Kt([],{}),r,i):function l(_){const I=function Ch(n,e,t,r){if(n.isAbsolute)return new Ra(e.root,!0,0);if(-1===r)return new Ra(t,t===e.root,0);return function Nl(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Ra(r,!1,i-u)}(t,r+(cn(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),S=I.processChildren?Go(I.segmentGroup,I.index,u.commands):yc(I.segmentGroup,I.index,u.commands);return Ni(e.root,I.segmentGroup,S,r,i)}(n.snapshot?._lastPathIndex)}function cn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Tr(n){return"object"==typeof n&&null!=n&&n.outlets}function Ni(n,e,t,r,i){let l,u={};r&&kn(r,(_,I)=>{u[I]=Array.isArray(_)?_.map(S=>`${S}`):`${_}`}),l=n===e?t:Ml(n,e,t);const p=m(E(l));return new Ma(p,u,i)}function Ml(n,e,t){const r={};return kn(n.children,(i,u)=>{r[u]=i===e?t:Ml(i,e,t)}),new Kt(n.segments,r)}class Rl{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&cn(r[0]))throw new d.vHH(4003,!1);const i=r.find(Tr);if(i&&i!==ph(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ra{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yc(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return Go(n,e,t);const r=function sy(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const l=n.segments[i],p=t[r];if(Tr(p))break;const _=`${p}`,I=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&I&&"object"==typeof I&&void 0===I.outlets){if(!bp(_,I,l))return u;r+=2}else{if(!bp(_,{},l))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Kt(n.segments.slice(0,r.pathIndex),{});return u.children[Ot]=new Kt(n.segments.slice(r.pathIndex),n.children),Go(u,0,i)}return r.match&&0===i.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?Mn(n,e,t):r.match?Go(n,0,i):Mn(n,e,t)}function Go(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function mc(n){return Tr(n[0])?n[0].outlets:{[Ot]:n}}(t),i={};return kn(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[l]=yc(n.children[l],e,u))}),kn(n.children,(u,l)=>{void 0===r[l]&&(i[l]=u)}),new Kt(n.segments,i)}}function Mn(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Tr(u)){const _=oy(u.outlets);return new Kt(r,_)}if(0===i&&cn(t[0])){r.push(new pc(n.segments[e].path,p0(t[0]))),i++;continue}const l=Tr(u)?u.outlets[Ot]:`${u}`,p=i<t.length-1?t[i+1]:null;l&&p&&cn(p)?(r.push(new pc(l,p0(p))),i+=2):(r.push(new pc(l,{})),i++)}return new Kt(r,{})}function oy(n){const e={};return kn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Mn(new Kt([],{}),0,t))}),e}function p0(n){const e={};return kn(n,(t,r)=>e[r]=`${t}`),e}function bp(n,e,t){return n==t.path&&Oi(e,t.parameters)}class zo{constructor(e,t){this.id=e,this.url=t}}class ay extends zo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _c extends zo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cp extends zo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class g0 extends zo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yC extends zo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EM extends zo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IM extends zo{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Dh extends zo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uy extends zo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cy{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class m0{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class y0{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _C{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dp{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class w0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Sh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Sh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Sp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Sp(e,this._root).map(t=>t.value)}}function Sh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Sh(n,t);if(r)return r}return null}function Sp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Sp(n,t);if(r.length)return r.unshift(e),r}return[]}class qo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _s(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class E0 extends w0{constructor(e,t){super(e),this.snapshot=t,Th(this,e)}toString(){return this.snapshot.toString()}}function Tp(n,e){const t=function Ap(n,e){const l=new Wo([],{},{},"",{},Ot,e,null,n.root,-1,{});return new ly("",new qo(l,[]))}(n,e),r=new gn([new pc("",{})]),i=new gn({}),u=new gn({}),l=new gn({}),p=new gn(""),_=new vc(r,i,l,p,u,Ot,e,t.root);return _.snapshot=t.root,new E0(new qo(_,[]),t)}class vc{constructor(e,t,r,i,u,l,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=p,this.title=this.data?.pipe((0,rt.U)(I=>I[ti]))??nt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rt.U)(e=>pu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rt.U)(e=>pu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Mp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Wo{constructor(e,t,r,i,u,l,p,_,I,S,x,U){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=p,this.title=this.data?.[ti],this.routeConfig=_,this._urlSegment=I,this._lastPathIndex=S,this._correctedLastPathIndex=U??S,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ly extends w0{constructor(e,t){super(t),this.url=e,Th(this,t)}toString(){return I0(this._root)}}function Th(n,e){e.value._routerState=n,e.children.forEach(t=>Th(n,t))}function I0(n){const e=n.children.length>0?` { ${n.children.map(I0).join(", ")} } `:"";return`${n.value}${e}`}function dy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Oi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Oi(e.params,t.params)||n.params.next(t.params),function mp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Oi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Oi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Rp(n,e){const t=Oi(n.params,e.params)&&function Al(n,e){return Js(n,e)&&n.every((t,r)=>Oi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Rp(n.parent,e.parent))}function Ah(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function vC(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ah(n,r,i);return Ah(n,r)})}(n,e,t);return new qo(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(p=>Ah(n,p)),l}}const r=function wC(n){return new vc(new gn(n.url),new gn(n.params),new gn(n.queryParams),new gn(n.fragment),new gn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ah(n,u));return new qo(r,i)}}const hy="ngNavigationCancelingError";function Op(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=P(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=b0(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function b0(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[hy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function fy(n){return C0(n)&&P(n.url)}function C0(n){return n&&n[hy]}class D0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Np,this.attachRef=null}}let Np=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new D0,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Pp=!1;let wc=(()=>{class n{constructor(t,r,i,u,l){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Pp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Pp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Pp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,Pp);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,_=new EC(t,p,i.injector);if(r&&function kl(n){return!!n.resolveComponentFactory}(r)){const I=r.resolveComponentFactory(l);this.activated=i.createComponent(I,i.length,_)}else this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Np),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class EC{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===vc?this.route:e===Np?this.childContexts:this.parent.get(e,t)}}let Ec=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[wc],encapsulation:2}),n})();function S0(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function my(n){const e=n.children&&n.children.map(my),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=Ec),t}function vs(n){return n.outlet||Ot}function kp(n,e){const t=n.filter(r=>vs(r)===e);return t.push(...n.filter(r=>vs(r)!==e)),t}function Fp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class yy{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=_s(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,i[l],r),delete i[l]}),kn(i,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=_s(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);if(r&&r.outlet){const l=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=_s(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=_s(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new v0(u.value.snapshot))}),e.children.length&&this.forwardEvent(new _C(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(dy(i),i===u)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(p.contexts),l.attachRef=p.componentRef,l.route=p.route.value,l.outlet&&l.outlet.attach(p.componentRef,p.route.value),dy(p.route.value),this.activateChildRoutes(e,null,l.children)}else{const p=Fp(i.snapshot),_=p?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=_,l.injector=p,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class bC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class _y{constructor(e,t){this.component=e,this.route=t}}function TM(n,e,t){const r=n._root;return Mh(r,e?e._root:null,t,[r.value])}function xh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Mh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=_s(e);return n.children.forEach(l=>{(function x0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function vy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Js(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Js(n.url,e.url)||!Oi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rp(n,e)||!Oi(n.queryParams,e.queryParams);default:return!Rp(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new bC(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Mh(n,e,u.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new _y(p.outlet.component,l))}else l&&Fl(e,p,i),i.canActivateChecks.push(new bC(r)),Mh(n,null,u.component?p?p.children:null:t,r,i)})(l,u[l.value.outlet],t,r.concat([l.value]),i),delete u[l.value.outlet]}),kn(u,(l,p)=>Fl(l,t.getContext(p),i)),i}function Fl(n,e,t){const r=_s(n),i=n.value;kn(r,(u,l)=>{Fl(u,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new _y(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ll(n){return"function"==typeof n}function Lp(n){return n instanceof zs||"EmptyError"===n?.name}const Vp=Symbol("INITIAL_VALUE");function Vl(){return M(n=>Cl(n.map(e=>e.pipe(L(1),Y(Vp)))).pipe((0,rt.U)(e=>{for(const t of e)if(!0!==t){if(t===Vp)return Vp;if(!1===t||t instanceof Ma)return t}return!0}),re(e=>e!==Vp),L(1)))}function ni(n){return(0,hc.z)((0,zt.b)(e=>{if(P(e))throw Op(0,e)}),(0,rt.U)(e=>!0===e))}const Up={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bp(n,e,t,r,i){const u=Ar(n,e,t);return u.matched?function by(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?nt(i.map(l=>{const p=xh(l,n);return Ys(function DC(n){return n&&Ll(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(Vl(),ni()):nt(!0)}(r=S0(e,r),e,t).pipe((0,rt.U)(l=>!0===l?u:{...Up})):nt(u)}function Ar(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Up}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||a0)(t,n,e);if(!i)return{...Up};const u={};kn(i.posParams,(p,_)=>{u[_]=p.path});const l=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function yu(n,e,t,r,i="corrected"){if(t.length>0&&function kC(n,e,t){return t.some(r=>jp(n,e,r)&&vs(r)!==Ot)}(n,t,r)){const l=new Kt(e,function PC(n,e,t,r){const i={};i[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&vs(u)!==Ot){const l=new Kt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[vs(u)]=l}return i}(n,e,r,new Kt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function N0(n,e,t){return t.some(r=>jp(n,e,r))}(n,t,r)){const l=new Kt(n.segments,function O0(n,e,t,r,i,u){const l={};for(const p of r)if(jp(n,t,p)&&!i[vs(p)]){const _=new Kt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[vs(p)]=_}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new Kt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function jp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Cy(n,e,t,r){return!!(vs(n)===r||r!==Ot&&jp(e,t,n))&&("**"===n.path||Ar(e,n,t).matched)}function P0(n,e,t){return 0===e.length&&!n.children[t]}const Oh=!1;class $p{constructor(e){this.segmentGroup=e||null}}class k0{constructor(e){this.urlTree=e}}function Nh(n){return fi(new $p(n))}function F0(n){return fi(new k0(n))}class LC{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=yu(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ot).pipe((0,rt.U)(u=>this.createUrlTree(E(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(En(u=>{if(u instanceof k0)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof $p?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ot).pipe((0,rt.U)(i=>this.createUrlTree(E(i),e.queryParams,e.fragment))).pipe(En(i=>{throw i instanceof $p?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Oh)}createUrlTree(e,t,r){const i=m(e);return new Ma(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,rt.U)(u=>new Kt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Jt.D)(i).pipe(ct(u=>{const l=r.children[u],p=kp(t,u);return this.expandSegmentGroup(e,p,l,u).pipe((0,rt.U)(_=>({segment:_,outlet:u})))}),Mi((u,l)=>(u[l.outlet]=l.segment,u),{}),Ho())}expandSegment(e,t,r,i,u,l){return(0,Jt.D)(r).pipe(ct(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,l).pipe(En(I=>{if(I instanceof $p)return nt(null);throw I}))),Ct(p=>!!p),En((p,_)=>{if(Lp(p))return P0(t,i,u)?nt(new Kt([],{})):Nh(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,l,p){return Cy(i,t,u,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,l):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l):Nh(t):Nh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?F0(u):this.lineralizeSegments(r,u).pipe((0,Ee.z)(l=>{const p=new Kt(l,{});return this.expandSegment(e,p,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){const{matched:p,consumedSegments:_,remainingSegments:I,positionalParamSegments:S}=Ar(t,i,u);if(!p)return Nh(t);const x=this.applyRedirectCommands(_,i.redirectTo,S);return i.redirectTo.startsWith("/")?F0(x):this.lineralizeSegments(i,x).pipe((0,Ee.z)(U=>this.expandSegment(e,t,r,U.concat(I),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=S0(r,e),r.loadChildren?(r._loadedRoutes?nt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,rt.U)(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new Kt(i,{})))):nt(new Kt(i,{}))):Bp(t,r,i,e).pipe(M(({matched:l,consumedSegments:p,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Ee.z)(S=>{const x=S.injector??e,U=S.routes,{segmentGroup:H,slicedSegments:K}=yu(t,p,_,U),Te=new Kt(H.segments,H.children);if(0===K.length&&Te.hasChildren())return this.expandChildren(x,U,Te).pipe((0,rt.U)(ht=>new Kt(p,ht)));if(0===U.length&&0===K.length)return nt(new Kt(p,{}));const De=vs(r)===u;return this.expandSegment(x,Te,U,K,De?Ot:u,!0).pipe((0,rt.U)(vt=>new Kt(p.concat(vt.segments),vt.children)))})):Nh(t)))}getChildConfig(e,t,r){return t.children?nt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?nt({routes:t._loadedRoutes,injector:t._loadedInjector}):function NC(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?nt(!0):nt(i.map(l=>{const p=xh(l,n);return Ys(function wy(n){return n&&Ll(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(Vl(),ni())}(e,t,r).pipe((0,Ee.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,zt.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Ul(n){return fi(b0(Oh,3))}())):nt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return nt(r);if(i.numberOfChildren>1||!i.children[Ot])return fi(new d.vHH(4e3,Oh));i=i.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Ma(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return kn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let l={};return kn(t.children,(p,_)=>{l[_]=this.createSegmentGroup(e,p,r,i)}),new Kt(u,l)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Oh);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class MM{}class Zo{constructor(e,t,r,i,u,l,p,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=p,this.urlSerializer=_}recognize(){const e=yu(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ot).pipe((0,rt.U)(t=>{if(null===t)return null;const r=new Wo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new qo(r,t),u=new ly(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=xp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Jt.D)(Object.keys(r.children)).pipe(ct(i=>{const u=r.children[i],l=kp(t,i);return this.processSegmentGroup(e,l,u,i)}),Mi((i,u)=>i&&u?(i.push(...u),i):null),function Zs(n,e=!1){return(0,Qn.e)((t,r)=>{let i=0;t.subscribe((0,Yn.x)(r,u=>{const l=n(u,i++);(l||e)&&r.next(u),!l&&r.complete()}))})}(i=>null!==i),Ge(null),Ho(),(0,rt.U)(i=>{if(null===i)return null;const u=Ay(i);return function Sy(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,Jt.D)(t).pipe(ct(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,u)),Ct(l=>!!l),En(l=>{if(Lp(l))return P0(r,i,u)?nt([]):nt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!Cy(t,r,i,u))return nt(null);let l;if("**"===t.path){const p=i.length>0?ph(i).parameters:{},_=V0(r)+i.length;l=nt({snapshot:new Wo(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Hp(t),vs(t),t.component??t._loadedComponent??null,t,Bl(r),_,Gp(t),_),consumedSegments:[],remainingSegments:[]})}else l=Bp(r,t,i,e).pipe((0,rt.U)(({matched:p,consumedSegments:_,remainingSegments:I,parameters:S})=>{if(!p)return null;const x=V0(r)+_.length;return{snapshot:new Wo(_,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Hp(t),vs(t),t.component??t._loadedComponent??null,t,Bl(r),x,Gp(t),x),consumedSegments:_,remainingSegments:I}}));return l.pipe(M(p=>{if(null===p)return nt(null);const{snapshot:_,consumedSegments:I,remainingSegments:S}=p;e=t._injector??e;const x=t._loadedInjector??e,U=function Ty(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:H,slicedSegments:K}=yu(r,I,S,U.filter(De=>void 0===De.redirectTo),this.relativeLinkResolution);if(0===K.length&&H.hasChildren())return this.processChildren(x,U,H).pipe((0,rt.U)(De=>null===De?null:[new qo(_,De)]));if(0===U.length&&0===K.length)return nt([new qo(_,[])]);const Te=vs(t)===u;return this.processSegment(x,U,H,K,Te?Ot:u).pipe((0,rt.U)(De=>null===De?null:[new qo(_,De)]))}))}}function UC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ay(n){const e=[],t=new Set;for(const r of n){if(!UC(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Ay(r.children);e.push(new qo(r.value,i))}return e.filter(r=>!t.has(r))}function Bl(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function V0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Hp(n){return n.data||{}}function Gp(n){return n.resolve||{}}function zp(n){return"string"==typeof n.title||null===n.title}function My(n){return M(e=>{const t=n(e);return t?(0,Jt.D)(t).pipe((0,rt.U)(()=>e)):nt(e)})}let $0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Ot);return r}getResolvedTitleForRoute(t){return t.data[ti]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(H0)},providedIn:"root"}),n})(),H0=(()=>{class n extends $0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ci))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $C{}class G0 extends class HC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ph=new d.OlP("",{providedIn:"root",factory:()=>({})}),Oy=new d.OlP("ROUTES");let Ny=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return nt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ys(t.loadComponent()).pipe((0,zt.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Ri(()=>{this.componentLoaders.delete(t)})),i=new D(r,()=>new Br.x).pipe(C());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return nt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,rt.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,I,S=!1;Array.isArray(p)?I=p:(_=p.create(t).injector,I=yp(_.get(Oy,[],d.XFs.Self|d.XFs.Optional)));return{routes:I.map(my),injector:_}}),Ri(()=>{this.childrenLoaders.delete(r)})),l=new D(u,()=>new Br.x).pipe(C());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ys(t()).pipe((0,Ee.z)(r=>r instanceof d.YKP||Array.isArray(r)?nt(r):(0,Jt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class z0{}class q0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function W0(n){throw n}function Z0(n,e,t){return e.parse("/")}const GC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function K0(){const n=(0,d.f3M)(_h),e=(0,d.f3M)(Np),t=(0,d.f3M)(Ve),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),u=(0,d.f3M)(Oy,{optional:!0})??[],l=(0,d.f3M)(Ph,{optional:!0})??{},p=(0,d.f3M)(H0),_=(0,d.f3M)($0,{optional:!0}),I=(0,d.f3M)(z0,{optional:!0}),S=(0,d.f3M)($C,{optional:!0}),x=new Jn(null,n,e,t,r,i,yp(u));return I&&(x.urlHandlingStrategy=I),S&&(x.routeReuseStrategy=S),x.titleStrategy=_??p,function Wp(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,x),x}let Jn=(()=>{class n{constructor(t,r,i,u,l,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Br.x,this.errorHandler=W0,this.malformedUriErrorHandler=Z0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>nt(void 0),this.urlHandlingStrategy=new q0,this.routeReuseStrategy=new G0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(Ny),this.configLoader.onLoadEndListener=U=>this.triggerEvent(new m0(U)),this.configLoader.onLoadStartListener=U=>this.triggerEvent(new cy(U)),this.ngModule=l.get(d.h0i),this.console=l.get(d.c2e);const x=l.get(d.R0b);this.isNgZoneEnabled=x instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function _p(){return new Ma(new Kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Tp(this.currentUrlTree,this.rootComponentType),this.transitions=new gn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(re(i=>0!==i.id),(0,rt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),M(i=>{let u=!1,l=!1;return nt(i).pipe((0,zt.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),M(p=>{const _=this.browserUrlTree.toString(),I=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Py(p.source)&&(this.browserUrlTree=p.extractedUrl),nt(p).pipe(M(x=>{const U=this.transitions.getValue();return r.next(new ay(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),U!==this.transitions.getValue()?Ai.E:Promise.resolve(x)}),function VC(n,e,t,r){return M(i=>function Oa(n,e,t,r,i){return new LC(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,rt.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,zt.b)(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},i.urlAfterRedirects=x.urlAfterRedirects}),function B0(n,e,t,r,i,u){return(0,Ee.z)(l=>function RM(n,e,t,r,i,u,l="emptyOnly",p="legacy"){return new Zo(n,e,t,r,i,l,p,u).recognize().pipe(M(_=>null===_?function L0(n){return new Tn.y(e=>e.error(n))}(new MM):nt(_)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,u).pipe((0,rt.U)(p=>({...l,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,zt.b)(x=>{if(i.targetSnapshot=x.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(H,x)}this.browserUrlTree=x.urlAfterRedirects}const U=new yC(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(U)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:U,extractedUrl:H,source:K,restoredState:Te,extras:De}=p,ot=new ay(U,this.serializeUrl(H),K,Te);r.next(ot);const vt=Tp(H,this.rootComponentType).snapshot;return nt(i={...p,targetSnapshot:vt,urlAfterRedirects:H,extras:{...De,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),Ai.E}),(0,zt.b)(p=>{const _=new EM(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,rt.U)(p=>i={...p,guards:TM(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function TC(n,e){return(0,Ee.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?nt({...t,guardsResult:!0}):function AC(n,e,t,r){return(0,Jt.D)(n).pipe((0,Ee.z)(i=>function OC(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?nt(u.map(p=>{const _=Fp(e)??i,I=xh(p,_);return Ys(function Rh(n){return n&&Ll(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):_.runInContext(()=>I(n,e,t,r))).pipe(Ct())})).pipe(Vl()):nt(!0)}(i.component,i.route,t,e,r)),Ct(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Ee.z)(p=>p&&function M0(n){return"boolean"==typeof n}(p)?function Iy(n,e,t,r){return(0,Jt.D)(e).pipe(ct(i=>Xr(function MC(n,e){return null!==n&&e&&e(new y0(n)),nt(!0)}(i.route.parent,r),function xC(n,e){return null!==n&&e&&e(new _0(n)),nt(!0)}(i.route,r),function R0(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function AM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>ei(()=>nt(l.guards.map(_=>{const I=Fp(l.node)??t,S=xh(_,I);return Ys(function Ey(n){return n&&Ll(n.canActivateChild)}(S)?S.canActivateChild(r,n):I.runInContext(()=>S(r,n))).pipe(Ct())})).pipe(Vl())));return nt(u).pipe(Vl())}(n,i.path,t),function RC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return nt(!0);const i=r.map(u=>ei(()=>{const l=Fp(e)??t,p=xh(u,l);return Ys(function CC(n){return n&&Ll(n.canActivate)}(p)?p.canActivate(e,n):l.runInContext(()=>p(e,n))).pipe(Ct())}));return nt(i).pipe(Vl())}(n,i.route,t))),Ct(i=>!0!==i,!0))}(r,u,n,e):nt(p)),(0,rt.U)(p=>({...t,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,zt.b)(p=>{if(i.guardsResult=p.guardsResult,P(p.guardsResult))throw Op(0,p.guardsResult);const _=new IM(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),re(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),My(p=>{if(p.guards.canActivateChecks.length)return nt(p).pipe((0,zt.b)(_=>{const I=new Dh(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}),M(_=>{let I=!1;return nt(_).pipe(function OM(n,e){return(0,Ee.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return nt(t);let u=0;return(0,Jt.D)(i).pipe(ct(l=>function jl(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!zp(i)&&(u[ti]=i.title),function xy(n,e,t,r){const i=function j0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return nt({});const u={};return(0,Jt.D)(i).pipe((0,Ee.z)(l=>function jC(n,e,t,r){const i=Fp(e)??r,u=xh(n,i);return Ys(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Ct(),(0,zt.b)(p=>{u[l]=p}))),pi(1),function Ks(n){return(0,rt.U)(()=>n)}(u),En(l=>Lp(l)?Ai.E:fi(l)))}(u,n,e,r).pipe((0,rt.U)(l=>(n._resolvedData=l,n.data=xp(n,t).resolve,i&&zp(i)&&(n.data[ti]=i.title),null)))}(l.route,r,n,e)),(0,zt.b)(()=>u++),pi(1),(0,Ee.z)(l=>u===i.length?nt(t):Ai.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,zt.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,zt.b)(_=>{const I=new uy(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}))}),My(p=>{const _=I=>{const S=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,zt.b)(x=>{I.component=x}),(0,rt.U)(()=>{})));for(const x of I.children)S.push(..._(x));return S};return Cl(_(p.targetSnapshot.root)).pipe(Ge(),L(1))}),My(()=>this.afterPreactivation()),(0,rt.U)(p=>{const _=function Pl(n,e,t){const r=Ah(n,e._root,t?t._root:void 0);return new E0(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return i={...p,targetRouterState:_}}),(0,zt.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,rt.U)(r=>(new yy(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,zt.b)({next(){u=!0},complete(){u=!0}}),Ri(()=>{u||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),En(p=>{if(l=!0,C0(p)){fy(p)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new Cp(i.id,this.serializeUrl(i.extractedUrl),p.message,p.cancellationCode);if(r.next(_),fy(p)){const I=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Py(i.source)};this.scheduleNavigation(I,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new g0(i.id,this.serializeUrl(i.extractedUrl),p,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(p))}catch(I){i.reject(I)}}return Ai.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const p={...u};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(my),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:l,queryParamsHandling:p,preserveFragment:_}=r,I=i||this.routerState.root,S=_?this.currentUrlTree.fragment:l;let x=null;switch(p){case"merge":x={...this.currentUrlTree.queryParams,...u};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),Wt(I,this.currentUrlTree,t,x,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=P(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Y0(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...GC}:!1===r?{...PM}:r,P(t))return ny(this.currentUrlTree,t,i);const u=this.parseUrl(t);return ny(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new _c(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,l){if(this.disposed)return Promise.resolve(!1);let p,_,I;l?(p=l.resolve,_=l.reject,I=l.promise):I=new Promise((U,H)=>{p=U,_=H});const S=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:S,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:p,reject:_,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(U=>Promise.reject(U))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new Cp(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return K0()},providedIn:"root"}),n})();function Py(n){return"imperative"!==n}let $l=(()=>{class n{constructor(t,r,i,u,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Br.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jn),d.Y36(vc),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),Zp=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Br.x,this.subscription=t.events.subscribe(u=>{u instanceof _c&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,l){return!!(0!==t||r||i||u||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jn),d.Y36(vc),d.Y36(ve))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),kh=(()=>{class n{constructor(t,r,i,u,l,p){this.router=t,this.element=r,this.renderer=i,this.cdr=u,this.link=l,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(_=>{_ instanceof _c&&this.update()})}ngAfterContentInit(){nt(this.links.changes,this.linksWithHrefs.changes,nt(null)).pipe((0,qs.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Jt.D)(t).pipe((0,qs.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Kp(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jn),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36($l,8),d.Y36(Zp,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,$l,5),d.Suo(i,Zp,5)),2&t){let u;d.iGM(u=d.CRH())&&(r.links=u),d.iGM(u=d.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]}),n})();class ky{}let Fy=(()=>{class n{constructor(t,r,i,u,l){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(re(t=>t instanceof _c),ct(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,p=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(p,u.children??u._loadedRoutes))}return(0,Jt.D)(i).pipe((0,qs.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):nt(null);const u=i.pipe((0,Ee.z)(l=>null===l?nt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Jt.D)([u,l]).pipe((0,qs.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Jn),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(ky),d.LFG(Ny))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ic=new d.OlP("");let J0=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ay?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _c&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Dp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Dp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function bc(n,e){return{\u0275kind:n,\u0275providers:e}}function Lh(n){return[{provide:Oy,multi:!0,useValue:n}]}function WC(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Jn),i=n.get(Ly);1===n.get(Vy)&&r.initialNavigation(),n.get(ws,null,d.XFs.Optional)?.setUpPreloading(),n.get(Ic,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const Ly=new d.OlP("",{factory:()=>new Br.x}),Vy=new d.OlP("",{providedIn:"root",factory:()=>1});const ws=new d.OlP("");function YC(n){return bc(0,[{provide:ws,useExisting:Fy},{provide:ky,useExisting:n}])}const tE=new d.OlP("ROUTER_FORROOT_GUARD"),JC=[Ve,{provide:_h,useClass:gu},{provide:Jn,useFactory:K0},Np,{provide:vc,useFactory:function X0(n){return n.routerState.root},deps:[Jn]},Ny];function nE(){return new d.PXZ("Router",Jn)}let rE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[JC,[],Lh(t),{provide:tE,useFactory:iE,deps:[[Jn,new d.FiY,new d.tp0]]},{provide:Ph,useValue:r||{}},r?.useHash?{provide:ve,useClass:Qe}:{provide:ve,useClass:Xe},{provide:Ic,useFactory:()=>{const n=(0,d.f3M)(Jn),e=(0,d.f3M)(ol),t=(0,d.f3M)(Ph);return t.scrollOffset&&e.setOffset(t.scrollOffset),new J0(n,e,t)}},r?.preloadingStrategy?YC(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:nE},r?.initialNavigation?sE(r):[],[{provide:Uy,useFactory:WC},{provide:d.tb,multi:!0,useExisting:Uy}]]}}static forChild(t){return{ngModule:n,providers:[Lh(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(tE,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ec]}),n})();function iE(n){return"guarded"}function sE(n){return["disabled"===n.initialNavigation?bc(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Jn);return()=>{e.setUpLocationChangeListener()}}},{provide:Vy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?bc(2,[{provide:Vy,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(G,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const l=e.get(Jn),p=e.get(Ly);(function i(u){e.get(Jn).events.pipe(re(p=>p instanceof _c||p instanceof Cp||p instanceof g0),(0,rt.U)(p=>p instanceof _c||p instanceof Cp&&(0===p.code||1===p.code)&&null),re(p=>null!==p),L(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),l.afterPreactivation=()=>(u(!0),r||p.closed?nt(void 0):p),l.initialNavigation()}))}}]).\u0275providers:[]]}const Uy=new d.OlP("");var ln=F(655),nD=F(6063);class By extends Br.x{constructor(e=1/0,t=1/0,r=nD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!i&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const l=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)p=_;p&&r.splice(0,p+1)}}}let jy=(()=>{class n{constructor(){this.bootstrap$=new By(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function UM(n,e){return n===e}function oE(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const r=e.length;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function Qp(n,e=UM){let t=null,r=null;function i(){return oE(e,t,arguments)||(r=n.apply(null,arguments)),t=arguments,r}return i.reset=function(){t=null,r=null},i}const Na=new d.OlP("INITIAL_STATE_TOKEN");let rD=(()=>{class n{static set(t){this.value=t}static pop(){const t=this.value;return this.value={},t}}return n.value={},n})();const $y=new d.OlP("Internals.StateContextFactory"),Hy=new d.OlP("Internals.StateFactory");function Gy(...n){const e=(0,Xi.jO)(n),{args:t,keys:r}=ts(n),i=new Tn.y(u=>{const{length:l}=t;if(!l)return void u.complete();const p=new Array(l);let _=l,I=l;for(let S=0;S<l;S++){let x=!1;(0,Ti.Xf)(t[S]).subscribe((0,Yn.x)(u,U=>{x||(x=!0,I--),p[S]=U},()=>_--,void 0,()=>{(!_||!x)&&(I||u.next(r?bl(r,p):p),u.complete())}))}});return e?i.pipe(fh(e)):i}var BM=F(233),jM=F(3099);function Hl(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,jM.B)({connector:()=>new By(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function aE(n,e){return e?t=>t.pipe(aE((r,i)=>(0,Ti.Xf)(n(r,i)).pipe((0,rt.U)((u,l)=>e(r,u,i,l))))):(0,Qn.e)((t,r)=>{let i=0,u=null,l=!1;t.subscribe((0,Yn.x)(r,p=>{u||(u=(0,Yn.x)(r,void 0,()=>{u=null,l&&r.complete()}),(0,Ti.Xf)(n(p,i++)).subscribe(u))},()=>{l=!0,!u&&r.complete()}))})}var uE=F(5032);function $M(n){return(0,Qn.e)((e,t)=>{(0,Ti.Xf)(n).subscribe((0,Yn.x)(t,()=>t.complete(),uE.Z)),!t.closed&&e.subscribe(t)})}var Vh=F(5363);function Cc(n,e=gs.y){return n=n??iD,(0,Qn.e)((t,r)=>{let i,u=!0;t.subscribe((0,Yn.x)(r,l=>{const p=e(l);(u||!n(i,p))&&(u=!1,i=p,r.next(l))}))})}function iD(n,e){return n===e}class eo{constructor(e,t){this._ngZone=e,this._platformId=t}enter(e){return Us(this._platformId)?this.runInsideAngular(e):this.runOutsideAngular(e)}leave(e){return this.runInsideAngular(e)}runInsideAngular(e){return d.R0b.isInAngularZone()?e():this._ngZone.run(e)}runOutsideAngular(e){return d.R0b.isInAngularZone()?this._ngZone.runOutsideAngular(e):e()}}eo.\u0275fac=function(e){return new(e||eo)(d.LFG(d.R0b),d.LFG(d.Lbi))},eo.\u0275prov=d.Yz7({token:eo,factory:eo.\u0275fac,providedIn:"root"}),eo.ngInjectableDef=(0,d.Ez6)({factory:function(){return new eo((0,d.f3M)(d.R0b),(0,d.f3M)(d.Lbi))},token:eo,providedIn:"root"});const Xp=new d.OlP("ROOT_STATE_TOKEN"),dD=new d.OlP("FEATURE_STATE_TOKEN"),zy=new d.OlP("NGXS_PLUGINS"),Pa="NGXS_META",hD="NGXS_OPTIONS_META",_u="NGXS_SELECTOR_META";let Dc=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=eo}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class hE{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}}class to{enter(e){return e()}leave(e){return e()}}to.\u0275fac=function(e){return new(e||to)},to.\u0275prov=d.Yz7({token:to,factory:to.\u0275fac,providedIn:"root"}),to.ngInjectableDef=(0,d.Ez6)({factory:function(){return new to},token:to,providedIn:"root"});const Wy=new d.OlP("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),Zy=new d.OlP("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const n=(0,d.f3M)(d.gxx),e=n.get(Wy);return n.get(e||(typeof d.dqk.Zone<"u"?eo:to))}});function Gl(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const Uh=(n,e,t)=>{n=Object.assign({},n);const r=e.split("."),i=r.length-1;return r.reduce((u,l,p)=>(u[l]=p===i?t:Array.isArray(u[l])?u[l].slice():Object.assign({},u[l]),u&&u[l]),n),n},Sc=(n,e)=>e.split(".").reduce((t,r)=>t&&t[r],n),Bh=n=>n&&"object"==typeof n&&!Array.isArray(n),jh=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(Bh(n)&&Bh(t))for(const r in t)Bh(t[r])?(n[r]||Object.assign(n,{[r]:{}}),jh(n[r],t[r])):Object.assign(n,{[r]:t[r]});return jh(n,...e)};function gE(n){if(!n.hasOwnProperty(Pa)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,Pa,{value:e})}return Tc(n)}function Tc(n){return n[Pa]}function Ky(n){return n[_u]}function gD(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function Yy(n){const e=n.slice();return t=>e.reduce((r,i)=>r&&r[i],t)}(n):function QM(n){const e=n;let t="store."+e[0],r=0;const i=e.length;let u=t;for(;++r<i;)u=u+" && "+(t=t+"."+e[r]);return new Function("store","return "+u+";")}(n)}function mD(n,e){const t=Sc(e.currentAppState,n.path),r=Sc(e.newAppState,n.path);return new hE(t,r,!n.isInitialised)}function wu(...n){return function Ac(n,e,t=Eu){const r=function wD(n){return n.reduce((e,t)=>(e[Gl(t)]=!0,e),{})}(n),i=e&&function ED(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(u){return u.pipe(function Qy(n,e){return re(t=>{const r=Gl(t.action);return n[r]&&(!e||e[t.status])})}(r,i),t())}}(n,["DISPATCHED"])}function Eu(){return(0,rt.U)(n=>n.action)}function zl(n){return e=>new Tn.y(t=>e.subscribe({next(r){n.leave(()=>t.next(r))},error(r){n.leave(()=>t.error(r))},complete(){n.leave(()=>t.complete())}}))}let tg=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ql extends Br.x{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(e){if(this._busyPushingNext)this._itemQueue.unshift(e);else{for(this._busyPushingNext=!0,super.next(e);this._itemQueue.length>0;){const t=this._itemQueue.pop();super.next(t)}this._busyPushingNext=!1}}}let Wl=(()=>{class n extends ql{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Zl=(()=>{class n extends Tn.y{constructor(t,r){super(i=>{const u=t.pipe(zl(r)).subscribe({next:l=>i.next(l),error:l=>i.error(l),complete:()=>i.complete()});i.add(u)})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Wl),d.LFG(tg))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ng=n=>(...e)=>n.shift()(...e,(...r)=>ng(n)(...r));let xc=(()=>{class n extends gn{constructor(){super({})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),rg=(()=>{class n{constructor(t,r){this._parentManager=t,this._pluginHandlers=r,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(r=>r.handle?r.handle.bind(r):r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12),d.LFG(zy,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ig=(()=>{class n extends Br.x{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),sg=(()=>{class n{constructor(t,r,i,u,l,p){this._injector=t,this._actions=r,this._actionResults=i,this._pluginManager=u,this._stateStream=l,this._ngxsExecutionStrategy=p}dispatch(t){const r=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t));return r.subscribe({error:i=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(d.qLn),this._errorHandler.handleError(i)}catch{}})}),r.pipe(zl(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?nt(this._stateStream.getValue()):Gy(t.map(r=>this.dispatchSingle(r))):this.dispatchSingle(t)}dispatchSingle(t){const r=this._stateStream.getValue();return ng([...this._pluginManager.plugins,(u,l)=>{u!==r&&this._stateStream.next(u);const p=this.getActionResultStream(l);return p.subscribe(_=>this._actions.next(_)),this._actions.next({action:l,status:"DISPATCHED"}),this.createDispatchObservable(p)}])(r,t).pipe(Hl())}getActionResultStream(t){return this._actionResults.pipe(re(r=>r.action===t&&"DISPATCHED"!==r.status),L(1),Hl())}createDispatchObservable(t){return t.pipe(aE(r=>{switch(r.status){case"SUCCESSFUL":return nt(this._stateStream.getValue());case"ERRORED":return fi(r.error);default:return Ai.E}})).pipe(Hl())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(Wl),d.LFG(ig),d.LFG(rg),d.LFG(xc),d.LFG(tg))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Mc=(()=>{class n{constructor(t,r,i){this._stateStream=t,this._dispatcher=r,this._config=i}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:r=>this._stateStream.next(r),dispatch:r=>this._dispatcher.dispatch(r)}}setStateToTheCurrentWithNew(t){const r=this.getRootStateOperations(),i=r.getState();r.setState(Object.assign({},i,t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xc),d.LFG(sg),d.LFG(Dc))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();let Xy=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const r=this._internalStateOperations.getRootStateOperations();function i(_){return Sc(_,t.path)}function u(_,I){const S=Uh(_,t.path,I),x=t.instance;if(x.ngxsOnChanges){const U=mD(t,{currentAppState:_,newAppState:S});x.ngxsOnChanges(U)}return r.setState(S),S}function l(_,I){return u(_,I(i(_)))}return{getState:()=>i(r.getState()),patchState:_=>l(r.getState(),function ID(n){return e=>{Array.isArray(n)?function dE(){throw new Error("Patching arrays is not supported.")}():"object"!=typeof n&&function cD(){throw new Error("Patching primitives is not supported.")}();const t=Object.assign({},e);for(const r in n)t[r]=n[r];return t}}(_)),setState(_){const I=r.getState();return function p(_){return"function"==typeof _}(_)?l(I,_):u(I,_)},dispatch:_=>r.dispatch(_)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Mc))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();new RegExp("^[a-zA-Z0-9_]+$");let Kl=(()=>{class n{constructor(t,r,i,u,l,p,_){this._injector=t,this._config=r,this._parentFactory=i,this._actions=u,this._actionResults=l,this._stateContextFactory=p,this._initialState=_,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=Qp(()=>{const I=this;function S(U){const H=I.statePaths[U];return H?gD(H.split("."),I._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(U){let H=S(U);return H||((...K)=>(H||(H=S(U)),H?H(...K):void 0))},getSelectorOptions:U=>Object.assign({},I._config.selectorOptions,U||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let r={};return r=Array.isArray(t)?t.slice():function nR(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?Object.assign({},t):void 0===t?{}:t,r}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(t){const{newStates:r}=this.addToStatesMap(t);if(!r.length)return[];const i=function JM(n){const e=t=>n.find(i=>i===t)[Pa].name;return n.reduce((t,r)=>{const{name:i,children:u}=r[Pa];return t[i]=(u||[]).map(e),t},{})}(r),u=function tR(n){const e=[],t={},r=(i,u=[])=>{Array.isArray(u)||(u=[]),u.push(i),t[i]=!0,n[i].forEach(l=>{t[l]||r(l,u.slice(0))}),e.indexOf(i)<0&&e.push(i)};return Object.keys(n).forEach(i=>r(i)),e.reverse()}(i),l=function eR(n,e={}){const t=(r,i)=>{for(const u in r)if(r.hasOwnProperty(u)&&r[u].indexOf(i)>=0){const l=t(r,u);return null!==l?`${l}.${u}`:u}return null};for(const r in n)if(n.hasOwnProperty(r)){const i=t(n,r);e[r]=i?`${i}.${r}`:r}return e}(i),p=function XM(n){return n.reduce((e,t)=>(e[t[Pa].name]=t,e),{})}(r),_=[];for(const I of u){const S=p[I],x=l[I],U=S[Pa];this.addRuntimeInfoToMeta(U,x);const H={name:I,path:x,isInitialised:!1,actions:U.actions,instance:this._injector.get(S),defaults:n.cloneDefaults(U.defaults)};this.hasBeenMountedAndBootstrapped(I,x)||_.push(H),this.states.push(H)}return _}addAndReturnDefaults(t){const i=this.add(t||[]);return{defaults:i.reduce((l,p)=>Uh(l,p.path,p.defaults),{}),states:i}}connectActionHandlers(){if(null!==this._actionsSubscription)return;const t=new Br.x;this._actionsSubscription=this._actions.pipe(re(r=>"DISPATCHED"===r.status),(0,Ee.z)(r=>{t.next(r);const i=r.action;return this.invokeActions(t,i).pipe((0,rt.U)(()=>({action:i,status:"SUCCESSFUL"})),Ge({action:i,status:"CANCELED"}),En(u=>nt({action:i,status:"ERRORED",error:u})))})).subscribe(r=>this._actionResults.next(r))}invokeActions(t,r){const i=Gl(r),u=[];for(const l of this.states){const p=l.actions[i];if(p)for(const _ of p){const I=this._stateContextFactory.createStateContext(l);try{let S=l.instance[_.fn](I,r);S instanceof Promise&&(S=(0,Jt.D)(S)),S instanceof Tn.y?(S=S.pipe((0,Ee.z)(x=>x instanceof Promise?(0,Jt.D)(x):x instanceof Tn.y?x:nt(x)),Ge({})),_.options.cancelUncompleted&&(S=S.pipe($M(t.pipe(wu(r)))))):S=nt({}).pipe(Hl()),u.push(S)}catch(S){u.push(fi(S))}}}return u.length||u.push(nt({})),Gy(u)}addToStatesMap(t){const r=[],i=this.statesByName;for(const u of t){const l=Tc(u).name;!i[l]&&(r.push(u),i[l]=u)}return{newStates:r}}addRuntimeInfoToMeta(t,r){this.statePaths[t.name]=r,t.path=r}hasBeenMountedAndBootstrapped(t,r){const i=void 0!==Sc(this._initialState,r);return this.statesByName[t]&&i}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(Dc),d.LFG(n,12),d.LFG(Wl),d.LFG(ig),d.LFG(Xy),d.LFG(Na,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ag=(()=>{class n{constructor(t,r,i){this.internalStateOperations=t,this.stateContextFactory=r,this.bootstrapper=i}ngxsBootstrap(t,r){this.internalStateOperations.getRootStateOperations().dispatch(t).pipe(re(()=>!!r),(0,zt.b)(()=>this.invokeInit(r.states)),(0,Ee.z)(()=>this.bootstrapper.appBootstrapped$),re(i=>!!i)).subscribe(()=>this.invokeBootstrap(r.states))}invokeInit(t){for(const r of t){const i=r.instance;if(i.ngxsOnChanges){const p=mD(r,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});i.ngxsOnChanges(p)}i.ngxsOnInit&&i.ngxsOnInit(this.getStateContext(r)),r.isInitialised=!0}}invokeBootstrap(t){for(const r of t){const i=r.instance;i.ngxsAfterBootstrap&&i.ngxsAfterBootstrap(this.getStateContext(r))}}getStateContext(t){return this.stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Mc),d.LFG(Xy),d.LFG(jy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ug_getOptions=n=>n&&n.NGXS_SELECTOR_OPTIONS_META||{};function SD(n,e,t){const r=t&&t.containerClass,u=Qp(function(...I){const S=e.apply(r,I);return S instanceof Function?Qp.apply(null,[S]):S});Object.setPrototypeOf(u,e);const l=function sR(n,e){const t=function eg(n){return n.hasOwnProperty(_u)||Object.defineProperty(n,_u,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),Ky(n)}(n);t.originalFn=n;let r=()=>({});e&&(t.containerClass=e.containerClass,t.selectorName=e.selectorName,r=e.getSelectorOptions||r);const i=Object.assign({},t);return t.getSelectorOptions=()=>function t_(n,e){return Object.assign({},ug_getOptions(n.containerClass)||{},ug_getOptions(n.originalFn)||{},n.getSelectorOptions()||{},e)}(i,r()),t}(e,t);return l.makeRootSelector=_=>{const{argumentSelectorFunctions:I,selectorOptions:S}=function TD(n,e,t=[]){const r=e.getSelectorOptions(),i=n.getSelectorOptions(r),l=function vE(n=[],e,t){const r=[];return t&&(0===n.length||e.injectContainerState)&&Tc(t)&&r.push(t),n&&r.push(...n),r}(t,i,e.containerClass).map(p=>wE(p)(n));return{selectorOptions:i,argumentSelectorFunctions:l}}(_,l,n);return function(U){const H=I.map(K=>K(U));try{return u(...H)}catch(K){if(K instanceof TypeError&&S.suppressErrors)return;throw K}}},u}function wE(n){const e=Ky(n)||Tc(n);return e&&e.makeRootSelector||(()=>n)}let xr=(()=>{class n{constructor(t,r,i,u,l,p){this._stateStream=t,this._internalStateOperations=r,this._config=i,this._internalExecutionStrategy=u,this._stateFactory=l,this._selectableStateStream=this._stateStream.pipe((0,Vh.Q)(BM.N),zl(this._internalExecutionStrategy),Hl({bufferSize:1,refCount:!0})),this.initStateStream(p)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const r=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe((0,rt.U)(r),En(i=>{const{suppressErrors:u}=this._config.selectorOptions;return i instanceof TypeError&&u?nt(void 0):fi(i)}),Cc(),zl(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(L(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._selectableStateStream.pipe(zl(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return wE(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const r=this._stateStream.value;if(!r||0===Object.keys(r).length){const l=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,t):t;this._stateStream.next(l)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xc),d.LFG(Mc),d.LFG(Dc),d.LFG(tg),d.LFG(Kl),d.LFG(Na,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),$h=(()=>{class n{constructor(t,r){n.store=t,n.config=r}ngOnDestroy(){n.store=null,n.config=null}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xr),d.LFG(Dc))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n.store=null,n.config=null,n})();class EE{static get type(){return"@@INIT"}}class AD{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}let IE=(()=>{class n{constructor(t,r,i,u,l=[],p){const _=t.addAndReturnDefaults(l);r.setStateToTheCurrentWithNew(_),t.connectActionHandlers(),p.ngxsBootstrap(new EE,_)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Kl),d.LFG(Mc),d.LFG(xr),d.LFG($h),d.LFG(Xp,8),d.LFG(ag))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),xD=(()=>{class n{constructor(t,r,i,u=[],l){const p=n.flattenStates(u),_=i.addAndReturnDefaults(p);_.states.length&&(r.setStateToTheCurrentWithNew(_),l.ngxsBootstrap(new AD(_.defaults),_))}static flattenStates(t=[]){return t.reduce((r,i)=>r.concat(i),[])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xr),d.LFG(Mc),d.LFG(Kl),d.LFG(dD,8),d.LFG(ag))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();class Pi{static forRoot(e=[],t={}){return{ngModule:IE,providers:[Kl,Xy,Zl,Wl,jy,ag,sg,ig,Mc,tg,xr,xc,$h,rg,...e,...Pi.ngxsTokenProviders(e,t)]}}static forFeature(e=[]){return{ngModule:xD,providers:[Kl,rg,...e,{provide:dD,multi:!0,useValue:e}]}}static ngxsTokenProviders(e,t){return[{provide:Wy,useValue:t.executionStrategy},{provide:Xp,useValue:e},{provide:Pi.ROOT_OPTIONS,useValue:t},{provide:Dc,useFactory:Pi.ngxsConfigFactory,deps:[Pi.ROOT_OPTIONS]},{provide:d.tb,useFactory:Pi.appBootstrapListenerFactory,multi:!0,deps:[jy]},{provide:Na,useFactory:Pi.getInitialState},{provide:$y,useExisting:Xy},{provide:Hy,useExisting:Kl}]}static ngxsConfigFactory(e){return jh(new Dc,e)}static appBootstrapListenerFactory(e){return()=>e.bootstrap()}static getInitialState(){return rD.pop()}}function ri(n,e){return(t,r)=>{const i=gE(t.constructor);Array.isArray(n)||(n=[n]);for(const u of n){const l=u.type;i.actions[l]||(i.actions[l]=[]),i.actions[l].push({fn:r,options:e||{},type:l})}}}function Hh(n){return r=>{const i=r,u=gE(i),l=Object.getPrototypeOf(i),p=function e(r){return Object.assign({},r[hD]||{},n)}(l);(function t(r){const{meta:i,inheritedStateClass:u,optionsWithInheritance:l}=r,{children:p,defaults:_,name:I}=l,S="string"==typeof I?I:I&&I.getName()||null;u.hasOwnProperty(Pa)&&(i.actions=Object.assign({},i.actions,(u[Pa]||{}).actions)),i.children=p,i.defaults=_,i.name=S})({meta:u,inheritedStateClass:l,optionsWithInheritance:p}),i[hD]=p}}function ka(n,...e){return function(t,r){const i=r.toString(),u=`__${i}__selector`,l=function RD(n,e,t=[]){return e=e||function OD(n){const e=n.length-1;return 36===n.charCodeAt(e)?n.slice(0,e):n}(n),"string"==typeof e?gD(t.length?[e,...t]:e.split("."),$h.config):e}(i,n,e);Object.defineProperties(t,{[u]:{writable:!0,enumerable:!1,configurable:!0},[i]:{enumerable:!0,configurable:!0,get(){return this[u]||(this[u]=function n_(n){return $h.store||function uD(){throw new Error("You have forgotten to import the NGXS module!")}(),$h.store.select(n)}(l))}}})}}var gi,n,ii;Pi.\u0275fac=function(e){return new(e||Pi)},Pi.\u0275mod=d.oAB({type:Pi}),Pi.\u0275inj=d.cJS({}),Pi.ROOT_OPTIONS=new d.OlP("ROOT_OPTIONS"),(n=gi||(gi={})).Fetch=(()=>{class i{constructor(){}}return i.type="[Categories] Fetch",i})(),n.Add=(()=>{class i{constructor(l){this.payload=l}}return i.type="[Categories] Add",i})(),n.Remove=(()=>{class i{constructor(l){this.payload=l}}return i.type="[Categories] Remove",i})(),function(n){n.Show=(()=>{class r{constructor(u){this.payload=u}}return r.type="[Modal] Show",r})(),n.Hide=(()=>{class r{constructor(){}}return r.type="[Modal] Hide",r})()}(ii||(ii={}));let lg=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Yl=(()=>{class n extends lg{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const no=new d.OlP("NgValueAccessor"),SE={provide:no,useExisting:(0,d.Gpc)(()=>Jo),multi:!0},Fa=new d.OlP("CompositionEventMode");let Jo=(()=>{class n extends lg{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function i_(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Fa,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([SE]),d.qOj]}),n})();function Is(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function TE(n){return null!=n&&"number"==typeof n.length}const Mr=new d.OlP("NgValidators"),La=new d.OlP("NgAsyncValidators"),PD=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class hg{static min(e){return Ql(e)}static max(e){return function AE(n){return e=>{if(Is(e.value)||Is(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function kD(n){return Is(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function xE(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function FD(n){return Is(n.value)||PD.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function ME(n){return e=>Is(e.value)||!TE(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function RE(n){return e=>TE(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function OE(n){if(!n)return Gh;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Is(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return FE(e)}static composeAsync(e){return LE(e)}}function Ql(n){return e=>{if(Is(e.value)||Is(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Gh(n){return null}function fg(n){return null!=n}function NE(n){return(0,d.QGY)(n)?(0,Jt.D)(n):n}function pg(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function PE(n,e){return e.map(t=>t(n))}function kE(n){return n.map(e=>function LD(n){return!n.validate}(e)?e:t=>e.validate(t))}function FE(n){if(!n)return null;const e=n.filter(fg);return 0==e.length?null:function(t){return pg(PE(t,e))}}function s_(n){return null!=n?FE(kE(n)):null}function LE(n){if(!n)return null;const e=n.filter(fg);return 0==e.length?null:function(t){return Gy(PE(t,e).map(NE)).pipe((0,rt.U)(pg))}}function Jl(n){return null!=n?LE(kE(n)):null}function Iu(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function VD(n){return n._rawValidators}function Xl(n){return n._rawAsyncValidators}function o_(n){return n?Array.isArray(n)?n:[n]:[]}function gg(n,e){return Array.isArray(n)?n.includes(e):n===e}function mg(n,e){const t=o_(e);return o_(n).forEach(i=>{gg(t,i)||t.push(i)}),t}function VE(n,e){return o_(e).filter(t=>!gg(n,t))}class ro{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=s_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Jl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vr extends ro{get formDirective(){return null}get path(){return null}}class Xn extends ro{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bu{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Rc=(()=>{class n extends bu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Xn,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),Oc=(()=>{class n extends bu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(vr,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const Zh="VALID",Kh="INVALID",nd="PENDING",Yh="DISABLED";function Qh(n){return(Nc(n)?n.validators:n)||null}function yg(n){return Array.isArray(n)?s_(n):n||null}function l_(n,e){return(Nc(e)?e.asyncValidators:n)||null}function Jh(n){return Array.isArray(n)?Jl(n):n||null}function Nc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class vg{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=yg(this._rawValidators),this._composedAsyncValidatorFn=Jh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Zh}get invalid(){return this.status===Kh}get pending(){return this.status==nd}get disabled(){return this.status===Yh}get enabled(){return this.status!==Yh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=yg(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Jh(e)}addValidators(e){this.setValidators(mg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VE(e,this._rawAsyncValidators))}hasValidator(e){return gg(this._rawValidators,e)}hasAsyncValidator(e){return gg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=nd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yh,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zh,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zh||this.status===nd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yh:Zh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=nd,this._hasOwnPendingAsyncValidator=!0;const t=NE(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Yh:this.errors?Kh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nd)?nd:this._anyControlsHaveStatus(Kh)?Kh:Zh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class rd extends vg{constructor(e,t,r){super(Qh(t),l_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function HE(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function _g(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Xh(n,e){return[...e.path,n]}function Pc(n,e){Eg(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function zE(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qE(n,e)})}(n,e),function WD(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function qD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function GE(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ef(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),tf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function wg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Eg(n,e){const t=VD(n);null!==e.validator?n.setValidators(Iu(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Xl(n);null!==e.asyncValidator?n.setAsyncValidators(Iu(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();wg(e._rawValidators,i),wg(e._rawAsyncValidators,i)}function tf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=VD(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=Xl(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return wg(e._rawValidators,r),wg(e._rawAsyncValidators,r),t}function qE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ig(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function bg(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Jo?t=u:function ZE(n){return Object.getPrototypeOf(n.constructor)===Yl}(u)?r=u:i=u}),i||r||t||null}function hr(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function y_(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const kc=class extends vg{constructor(e=null,t,r){super(Qh(t),l_(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=y_(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hr(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hr(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){y_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},eS={provide:Xn,useExisting:(0,d.Gpc)(()=>Cg)},v_=(()=>Promise.resolve())();let Cg=(()=>{class n extends Xn{constructor(t,r,i,u,l){super(),this._changeDetectorRef=l,this.control=new kc,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=bg(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Ig(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Pc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){v_.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);v_.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Xh(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(vr,9),d.Y36(Mr,10),d.Y36(La,10),d.Y36(no,10),d.Y36(d.sBO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([eS]),d.qOj,d.TTD]}),n})(),w_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const E_={provide:no,useExisting:(0,d.Gpc)(()=>bs),multi:!0};let bs=(()=>{class n extends Yl{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([E_]),d.qOj]}),n})(),so=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const b_=new d.OlP("NgModelWithFormControlWarning"),rS={provide:vr,useExisting:(0,d.Gpc)(()=>sd)};let sd=(()=>{class n extends vr{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Pc(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ef(t.control||null,t,!1),function dR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function g_(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ef(r||null,t),(n=>n instanceof kc)(i)&&(Pc(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function h_(n,e){Eg(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function f_(n,e){return tf(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Eg(this.form,this),this._oldForm&&tf(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Mr,10),d.Y36(La,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([rS]),d.qOj,d.TTD]}),n})();const eI={provide:Xn,useExisting:(0,d.Gpc)(()=>od)};let od=(()=>{class n extends Xn{constructor(t,r,i,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=bg(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Ig(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Xh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(vr,13),d.Y36(Mr,10),d.Y36(La,10),d.Y36(no,10),d.Y36(b_,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([eI]),d.qOj,d.TTD]}),n})();let Fc=(()=>{class n{constructor(){this._validator=Gh}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Gh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const aS={provide:Mr,useExisting:(0,d.Gpc)(()=>O_),multi:!0};let O_=(()=>{class n extends Fc{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function R_(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>Ql(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[d._Bn([aS]),d.qOj]}),n})(),P_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[so]}),n})(),lI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[P_]}),n})(),dI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:b_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[P_]}),n})();const ES=function(n){return{backgroundColor:n}},ud=function(n){return{fill:n}};let _R=(()=>{class n{constructor(){this.cliked=new d.vpe}getRandomArbitrary(){return 254*Math.random()+1}emitSignal(){this.cliked.next(this.category)}max(t){let r=-1;return t.forEach(i=>{i>r&&(r=i)}),r}ngOnInit(){const t=this.getRandomArbitrary(),r=this.getRandomArbitrary(),i=this.getRandomArbitrary();this.color=`rgb(${t/2.5},${r/2.5},${this.max([t,r,i])})`,this.antiColor=`rgb(${255-t},${255-r},${255-i})`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-category-bubble"]],inputs:{category:"category"},outputs:{cliked:"cliked"},decls:6,vars:7,consts:[[1,"option"],[1,"color",3,"ngStyle","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",3,"ngStyle"],["d","M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"],[1,"text"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d.NdJ("click",function(){return r.emitSignal()}),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()(),d.kcU(),d.TgZ(4,"div",4),d._uU(5),d.qZA()()),2&t&&(d.xp6(1),d.Q6J("ngStyle",d.VKq(3,ES,r.color)),d.xp6(1),d.Q6J("ngStyle",d.VKq(5,ud,r.antiColor)),d.xp6(3),d.Oqu(r.category.name))},dependencies:[Qa],styles:[".option[_ngcontent-%COMP%]{width:140px;box-shadow:5px 5px 5px #0003;transition-duration:.15s;border-radius:4px;cursor:pointer}.option[_ngcontent-%COMP%]:hover{box-shadow:6px 6px 6px #00000040}.option[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{padding:12px 4px;text-align:center;width:100%;box-sizing:border-box;font-size:14px;border-radius:4px;background-color:#fff;text-overflow:ellipsis;overflow:hidden}.option[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{height:120px;background-color:#fd6d6d;border-radius:4px}.option[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;padding:33px;box-sizing:border-box;opacity:0;cursor:pointer;transition-duration:.15s}.option[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{opacity:1}"]}),n})();function k_(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-category-bubble",11),d.NdJ("cliked",function(i){d.CHM(t);const u=d.oxw(2);return d.KtG(u.deleteCategory(i))}),d.qZA()}2&n&&d.Q6J("category",e.$implicit)}function vR(n,e){if(1&n&&(d.TgZ(0,"div",9),d.YNc(1,k_,1,1,"app-category-bubble",10),d.qZA()),2&n){const t=e.ngIf;d.xp6(1),d.Q6J("ngForOf",t)}}class Lc{constructor(e){this.store=e,this.categoryName=""}addCategory(){this.categoryName?(this.store.dispatch(new gi.Add({name:this.categoryName})),this.categoryName=""):this.store.dispatch(new ii.Show({message:"Please fill in the name input field"}))}deleteCategory(e){confirm('Are you sure you want to delete the category "'+e.name+'"?')&&this.store.dispatch(new gi.Remove(e))}ngOnInit(){this.store.dispatch(new gi.Fetch)}}var Cn,ao;Lc.\u0275fac=function(e){return new(e||Lc)(d.Y36(xr))},Lc.\u0275cmp=d.Xpm({type:Lc,selectors:[["app-categories-management"]],decls:16,vars:4,consts:[[1,"page-container"],[1,"page"],[1,"page-title"],[1,"input-container-styled","new-category"],[1,"button-and-input-flex"],["placeholder","New Category Name","name","aaa","type","text",1,"styled",3,"ngModel","ngModelChange"],[1,"mt-16",3,"click"],[1,"page-container","mt-24"],["class","categories-flex",4,"ngIf"],[1,"categories-flex"],[3,"category","cliked",4,"ngFor","ngForOf"],[3,"category","cliked"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"span",2),d._uU(4,"Add new category"),d.qZA(),d.TgZ(5,"div",3)(6,"div",4)(7,"input",5),d.NdJ("ngModelChange",function(i){return t.categoryName=i}),d.qZA(),d.TgZ(8,"button",6),d.NdJ("click",function(){return t.addCategory()}),d._uU(9,"Add"),d.qZA()()()()()(),d.TgZ(10,"div",7)(11,"div",1)(12,"span",2),d._uU(13,"Existing Categories"),d.qZA(),d.YNc(14,vR,2,1,"div",8),d.ALo(15,"async"),d.qZA()()),2&e&&(d.xp6(7),d.Q6J("ngModel",t.categoryName),d.xp6(7),d.Q6J("ngIf",d.lcZ(15,2,t.categories$)))},dependencies:[Wr,bn,Jo,Rc,Cg,_R,$u],styles:[".categories-flex[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;grid-gap:15px;width:100%;justify-content:center;max-width:678px;margin:16px auto auto}.new-category[_ngcontent-%COMP%]{max-width:498px;margin:16px auto auto}.page[_ngcontent-%COMP%]{width:100%;max-width:498px;margin:auto}.mt-24[_ngcontent-%COMP%]{margin-top:24px}"],changeDetection:0}),(0,ln.gn)([ka(n=>n.categories.categories)],Lc.prototype,"categories$",void 0),function(n){n.Show=(()=>{class r{constructor(){}}return r.type="[Loader] Show",r})(),n.Hide=(()=>{class r{constructor(){}}return r.type="[Loader] Hide",r})()}(Cn||(Cn={})),function(n){n.Logout=(()=>{class p{constructor(){}}return p.type="[Auth] Logout",p})(),n.Login=(()=>{class p{constructor(I){this.payload=I}}return p.type="[Auth] Login",p})(),n.SignUp=(()=>{class p{constructor(I){this.payload=I}}return p.type="[Auth] SignUp",p})(),n.GoogleSignUp=(()=>{class p{constructor(){}}return p.type="[Auth] GoogleSignUp",p})(),n.GoogleLogin=(()=>{class p{constructor(){}}return p.type="[Auth] GoogleLogin",p})(),n.GetUserStatus=(()=>{class p{constructor(){}}return p.type="[Auth] GetUserStatus",p})()}(ao||(ao={}));var St=F(8247),Ht=F(2090),uo=F(9681),Su=F(1877),co=F(4859),IS=F(6451);function af(n,e){return(0,Ws.m)(e)?M(()=>n,e):M(()=>n)}var cd=F(9468),Bt=F(6351),ki=F(2011);F(5867);var we=F(5861);const Vc=new Map,ld={activated:!1,tokenObservers:[]},RS={initialized:!1,enabled:!1};function jr(n){return Vc.get(n)||Object.assign({},ld)}function cf(){return RS}class CR{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new Ht.BH,yield function DR(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ht.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Fi=new Ht.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function df(n){if(!jr(n).activated)throw Fi.create("use-before-activation",{appName:n.name})}function Rg(n,e){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,we.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const H=yield l.getHeartbeatsHeader();H&&(u["X-Firebase-Client"]=H)}const p={method:"POST",body:JSON.stringify(e),headers:u};let _,I;try{_=yield fetch(n,p)}catch(H){throw Fi.create("fetch-network-error",{originalErrorMessage:null===(r=H)||void 0===r?void 0:r.message})}if(200!==_.status)throw Fi.create("fetch-status-error",{httpStatus:_.status});try{I=yield _.json()}catch(H){throw Fi.create("fetch-parse-error",{originalErrorMessage:null===(i=H)||void 0===i?void 0:i.message})}const S=I.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw Fi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${I.ttl}`});const x=1e3*Number(S[1]),U=Date.now();return{token:I.token,expireTimeMillis:U+x,issuedAtTimeMillis:U}}),Uc.apply(this,arguments)}function LS(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const dd="firebase-app-check-store";let Og=null;function hd(){return Og||(Og=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(Fi.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(dd,{keyPath:"compositeKey"})}}catch(r){e(Fi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Og)}function Ng(){return Ng=(0,we.Z)(function*(n,e){const r=(yield hd()).transaction(dd,"readwrite"),u=r.objectStore(dd).put({compositeKey:n,value:e});return new Promise((l,p)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var I;p(Fi.create("storage-set",{originalErrorMessage:null===(I=_.target.error)||void 0===I?void 0:I.message}))}})}),Ng.apply(this,arguments)}const fd=new Su.Yd("@firebase/app-check");function B_(n,e){return(0,Ht.hl)()?function _I(n,e){return function wI(n,e){return Ng.apply(this,arguments)}(function II(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{fd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function CI(){return cf().enabled}function j_(){return $_.apply(this,arguments)}function $_(){return $_=(0,we.Z)(function*(){const n=cf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),$_.apply(this,arguments)}const GS={error:"UNKNOWN_ERROR"};function zS(n){return Ht.US.encodeString(JSON.stringify(n),!1)}function Pg(n){return H_.apply(this,arguments)}function H_(){return H_=(0,we.Z)(function*(n,e=!1){const t=n.app;df(t);const r=jr(t);let u,i=r.token;if(i&&!pd(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(pd(_)?i=_:yield B_(t,void 0))}if(!e&&i&&pd(i))return{token:i.token};let p,l=!1;if(CI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Rg(LS(t,yield j_()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield B_(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield jr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?fd.warn(_.message):fd.error(_),u=_}return i?u?p=pd(i)?{token:i.token,internalError:u}:W_(u):(p={token:i.token},r.token=i,yield B_(t,i)):p=W_(u),l&&SI(t,p),p}),H_.apply(this,arguments)}function z_(n,e){const t=jr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function q_(n){const{app:e}=n,t=jr(e);let r=t.tokenRefresher;r||(r=function DI(n){const{app:e}=n;return new CR((0,we.Z)(function*(){let r;if(r=jr(e).token?yield Pg(n,!0):yield Pg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=jr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function SI(n,e){const t=jr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function pd(n){return n.expireTimeMillis-Date.now()>0}function W_(n){return{token:zS(GS),error:n}}class qS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=jr(this.app);for(const t of e)z_(this.app,t.next);return Promise.resolve()}}const OI="app-check-internal";!function rT(){(0,uo._registerComponent)(new co.wA("app-check",n=>function WS(n,e){return new qS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(OI).initialize()})),(0,uo._registerComponent)(new co.wA(OI,n=>function ZS(n){return{getToken:e=>Pg(n,e),addTokenListener:e=>function G_(n,e,t,r){const{app:i}=n,u=jr(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&pd(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),q_(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>q_(n))}(n,"INTERNAL",e),removeTokenListener:e=>z_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,uo.registerVersion)("@firebase/app-check","0.5.17")}();class ev{constructor(){return(0,Bt.vb)("app-check")}}typeof window<"u"&&window;var kI=F(127);const md=new d.OlP("angularfire2.auth.use-emulator"),nv=new d.OlP("angularfire2.auth.settings"),rv=new d.OlP("angularfire2.auth.tenant-id"),iv=new d.OlP("angularfire2.auth.langugage-code"),sv=new d.OlP("angularfire2.auth.use-device-language"),ov=new d.OlP("angularfire.auth.persistence"),av=(n,e,t,r,i,u,l,p)=>(0,ki.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),l)for(const[I,S]of Object.entries(l))_.settings[I]=S;return p&&_.setPersistence(p),_},[t,r,i,u,l,p]);let uv=(()=>{class n{constructor(t,r,i,u,l,p,_,I,S,x,U,H){const K=new Br.x,Te=nt(void 0).pipe((0,Vh.Q)(l.outsideAngular),M(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,rt.U)(()=>(0,ki.on)(t,u,r)),(0,rt.U)(De=>av(De,u,p,I,S,x,_,U)),Hl({bufferSize:1,refCount:!1}));if(Us(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nt(null);else{Te.pipe(Ct()).subscribe();const ot=Te.pipe(M(dt=>dt.getRedirectResult().then(Tt=>Tt,()=>null)),Bt.iC,Hl({bufferSize:1,refCount:!1})),vt=Te.pipe(M(dt=>new Tn.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>dt.onAuthStateChanged(Lt=>Tt.next(Lt),Lt=>Tt.error(Lt),()=>Tt.complete()))})))),ht=Te.pipe(M(dt=>new Tn.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>dt.onIdTokenChanged(Lt=>Tt.next(Lt),Lt=>Tt.error(Lt),()=>Tt.complete()))}))));this.authState=ot.pipe(af(vt),(0,cd.R)(l.outsideAngular),(0,Vh.Q)(l.insideAngular)),this.user=ot.pipe(af(ht),(0,cd.R)(l.outsideAngular),(0,Vh.Q)(l.insideAngular)),this.idToken=this.user.pipe(M(dt=>dt?(0,Jt.D)(dt.getIdToken()):nt(null))),this.idTokenResult=this.user.pipe(M(dt=>dt?(0,Jt.D)(dt.getIdTokenResult()):nt(null))),this.credential=(0,IS.T)(ot,K,this.authState.pipe(re(dt=>!dt))).pipe((0,rt.U)(dt=>dt?.user?dt:null),(0,cd.R)(l.outsideAngular),(0,Vh.Q)(l.insideAngular))}return(0,ki.pX)(this,Te,u,{spy:{apply:(De,ot,vt)=>{(De.startsWith("signIn")||De.startsWith("createUser"))&&vt.then(ht=>K.next(ht))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ki.Dh),d.LFG(ki.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Bt.HU),d.LFG(md,8),d.LFG(nv,8),d.LFG(rv,8),d.LFG(iv,8),d.LFG(sv,8),d.LFG(ov,8),d.LFG(ev,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pf=(()=>{class n{constructor(t){this.afAuth=t}GoogleAuth(){return this.AuthLogin(new St.Q)}AuthLogin(t){return console.log("provider in authentication.service.ts type"),this.afAuth.signInWithPopup(t).then(r=>"1").catch(r=>"2")}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r)}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}GetUserState(){return this.afAuth.authState}SignOut(){return this.afAuth.signOut()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(uv))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$r=class{constructor(e,t,r){this.store=e,this.router=r,this.authService=t}static isLoggedIn(e){return e.isLoggedIn}getUserStatus(e){this.store.dispatch(new Cn.Show),this.authService.GetUserState().pipe(L(1)).subscribe(t=>{t?.email?(e.setState({email:t.email,isLoggedIn:!0}),this.router.navigate(["add"])):this.router.navigate([""]),this.store.dispatch(new Cn.Hide)})}login(e,t){this.store.dispatch(new Cn.Show),this.authService.SignIn(t.payload.email,t.payload.password).then(r=>{e.setState({email:t.payload.email,isLoggedIn:!0}),this.router.navigate(["add"])}).catch(r=>this.store.dispatch(new ii.Show({message:r}))).finally(()=>this.store.dispatch(new Cn.Hide))}signUp(e,t){this.store.dispatch(new Cn.Show),this.authService.SignUp(t.payload.email,t.payload.password).then(r=>{e.setState({email:"",isLoggedIn:!1}),this.router.navigate(["/"]),this.store.dispatch(new ii.Show({message:"Signed up succesfully"}))}).catch(r=>this.store.dispatch(new ii.Show({message:r}))).finally(()=>this.store.dispatch(new Cn.Hide))}logout(e){this.store.dispatch(new Cn.Show),this.authService.SignOut().then(t=>{e.setState({email:"",isLoggedIn:!1}),this.router.navigate(["/"])}).catch(t=>this.store.dispatch(new ii.Show({message:t}))).finally(()=>this.store.dispatch(new Cn.Hide))}googleLogin(e){this.store.dispatch(new Cn.Show),this.authService.GoogleAuth().then(()=>{this.authService.GetUserState().pipe(L(1)).subscribe(t=>{e.setState({email:t?.email||"",isLoggedIn:!0}),this.router.navigate(["add"])})}).catch(t=>this.store.dispatch(new ii.Show({message:t}))).finally(()=>this.store.dispatch(new Cn.Hide))}};$r.\u0275fac=function(e){return new(e||$r)(d.LFG(xr),d.LFG(pf),d.LFG(Jn))},$r.\u0275prov=d.Yz7({token:$r,factory:$r.\u0275fac}),(0,ln.gn)([ri(ao.GetUserStatus)],$r.prototype,"getUserStatus",null),(0,ln.gn)([ri(ao.Login)],$r.prototype,"login",null),(0,ln.gn)([ri(ao.SignUp)],$r.prototype,"signUp",null),(0,ln.gn)([ri(ao.Logout)],$r.prototype,"logout",null),(0,ln.gn)([ri(ao.GoogleLogin)],$r.prototype,"googleLogin",null),(0,ln.gn)([function cg(n){return(e,t,r)=>{const i=r.value,u=SD(n,i,{containerClass:e,selectorName:t.toString(),getSelectorOptions:()=>({})}),l={configurable:!0,get:()=>u};return l.originalFn=i,l}}()],$r,"isLoggedIn",null),$r=(0,ln.gn)([Hh({name:"auth",defaults:{email:"",isLoggedIn:!1}})],$r);let gf=(()=>{class n{constructor(t,r){this.store=t,this.router=r}canActivate(){return new Tn.y(t=>{this.store.select($r.isLoggedIn).pipe(L(1)).subscribe(r=>{r?t.next(!0):this.router.navigate([""]),t.complete()})})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xr),d.LFG(Jn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ug=(()=>{class n{constructor(t,r){this.store=t,this.router=r}canActivate(){return new Tn.y(t=>{this.store.select($r.isLoggedIn).pipe(L(1)).subscribe(r=>{t.next(!r),t.complete()})})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xr),d.LFG(Jn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),cT=(()=>{class n{constructor(t,r,i){this.authService=t,this.store=r,this.router=i,this.email="",this.password=""}signIn(){this.store.dispatch(this.email&&this.password?new ao.Login({email:this.email,password:this.password}):new ii.Show({message:"Please fill all of the required fields"}))}goToSignUpPage(){this.router.navigate(["signup"])}googleLogin(){this.store.dispatch(new ao.GoogleLogin)}ngOnInit(){this.store.dispatch(new ao.GetUserStatus)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(pf),d.Y36(xr),d.Y36(Jn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login-page"]],decls:18,vars:2,consts:[[1,"page-container","more-padding-top"],[1,"page-title"],[1,"input-container-styled","mt-16"],["for","email"],["type","email","name","email",1,"styled",3,"ngModel","ngModelChange"],[1,"input-container-styled","mt-24"],["for","password"],["type","password","name","password",1,"styled",3,"ngModel","ngModelChange"],[1,"mt-32",3,"click"],[1,"mt-8","secondary",3,"click"],[1,"mt-8","google",3,"click"],[1,"icon"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"span",1),d._uU(2,"Sign In"),d.qZA(),d.TgZ(3,"div",2)(4,"label",3),d._uU(5,"Email"),d.qZA(),d.TgZ(6,"input",4),d.NdJ("ngModelChange",function(u){return r.email=u}),d.qZA()(),d.TgZ(7,"div",5)(8,"label",6),d._uU(9,"Password"),d.qZA(),d.TgZ(10,"input",7),d.NdJ("ngModelChange",function(u){return r.password=u}),d.qZA()(),d.TgZ(11,"button",8),d.NdJ("click",function(){return r.signIn()}),d._uU(12,"Sign In"),d.qZA(),d.TgZ(13,"button",9),d.NdJ("click",function(){return r.goToSignUpPage()}),d._uU(14,"Sign Up"),d.qZA(),d.TgZ(15,"button",10),d.NdJ("click",function(){return r.googleLogin()}),d._UZ(16,"div",11),d._uU(17," Sign in with Google "),d.qZA()()),2&t&&(d.xp6(6),d.Q6J("ngModel",r.email),d.xp6(4),d.Q6J("ngModel",r.password))},dependencies:[Jo,Rc,Cg]}),n})();var Li;!function(n){n.Add=(()=>{class i{constructor(l){this.payload=l}}return i.type="[Transactions] Add",i})(),n.Delete=(()=>{class i{constructor(l){this.payload=l}}return i.type="[Transactions] Delete",i})(),n.Fetch=(()=>{class i{constructor(){}}return i.type="[Transactions] Fetch",i})()}(Li||(Li={}));const lT=function(n){return{selected:n}};let Bg=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-multi-selection-button"]],inputs:{isSelected:"isSelected",onClick:"onClick",text:"text",value:"value",form:"form"},decls:2,vars:4,consts:[[1,"btn",3,"ngClass","click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.NdJ("click",function(){return r.onClick(r.value)}),d._uU(1),d.qZA()),2&t&&(d.Q6J("ngClass",d.VKq(2,lT,r.isSelected)),d.xp6(1),d.hij(" ",r.text,"\n"))},dependencies:[rn],styles:[".btn[_ngcontent-%COMP%]{width:100%;padding:4px 16px;background-color:#fff;border:1px solid #59a1d1;box-sizing:border-box;color:#59a1d1;text-align:center;font-size:14px;line-height:19px;transition-duration:.1s;cursor:pointer;min-width:143px;border-radius:8px;max-width:143px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.btn[_ngcontent-%COMP%]:hover:not(.selected){background-color:#59a1d1;color:#fff;opacity:.8}.btn.selected[_ngcontent-%COMP%]{background-color:#59a1d1;color:#fff}@media only screen and (max-width: 500px){.btn[_ngcontent-%COMP%]{font-size:14px;min-width:115px;max-width:115px}}"]}),n})(),Xo=(()=>{class n{constructor(){}changeSelection(t){this.form.patchValue({isIncome:t})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-is-income-buttons"]],inputs:{form:"form"},decls:3,vars:8,consts:[[1,"container"],["text","Outcome",3,"isSelected","onClick","value","form"],["text","Income",3,"isSelected","onClick","value","form"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"app-multi-selection-button",1)(2,"app-multi-selection-button",2),d.qZA()),2&t&&(d.xp6(1),d.Q6J("isSelected",!r.form.value.isIncome)("onClick",r.changeSelection)("value",!1)("form",r.form),d.xp6(1),d.Q6J("isSelected",r.form.value.isIncome)("onClick",r.changeSelection)("value",!0)("form",r.form))},dependencies:[Bg],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:6px 10px;flex-wrap:wrap}"]}),n})();function dT(n,e){if(1&n&&d._UZ(0,"app-multi-selection-button",2),2&n){const t=e.$implicit,r=d.oxw();d.Q6J("isSelected",r.form.value.category===t.name)("onClick",r.changeValue)("value",t.name)("text",t.name)("form",r.form)}}let cv=(()=>{class n{constructor(){}changeValue(t){this.form.patchValue({category:t})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-categories"]],inputs:{categories:"categories",form:"form"},decls:2,vars:1,consts:[[1,"container"],[3,"isSelected","onClick","value","text","form",4,"ngFor","ngForOf"],[3,"isSelected","onClick","value","text","form"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,dT,1,5,"app-multi-selection-button",1),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngForOf",r.categories))},dependencies:[Wr,Bg],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:6px 10px;flex-wrap:wrap}"]}),n})();function mf(n,e){1&n&&(d.TgZ(0,"span",15),d._uU(1," This field should not be empty "),d.qZA())}function hT(n,e){1&n&&(d.TgZ(0,"span",15),d._uU(1," Please enter a positive number"),d.qZA())}function fT(n,e){if(1&n&&(d.TgZ(0,"div",3)(1,"label",9),d._uU(2,"Category:"),d.qZA(),d._UZ(3,"app-categories",16),d.qZA()),2&n){const t=e.ngIf,r=d.oxw();d.xp6(3),d.Q6J("categories",t)("form",r.newTransactionForm)}}function pT(n,e){1&n&&(d.TgZ(0,"span",15),d._uU(1,"Invalid Date"),d.qZA())}class Ua{constructor(e){this.store=e,this.newTransactionForm=new rd({name:new kc("",[hg.required]),amount:new kc(null,[hg.required]),category:new kc("Other",[hg.required]),isIncome:new kc(!1),date:new kc(this.convertDateToString(new Date),[hg.required])})}convertDateToString(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}aa(){this.store.dispatch(new Cn.Show)}ngOnInit(){this.store.dispatch(new gi.Fetch)}onSubmit(){"VALID"===this.newTransactionForm.status?this.store.dispatch(new Li.Add(this.newTransactionForm.value)):this.newTransactionForm.markAllAsTouched()}}Ua.\u0275fac=function(e){return new(e||Ua)(d.Y36(xr))},Ua.\u0275cmp=d.Xpm({type:Ua,selectors:[["app-new-transaction"]],decls:27,vars:8,consts:[[1,"page-container"],[3,"formGroup","ngSubmit"],[1,"page-title"],[1,"input-container-styled"],["for","name",1,"styled"],["type","text","formControlName","name","name","name",1,"styled"],["class","styled-error-text",4,"ngIf"],["for","amount",1,"styled"],["min","0","type","text","type","number","formControlName","amount","name","amount",1,"styled"],["for","isIncome",1,"styled"],[3,"form"],["class","input-container-styled",4,"ngIf"],["for","date",1,"styled"],["type","date","formControlName","date","name","date",1,"styled"],[1,"mt-24"],[1,"styled-error-text"],[3,"categories","form"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"form",1),d.NdJ("ngSubmit",function(){return t.onSubmit()}),d.TgZ(2,"span",2),d._uU(3,"Add a new Transaction"),d.qZA(),d.TgZ(4,"div",3)(5,"label",4),d._uU(6,"Name:"),d.qZA(),d._UZ(7,"input",5),d.YNc(8,mf,2,0,"span",6),d.qZA(),d.TgZ(9,"div",3)(10,"label",7),d._uU(11,"Amount:"),d.qZA(),d._UZ(12,"input",8),d.YNc(13,hT,2,0,"span",6),d.qZA(),d.TgZ(14,"div",3)(15,"label",9),d._uU(16,"Income/Outcome:"),d.qZA(),d._UZ(17,"app-is-income-buttons",10),d.qZA(),d.YNc(18,fT,4,2,"div",11),d.ALo(19,"async"),d.TgZ(20,"div",3)(21,"label",12),d._uU(22,"Date:"),d.qZA(),d._UZ(23,"input",13),d.YNc(24,pT,2,0,"span",6),d.qZA(),d.TgZ(25,"button",14),d._uU(26,"Submit"),d.qZA()()()),2&e&&(d.xp6(1),d.Q6J("formGroup",t.newTransactionForm),d.xp6(7),d.Q6J("ngIf",t.newTransactionForm.controls.name.touched&&t.newTransactionForm.controls.name.errors),d.xp6(5),d.Q6J("ngIf",t.newTransactionForm.controls.amount.touched&&t.newTransactionForm.controls.amount.errors),d.xp6(4),d.Q6J("form",t.newTransactionForm),d.xp6(1),d.Q6J("ngIf",d.lcZ(19,6,t.categories$)),d.xp6(6),d.Q6J("ngIf",t.newTransactionForm.controls.date.touched&&t.newTransactionForm.controls.date.errors))},dependencies:[bn,w_,Jo,bs,Rc,Oc,O_,sd,od,Xo,cv,$u],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:100%;max-width:498px;margin:auto;box-sizing:border-box}"]}),(0,ln.gn)([ka(n=>n.categories.categories)],Ua.prototype,"categories$",void 0);let jg=(()=>{class n{constructor(t,r,i){this.authService=t,this.store=r,this.router=i,this.email="",this.password="",this.passwordConfirmation=""}signUp(){this.store.dispatch(this.email&&this.password&&this.passwordConfirmation?this.password===this.passwordConfirmation?this.password.length<4?new ii.Show({message:"Password must be at least 4 characters"}):new ao.SignUp({email:this.email,password:this.password}):new ii.Show({message:"Password must match the password confirmation"}):new ii.Show({message:"Please fill all of the required fields"}))}goToSignInPage(){this.router.navigate([""])}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(pf),d.Y36(xr),d.Y36(Jn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-signup-page"]],decls:19,vars:3,consts:[[1,"page-container","more-padding-top"],[1,"page-title"],[1,"input-container-styled","mt-16"],["for","email"],["type","email","name","email",1,"styled",3,"ngModel","ngModelChange"],[1,"input-container-styled","mt-24"],["for","password"],["type","password","name","password",1,"styled",3,"ngModel","ngModelChange"],["for","passwordVerification"],["type","password","name","passwordVerification",1,"styled",3,"ngModel","ngModelChange"],[1,"mt-32",3,"click"],[1,"mt-8","secondary",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"span",1),d._uU(2,"Sign Up"),d.qZA(),d.TgZ(3,"div",2)(4,"label",3),d._uU(5,"Email"),d.qZA(),d.TgZ(6,"input",4),d.NdJ("ngModelChange",function(u){return r.email=u}),d.qZA()(),d.TgZ(7,"div",5)(8,"label",6),d._uU(9,"Password"),d.qZA(),d.TgZ(10,"input",7),d.NdJ("ngModelChange",function(u){return r.password=u}),d.qZA()(),d.TgZ(11,"div",5)(12,"label",8),d._uU(13,"Password Verification"),d.qZA(),d.TgZ(14,"input",9),d.NdJ("ngModelChange",function(u){return r.passwordConfirmation=u}),d.qZA()(),d.TgZ(15,"button",10),d.NdJ("click",function(){return r.signUp()}),d._uU(16,"Sign Up"),d.qZA(),d.TgZ(17,"button",11),d.NdJ("click",function(){return r.goToSignInPage()}),d._uU(18,"Sign In"),d.qZA()()),2&t&&(d.xp6(6),d.Q6J("ngModel",r.email),d.xp6(4),d.Q6J("ngModel",r.password),d.xp6(4),d.Q6J("ngModel",r.passwordConfirmation))},dependencies:[Jo,Rc,Cg]}),n})();var FI=F(4986);function lv(){return(0,Qn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Yn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}F(5881);var gt,dv=F(3942),hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ea={},fv=fv||{},jt=hv||self;function yd(){}function _d(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var yf="closure_uid_"+(1e9*Math.random()>>>0),mT=0;function yT(n,e,t){return n.call.apply(n.bind,arguments)}function _T(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function si(n,e,t){return(si=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yT:_T).apply(null,arguments)}function _f(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function wr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,u){for(var l=Array(arguments.length-2),p=2;p<arguments.length;p++)l[p-2]=arguments[p];return e.prototype[i].apply(r,l)}}function Ba(){this.s=this.s,this.o=this.o}Ba.prototype.s=!1,Ba.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function pv(n){Object.prototype.hasOwnProperty.call(n,yf)&&n[yf]||(n[yf]=++mT)}(this)},Ba.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function $g(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function LI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(_d(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let l=0;l<u;l++)n[i+l]=r[l]}else n.push(r)}}function Hr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Hr.prototype.h=function(){this.defaultPrevented=!0};var VI=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",yd,e),jt.removeEventListener("test",yd,e)}catch{}return n}();function Hg(n){return/^[\s\xa0]*$/.test(n)}var mv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function yv(n,e){return n<e?-1:n>e?1:0}function Rr(){var n=jt.navigator;return n&&(n=n.userAgent)?n:""}function mi(n){return-1!=Rr().indexOf(n)}function _v(n){return _v[" "](n),n}_v[" "]=yd;var qg,FR=mi("Opera"),vf=mi("Trident")||mi("MSIE"),vv=mi("Edge"),Gg=vv||vf,wd=mi("Gecko")&&!(-1!=Rr().toLowerCase().indexOf("webkit")&&!mi("Edge"))&&!(mi("Trident")||mi("MSIE"))&&!mi("Edge"),ET=-1!=Rr().toLowerCase().indexOf("webkit")&&!mi("Edge");function zg(){var n=jt.document;return n?n.documentMode:void 0}e:{var Wg="",wv=function(){var n=Rr();return wd?/rv:([^\);]+)(\)|;)/.exec(n):vv?/Edge\/([\d\.]+)/.exec(n):vf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ET?/WebKit\/(\S+)/.exec(n):FR?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(wv&&(Wg=wv?wv[1]:""),vf){var Ev=zg();if(null!=Ev&&Ev>parseFloat(Wg)){qg=String(Ev);break e}}qg=Wg}var IT={};var Kg=jt.document&&vf&&(zg()||parseInt(qg,10))||void 0;function Bc(n,e){if(Hr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(wd){e:{try{_v(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:LR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Bc.X.h.call(this)}}wr(Bc,Hr);var LR={2:"touch",3:"pen",4:"mouse"};Bc.prototype.h=function(){Bc.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ed="closure_listenable_"+(1e6*Math.random()|0),bT=0;function UI(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++bT,this.ba=this.ea=!1}function ja(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Cv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Dv(n){const e={};for(const t in n)e[t]=n[t];return e}const Yg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function CT(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<Yg.length;u++)t=Yg[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Qg(n){this.src=n,this.g={},this.h=0}function BI(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=gv(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(ja(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Sv(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}Qg.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Sv(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new UI(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var Tv="closure_lm_"+(1e6*Math.random()|0),Av={};function xv(n,e,t,r,i){if(r&&r.once)return Rv(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)xv(n,e[u],t,r,i);return null}return t=Xg(t),n&&n[Ed]?n.N(e,t,vd(r)?!!r.capture:!!r,i):Mv(n,e,t,!1,r,i)}function Mv(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var l=vd(i)?!!i.capture:!!i,p=Pv(n);if(p||(n[Tv]=p=new Qg(n)),(t=p.add(e,t,r,l,u)).proxy)return t;if(r=function DT(){const e=$I;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)VI||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(jI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Rv(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Rv(n,e[u],t,r,i);return null}return t=Xg(t),n&&n[Ed]?n.O(e,t,vd(r)?!!r.capture:!!r,i):Mv(n,e,t,!0,r,i)}function Ov(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ov(n,e[u],t,r,i);else r=vd(r)?!!r.capture:!!r,t=Xg(t),n&&n[Ed]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Sv(u=n.g[e],t,r,i))&&(ja(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Pv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Sv(e,t,r,i)),(t=-1<n?e[n]:null)&&Nv(t))}function Nv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Ed])BI(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(jI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Pv(e))?(BI(t,n),0==t.h&&(t.src=null,e[Tv]=null)):ja(n)}}}function jI(n){return n in Av?Av[n]:Av[n]="on"+n}function $I(n,e){if(n.ba)n=!0;else{e=new Bc(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Nv(n),n=t.call(r,e)}return n}function Pv(n){return(n=n[Tv])instanceof Qg?n:null}var Jg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xg(n){return"function"==typeof n?n:(n[Jg]||(n[Jg]=function(e){return n.handleEvent(e)}),n[Jg])}function Er(){Ba.call(this),this.i=new Qg(this),this.P=this,this.I=null}function Or(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Hr(e,n);else if(e instanceof Hr)e.target=e.target||n;else{var i=e;CT(e=new Hr(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];i=em(l,r,!0,e)&&i}if(i=em(l=e.g=n,r,!0,e)&&i,i=em(l,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=em(l=e.g=t[u],r,!1,e)&&i}function em(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var p=l.listener,_=l.ha||l.src;l.ea&&BI(n.i,l),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}wr(Er,Ba),Er.prototype[Ed]=!0,Er.prototype.removeEventListener=function(n,e,t,r){Ov(this,n,e,t,r)},Er.prototype.M=function(){if(Er.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ja(t[r]);delete n.g[e],n.h--}}this.I=null},Er.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Er.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var kv=jt.JSON.stringify;function VR(){var n=AT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var GI,ST=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new UR,n=>n.reset());class UR{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function BR(n){jt.setTimeout(()=>{throw n},0)}function TT(n,e){GI||function jR(){var n=jt.Promise.resolve(void 0);GI=function(){n.then(tm)}}(),zI||(GI(),zI=!0),AT.add(n,e)}var zI=!1,AT=new class HI{constructor(){this.h=this.g=null}add(e,t){const r=ST.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function tm(){for(var n;n=VR();){try{n.h.call(n.g)}catch(t){BR(t)}var e=ST;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}zI=!1}function Fv(n,e){Er.call(this),this.h=n||1,this.g=e||jt,this.j=si(this.lb,this),this.l=Date.now()}function nm(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Id(n,e,t){if("function"==typeof n)t&&(n=si(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=si(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function Lv(n){n.g=Id(()=>{n.g=null,n.i&&(n.i=!1,Lv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}wr(Fv,Er),(gt=Fv.prototype).ca=!1,gt.R=null,gt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Or(this,"tick"),this.ca&&(nm(this),this.start()))}},gt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gt.M=function(){Fv.X.M.call(this),nm(this),delete this.g};class qI extends Ba{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Lv(this)}M(){super.M(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rm(n){Ba.call(this),this.h=n,this.g={}}wr(rm,Ba);var im=[];function Vv(n,e,t,r){Array.isArray(t)||(t&&(im[0]=t.toString()),t=im);for(var i=0;i<t.length;i++){var u=xv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function WI(n){Cv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Nv(e)},n),n.g={}}function wf(){this.g=!0}function bd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function sm(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<i.length;l++)i[l]=""}}}return kv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}rm.prototype.M=function(){rm.X.M.call(this),WI(this)},rm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wf.prototype.Aa=function(){this.g=!1},wf.prototype.info=function(){};var jc={},MT=null;function Uv(){return MT=MT||new Er}function RT(n){Hr.call(this,jc.Pa,n)}function Ef(n){const e=Uv();Or(e,new RT(e))}function ZI(n,e){Hr.call(this,jc.STAT_EVENT,n),this.stat=e}function yi(n){const e=Uv();Or(e,new ZI(e,n))}function OT(n,e){Hr.call(this,jc.Qa,n),this.size=e}function If(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}jc.Pa="serverreachability",wr(RT,Hr),jc.STAT_EVENT="statevent",wr(ZI,Hr),jc.Qa="timingevent",wr(OT,Hr);var bf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Bv={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function KI(){}function YI(){}KI.prototype.h=null;var $v,$c={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function jv(){Hr.call(this,"d")}function Vi(){Hr.call(this,"c")}function Cd(){}function Cf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new rm(this),this.O=Hv,this.T=new Fv(n=Gg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new QI}function QI(){this.i=null,this.g="",this.h=!1}wr(jv,Hr),wr(Vi,Hr),wr(Cd,KI),Cd.prototype.g=function(){return new XMLHttpRequest},Cd.prototype.i=function(){return{}},$v=new Cd;var Hv=45e3,om={},Df={};function Gv(n,e,t){n.K=1,n.v=Zv(ta(e)),n.s=t,n.P=!0,zv(n,null)}function zv(n,e){n.F=Date.now(),Sf(n),n.A=ta(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),ob(t.i,"t",r),n.C=0,t=n.l.H,n.h=new QI,n.g=WT(n.l,t?e:null,!n.s),0<n.N&&(n.L=new qI(si(n.La,n,n.g),n.N)),Vv(n.S,n.g,"readystatechange",n.ib),e=n.H?Dv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Ef(),function $R(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var l="",p=u.split("&"),_=0;_<p.length;_++){var I=p[_].split("=");if(1<I.length){var S=I[0];I=I[1];var x=S.split("_");l=2<=x.length&&"type"==x[1]?l+(S+"=")+I+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function qv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function JI(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=XI(n,t),i==Df){4==e&&(n.o=4,yi(14),r=!1),bd(n.j,n.m,null,"[Incomplete Response]");break}if(i==om){n.o=4,yi(15),bd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}bd(n.j,n.m,i,null),ho(n,i)}qv(n)&&i!=Df&&i!=om&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),sw(e),e.K=!0,yi(11))):(bd(n.j,n.m,t,"[Invalid Chunked Response]"),$a(n),Dd(n))}function XI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Df:(t=Number(e.substring(t,r)),isNaN(t)?om:(r+=1)+t>e.length?Df:(e=e.substr(r,t),n.C=r+t,e))}function Sf(n){n.V=Date.now()+n.O,am(n,n.O)}function am(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=If(si(n.gb,n),e)}function lo(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function Dd(n){0==n.l.G||n.I||GT(n.l,n)}function $a(n){lo(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,nm(n.T),WI(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ho(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||cb(t.h,n)))if(!n.J&&cb(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;ym(t),Md(t)}iw(t),yi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=If(si(t.cb,t),6e3));if(1>=ub(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Rd(t,11)}else if((n.J||t.g==n)&&ym(t),!Hg(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let I=i[e];if(t.T=I[0],I=I[1],2==t.G)if("c"==I[0]){t.I=I[1],t.ka=I[2];const S=I[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const x=I[4];null!=x&&(t.Ca=x,t.j.info("SVER="+t.Ca));const U=I[5];null!=U&&"number"==typeof U&&0<U&&(t.J=r=1.5*U,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const K=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var u=r.h;u.g||-1==K.indexOf("spdy")&&-1==K.indexOf("quic")&&-1==K.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(lb(u,u.h),u.h=null))}if(r.D){const Te=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;Te&&(r.za=Te,Fn(r.F,r.D,Te))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=yb(r,r.H?r.ka:null,r.V),l.J){FT(r.h,l);var p=l,_=r.J;_&&p.setTimeout(_),p.B&&(lo(p),Sf(p)),r.g=l}else HT(r);0<t.i.length&&Rf(t)}else"stop"!=I[0]&&"close"!=I[0]||Rd(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Rd(t,7):mm(t):"noop"!=I[0]&&t.l&&t.l.wa(I),t.A=0)}Ef()}catch{}}function eb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(_d(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function GR(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(_d(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function NT(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(_d(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(gt=Cf.prototype).setTimeout=function(n){this.O=n},gt.ib=function(n){n=n.target;const e=this.L;e&&3==Ha(n)?e.l():this.La(n)},gt.La=function(n){try{if(n==this.g)e:{const S=Ha(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||Gg||this.g&&(this.h.h||this.g.fa()||tw(this.g)))){this.I||4!=S||7==e||Ef(),lo(this);var t=this.g.aa();this.Y=t;t:if(qv(this)){var r=tw(this.g);n="";var i=r.length,u=4==Ha(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){$a(this),Dd(this);var l="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function HR(n,e,t,r,i,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hg(p)){var I=p;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,yi(12),$a(this),Dd(this);break e}bd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ho(this,t)}this.P?(JI(this,S,l),Gg&&this.i&&3==S&&(Vv(this.S,this.T,"tick",this.hb),this.T.start())):(bd(this.j,this.m,l,null),ho(this,l)),4==S&&$a(this),this.i&&!this.I&&(4==S?GT(this.l,this):(this.i=!1,Sf(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,yi(12)):(this.o=0,yi(13)),$a(this),Dd(this)}}}catch{}},gt.hb=function(){if(this.g){var n=Ha(this.g),e=this.g.fa();this.C<e.length&&(lo(this),JI(this,n,e),this.i&&4!=n&&Sf(this))}},gt.cancel=function(){this.I=!0,$a(this)},gt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function xT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ef(),yi(17)),$a(this),this.o=2,Dd(this)):am(this,this.V-n)};var tb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Hc){this.h=void 0!==e?e:n.h,Wv(this,n.j),this.s=n.s,this.g=n.g,Tf(this,n.m),this.l=n.l,e=n.i;var t=new Td;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),nb(this,t),this.o=n.o}else n&&(t=String(n).match(tb))?(this.h=!!e,Wv(this,t[1]||"",!0),this.s=Gc(t[2]||""),this.g=Gc(t[3]||"",!0),Tf(this,t[4]),this.l=Gc(t[5]||"",!0),nb(this,t[6]||"",!0),this.o=Gc(t[7]||"")):(this.h=!!e,this.i=new Td(null,this.h))}function ta(n){return new Hc(n)}function Wv(n,e,t){n.j=t?Gc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Tf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function nb(n,e,t){e instanceof Td?(n.i=e,function zR(n,e){e&&!n.j&&(Au(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Yv(this,r),ob(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Sd(e,um)),n.i=new Td(e,n.h))}function Fn(n,e,t){n.i.set(e,t)}function Zv(n){return Fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Gc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Sd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,rb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function rb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Hc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Sd(e,Kv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Sd(e,Kv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Sd(t,"/"==t.charAt(0)?sb:ib,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Sd(t,cm)),n.join("")};var Kv=/[#\/\?@]/g,ib=/[#\?:]/g,sb=/[#\?]/g,um=/[#\?@]/g,cm=/#/g;function Td(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Au(n){n.g||(n.g=new Map,n.h=0,n.i&&function PT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Yv(n,e){Au(n),e=Ad(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Qv(n,e){return Au(n),e=Ad(n,e),n.g.has(e)}function ob(n,e,t){Yv(n,e),0<t.length&&(n.i=null,n.g.set(Ad(n,e),$g(t)),n.h+=t.length)}function Ad(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Jv(n){this.l=n||kT,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ga&&jt.g.Ga()&&jt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gt=Td.prototype).add=function(n,e){Au(this),this.i=null,n=Ad(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},gt.forEach=function(n,e){Au(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},gt.oa=function(){Au(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},gt.W=function(n){Au(this);let e=[];if("string"==typeof n)Qv(this,n)&&(e=e.concat(this.g.get(Ad(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},gt.set=function(n,e){return Au(this),this.i=null,Qv(this,n=Ad(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},gt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=u;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var kT=10;function ab(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ub(n){return n.h?1:n.g?n.g.size:0}function cb(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function lb(n,e){n.g?n.g.add(e):n.h=e}function FT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function LT(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return $g(n.i)}function db(){}function VT(){this.g=new db}function lm(n,e,t){const r=t||"";try{eb(n,function(i,u){let l=i;vd(i)&&(l=kv(i)),e.push(r+u+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function dm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xd(n){this.l=n.ac||null,this.j=n.jb||!1}function na(n,e){Er.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=hm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jv.prototype.cancel=function(){if(this.i=LT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},db.prototype.stringify=function(n){return jt.JSON.stringify(n,void 0)},db.prototype.parse=function(n){return jt.JSON.parse(n,void 0)},wr(xd,KI),xd.prototype.g=function(){return new na(this.l,this.j)},xd.prototype.i=function(n){return function(){return n}}({}),wr(na,Er);var hm=0;function fm(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function zc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Af(n)}function Af(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(gt=na.prototype).open=function(n,e){if(this.readyState!=hm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Af(this)},gt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||jt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zc(this)),this.readyState=hm},gt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Af(this)),this.g&&(this.readyState=3,Af(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fm(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},gt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?zc(this):Af(this),3==this.readyState&&fm(this)}},gt.Va=function(n){this.g&&(this.response=this.responseText=n,zc(this))},gt.Ua=function(n){this.g&&(this.response=n,zc(this))},gt.ga=function(){this.g&&zc(this)},gt.setRequestHeader=function(n,e){this.v.append(n,e)},gt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},gt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(na.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Xv=jt.JSON.parse;function jn(n){Er.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xf,this.K=this.L=!1}wr(jn,Er);var xf="",WR=/^https?$/i,ZR=["POST","PUT"];function BT(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ew(n),pm(n)}function ew(n){n.D||(n.D=!0,Or(n,"complete"),Or(n,"error"))}function hb(n){if(n.h&&typeof fv<"u"&&(!n.C[1]||4!=Ha(n)||2!=n.aa()))if(n.v&&4==Ha(n))Id(n.Ha,0,n);else if(Or(n,"readystatechange"),4==Ha(n)){n.h=!1;try{const p=n.aa();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(tb)[1]||null;if(!i&&jt.self&&jt.self.location){var u=jt.self.location.protocol;i=u.substr(0,u.length-1)}r=!WR.test(i?i.toLowerCase():"")}t=r}if(t)Or(n,"complete"),Or(n,"success");else{n.m=6;try{var l=2<Ha(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",ew(n)}}finally{pm(n)}}}function pm(n,e){if(n.g){fb(n);const t=n.g,r=n.C[0]?yd:null;n.g=null,n.C=null,e||Or(n,"ready");try{t.onreadystatechange=r}catch{}}}function fb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function Ha(n){return n.g?n.g.readyState:0}function tw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case xf:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function nw(n){let e="";return Cv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function gm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=nw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fn(n,e,t))}function Mf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function pb(n){this.Ca=0,this.i=[],this.j=new wf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Mf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Mf("baseRetryDelayMs",5e3,n),this.bb=Mf("retryDelaySeedMs",1e4,n),this.$a=Mf("forwardChannelMaxRetries",2,n),this.ta=Mf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Jv(n&&n.concurrentRequestLimit),this.Fa=new VT,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function mm(n){if(jT(n),3==n.G){var e=n.U++,t=ta(n.F);Fn(t,"SID",n.I),Fn(t,"RID",e),Fn(t,"TYPE","terminate"),Of(n,t),(e=new Cf(n,n.j,e,void 0)).K=2,e.v=Zv(ta(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon&&(t=jt.navigator.sendBeacon(e.v.toString(),"")),!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=WT(e.l,null),e.g.da(e.v)),e.F=Date.now(),Sf(e)}qT(n)}function Md(n){n.g&&(sw(n),n.g.cancel(),n.g=null)}function jT(n){Md(n),n.u&&(jt.clearTimeout(n.u),n.u=null),ym(n),n.h.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function Rf(n){ab(n.h)||n.m||(n.m=!0,TT(n.Ja,n),n.C=0)}function gb(n,e){var t;t=e?e.m:n.U++;const r=ta(n.F);Fn(r,"SID",n.I),Fn(r,"RID",t),Fn(r,"AID",n.T),Of(n,r),n.o&&n.s&&gm(r,n.o,n.s),t=new Cf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=$T(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),lb(n.h,t),Gv(t,r,e)}function Of(n,e){n.ia&&Cv(n.ia,function(t,r){Fn(e,r,t)}),n.l&&eb({},function(t,r){Fn(e,r,t)})}function $T(n,e,t){t=Math.min(n.i.length,t);var r=n.l?si(n.l.Ra,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=i[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let I=i[_].h;const S=i[_].g;if(I-=u,0>I)u=Math.max(0,i[_].h-100),p=!1;else try{lm(S,l,"req"+I+"_")}catch{r&&r(S)}}if(p){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function HT(n){n.g||n.u||(n.Z=1,TT(n.Ia,n),n.A=0)}function iw(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=If(si(n.Ia,n),zT(n,n.A)),n.A++,0))}function sw(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function mb(n){n.g=new Cf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ta(n.sa);Fn(e,"RID","rpc"),Fn(e,"SID",n.I),Fn(e,"CI",n.L?"0":"1"),Fn(e,"AID",n.T),Fn(e,"TYPE","xmlhttp"),Of(n,e),n.o&&n.s&&gm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Zv(ta(e)),t.s=null,t.P=!0,zv(t,n)}function ym(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function GT(n,e){var t=null;if(n.g==e){ym(n),sw(n),n.g=null;var r=2}else{if(!cb(n.h,e))return;t=e.D,FT(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Or(r=Uv(),new OT(r,t)),Rf(n)}else HT(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function rw(n,e){return!(ub(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=If(si(n.Ja,n,e),zT(n,n.C)),n.C++,0)))}(n,e)||2==r&&iw(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Rd(n,5);break;case 4:Rd(n,10);break;case 3:Rd(n,6);break;default:Rd(n,2)}}function zT(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Rd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=si(n.kb,n);t||(t=new Hc("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||Wv(t,"https"),Zv(t)),function UT(n,e){const t=new wf;if(jt.Image){const r=new Image;r.onload=_f(dm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=_f(dm,t,r,"TestLoadImage: error",!1,e),r.onabort=_f(dm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=_f(dm,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else yi(2);n.G=0,n.l&&n.l.va(e),qT(n),jT(n)}function qT(n){if(n.G=0,n.la=[],n.l){const e=LT(n.h);(0!=e.length||0!=n.i.length)&&(LI(n.la,e),LI(n.la,n.i),n.h.i.length=0,$g(n.i),n.i.length=0),n.l.ua()}}function yb(n,e,t){var r=t instanceof Hc?ta(t):new Hc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Tf(r,r.m);else{var i=jt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Hc(null,void 0);r&&Wv(u,r),e&&(u.g=e),i&&Tf(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Fn(r,t,e),Fn(r,"VER",n.ma),Of(n,r),r}function WT(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jn(t&&n.Da&&!n.ra?new xd({jb:!0}):n.ra)).Ka(n.H),e}function ZT(){}function ow(){if(vf&&!(10<=Number(Kg)))throw Error("Environmental error: no available transport.")}function Ss(n,e){Er.call(this),this.g=new pb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Hg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new s(this)}function KT(n){jv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function YT(){Vi.call(this),this.status=1}function s(n){this.g=n}(gt=jn.prototype).Ka=function(n){this.L=n},gt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$v.g(),this.C=function Ds(n){return n.h||(n.h=n.i())}(this.u?this.u:$v),this.g.onreadystatechange=si(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void BT(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=jt.FormData&&n instanceof jt.FormData,!(0<=gv(ZR,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{fb(this),0<this.B&&((this.K=function KR(n){return vf&&function Iv(){return function wT(n){var e=IT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=mv(String(qg)).split("."),t=mv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",u=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=yv(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||yv(0==i[2].length,0==u[2].length)||yv(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=si(this.qa,this)):this.A=Id(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){BT(this,u)}},gt.qa=function(){typeof fv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Or(this,"timeout"),this.abort(8))},gt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Or(this,"complete"),Or(this,"abort"),pm(this))},gt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pm(this,!0)),jn.X.M.call(this)},gt.Ha=function(){this.s||(this.F||this.v||this.l?hb(this):this.fb())},gt.fb=function(){hb(this)},gt.aa=function(){try{return 2<Ha(this)?this.g.status:-1}catch{return-1}},gt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},gt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Xv(e)}},gt.Ea=function(){return this.m},gt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(gt=pb.prototype).ma=8,gt.G=1,gt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Cf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Dv(u),CT(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$T(this,i,e),Fn(t=ta(this.F),"RID",n),Fn(t,"CVER",22),this.D&&Fn(t,"X-HTTP-Session-Id",this.D),Of(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(nw(u)))+"&"+e:this.o&&gm(t,this.o,u)),lb(this.h,i),this.Ya&&Fn(t,"TYPE","init"),this.O?(Fn(t,"$req",e),Fn(t,"SID","null"),i.Z=!0,Gv(i,t,null)):Gv(i,t,e),this.G=2}}else 3==this.G&&(n?gb(this,n):0==this.i.length||ab(this.h)||gb(this))},gt.Ia=function(){if(this.u=null,mb(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=If(si(this.eb,this),n)}},gt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,yi(10),Md(this),mb(this))},gt.cb=function(){null!=this.v&&(this.v=null,Md(this),iw(this),yi(19))},gt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),yi(2)):(this.j.info("Failed to ping google.com"),yi(1))},(gt=ZT.prototype).xa=function(){},gt.wa=function(){},gt.va=function(){},gt.ua=function(){},gt.Ra=function(){},ow.prototype.g=function(n,e){return new Ss(n,e)},wr(Ss,Er),Ss.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;yi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=yb(n,null,n.V),Rf(n)},Ss.prototype.close=function(){mm(this.g)},Ss.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=kv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Rf(e)},Ss.prototype.M=function(){this.g.l=null,delete this.j,mm(this.g),delete this.g,Ss.X.M.call(this)},wr(KT,jv),wr(YT,Vi),wr(s,ZT),s.prototype.xa=function(){Or(this.g,"a")},s.prototype.wa=function(n){Or(this.g,new KT(n))},s.prototype.va=function(n){Or(this.g,new YT)},s.prototype.ua=function(){Or(this.g,"b")},ow.prototype.createWebChannel=ow.prototype.g,Ss.prototype.send=Ss.prototype.u,Ss.prototype.open=Ss.prototype.m,Ss.prototype.close=Ss.prototype.close,bf.NO_ERROR=0,bf.TIMEOUT=8,bf.HTTP_ERROR=6,Bv.COMPLETE="complete",YI.EventType=$c,$c.OPEN="a",$c.CLOSE="b",$c.ERROR="c",$c.MESSAGE="d",Er.prototype.listen=Er.prototype.N,jn.prototype.listenOnce=jn.prototype.O,jn.prototype.getLastError=jn.prototype.Oa,jn.prototype.getLastErrorCode=jn.prototype.Ea,jn.prototype.getStatus=jn.prototype.aa,jn.prototype.getResponseJson=jn.prototype.Sa,jn.prototype.getResponseText=jn.prototype.fa,jn.prototype.send=jn.prototype.da,jn.prototype.setWithCredentials=jn.prototype.Ka;var o=ea.createWebChannelTransport=function(){return new ow},a=ea.getStatEventTarget=function(){return Uv()},c=ea.ErrorCode=bf,h=ea.EventType=Bv,f=ea.Event=jc,y=ea.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},w=ea.FetchXmlHttpFactory=xd,b=ea.WebChannel=YI,T=ea.XhrIo=jn;const O="@firebase/firestore";class k{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}k.UNAUTHENTICATED=new k(null),k.GOOGLE_CREDENTIALS=new k("google-credentials-uid"),k.FIRST_PARTY=new k("first-party-uid"),k.MOCK_USER=new k("mock-user");let W="9.14.0";const te=new Su.Yd("@firebase/firestore");function Ie(){return te.logLevel}function ee(n,...e){if(te.logLevel<=Su.in.DEBUG){const t=e.map(Pe);te.debug(`Firestore (${W}): ${n}`,...t)}}function qe(n,...e){if(te.logLevel<=Su.in.ERROR){const t=e.map(Pe);te.error(`Firestore (${W}): ${n}`,...t)}}function mt(n,...e){if(te.logLevel<=Su.in.WARN){const t=e.map(Pe);te.warn(`Firestore (${W}): ${n}`,...t)}}function Pe(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Re(n="Unexpected state"){const e=`FIRESTORE (${W}) INTERNAL ASSERTION FAILED: `+n;throw qe(e),new Error(e)}function Ke(n,e){n||Re()}function We(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ar{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _m{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(k.UNAUTHENTICATED))}shutdown(){}}class uw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cw{constructor(e){this.t=e,this.currentUser=k.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=I=>this.i!==i?(i=this.i,t(I)):Promise.resolve();let l=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ar,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const I=l;e.enqueueRetryable((0,we.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},_=I=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(I=>_(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?_(I):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ar)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke("string"==typeof r.accessToken),new _m(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ke(null===e||"string"==typeof e),new k(e)}}class lw{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=k.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ke(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class dw{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new lw(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(k.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class YR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C1{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,ee("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke("string"==typeof t.token),this.A=t.token,new YR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function D1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class QR{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=D1(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function vm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function JR(n){return n+"\0"}class rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new rr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new rr(0,0))}static max(){return new Nt(new rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hw{constructor(e,t,r){void 0===t?t=0:t>e.length&&Re(),void 0===r?r=e.length-t:r>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===hw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),l=t.get(i);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends hw{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const S1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fr extends hw{construct(e,t,r){return new fr(e,t,r)}static isValidIdentifier(e){return S1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Le(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Le(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Le(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(l=!l,i++):"."!==p||l?(r+=p,i++):(u(),i++)}if(u(),l)throw new Le(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fr(t)}static emptyPath(){return new fr([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(dn.fromString(e))}static fromName(e){return new Ye(dn.fromString(e).popFirst(5))}static empty(){return new Ye(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new dn(e.slice()))}}class _b{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function QT(n){return n.fields.find(e=>2===e.kind)}function Nf(n){return n.fields.filter(e=>2!==e.kind)}_b.UNKNOWN_ID=-1;class vb{constructor(e,t){this.fieldPath=e,this.kind=t}}class fw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fw(0,fo.min())}}function XR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Nt.fromTimestamp(1e9===r?new rr(t+1,0):new rr(t,r));return new fo(i,Ye.empty(),e)}function eO(n){return new fo(n.readTime,n.key,-1)}class fo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fo(Nt.min(),Ye.empty(),-1)}static max(){return new fo(Nt.max(),Ye.empty(),-1)}}function JT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const tO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Od(n){return XT.apply(this,arguments)}function XT(){return XT=(0,we.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==tO)throw n;ee("LocalStore","Unexpectedly lost primary lease")}),XT.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,u=0,l=!1;e.forEach(p=>{++i,p.next(()=>{++u,l&&u===i&&t()},_=>r(_))}),l=!0,u===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const u=e.length,l=new Array(u);let p=0;for(let _=0;_<u;_++){const I=_;t(e[I]).next(S=>{l[I]=S,++p,p===u&&r(l)},S=>i(S))}})}static doWhile(e,t){return new de((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class wb{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ar,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new pw(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=eA(r.target.error);this.P.reject(new pw(e,i))}}static open(e,t,r,i){try{return new wb(t,e.transaction(i,r))}catch(u){throw new pw(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new M1(t)}}class Ga{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ga.D((0,Ht.z$)())&&qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ee("SimpleDb","Removing database:",e),Pf(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ht.hl)())return!1;if(Ga.N())return!0;const e=(0,Ht.z$)(),t=Ga.D(e),r=0<t&&t<10,i=Ga.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,we.Z)(function*(){return t.db||(ee("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{i(new pw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const p=l.target.error;i("VersionError"===p.name?new Le(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Le(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new pw(e,p))},u.onupgradeneeded=l=>{ee("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{ee("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,we.Z)(function*(){const l="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.F(e);const _=wb.open(u.db,e,l?"readonly":"readwrite",r),I=i(_).next(S=>(_.V(),S)).catch(S=>(_.abort(S),de.reject(S))).toPromise();return I.catch(()=>{}),yield _.v,I}catch(_){const I=_,S="FirebaseError"!==I.name&&p<3;if(ee("SimpleDb","Transaction failed with error:",I.message,"Retrying:",S),u.close(),!S)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class x1{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Pf(this.U.delete())}}class pw extends Le{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Nd(n){return"IndexedDbTransactionError"===n.name}class M1{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ee("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Pf(r)}add(e){return ee("SimpleDb","ADD",this.store.name,e,e),Pf(this.store.add(e))}get(e){return Pf(this.store.get(e)).next(t=>(void 0===t&&(t=null),ee("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ee("SimpleDb","DELETE",this.store.name,e),Pf(this.store.delete(e))}count(){return ee("SimpleDb","COUNT",this.store.name),Pf(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(l,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new de((u,l)=>{i.onerror=p=>{l(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){ee("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,l,p)=>p.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=u=>{const l=eA(u.target.error);i(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(p=>{p?l.continue():r()}):r()}})}H(e,t){const r=[];return new de((i,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const p=l.target.result;if(!p)return void i();const _=new x1(p),I=t(p.primaryKey,p.value,_);if(I instanceof de){const S=I.catch(x=>(_.done(),de.reject(x)));r.push(S)}_.isDone?i():null===_.G?p.continue():p.continue(_.G)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Pf(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=eA(r.target.error);t(i)}})}let rO=!1;function eA(n){const e=Ga.D((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rO||(rO=!0,setTimeout(()=>{throw r},0)),r}}return n}class R1{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ee("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{ee("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Nd(r)?ee("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Od(r)}yield t.nt(6e4)}))}}class O1{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return de.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ee("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(p=>{i-=p,r.add(l)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,u)).next(p=>(ee("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const l=eO(u);JT(l,r)>0&&(r=l)}),new fo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ts{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function iO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ts.at=-1;class pr{constructor(e,t){this.comparator=e,this.root=t||_i.EMPTY}insert(e,t){return new pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_i.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_i.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eb(this.root,e,this.comparator,!0)}}class Eb{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _i{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??_i.RED,this.left=i??_i.EMPTY,this.right=u??_i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new _i(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return _i.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}_i.EMPTY=null,_i.RED=!0,_i.BLACK=!1,_i.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(n,e,t,r,i){return this}insert(n,e,t){return new _i(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oO(this.data.getIterator())}getIteratorFrom(e){return new oO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class oO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wm(n){return n.hasNext()?n.getNext():void 0}class po{constructor(e){this.fields=e,e.sort(fr.comparator)}static empty(){return new po([])}unionWith(e){let t=new Rn(fr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new po(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Gr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gr.EMPTY_BYTE_STRING=new Gr("");const P1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pd(n){if(Ke(!!n),"string"==typeof n){let e=0;const t=P1.exec(n);if(Ke(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gr(n.seconds),nanos:gr(n.nanos)}}function gr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ff(n){return"string"==typeof n?Gr.fromBase64String(n):Gr.fromUint8Array(n)}function tA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function aO(n){const e=n.mapValue.fields.__previous_value__;return tA(e)?aO(e):e}function gw(n){const e=Pd(n.mapValue.fields.__local_write_time__.timestampValue);return new rr(e.seconds,e.nanos)}class k1{constructor(e,t,r,i,u,l,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class kd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new kd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof kd&&e.projectId===this.projectId&&e.database===this.database}}function mw(n){return null==n}function yw(n){return 0===n&&1/n==-1/0}function uO(n){return"number"==typeof n&&Number.isInteger(n)&&!yw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Fd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ib={nullValue:"NULL_VALUE"};function Lf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tA(n)?4:hO(n)?9007199254740991:10:Re()}function xu(n,e){if(n===e)return!0;const t=Lf(n);if(t!==Lf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gw(n).isEqual(gw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Pd(r.timestampValue),l=Pd(i.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ff(n.bytesValue).isEqual(Ff(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return gr(r.geoPointValue.latitude)===gr(i.geoPointValue.latitude)&&gr(r.geoPointValue.longitude)===gr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return gr(r.integerValue)===gr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=gr(r.doubleValue),l=gr(i.doubleValue);return u===l?yw(u)===yw(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return vm(n.arrayValue.values||[],e.arrayValue.values||[],xu);case 10:return function(r,i){const u=r.mapValue.fields||{},l=i.mapValue.fields||{};if(iO(u)!==iO(l))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===l[p]||!xu(u[p],l[p])))return!1;return!0}(n,e);default:return Re()}var i}function _w(n,e){return void 0!==(n.values||[]).find(t=>xu(t,e))}function Ld(n,e){if(n===e)return 0;const t=Lf(n),r=Lf(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const l=gr(i.integerValue||i.doubleValue),p=gr(u.integerValue||u.doubleValue);return l<p?-1:l>p?1:l===p?0:isNaN(l)?isNaN(p)?0:-1:1}(n,e);case 3:return cO(n.timestampValue,e.timestampValue);case 4:return cO(gw(n),gw(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,u){const l=Ff(i),p=Ff(u);return l.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const l=i.split("/"),p=u.split("/");for(let _=0;_<l.length&&_<p.length;_++){const I=Gt(l[_],p[_]);if(0!==I)return I}return Gt(l.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const l=Gt(gr(i.latitude),gr(u.latitude));return 0!==l?l:Gt(gr(i.longitude),gr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const l=i.values||[],p=u.values||[];for(let _=0;_<l.length&&_<p.length;++_){const I=Ld(l[_],p[_]);if(I)return I}return Gt(l.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Fd.mapValue&&u===Fd.mapValue)return 0;if(i===Fd.mapValue)return 1;if(u===Fd.mapValue)return-1;const l=i.fields||{},p=Object.keys(l),_=u.fields||{},I=Object.keys(_);p.sort(),I.sort();for(let S=0;S<p.length&&S<I.length;++S){const x=Gt(p[S],I[S]);if(0!==x)return x;const U=Ld(l[p[S]],_[I[S]]);if(0!==U)return U}return Gt(p.length,I.length)}(n.mapValue,e.mapValue);default:throw Re()}}function cO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=Pd(n),r=Pd(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function Em(n){return nA(n)}function nA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Pd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ff(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const l of r.values||[])u?u=!1:i+=",",i+=nA(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const p of i)l?l=!1:u+=",",u+=`${p}:${nA(r.fields[p])}`;return u+"}"}(n.mapValue):Re();var e}function Vf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rA(n){return!!n&&"integerValue"in n}function vw(n){return!!n&&"arrayValue"in n}function lO(n){return!!n&&"nullValue"in n}function dO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bb(n){return!!n&&"mapValue"in n}function ww(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return kf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ww(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ww(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function F1(n){return"nullValue"in n?Ib:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vf(kd.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Re()}function L1(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vf(kd.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Fd:Re()}function fO(n,e){const t=Ld(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function pO(n,e){const t=Ld(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class vi{constructor(e){this.value=e}static empty(){return new vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ww(t)}setAll(e){let t=fr.emptyPath(),r={},i=[];e.forEach((l,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}l?r[p.lastSegment()]=ww(l):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());bb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){kf(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new vi(ww(this.value))}}function gO(n){const e=[];return kf(n.fields,(t,r)=>{const i=new fr([t]);if(bb(r)){const u=gO(r.mapValue).fields;if(0===u.length)e.push(i);else for(const l of u)e.push(i.child(l))}else e.push(i)}),new po(e)}class Hn{constructor(e,t,r,i,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=l}static newInvalidDocument(e){return new Hn(e,0,Nt.min(),Nt.min(),vi.empty(),0)}static newFoundDocument(e,t,r){return new Hn(e,1,t,Nt.min(),r,0)}static newNoDocument(e,t){return new Hn(e,2,t,Nt.min(),vi.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,Nt.min(),vi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class V1{constructor(e,t=null,r=[],i=[],u=null,l=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=l,this.endAt=p,this.ht=null}}function mO(n,e=null,t=[],r=[],i=null,u=null,l=null){return new V1(n,e,t,r,i,u,l)}function Uf(n){const e=We(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Em(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),mw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Em(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Em(r)).join(",")),e.ht=t}return e.ht}function Ew(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!W1(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!xu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!EO(n.startAt,e.startAt)&&EO(n.endAt,e.endAt)}function Cb(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Db(n,e){return n.filters.filter(t=>t instanceof wi&&t.field.isEqual(e))}function yO(n,e,t){let r=Ib,i=!0;for(const u of Db(n,e)){let l=Ib,p=!0;switch(u.op){case"<":case"<=":l=F1(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,p=!1;break;case"!=":case"not-in":l=Ib}fO({value:r,inclusive:i},{value:l,inclusive:p})<0&&(r=l,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];fO({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function _O(n,e,t){let r=Fd,i=!0;for(const u of Db(n,e)){let l=Fd,p=!0;switch(u.op){case">=":case">":l=L1(u.value),p=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,p=!1;break;case"!=":case"not-in":l=Fd}pO({value:r,inclusive:i},{value:l,inclusive:p})>0&&(r=l,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];pO({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class wi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new B1(e,t,r):"array-contains"===t?new H1(e,r):"in"===t?new G1(e,r):"not-in"===t?new z1(e,r):"array-contains-any"===t?new q1(e,r):new wi(e,t,r)}static lt(e,t,r){return"in"===t?new j1(e,r):new $1(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Ld(t,this.value)):null!==t&&Lf(this.value)===Lf(t)&&this.ft(Ld(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Re()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class B1 extends wi{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.ft(t)}}class j1 extends wi{constructor(e,t){super(e,"in",t),this.keys=vO(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $1 extends wi{constructor(e,t){super(e,"not-in",t),this.keys=vO(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function vO(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class H1 extends wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vw(t)&&_w(t.arrayValue,this.value)}}class G1 extends wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_w(this.value.arrayValue,t)}}class z1 extends wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(_w(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_w(this.value.arrayValue,t)}}class q1 extends wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_w(this.value.arrayValue,r))}}class Vd{constructor(e,t){this.position=e,this.inclusive=t}}class Im{constructor(e,t="asc"){this.field=e,this.dir=t}}function W1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function wO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],l=n.position[i];if(r=u.field.isKeyField()?Ye.comparator(Ye.fromName(l.referenceValue),t.key):Ld(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function EO(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xu(n.position[t],e.position[t]))return!1;return!0}class qc{constructor(e,t=null,r=[],i=[],u=null,l="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=l,this.startAt=p,this.endAt=_,this._t=null,this.wt=null}}function IO(n,e,t,r,i,u,l,p){return new qc(n,e,t,r,i,u,l,p)}function bm(n){return new qc(n)}function bO(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function iA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function sA(n){for(const e of n.filters)if(e.dt())return e.field;return null}function oA(n){return null!==n.collectionGroup}function Cm(n){const e=We(n);if(null===e._t){e._t=[];const t=sA(e),r=iA(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Im(t)),e._t.push(new Im(fr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Im(fr.keyField(),u))}}}return e._t}function ns(n){const e=We(n);if(!e.wt)if("F"===e.limitType)e.wt=mO(e.path,e.collectionGroup,Cm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Cm(e))t.push(new Im(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Vd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Vd(e.startAt.position,e.startAt.inclusive):null;e.wt=mO(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Sb(n,e,t){return new qc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Iw(n,e){return Ew(ns(n),ns(e))&&n.limitType===e.limitType}function CO(n){return`${Uf(ns(n))}|lt:${n.limitType}`}function aA(n){return`Query(target=${function U1(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Em(r.value)}`;var r}).join(", ")}]`),mw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Em(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Em(t)).join(",")),`Target(${e})`}(ns(n))}; limitType=${n.limitType})`}function uA(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ye.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,l){const p=wO(i,u,l);return i.inclusive?p<=0:p<0}(t.startAt,Cm(t),r)||t.endAt&&!function(i,u,l){const p=wO(i,u,l);return i.inclusive?p>=0:p>0}(t.endAt,Cm(t),r)));var t,r}function DO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SO(n){return(e,t)=>{let r=!1;for(const i of Cm(n)){const u=Z1(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function Z1(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(i,u,l){const p=u.data.field(i),_=l.data.field(i);return null!==p&&null!==_?Ld(p,_):Re()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Re()}}function TO(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yw(e)?"-0":e}}function AO(n){return{integerValue:""+n}}function xO(n,e){return uO(e)?AO(e):TO(n,e)}class Tb{constructor(){this._=void 0}}function K1(n,e,t){return n instanceof Dm?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Bf?RO(n,e):n instanceof jf?OO(n,e):function(r,i){const u=MO(r,i),l=NO(u)+NO(r.yt);return rA(u)&&rA(r.yt)?AO(l):TO(r.It,l)}(n,e)}function Y1(n,e,t){return n instanceof Bf?RO(n,e):n instanceof jf?OO(n,e):t}function MO(n,e){return n instanceof Sm?rA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Dm extends Tb{}class Bf extends Tb{constructor(e){super(),this.elements=e}}function RO(n,e){const t=PO(e);for(const r of n.elements)t.some(i=>xu(i,r))||t.push(r);return{arrayValue:{values:t}}}class jf extends Tb{constructor(e){super(),this.elements=e}}function OO(n,e){let t=PO(e);for(const r of n.elements)t=t.filter(i=>!xu(i,r));return{arrayValue:{values:t}}}class Sm extends Tb{constructor(e,t){super(),this.It=e,this.yt=t}}function NO(n){return gr(n.integerValue||n.doubleValue)}function PO(n){return vw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class bw{constructor(e,t){this.field=e,this.transform=t}}class J1{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ab(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class xb{}function kO(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Am(n.key,ir.none()):new Tm(n.key,n.data,ir.none());{const t=n.data,r=vi.empty();let i=new Rn(fr.comparator);for(let u of e.fields)if(!i.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),i=i.add(u)}return new Wc(n.key,r,new po(i.toArray()),ir.none())}}function X1(n,e,t){n instanceof Tm?function(r,i,u){const l=r.value.clone(),p=VO(r.fieldTransforms,i,u.transformResults);l.setAll(p),i.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Wc?function(r,i,u){if(!Ab(r.precondition,i))return void i.convertToUnknownDocument(u.version);const l=VO(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(LO(r)),p.setAll(l),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Cw(n,e,t,r){return n instanceof Tm?function(i,u,l,p){if(!Ab(i.precondition,u))return l;const _=i.value.clone(),I=UO(i.fieldTransforms,p,u);return _.setAll(I),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Wc?function(i,u,l,p){if(!Ab(i.precondition,u))return l;const _=UO(i.fieldTransforms,p,u),I=u.data;return I.setAll(LO(i)),I.setAll(_),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,Ab(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function eF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=MO(r.transform,i||null);null!=u&&(null===t&&(t=vi.empty()),t.set(r.field,u))}return t||null}function FO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&vm(t,r,(i,u)=>function Q1(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Bf&&r instanceof Bf||t instanceof jf&&r instanceof jf?vm(t.elements,r.elements,xu):t instanceof Sm&&r instanceof Sm?xu(t.yt,r.yt):t instanceof Dm&&r instanceof Dm);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Tm extends xb{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wc extends xb{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function LO(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function VO(n,e,t){const r=new Map;Ke(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],l=u.transform,p=e.data.field(u.field);r.set(u.field,Y1(l,p,t[i]))}return r}function UO(n,e,t){const r=new Map;for(const i of n){const u=i.transform,l=t.data.field(i.field);r.set(i.field,K1(u,l,e))}return r}class Am extends xb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cA extends xb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tF{constructor(e){this.count=e}}var Nr,hn;function BO(n){switch(n){default:return Re();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function jO(n){if(void 0===n)return qe("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Nr.OK:return ge.OK;case Nr.CANCELLED:return ge.CANCELLED;case Nr.UNKNOWN:return ge.UNKNOWN;case Nr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Nr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Nr.INTERNAL:return ge.INTERNAL;case Nr.UNAVAILABLE:return ge.UNAVAILABLE;case Nr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Nr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Nr.NOT_FOUND:return ge.NOT_FOUND;case Nr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Nr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Nr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Nr.ABORTED:return ge.ABORTED;case Nr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Nr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Nr.DATA_LOSS:return ge.DATA_LOSS;default:return Re()}}(hn=Nr||(Nr={}))[hn.OK=0]="OK",hn[hn.CANCELLED=1]="CANCELLED",hn[hn.UNKNOWN=2]="UNKNOWN",hn[hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hn[hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hn[hn.NOT_FOUND=5]="NOT_FOUND",hn[hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",hn[hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",hn[hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",hn[hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hn[hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hn[hn.ABORTED=10]="ABORTED",hn[hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",hn[hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",hn[hn.INTERNAL=13]="INTERNAL",hn[hn.UNAVAILABLE=14]="UNAVAILABLE",hn[hn.DATA_LOSS=15]="DATA_LOSS";class Ud{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kf(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return sO(this.inner)}size(){return this.innerSize}}const nF=new pr(Ye.comparator);function As(){return nF}const $O=new pr(Ye.comparator);function Dw(...n){let e=$O;for(const t of n)e=e.insert(t.key,t);return e}function HO(n){let e=$O;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Mu(){return Sw()}function GO(){return Sw()}function Sw(){return new Ud(n=>n.toString(),(n,e)=>n.isEqual(e))}const rF=new pr(Ye.comparator),iF=new Rn(Ye.comparator);function Yt(...n){let e=iF;for(const t of n)e=e.add(t);return e}const sF=new Rn(Gt);function Mb(){return sF}class Tw{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Aw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Tw(Nt.min(),i,Mb(),As(),Yt())}}class Aw{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Aw(r,t,Yt(),Yt(),Yt())}}class Rb{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class zO{constructor(e,t){this.targetId=e,this.At=t}}class qO{constructor(e,t,r=Gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class WO{constructor(){this.Rt=0,this.bt=KO(),this.Pt=Gr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Yt(),t=Yt(),r=Yt();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Re()}}),new Aw(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=KO()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class oF{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=As(),this.qt=ZO(),this.Kt=new Rn(Gt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(Cb(u))if(0===r){const l=new Ye(u.path);this.jt(t,l,Hn.newNoDocument(l,Nt.min()))}else Ke(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,l)=>{const p=this.Xt(l);if(p){if(u.current&&Cb(p.target)){const _=new Ye(p.target.path);null!==this.Ut.get(_)||this.ee(l,_)||this.jt(l,_,Hn.newNoDocument(_,e))}u.Dt&&(t.set(l,u.xt()),u.Nt())}});let r=Yt();this.qt.forEach((u,l)=>{let p=!0;l.forEachWhile(_=>{const I=this.Xt(_);return!I||2===I.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const i=new Tw(e,t,this.Kt,this.Ut,r);return this.Ut=As(),this.qt=ZO(),this.Kt=new Rn(Gt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new WO,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Rn(Gt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ee("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new WO),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function ZO(){return new pr(Ye.comparator)}function KO(){return new pr(Ye.comparator)}const aF={asc:"ASCENDING",desc:"DESCENDING"},uF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class cF{constructor(e,t){this.databaseId=e,this.gt=t}}function xw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YO(n,e){return n.gt?e.toBase64():e.toUint8Array()}function lF(n,e){return xw(n,e.toTimestamp())}function oi(n){return Ke(!!n),Nt.fromTimestamp(function(e){const t=Pd(e);return new rr(t.seconds,t.nanos)}(n))}function lA(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function QO(n){const e=dn.fromString(n);return Ke(sN(e)),e}function Mw(n,e){return lA(n.databaseId,e.path)}function Ru(n,e){const t=QO(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(XO(t))}function dA(n,e){return lA(n.databaseId,e)}function JO(n){const e=QO(n);return 4===e.length?dn.emptyPath():XO(e)}function Rw(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XO(n){return Ke(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function eN(n,e,t){return{name:Mw(n,e),fields:t.value.mapValue.fields}}function tN(n,e,t){const r=Ru(n,e.name),i=oi(e.updateTime),u=new vi({mapValue:{fields:e.fields}}),l=Hn.newFoundDocument(r,i,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Ow(n,e){let t;if(e instanceof Tm)t={update:eN(n,e.key,e.value)};else if(e instanceof Am)t={delete:Mw(n,e.key)};else if(e instanceof Wc)t={update:eN(n,e.key,e.data),updateMask:vF(e.fieldMask)};else{if(!(e instanceof cA))return Re();t={verify:Mw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const l=u.transform;if(l instanceof Dm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bf)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof jf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Sm)return{fieldPath:u.field.canonicalString(),increment:l.yt};throw Re()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:lF(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Re()),t;var i}function hA(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ir.updateTime(oi(i.updateTime)):void 0!==i.exists?ir.exists(i.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,l){let p=null;"setToServerValue"in l?(Ke("REQUEST_TIME"===l.setToServerValue),p=new Dm):"appendMissingElements"in l?p=new Bf(l.appendMissingElements.values||[]):"removeAllFromArray"in l?p=new jf(l.removeAllFromArray.values||[]):"increment"in l?p=new Sm(u,l.increment):Re();const _=fr.fromServerFormat(l.fieldPath);return new bw(_,p)}(n,i)):[];var i;if(e.update){const i=Ru(n,e.update.name),u=new vi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new po((e.updateMask.fieldPaths||[]).map(I=>fr.fromServerFormat(I)));return new Wc(i,u,l,t,r)}return new Tm(i,u,t,r)}if(e.delete){const i=Ru(n,e.delete);return new Am(i,t)}if(e.verify){const i=Ru(n,e.verify);return new cA(i,t)}return Re()}function nN(n,e){return{documents:[dA(n,e.path)]}}function fA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=dA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const I=_.map(S=>function(x){if("=="===x.op){if(dO(x.value))return{unaryFilter:{field:xm(x.field),op:"IS_NAN"}};if(lO(x.value))return{unaryFilter:{field:xm(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(dO(x.value))return{unaryFilter:{field:xm(x.field),op:"IS_NOT_NAN"}};if(lO(x.value))return{unaryFilter:{field:xm(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xm(x.field),op:mF(x.op),value:x.value}}}(S));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(I=>{return{field:xm((S=I).field),direction:gF(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(I=e.limit,n.gt||mw(I)?I:{value:I});var I,p,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function rN(n){let e=JO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ke(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=iN(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new Im(Mm((x=S).field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let p=null;t.limit&&(p=function(S){let x;return x="object"==typeof S?S.value:S,mw(x)?null:x}(t.limit));let _=null;var S;t.startAt&&(_=new Vd((S=t.startAt).values||[],!!S.before));let I=null;return t.endAt&&(I=function(S){return new Vd(S.values||[],!S.before)}(t.endAt)),IO(e,i,l,u,p,"F",_,I)}function iN(n){return n?void 0!==n.unaryFilter?[_F(n)]:void 0!==n.fieldFilter?[yF(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>iN(e)).reduce((e,t)=>e.concat(t)):Re():[]}function gF(n){return aF[n]}function mF(n){return uF[n]}function xm(n){return{fieldPath:n.canonicalString()}}function Mm(n){return fr.fromServerFormat(n.fieldPath)}function yF(n){return wi.create(Mm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(n.fieldFilter.op),n.fieldFilter.value)}function _F(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Mm(n.unaryFilter.field);return wi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Mm(n.unaryFilter.field);return wi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Mm(n.unaryFilter.field);return wi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Mm(n.unaryFilter.field);return wi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}function vF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sN(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function rs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oN(e)),e=wF(n.get(t),e);return oN(e)}function wF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function oN(n){return n+"\x01\x01"}function Ou(n){const e=n.length;if(Ke(e>=2),2===e)return Ke("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&Re(),n.charAt(l+1)){case"\x01":const p=n.substring(u,l);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,l),i+="\0";break;case"\x11":i+=n.substring(u,l+1);break;default:Re()}u=l+2}return new dn(r)}const aN=["userId","batchId"];function Ob(n,e){return[n,rs(e)]}function uN(n,e,t){return[n,rs(e),t]}const EF={},IF=["prefixPath","collectionGroup","readTime","documentId"],bF=["prefixPath","collectionGroup","documentId"],CF=["collectionGroup","readTime","prefixPath","documentId"],DF=["canonicalId","targetId"],SF=["targetId","path"],TF=["path","targetId"],AF=["collectionId","parent"],xF=["indexId","uid"],MF=["uid","sequenceNumber"],RF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],OF=["indexId","uid","orderedDocumentKey"],NF=["userId","collectionPath","documentId"],PF=["userId","collectionPath","largestBatchId"],kF=["userId","collectionGroup","largestBatchId"],cN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],FF=[...cN,"documentOverlays"],lN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dN=lN,LF=[...dN,"indexConfiguration","indexState","indexEntries"];class pA extends nO{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ai(n,e){const t=We(n);return Ga.M(t.ie,e)}class gA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&X1(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=GO();return this.mutations.forEach(i=>{const u=e.get(i.key),l=u.overlayedDocument;let p=this.applyToLocalView(l,u.mutatedFields);p=t.has(i.key)?null:p;const _=kO(l,p);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(Nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&vm(this.mutations,e.mutations,(t,r)=>FO(t,r))&&vm(this.baseMutations,e.baseMutations,(t,r)=>FO(t,r))}}class mA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ke(e.mutations.length===r.length);let i=rF;const u=e.mutations;for(let l=0;l<u.length;l++)i=i.insert(u[l].key,r[l].version);return new mA(e,t,r,i)}}class yA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bd{constructor(e,t,r,i,u=Nt.min(),l=Nt.min(),p=Gr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=p}withSequenceNumber(e){return new Bd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Bd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Bd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class hN{constructor(e){this.re=e}}function fN(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Mw(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:xw(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:$f(e.version)};else{if(!e.isUnknownDocument())return Re();r.unknownDocument={path:t.path.toArray(),version:$f(e.version)}}var i,u;return r}function Nb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function $f(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hf(n){const e=new rr(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function Gf(n,e){const t=(e.baseMutations||[]).map(u=>hA(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>hA(n.re,u)),i=rr.fromMillis(e.localWriteTimeMs);return new gA(e.batchId,i,t,r)}function Nw(n){const e=Hf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Hf(n.lastLimboFreeSnapshotVersion):Nt.min();let r;var i;return void 0!==n.query.documents?(Ke(1===(i=n.query).documents.length),r=ns(bm(JO(i.documents[0])))):r=ns(rN(n.query)),new Bd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Gr.fromBase64String(n.resumeToken))}function pN(n,e){const t=$f(e.snapshotVersion),r=$f(e.lastLimboFreeSnapshotVersion);let i;i=Cb(e.target)?nN(n.re,e.target):fA(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uf(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function _A(n){const e=rN({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Sb(e,e.limit,"L"):e}function vA(n,e){return new yA(e.largestBatchId,hA(n.re,e.overlayMutation))}function gN(n,e){const t=e.path.lastSegment();return[n,rs(e.path.popLast()),t]}function mN(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:$f(r.readTime),documentKey:rs(r.documentKey.path),largestBatchId:r.largestBatchId}}class UF{getBundleMetadata(e,t){return yN(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Hf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return yN(e).put({bundleId:(r=t).id,createTime:$f(oi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return _N(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:_A(i.bundledQuery),readTime:Hf(i.readTime)};var i})}saveNamedQuery(e,t){return _N(e).put({name:(r=t).name,readTime:$f(oi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function yN(n){return ai(n,"bundles")}function _N(n){return ai(n,"namedQueries")}class Pb{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Pb(e,t.uid||"")}getOverlay(e,t){return Pw(e).get(gN(this.userId,t)).next(r=>r?vA(this.It,r):null)}getOverlays(e,t){const r=Mu();return de.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,l)=>{const p=new yA(t,l);i.push(this.ue(e,p))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(rs(l.getCollectionPath())));const u=[];return i.forEach(l=>{const p=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Pw(e).Y("collectionPathOverlayIndex",p))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Mu(),u=rs(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Pw(e).W("collectionPathOverlayIndex",l).next(p=>{for(const _ of p){const I=vA(this.It,_);i.set(I.getKey(),I)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Mu();let l;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pw(e).Z({index:"collectionGroupOverlayIndex",range:p},(_,I,S)=>{const x=vA(this.It,I);u.size()<i||x.largestBatchId===l?(u.set(x.getKey(),x),l=x.largestBatchId):S.done()}).next(()=>u)}ue(e,t){return Pw(e).put(function(r,i,u){const[l,p,_]=gN(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ow(r.re,u.mutation)}}(this.It,this.userId,t))}}function Pw(n){return ai(n,"documentOverlays")}class zf{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(gr(e.integerValue));else if("doubleValue"in e){const r=gr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),yw(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ff(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?hO(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Re()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ye.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function BF(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function vN(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=BF(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}zf.Te=new zf;class jF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=vN(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=vN(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $F{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class HF{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class kw{constructor(){this.Be=new jF,this.Le=new $F(this.Be),this.Ue=new HF(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class qf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qf(this.indexId,this.documentKey,this.arrayValue,r)}}function Wf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=wN(n.arrayValue,e.arrayValue),0!==t?t:(t=wN(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function wN(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class GF{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=QT(e);if(void 0!==t&&!this.ze(t))return!1;const r=Nf(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[u++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class zF{constructor(){this.Ye=new wA}addToCollectionParentIndex(e,t){return this.Ye.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(fo.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(fo.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class wA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Rn(dn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rn(dn.comparator)).toArray()}}const kb=new Uint8Array(0);class qF{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new wA,this.Ze=new Ud(r=>Uf(r),(r,i)=>Ew(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:rs(i)};return EN(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[JR(t),""],!1,!0);return EN(e).W(i).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Ou(l.parent))}return r})}addFieldIndex(e,t){const r=Fb(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var l;delete i.indexId;const u=r.add(i);if(t.indexState){const l=Lw(e);return u.next(p=>{l.put(mN(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Fb(e),i=Lw(e),u=Fw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Fw(e);let i=!0;const u=new Map;return de.forEach(this.tn(t),l=>this.en(e,l).next(p=>{i&&(i=!!p),u.set(l,p)})).next(()=>{if(i){let l=Yt();const p=[];return de.forEach(u,(_,I)=>{var S;ee("IndexedDbIndexManager",`Using index ${S=_,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(ht=>`${ht.fieldPath}:${ht.kind}`).join(",")}`} to execute ${Uf(t)}`);const x=function(ht,dt){const Tt=QT(dt);if(void 0===Tt)return null;for(const Lt of Db(ht,Tt.fieldPath))switch(Lt.op){case"array-contains-any":return Lt.value.arrayValue.values||[];case"array-contains":return[Lt.value]}return null}(I,_),U=function(ht,dt){const Tt=new Map;for(const Lt of Nf(dt))for(const cr of Db(ht,Lt.fieldPath))switch(cr.op){case"==":case"in":Tt.set(Lt.fieldPath.canonicalString(),cr.value);break;case"not-in":case"!=":return Tt.set(Lt.fieldPath.canonicalString(),cr.value),Array.from(Tt.values())}return null}(I,_),H=function(ht,dt){const Tt=[];let Lt=!0;for(const cr of Nf(dt)){const Za=0===cr.kind?yO(ht,cr.fieldPath,ht.startAt):_O(ht,cr.fieldPath,ht.startAt);Tt.push(Za.value),Lt&&(Lt=Za.inclusive)}return new Vd(Tt,Lt)}(I,_),K=function(ht,dt){const Tt=[];let Lt=!0;for(const cr of Nf(dt)){const Za=0===cr.kind?_O(ht,cr.fieldPath,ht.endAt):yO(ht,cr.fieldPath,ht.endAt);Tt.push(Za.value),Lt&&(Lt=Za.inclusive)}return new Vd(Tt,Lt)}(I,_),Te=this.nn(_,I,H),De=this.nn(_,I,K),ot=this.sn(_,I,U),vt=this.rn(_.indexId,x,Te,H.inclusive,De,K.inclusive,ot);return de.forEach(vt,ht=>r.J(ht,t.limit).next(dt=>{dt.forEach(Tt=>{const Lt=Ye.fromSegments(Tt.documentKey);l.has(Lt)||(l=l.add(Lt),p.push(Lt))})}))}).next(()=>p)}return de.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,l,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),I=_/(null!=t?t.length:1),S=[];for(let x=0;x<_;++x){const U=t?this.on(t[x/I]):kb,H=this.un(e,U,r[x%I],i),K=this.cn(e,U,u[x%I],l),Te=p.map(De=>this.un(e,U,De,!0));S.push(...this.createRange(H,K,Te))}return S}un(e,t,r,i){const u=new qf(e,Ye.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new qf(e,Ye.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new GF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let l=null;for(const p of u)r.We(p)&&(!l||p.fields.length>l.fields.length)&&(l=p);return l})}getIndexType(e,t){let r=2;return de.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(l){let p=new Rn(fr.comparator),_=!1;for(const I of l.filters){const S=I;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?_=!0:p=p.add(S.field))}for(const I of l.orderBy)I.field.isKeyField()||(p=p.add(I.field));return p.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new kw;for(const i of Nf(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const l=r.qe(i.kind);zf.Te.ce(u,l)}return r.$e()}on(e){const t=new kw;return zf.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new kw;return zf.Te.ce(Vf(this.databaseId,t),r.qe(function(i){const u=Nf(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new kw);let u=0;for(const l of Nf(e)){const p=r[u++];for(const _ of i)if(this.ln(t,l.fieldPath)&&vw(p))i=this.fn(i,l,p);else{const I=_.qe(l.kind);zf.Te.ce(p,I)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const l of r.arrayValue.values||[])for(const p of i){const _=new kw;_.seed(p.$e()),zf.Te.ce(l,_.qe(t.kind)),u.push(_)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof wi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Fb(e),i=Lw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return de.forEach(u,p=>i.get([p.indexId,this.uid]).next(_=>{l.push(function(I,S){const x=S?new fw(S.sequenceNumber,new fo(Hf(S.readTime),new Ye(Ou(S.documentKey)),S.largestBatchId)):fw.empty(),U=I.fields.map(([H,K])=>new vb(fr.fromServerFormat(H),K));return new _b(I.indexId,I.collectionGroup,U,x)}(p,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Fb(e),u=Lw(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>de.forEach(p,_=>u.put(mN(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,u)=>{const l=r.get(i.collectionGroup);return(l?de.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),de.forEach(p,_=>this.wn(e,i,_).next(I=>{const S=this.mn(u,_);return I.isEqual(S)?de.resolve():this.gn(e,u,_,I,S)}))))})}yn(e,t,r,i){return Fw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Fw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Fw(e);let u=new Rn(Wf);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,p)=>{u=u.add(new qf(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}mn(e,t){let r=new Rn(Wf);const i=this.an(t,e);if(null==i)return r;const u=QT(t);if(null!=u){const l=e.data.field(u.fieldPath);if(vw(l))for(const p of l.arrayValue.values||[])r=r.add(new qf(t.indexId,e.key,this.on(p),i))}else r=r.add(new qf(t.indexId,e.key,kb,i));return r}gn(e,t,r,i,u){ee("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(p,_,I,S,x){const U=p.getIterator(),H=_.getIterator();let K=wm(U),Te=wm(H);for(;K||Te;){let De=!1,ot=!1;if(K&&Te){const vt=I(K,Te);vt<0?ot=!0:vt>0&&(De=!0)}else null!=K?ot=!0:De=!0;De?(S(Te),Te=wm(H)):ot?(x(K),K=wm(U)):(K=wm(U),Te=wm(H))}}(i,u,Wf,p=>{l.push(this.yn(e,t,r,p))},p=>{l.push(this.pn(e,t,r,p))}),de.waitFor(l)}_n(e){let t=1;return Lw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,p)=>Wf(l,p)).filter((l,p,_)=>!p||0!==Wf(l,_[p-1]));const i=[];i.push(e);for(const l of r){const p=Wf(l,e),_=Wf(l,t);if(0===p)i[0]=e.Ke();else if(p>0&&_<0)i.push(l),i.push(l.Ke());else if(_>0)break}i.push(t);const u=[];for(let l=0;l<i.length;l+=2)u.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,kb,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,kb,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(IN)}getMinOffset(e,t){return de.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||Re())).next(IN)}}function EN(n){return ai(n,"collectionParents")}function Fw(n){return ai(n,"indexEntries")}function Fb(n){return ai(n,"indexConfiguration")}function Lw(n){return ai(n,"indexState")}function IN(n){Ke(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;JT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new fo(e.readTime,e.documentKey,t)}const bN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xs(e,xs.DEFAULT_COLLECTION_PERCENTILE,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function CN(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let p=0;const _=r.Z({range:l},(S,x,U)=>(p++,U.delete()));u.push(_.next(()=>{Ke(1===p)}));const I=[];for(const S of t.mutations){const x=uN(e,S.key.path,t.batchId);u.push(i.delete(x)),I.push(S.key)}return de.waitFor(u).next(()=>I)}function Lb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Re();e=n.noDocument}return JSON.stringify(e).length}xs.DEFAULT_COLLECTION_PERCENTILE=10,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xs.DEFAULT=new xs(41943040,xs.DEFAULT_COLLECTION_PERCENTILE,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xs.DISABLED=new xs(-1,0,0);class Vb{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Ke(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Vb(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jd(e).Z({index:"userMutationsIndex",range:r},(i,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Rm(e),l=jd(e);return l.add({}).next(p=>{Ke("number"==typeof p);const _=new gA(p,t,r,i),I=function(U,H,K){const Te=K.baseMutations.map(ot=>Ow(U.re,ot)),De=K.mutations.map(ot=>Ow(U.re,ot));return{userId:H,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:Te,mutations:De}}(this.It,this.userId,_),S=[];let x=new Rn((U,H)=>Gt(U.canonicalString(),H.canonicalString()));for(const U of i){const H=uN(this.userId,U.key.path,p);x=x.add(U.key.path.popLast()),S.push(l.put(I)),S.push(u.put(H,EF))}return x.forEach(U=>{S.push(this.indexManager.addToCollectionParentIndex(e,U))}),e.addOnCommittedListener(()=>{this.In[p]=_.keys()}),de.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return jd(e).get(t).next(r=>r?(Ke(r.userId===this.userId),Gf(this.It,r)):null)}Tn(e,t){return this.In[t]?de.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return jd(e).Z({index:"userMutationsIndex",range:i},(l,p,_)=>{p.userId===this.userId&&(Ke(p.batchId>=r),u=Gf(this.It,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return jd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jd(e).W("userMutationsIndex",t).next(r=>r.map(i=>Gf(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ob(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Rm(e).Z({range:i},(l,p,_)=>{const[I,S,x]=l,U=Ou(S);if(I===this.userId&&t.path.isEqual(U))return jd(e).get(x).next(H=>{if(!H)throw Re();Ke(H.userId===this.userId),u.push(Gf(this.It,H))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(Gt);const i=[];return t.forEach(u=>{const l=Ob(this.userId,u.path),p=IDBKeyRange.lowerBound(l),_=Rm(e).Z({range:p},(I,S,x)=>{const[U,H,K]=I,Te=Ou(H);U===this.userId&&u.path.isEqual(Te)?r=r.add(K):x.done()});i.push(_)}),de.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=Ob(this.userId,r),l=IDBKeyRange.lowerBound(u);let p=new Rn(Gt);return Rm(e).Z({range:l},(_,I,S)=>{const[x,U,H]=_,K=Ou(U);x===this.userId&&r.isPrefixOf(K)?K.length===i&&(p=p.add(H)):S.done()}).next(()=>this.En(e,p))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(jd(e).get(u).next(l=>{if(null===l)throw Re();Ke(l.userId===this.userId),r.push(Gf(this.It,l))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return CN(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Rm(e).Z({range:r},(u,l,p)=>{if(u[0]===this.userId){const _=Ou(u[1]);i.push(_)}else p.done()}).next(()=>{Ke(0===i.length)})})}containsKey(e,t){return DN(e,this.userId,t)}Rn(e){return SN(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function DN(n,e,t){const r=Ob(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Rm(n).Z({range:u,X:!0},(p,_,I)=>{const[S,x,U]=p;S===e&&x===i&&(l=!0),I.done()}).next(()=>l)}function jd(n){return ai(n,"mutations")}function Rm(n){return ai(n,"documentMutations")}function SN(n){return ai(n,"mutationQueues")}class Zf{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Zf(0)}static vn(){return new Zf(-1)}}class WF{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Zf(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Nt.fromTimestamp(new rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Om(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ke(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Om(e).Z((l,p)=>{const _=Nw(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>de.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Om(e).Z((r,i)=>{const u=Nw(i);t(u)})}Vn(e){return TN(e).get("targetGlobalKey").next(t=>(Ke(null!==t),t))}Sn(e,t){return TN(e).put("targetGlobalKey",t)}Dn(e,t){return Om(e).put(pN(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Uf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Om(e).Z({range:i,index:"queryTargetsIndex"},(l,p,_)=>{const I=Nw(p);Ew(t,I.target)&&(u=I,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=$d(e);return t.forEach(l=>{const p=rs(l.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,l))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=$d(e);return de.forEach(t,u=>{const l=rs(u.path);return de.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=$d(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=$d(e);let u=Yt();return i.Z({range:r,X:!0},(l,p,_)=>{const I=Ou(l[1]),S=new Ye(I);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=rs(t.path),i=IDBKeyRange.bound([r],[JR(r)],!1,!0);let u=0;return $d(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,p],_,I)=>{0!==l&&(u++,I.done())}).next(()=>u>0)}se(e,t){return Om(e).get(t).next(r=>r?Nw(r):null)}}function Om(n){return ai(n,"targets")}function TN(n){return ai(n,"targetGlobal")}function $d(n){return ai(n,"targetDocuments")}function AN([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class ZF{constructor(e){this.xn=e,this.buffer=new Rn(AN),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();AN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Nd(r)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Od(r)}yield t.Fn(3e5)}))}}class YF{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Ts.at);const r=new ZF(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(bN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bN):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,l,p,_,I;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,l=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(I=Date.now(),Ie()<=Su.in.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${i} in `+(p-l)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${x} documents in `+(I-_)+`ms\nTotal Duration: ${I-S}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:x})))}}class QF{constructor(e,t){this.db=e,this.garbageCollector=new YF(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Ub(e,r)}removeReference(e,t,r){return Ub(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ub(e,t)}Gn(e,t){return function(r,i){let u=!1;return SN(r).tt(l=>DN(r,l,i).next(p=>(p&&(u=!0),de.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(l,p)=>{if(p<=t){const _=this.Gn(e,l).next(I=>{if(!I)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Nt.min()),$d(e).delete([0,rs(l.path)])))});i.push(_)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ub(e,t)}Kn(e,t){const r=$d(e);let i,u=Ts.at;return r.Z({index:"documentTargetsIndex"},([l,p],{path:_,sequenceNumber:I})=>{0===l?(u!==Ts.at&&t(new Ye(Ou(i)),u),u=I,i=_):u=Ts.at}).next(()=>{u!==Ts.at&&t(new Ye(Ou(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ub(n,e){return $d(n).put((r=n.currentSequenceNumber,{targetId:0,path:rs(e.path),sequenceNumber:r}));var r}class xN{constructor(){this.changes=new Ud(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class JF{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Kf(e).put(r)}removeEntry(e,t,r){return Kf(e).delete(function(i,u){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Nb(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return Kf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vw(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return Kf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vw(t))},(i,u)=>{r={document:this.jn(t,u),size:Lb(u)}}).next(()=>r)}getEntries(e,t){let r=As();return this.zn(e,t,(i,u)=>{const l=this.jn(i,u);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=As(),i=new pr(Ye.comparator);return this.zn(e,t,(u,l)=>{const p=this.jn(u,l);r=r.insert(u,p),i=i.insert(u,Lb(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return de.resolve();let i=new Rn(NN);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(Vw(i.first()),Vw(i.last())),l=i.getIterator();let p=l.getNext();return Kf(e).Z({index:"documentKeyIndex",range:u},(_,I,S)=>{const x=Ye.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;p&&NN(p,x)<0;)r(p,null),p=l.getNext();p&&p.isEqual(x)&&(r(p,I),p=l.hasNext()?l.getNext():null),p?S.j(Vw(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Nb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Kf(e).W(IDBKeyRange.bound(i,u,!0)).next(l=>{let p=As();for(const _ of l){const I=this.jn(Ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(I.key,I)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=As();const l=ON(t,r),p=ON(t,fo.max());return Kf(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,p,!0)},(_,I,S)=>{const x=this.jn(Ye.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(x.key,x),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new XF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return RN(e).get("remoteDocumentGlobalKey").next(t=>(Ke(!!t),t))}Qn(e,t){return RN(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function VF(n,e){let t;if(e.document)t=tN(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),i=Hf(e.noDocument.readTime);t=Hn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Re();{const r=Ye.fromSegments(e.unknownDocument.path),i=Hf(e.unknownDocument.version);t=Hn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new rr(r[0],r[1]);return Nt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Nt.min()))return r}return Hn.newInvalidDocument(e)}}function MN(n){return new JF(n)}class XF extends xN{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ud(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Rn((u,l)=>Gt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const p=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,p.readTime)),l.isValidDocument()){const _=fN(this.Yn.It,l);i=i.add(u.path.popLast()),r+=Lb(_)-p.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=fN(this.Yn.It,l.convertToNoDocument(Nt.min()));t.push(this.Yn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function RN(n){return ai(n,"remoteDocumentGlobal")}function Kf(n){return ai(n,"remoteDocumentsV14")}function Vw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ON(n,e){const t=e.documentKey.path.toArray();return[n,Nb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function NN(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Gt(t[u],r[u]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class eL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class PN{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Cw(r.mutation,i,po.empty(),rr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=Mu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let l=Dw();return u.forEach((p,_)=>{l=l.insert(p,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Mu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((l,p)=>{t.set(l,p)})})}computeViews(e,t,r,i){let u=As();const l=Sw(),p=Sw();return t.forEach((_,I)=>{const S=r.get(I.key);i.has(I.key)&&(void 0===S||S.mutation instanceof Wc)?u=u.insert(I.key,I):void 0!==S&&(l.set(I.key,S.mutation.getFieldMask()),Cw(S.mutation,I,S.mutation.getFieldMask(),rr.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((I,S)=>l.set(I,S)),t.forEach((I,S)=>{var x;return p.set(I,new eL(S,null!==(x=l.get(I))&&void 0!==x?x:null))}),p))}recalculateAndSaveOverlays(e,t){const r=Sw();let i=new pr((l,p)=>l-p),u=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const p of l)p.keys().forEach(_=>{const I=t.get(_);if(null===I)return;let S=r.get(_)||po.empty();S=p.applyToLocalView(I,S),r.set(_,S);const x=(i.get(p.batchId)||Yt()).add(_);i=i.insert(p.batchId,x)})}).next(()=>{const l=[],p=i.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),I=_.key,S=_.value,x=GO();S.forEach(U=>{if(!u.has(U)){const H=kO(t.get(U),r.get(U));null!==H&&x.set(U,H),u=u.add(U)}}),l.push(this.documentOverlayCache.saveOverlays(e,I,x))}return de.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):oA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const l=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):de.resolve(Mu());let p=-1,_=u;return l.next(I=>de.forEach(I,(S,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),u.get(S)?de.resolve():this.getBaseDocument(e,S,x).next(U=>{_=_.insert(S,U)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,_,I,Yt())).next(S=>({batchId:p,changes:HO(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=Dw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Dw();return this.indexManager.getCollectionParents(e,i).next(l=>de.forEach(l,p=>{const _=(I=t,S=p.child(i),new qc(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,S;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(I=>{I.forEach((S,x)=>{u=u.insert(S,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((p,_)=>{const I=_.getKey();null===i.get(I)&&(i=i.insert(I,Hn.newInvalidDocument(I)))});let l=Dw();return i.forEach((p,_)=>{const I=u.get(p);void 0!==I&&Cw(I.mutation,_,po.empty(),rr.now()),uA(t,_)&&(l=l.insert(p,_))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(Hn.newInvalidDocument(t))}}class tL{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return de.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:oi(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:_A(r.bundledQuery),readTime:oi(r.readTime)}),de.resolve();var r}}class nL{constructor(){this.overlays=new pr(Ye.comparator),this.es=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Mu();return de.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=Mu(),u=t.length+1,l=new Ye(t.child("")),p=this.overlays.getIteratorFrom(l);for(;p.hasNext();){const _=p.getNext().value,I=_.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new pr((I,S)=>I-S);const l=this.overlays.getIterator();for(;l.hasNext();){const I=l.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let S=u.get(I.largestBatchId);null===S&&(S=Mu(),u=u.insert(I.largestBatchId,S)),S.set(I.getKey(),I)}}const p=Mu(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((I,S)=>p.set(I,S)),!(p.size()>=i)););return de.resolve(p)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new yA(t,r));let u=this.es.get(t);void 0===u&&(u=Yt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class EA{constructor(){this.ns=new Rn(ui.ss),this.rs=new Rn(ui.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ui(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ui(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ye(new dn([])),r=new ui(t,e),i=new ui(t,e+1),u=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ye(new dn([])),r=new ui(t,e),i=new ui(t,e+1);let u=Yt();return this.rs.forEachInRange([r,i],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new ui(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ui{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ye.comparator(e.key,t.key)||Gt(e._s,t._s)}static os(e,t){return Gt(e._s,t._s)||Ye.comparator(e.key,t.key)}}class rL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Rn(ui.ss)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const l=new gA(u,t,r,i);this.mutationQueue.push(l);for(const p of i)this.gs=this.gs.add(new ui(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return de.resolve(l)}lookupMutationBatch(e,t){return de.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return de.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ui(t,0),i=new ui(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],l=>{const p=this.ys(l._s);u.push(p)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(Gt);return t.forEach(i=>{const u=new ui(i,0),l=new ui(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],p=>{r=r.add(p._s)})}),de.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ye.isDocumentKey(u)||(u=u.child(""));const l=new ui(new Ye(u),0);let p=new Rn(Gt);return this.gs.forEachWhile(_=>{const I=_.key.path;return!!r.isPrefixOf(I)&&(I.length===i&&(p=p.add(_._s)),!0)},l),de.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ke(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return de.forEach(t.mutations,i=>{const u=new ui(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ui(t,0),i=this.gs.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class iL{constructor(e){this.Es=e,this.docs=new pr(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=As();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Hn.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=As();const u=new Ye(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:p,value:{document:_}}=l.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||JT(eO(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Re()}As(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sL(this)}getSize(e){return de.resolve(this.size)}}class sL extends xN{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class oL{constructor(e){this.persistence=e,this.Rs=new Ud(t=>Uf(t),Ew),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new EA,this.targetCount=0,this.vs=Zf.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),de.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Zf(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Dn(t),de.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((l,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),de.waitFor(u).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(l=>{u.push(i.markPotentiallyOrphaned(e,l))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Ps.containsKey(t))}}class kN{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ts(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new oL(this),this.indexManager=new zF,this.remoteDocumentCache=new iL(r=>this.referenceDelegate.xs(r)),this.It=new hN(t),this.Ns=new tL(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new rL(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);const i=new aL(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Os(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ms(e,t){return de.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class aL extends nO{constructor(e){super(),this.currentSequenceNumber=e}}class Bb{constructor(e){this.persistence=e,this.Fs=new EA,this.$s=null}static Bs(e){return new Bb(e)}get Ls(){if(this.$s)return this.$s;throw Re()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),de.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Ls,r=>{const i=Ye.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,Nt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return de.or([()=>de.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class uL{constructor(e){this.It=e}$(e,t,r,i){const u=new wb("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aN,{unique:!0}),p.createObjectStore("documentMutations"),FN(e),function(p){p.createObjectStore("remoteDocuments")}(e));let l=de.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),FN(e)),l=l.next(()=>function(p){const _=p.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",I)}(u))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(p,_){return _.store("mutations").W().next(I=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aN,{unique:!0});const S=_.store("mutations"),x=I.map(U=>S.put(U));return de.waitFor(x)})}(e,u))),l=l.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(u))),r<6&&i>=6&&(l=l.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(u))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&i>=9&&(l=l.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(u))),r<11&&i>=11&&(l=l.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:NF});_.createIndex("collectionPathOverlayIndex",PF,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",kF,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:IF});_.createIndex("documentKeyIndex",bF),_.createIndex("collectionGroupIndex",CF)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&i>=15&&(l=l.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:xF}).createIndex("sequenceNumberIndex",MF,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:RF}).createIndex("documentKeyIndex",OF,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Lb(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>de.forEach(i,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(p=>de.forEach(p,_=>{Ke(_.userId===u.userId);const I=Gf(this.It,_);return CN(e,u.userId,I).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((l,p)=>{const _=new dn(l),I=[0,rs(_)];u.push(t.get(I).next(S=>S?de.resolve():t.put({targetId:0,path:rs(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:AF});const r=t.store("collectionParents"),i=new wA,u=l=>{if(i.add(l)){const p=l.lastSegment(),_=l.popLast();return r.put({collectionId:p,parent:rs(_)})}};return t.store("remoteDocuments").Z({X:!0},(l,p)=>{const _=new dn(l);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,p,_],I)=>{const S=Ou(p);return u(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=Nw(i),l=pN(this.It,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,l)=>{const p=t.store("remoteDocumentsV14"),_=(I=l,I.document?new Ye(dn.fromString(I.document.name).popFirst(5)):I.noDocument?Ye.fromSegments(I.noDocument.path):I.unknownDocument?Ye.fromSegments(I.unknownDocument.path):Re()).path.toArray();var I;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(p.put(S))}).next(()=>de.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=MN(this.It),u=new kN(Bb.Bs,this.It.re);return r.W().next(l=>{const p=new Map;return l.forEach(_=>{var I;let S=null!==(I=p.get(_.userId))&&void 0!==I?I:Yt();Gf(this.It,_).keys().forEach(x=>S=S.add(x)),p.set(_.userId,S)}),de.forEach(p,(_,I)=>{const S=new k(I),x=Pb.oe(this.It,S),U=u.getIndexManager(S),H=Vb.oe(S,this.It,U,u.referenceDelegate);return new PN(i,H,x,U).recalculateAndSaveOverlaysForDocumentKeys(new pA(t,Ts.at),_).next()})})}}function FN(n){n.createObjectStore("targetDocuments",{keyPath:SF}).createIndex("documentTargetsIndex",TF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",DF,{unique:!0}),n.createObjectStore("targetGlobal")}const IA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class bA{constructor(e,t,r,i,u,l,p,_,I,S,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=p,this.Js=I,this.Ys=S,this.Xs=x,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=U=>Promise.resolve(),!bA.C())throw new Le(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QF(this,i),this.ii=t+"main",this.It=new hN(_),this.ri=new Ga(this.ii,this.Xs,new uL(this.It)),this.Cs=new WF(this.referenceDelegate,this.It),this.remoteDocumentCache=MN(this.It),this.Ns=new UF,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&qe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(ge.FAILED_PRECONDITION,IA);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ts(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,we.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Nd(e))return ee("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Uw(e).get("owner").next(t=>de.resolve(this.mi(t)))}gi(e){return jb(e).delete(this.clientId)}yi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ai(r,"clientMetadata");return i.W().next(u=>{const l=e.Ii(u,18e5),p=u.filter(_=>-1===l.indexOf(_));return de.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?de.resolve(!0):Uw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Le(ge.FAILED_PRECONDITION,IA);return!1}}return!(!this.networkEnabled||!this.inForeground)||jb(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ee("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new pA(t,Ts.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>jb(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Vb.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qF(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Pb.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ee("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?LF:14===l?dN:13===l?lN:12===l?FF:11===l?cN:void Re();var l;let p;return this.ri.runTransaction(e,i,u,_=>(p=new pA(_,this.Ss?this.Ss.next():Ts.at),"readwrite-primary"===t?this.fi(p).next(I=>!!I||this.di(p)).next(I=>{if(!I)throw qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Le(ge.FAILED_PRECONDITION,tO);return r(p)}).next(I=>this.wi(p).next(()=>I)):this.Vi(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Vi(e){return Uw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(ge.FAILED_PRECONDITION,IA)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uw(e).put("owner",t)}static C(){return Ga.C()}_i(e){const t=Uw(e);return t.get("owner").next(r=>this.mi(r)?(ee("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(qe(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ht.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ee("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){qe("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uw(n){return ai(n,"owner")}function jb(n){return ai(n,"clientMetadata")}function CA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class DA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Yt(),i=Yt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new DA(e,t.fromCache,r,i)}}class LN{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Oi(e,t,i,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(bO(t))return de.resolve(null);let r=ns(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Sb(t,null,"F"),r=ns(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Yt(...u);return this.Ni.getDocuments(e,l).next(p=>this.indexManager.getMinOffset(e,r).next(_=>{const I=this.Fi(t,p);return this.$i(t,I,l,_.readTime)?this.ki(e,Sb(t,null,"F")):this.Bi(e,I,t,_)}))})))}Oi(e,t,r,i){return bO(t)||i.isEqual(Nt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,i)?this.Mi(e,t):(Ie()<=Su.in.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),aA(t)),this.Bi(e,l,t,XR(i,-1)))})}Fi(e,t){let r=new Rn(SO(e));return t.forEach((i,u)=>{uA(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Mi(e,t){return Ie()<=Su.in.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",aA(t)),this.Ni.getDocumentsMatchingQuery(e,t,fo.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class cL{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new pr(Gt),this.qi=new Ud(u=>Uf(u),Ew),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PN(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function VN(n,e,t,r){return new cL(n,e,t,r)}function UN(n,e){return SA.apply(this,arguments)}function SA(){return SA=(0,we.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],p=[];let _=Yt();for(const I of i){l.push(I.batchId);for(const S of I.mutations)_=_.add(S.key)}for(const I of u){p.push(I.batchId);for(const S of I.mutations)_=_.add(S.key)}return t.localDocuments.getDocuments(r,_).next(I=>({ji:I,removedBatchIds:l,addedBatchIds:p}))})})}),SA.apply(this,arguments)}function lL(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,p,_,I){const S=_.batch,x=S.keys();let U=de.resolve();return x.forEach(H=>{U=U.next(()=>I.getEntry(p,H)).next(K=>{const Te=_.docVersions.get(H);Ke(null!==Te),K.version.compareTo(Te)<0&&(S.applyToRemoteDocument(K,_),K.isValidDocument()&&(K.setReadTime(_.commitVersion),I.addEntry(K)))})}),U.next(()=>l.mutationQueue.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let p=Yt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(p=p.add(l.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function BN(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function dL(n,e){const t=We(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const p=[];e.targetChanges.forEach((S,x)=>{const U=i.get(x);if(!U)return;p.push(t.Cs.removeMatchingKeys(u,S.removedDocuments,x).next(()=>t.Cs.addMatchingKeys(u,S.addedDocuments,x)));let H=U.withSequenceNumber(u.currentSequenceNumber);var K,Te,De;e.targetMismatches.has(x)?H=H.withResumeToken(Gr.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):S.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(S.resumeToken,r)),i=i.insert(x,H),Te=H,De=S,(0===(K=U).resumeToken.approximateByteSize()||Te.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||De.addedDocuments.size+De.modifiedDocuments.size+De.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(u,H))});let _=As(),I=Yt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),p.push(jN(u,l,e.documentUpdates).next(S=>{_=S.Wi,I=S.zi})),!r.isEqual(Nt.min())){const S=t.Cs.getLastRemoteSnapshotVersion(u).next(x=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(S)}return de.waitFor(p).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,I)).next(()=>_)}).then(u=>(t.Ui=i,u))}function jN(n,e,t){let r=Yt(),i=Yt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=As();return t.forEach((p,_)=>{const I=u.get(p);_.isFoundDocument()!==I.isFoundDocument()&&(i=i.add(p)),_.isNoDocument()&&_.version.isEqual(Nt.min())?(e.removeEntry(p,_.readTime),l=l.insert(p,_)):!I.isValidDocument()||_.version.compareTo(I.version)>0||0===_.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(_),l=l.insert(p,_)):ee("LocalStore","Ignoring outdated watch update for ",p,". Current version:",I.version," Watch version:",_.version)}),{Wi:l,zi:i}})}function hL(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Nm(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,de.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Bd(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Pm(n,e,t){return TA.apply(this,arguments)}function TA(){return TA=(0,we.Z)(function*(n,e,t){const r=We(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Nd(l))throw l;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),TA.apply(this,arguments)}function $b(n,e,t){const r=We(n);let i=Nt.min(),u=Yt();return r.persistence.runTransaction("Execute query","readonly",l=>function(p,_,I){const S=We(p),x=S.qi.get(I);return void 0!==x?de.resolve(S.Ui.get(x)):S.Cs.getTargetData(_,I)}(r,l,ns(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,p.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Nt.min(),t?u:Yt())).next(p=>(GN(r,DO(e),p),{documents:p,Hi:u})))}function $N(n,e){const t=We(n),r=We(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(l=>l?l.target:null))}function HN(n,e){const t=We(n),r=t.Ki.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,XR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(GN(t,e,i),i))}function GN(n,e,t){let r=n.Ki.get(e)||Nt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function AA(){return AA=(0,we.Z)(function*(n,e,t,r){const i=We(n);let u=Yt(),l=As();for(const I of t){const S=e.Ji(I.metadata.name);I.document&&(u=u.add(S));const x=e.Yi(I);x.setReadTime(e.Xi(I.metadata.readTime)),l=l.insert(S,x)}const p=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Nm(i,(I=r,ns(bm(dn.fromString(`__bundle__/docs/${I}`)))));var I;return i.persistence.runTransaction("Apply bundle documents","readwrite",I=>jN(I,p,l).next(S=>(p.apply(I),S)).next(S=>i.Cs.removeMatchingKeysForTargetId(I,_.targetId).next(()=>i.Cs.addMatchingKeys(I,u,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(I,S.Wi,S.zi)).next(()=>S.Wi)))}),AA.apply(this,arguments)}function pL(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,we.Z)(function*(n,e,t=Yt()){const r=yield Nm(n,ns(_A(e.bundledQuery))),i=We(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const l=oi(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(u,e);const p=r.withResumeToken(Gr.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(p.targetId,p),i.Cs.updateTargetData(u,p).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),xA.apply(this,arguments)}function zN(n,e){return`firestore_clients_${n}_${e}`}function qN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function MA(n,e){return`firestore_targets_${n}_${e}`}class Hb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(u=new Le(i.error.code,i.error.message))),l?new Hb(e,t,i.state,u):(qe("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Le(r.error.code,r.error.message))),u?new Bw(e,r.state,i):(qe("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Mb();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=uO(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return i?new Gb(e,u):(qe("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class RA{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new RA(t.clientId,t.onlineState):(qe("SharedClientState",`Failed to parse online state: ${e}`),null)}}class OA{constructor(){this.activeTargetIds=Mb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NA{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new pr(Gt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=zN(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new OA),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(zN(e.persistenceKey,i));if(u){const l=Gb.Zi(i,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(MA(this.persistenceKey,e));if(r){const i=Bw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(MA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ee("SharedClientState","READ",e,t),t}setItem(e,t){ee("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ee("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ee("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let l=Ts.at;if(null!=u)try{const p=JSON.parse(u);Ke("number"==typeof p),l=p}catch(p){qe("SharedClientState","Failed to read sequence number from WebStorage",p)}return l}(r.newValue);i!==Ts.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Hb(this.currentUser,e,t,r),u=qN(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=qN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=MA(this.persistenceKey,e),u=new Bw(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Gb.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Hb.Zi(new k(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Bw.Zi(i,t)}yr(e){return RA.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ee("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),l=[],p=[];return u.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.Br(l,p).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Mb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class WN{constructor(){this.Lr=new OA,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new OA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gL{qr(e){}shutdown(){}}class ZN{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const mL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yL{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class _L extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,u){const l=this.ho(e,t);ee("RestConnection","Sending: ",l,r);const p={};return this.lo(p,i,u),this.fo(e,l,p,r).then(_=>(ee("RestConnection","Received: ",_),_),_=>{throw mt("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}_o(e,t,r,i,u,l){return this.ao(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+W,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.oo}/v1/${t}:${mL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,l)=>{const p=new T;p.setWithCredentials(!0),p.listenOnce(h.COMPLETE,()=>{var I;try{switch(p.getLastErrorCode()){case c.NO_ERROR:const S=p.getResponseJson();ee("Connection","XHR received:",JSON.stringify(S)),u(S);break;case c.TIMEOUT:ee("Connection",'RPC "'+e+'" timed out'),l(new Le(ge.DEADLINE_EXCEEDED,"Request time out"));break;case c.HTTP_ERROR:const x=p.getStatus();if(ee("Connection",'RPC "'+e+'" failed with status:',x,"response text:",p.getResponseText()),x>0){let U=p.getResponseJson();Array.isArray(U)&&(U=U[0]);const H=null===(I=U)||void 0===I?void 0:I.error;if(H&&H.status&&H.message){const K=function(Te){const De=Te.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(De)>=0?De:ge.UNKNOWN}(H.status);l(new Le(K,H.message))}else l(new Le(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else l(new Le(ge.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{ee("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=o(),l=a(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new w({})),this.lo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const _=i.join("");ee("Connection","Creating WebChannel: "+_,p);const I=u.createWebChannel(_,p);let S=!1,x=!1;const U=new yL({Hr:K=>{x?ee("Connection","Not sending because WebChannel is closed:",K):(S||(ee("Connection","Opening WebChannel transport."),I.open(),S=!0),ee("Connection","WebChannel sending:",K),I.send(K))},Jr:()=>I.close()}),H=(K,Te,De)=>{K.listen(Te,ot=>{try{De(ot)}catch(vt){setTimeout(()=>{throw vt},0)}})};return H(I,b.EventType.OPEN,()=>{x||ee("Connection","WebChannel transport opened.")}),H(I,b.EventType.CLOSE,()=>{x||(x=!0,ee("Connection","WebChannel transport closed"),U.io())}),H(I,b.EventType.ERROR,K=>{x||(x=!0,mt("Connection","WebChannel transport errored:",K),U.io(new Le(ge.UNAVAILABLE,"The operation could not be completed")))}),H(I,b.EventType.MESSAGE,K=>{var Te;if(!x){const De=K.data[0];Ke(!!De);const ot=De,vt=ot.error||(null===(Te=ot[0])||void 0===Te?void 0:Te.error);if(vt){ee("Connection","WebChannel received error:",vt);const ht=vt.status;let dt=function(Lt){const cr=Nr[Lt];if(void 0!==cr)return jO(cr)}(ht),Tt=vt.message;void 0===dt&&(dt=ge.INTERNAL,Tt="Unknown error status: "+ht+" with message "+vt.message),x=!0,U.io(new Le(dt,Tt)),I.close()}else ee("Connection","WebChannel received:",De),U.ro(De)}}),H(l,f.STAT_EVENT,K=>{K.stat===y.PROXY?ee("Connection","Detected buffering proxy"):K.stat===y.NOPROXY&&ee("Connection","Detected no buffering proxy")}),setTimeout(()=>{U.so()},0),U}}function KN(){return typeof window<"u"?window:null}function zb(){return typeof document<"u"?document:null}function jw(n){return new cF(n,!0)}class PA{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class YN{constructor(e,t,r,i,u,l,p,_){this.Hs=e,this.vo=r,this.Vo=i,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new PA(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,we.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,we.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(qe(t.toString()),qe("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Le(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,we.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vL extends YN{constructor(e,t,r,i,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function hF(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:Re(),i=e.targetChange.targetIds||[],u=function(_,I){return _.gt?(Ke(void 0===I||"string"==typeof I),Gr.fromBase64String(I||"")):(Ke(void 0===I||I instanceof Uint8Array),Gr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,p=l&&function(_){const I=void 0===_.code?ge.UNKNOWN:jO(_.code);return new Le(I,_.message||"")}(l);t=new qO(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Ru(n,r.document.name),u=oi(r.document.updateTime),l=new vi({mapValue:{fields:r.document.fields}}),p=Hn.newFoundDocument(i,u,l);t=new Rb(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Ru(n,r.document),u=r.readTime?oi(r.readTime):Nt.min(),l=Hn.newNoDocument(i,u);t=new Rb([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ru(n,r.document);t=new Rb([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Re();{const r=e.filter,u=new tF(r.count||0);t=new zO(r.targetId,u)}}var _;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Nt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Nt.min():u.readTime?oi(u.readTime):Nt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Rw(this.It),t.addTarget=function(i,u){let l;const p=u.target;return l=Cb(p)?{documents:nN(i,p)}:{query:fA(i,p)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=YO(i,u.resumeToken):u.snapshotVersion.compareTo(Nt.min())>0&&(l.readTime=xw(i,u.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function pF(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Re()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Rw(this.It),t.removeTarget=e,this.Bo(t)}}class wL extends YN{constructor(e,t,r,i,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function fF(n,e){return n&&n.length>0?(Ke(void 0!==e),n.map(t=>function(r,i){let u=oi(r.updateTime?r.updateTime:i);return u.isEqual(Nt.min())&&(u=oi(i)),new J1(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.Zo(r,t)}return Ke(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Rw(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ow(this.It,r))};this.Bo(t)}}class EL extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Le(ge.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.ao(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(ge.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Le(ge.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class bL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(qe(t),this.ou=!1):ee("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class CL{constructor(e,t,r,i,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(p=>{r.enqueueAndForget((0,we.Z)(function*(){var _;Zc(l)&&(ee("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,we.Z)(function*(I){const S=We(I);S._u.add(4),yield km(S),S.gu.set("Unknown"),S._u.delete(4),yield $w(S)}),function(I){return _.apply(this,arguments)})(l))}))}),this.gu=new bL(r,i)}}function $w(n){return FA.apply(this,arguments)}function FA(){return FA=(0,we.Z)(function*(n){if(Zc(n))for(const e of n.wu)yield e(!0)}),FA.apply(this,arguments)}function km(n){return LA.apply(this,arguments)}function LA(){return LA=(0,we.Z)(function*(n){for(const e of n.wu)yield e(!1)}),LA.apply(this,arguments)}function qb(n,e){const t=We(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),BA(t)?UA(t):Lm(t).ko()&&VA(t,e))}function Hw(n,e){const t=We(n),r=Lm(t);t.du.delete(e),r.ko()&&QN(t,e),0===t.du.size&&(r.ko()?r.Fo():Zc(t)&&t.gu.set("Unknown"))}function VA(n,e){n.yu.Mt(e.targetId),Lm(n).zo(e)}function QN(n,e){n.yu.Mt(e),Lm(n).Ho(e)}function UA(n){n.yu=new oF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Lm(n).start(),n.gu.uu()}function BA(n){return Zc(n)&&!Lm(n).No()&&n.du.size>0}function Zc(n){return 0===We(n)._u.size}function JN(n){n.yu=void 0}function DL(n){return jA.apply(this,arguments)}function jA(){return jA=(0,we.Z)(function*(n){n.du.forEach((e,t)=>{VA(n,e)})}),jA.apply(this,arguments)}function SL(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,we.Z)(function*(n,e){JN(n),BA(n)?(n.gu.hu(e),UA(n)):n.gu.set("Unknown")}),$A.apply(this,arguments)}function TL(n,e,t){return HA.apply(this,arguments)}function HA(){return HA=(0,we.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof qO&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(i,u){const l=u.cause;for(const p of u.targetIds)i.du.has(p)&&(yield i.remoteSyncer.rejectListen(p,l),i.du.delete(p),i.yu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Wb(n,r)}else if(e instanceof Rb?n.yu.Gt(e):e instanceof zO?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Nt.min()))try{const r=yield BN(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const l=i.yu.te(u);return l.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const I=i.du.get(_);I&&i.du.set(_,I.withResumeToken(p.resumeToken,u))}}),l.targetMismatches.forEach(p=>{const _=i.du.get(p);if(!_)return;i.du.set(p,_.withResumeToken(Gr.EMPTY_BYTE_STRING,_.snapshotVersion)),QN(i,p);const I=new Bd(_.target,p,1,_.sequenceNumber);VA(i,I)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),yield Wb(n,r)}var r}),HA.apply(this,arguments)}function Wb(n,e,t){return GA.apply(this,arguments)}function GA(){return GA=(0,we.Z)(function*(n,e,t){if(!Nd(e))throw e;n._u.add(1),yield km(n),n.gu.set("Offline"),t||(t=()=>BN(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){ee("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield $w(n)}))}),GA.apply(this,arguments)}function XN(n,e){return e().catch(t=>Wb(n,t,e))}function Fm(n){return zA.apply(this,arguments)}function zA(){return zA=(0,we.Z)(function*(n){const e=We(n),t=Hd(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;AL(e);)try{const i=yield hL(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,xL(e,i)}catch(i){yield Wb(e,i)}eP(e)&&tP(e)}),zA.apply(this,arguments)}function AL(n){return Zc(n)&&n.fu.length<10}function xL(n,e){n.fu.push(e);const t=Hd(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function eP(n){return Zc(n)&&!Hd(n).No()&&n.fu.length>0}function tP(n){Hd(n).start()}function ML(n){return qA.apply(this,arguments)}function qA(){return qA=(0,we.Z)(function*(n){Hd(n).eu()}),qA.apply(this,arguments)}function RL(n){return WA.apply(this,arguments)}function WA(){return WA=(0,we.Z)(function*(n){const e=Hd(n);for(const t of n.fu)e.Xo(t.mutations)}),WA.apply(this,arguments)}function OL(n,e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,we.Z)(function*(n,e,t){const r=n.fu.shift(),i=mA.from(r,e,t);yield XN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Fm(n)}),ZA.apply(this,arguments)}function NL(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,we.Z)(function*(n,e){var t;e&&Hd(n).Yo&&(yield(t=(0,we.Z)(function*(r,i){if(BO(u=i.code)&&u!==ge.ABORTED){const l=r.fu.shift();Hd(r).Mo(),yield XN(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Fm(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),eP(n)&&tP(n)}),KA.apply(this,arguments)}function nP(n,e){return YA.apply(this,arguments)}function YA(){return YA=(0,we.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Zc(t);t._u.add(3),yield km(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield $w(t)}),YA.apply(this,arguments)}function QA(n,e){return JA.apply(this,arguments)}function JA(){return JA=(0,we.Z)(function*(n,e){const t=We(n);e?(t._u.delete(2),yield $w(t)):e||(t._u.add(2),yield km(t),t.gu.set("Unknown"))}),JA.apply(this,arguments)}function Lm(n){return n.pu||(n.pu=function(e,t,r){const i=We(e);return i.su(),new vL(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:DL.bind(null,n),Zr:SL.bind(null,n),Wo:TL.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.pu.Mo(),BA(n)?UA(n):n.gu.set("Unknown")):(yield n.pu.stop(),JN(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Hd(n){return n.Iu||(n.Iu=function(e,t,r){const i=We(e);return i.su(),new wL(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:ML.bind(null,n),Zr:NL.bind(null,n),tu:RL.bind(null,n),Zo:OL.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.Iu.Mo(),yield Fm(n)):(yield n.Iu.stop(),n.fu.length>0&&(ee("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class XA{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,u){const l=Date.now()+r,p=new XA(e,t,l,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vm(n,e){if(qe("AsyncQueue",`${e}: ${n}`),Nd(n))return new Le(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Um{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=Dw(),this.sortedSet=new pr(this.comparator)}static emptySet(e){return new Um(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Um)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Um;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class rP{constructor(){this.Tu=new pr(Ye.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Re():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bm{constructor(e,t,r,i,u,l,p,_,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,i,u){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new Bm(e,t,Um.emptySet(t),l,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Iw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class PL{constructor(){this.Au=void 0,this.listeners=[]}}class kL{constructor(){this.queries=new Ud(e=>CO(e),Iw),this.onlineState="Unknown",this.Ru=new Set}}function ex(n,e){return tx.apply(this,arguments)}function tx(){return tx=(0,we.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new PL),i)try{u.Au=yield t.onListen(r)}catch(l){const p=Vm(l,`Initialization of query '${aA(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&ix(t)}),tx.apply(this,arguments)}function nx(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,we.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),rx.apply(this,arguments)}function FL(n,e){const t=We(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const p of l.listeners)p.Pu(i)&&(r=!0);l.Au=i}}r&&ix(t)}function LL(n,e,t){const r=We(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function ix(n){n.Ru.forEach(e=>{e.next()})}class sx{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Bm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Bm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class VL{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class iP{constructor(e){this.It=e}Ji(e){return Ru(this.It,e)}Yi(e){return e.metadata.exists?tN(this.It,e.document,!1):Hn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return oi(e)}}class UL{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sP(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=dn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new iP(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const p=(t.get(l)||Yt()).add(u);t.set(l,p)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function fL(n,e,t,r){return AA.apply(this,arguments)}(e.localStore,new iP(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield pL(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function sP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class oP{constructor(e){this.key=e}}class aP{constructor(e){this.key=e}}class uP{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Yt(),this.mutatedKeys=Yt(),this.Gu=SO(e),this.Qu=new Um(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new rP,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=i,p=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,I="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,x)=>{const U=i.get(S),H=uA(this.query,x)?x:null,K=!!U&&this.mutatedKeys.has(U.key),Te=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let De=!1;U&&H?U.data.isEqual(H.data)?K!==Te&&(r.track({type:3,doc:H}),De=!0):this.Hu(U,H)||(r.track({type:2,doc:H}),De=!0,(_&&this.Gu(H,_)>0||I&&this.Gu(H,I)<0)&&(p=!0)):!U&&H?(r.track({type:0,doc:H}),De=!0):U&&!H&&(r.track({type:1,doc:U}),De=!0,(_||I)&&(p=!0)),De&&(H?(l=l.add(H),u=Te?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:l,zu:r,$i:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((I,S)=>function(x,U){const H=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return H(x)-H(U)}(I.type,S.type)||this.Gu(I.doc,S.doc)),this.Ju(r);const l=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,_=p!==this.qu;return this.qu=p,0!==u.length||_?{snapshot:new Bm(this.query,e.Qu,i,u,e.mutatedKeys,0===p,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new rP,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Yt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new aP(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new oP(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Yt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Bm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class BL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jL{constructor(e){this.key=e,this.nc=!1}}class $L{constructor(e,t,r,i,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Ud(p=>CO(p),Iw),this.rc=new Map,this.oc=new Set,this.uc=new pr(Ye.comparator),this.cc=new Map,this.ac=new EA,this.hc={},this.lc=new Map,this.fc=Zf.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function HL(n,e){return ox.apply(this,arguments)}function ox(){return ox=(0,we.Z)(function*(n,e){const t=xx(n);let r,i;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ec();else{const l=yield Nm(t.localStore,ns(e));t.isPrimaryClient&&qb(t.remoteStore,l);const p=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield ax(t,e,r,"current"===p,l.resumeToken)}return i}),ox.apply(this,arguments)}function ax(n,e,t,r,i){return ux.apply(this,arguments)}function ux(){return ux=(0,we.Z)(function*(n,e,t,r,i){n._c=(x,U,H)=>{return(K=(0,we.Z)(function*(Te,De,ot,vt){let ht=De.view.Wu(ot);ht.$i&&(ht=yield $b(Te.localStore,De.query,!1).then(({documents:Lt})=>De.view.Wu(Lt,ht)));const dt=vt&&vt.targetChanges.get(De.targetId),Tt=De.view.applyChanges(ht,Te.isPrimaryClient,dt);return _x(Te,De.targetId,Tt.Xu),Tt.snapshot}),function(Te,De,ot,vt){return K.apply(this,arguments)})(n,x,U,H);var K};const u=yield $b(n.localStore,e,!0),l=new uP(e,u.Hi),p=l.Wu(u.documents),_=Aw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),I=l.applyChanges(p,n.isPrimaryClient,_);_x(n,t,I.Xu);const S=new BL(e,t,l);return n.ic.set(e,S),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),I.snapshot}),ux.apply(this,arguments)}function GL(n,e){return cx.apply(this,arguments)}function cx(){return cx=(0,we.Z)(function*(n,e){const t=We(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(u=>!Iw(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Pm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Hw(t.remoteStore,r.targetId),jm(t,r.targetId)}).catch(Od))):(jm(t,r.targetId),yield Pm(t.localStore,r.targetId,!0))}),cx.apply(this,arguments)}function lx(){return lx=(0,we.Z)(function*(n,e,t){const r=Mx(n);try{const i=yield function(u,l){const p=We(u),_=rr.now(),I=l.reduce((U,H)=>U.add(H.key),Yt());let S,x;return p.persistence.runTransaction("Locally write mutations","readwrite",U=>{let H=As(),K=Yt();return p.Gi.getEntries(U,I).next(Te=>{H=Te,H.forEach((De,ot)=>{ot.isValidDocument()||(K=K.add(De))})}).next(()=>p.localDocuments.getOverlayedDocuments(U,H)).next(Te=>{S=Te;const De=[];for(const ot of l){const vt=eF(ot,S.get(ot.key).overlayedDocument);null!=vt&&De.push(new Wc(ot.key,vt,gO(vt.value.mapValue),ir.exists(!0)))}return p.mutationQueue.addMutationBatch(U,_,De,l)}).next(Te=>{x=Te;const De=Te.applyToLocalDocumentSet(S,K);return p.documentOverlayCache.saveOverlays(U,Te.batchId,De)})}).then(()=>({batchId:x.batchId,changes:HO(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,l,p){let _=u.hc[u.currentUser.toKey()];_||(_=new pr(Gt)),_=_.insert(l,p),u.hc[u.currentUser.toKey()]=_}(r,i.batchId,t),yield Kc(r,i.changes),yield Fm(r.remoteStore)}catch(i){const u=Vm(i,"Failed to persist write");t.reject(u)}}),lx.apply(this,arguments)}function cP(n,e){return dx.apply(this,arguments)}function dx(){return dx=(0,we.Z)(function*(n,e){const t=We(n);try{const r=yield dL(t.localStore,e);e.targetChanges.forEach((i,u)=>{const l=t.cc.get(u);l&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Ke(l.nc):i.removedDocuments.size>0&&(Ke(l.nc),l.nc=!1))}),yield Kc(t,r,e)}catch(r){yield Od(r)}}),dx.apply(this,arguments)}function lP(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((u,l)=>{const p=l.view.bu(e);p.snapshot&&i.push(p.snapshot)}),function(u,l){const p=We(u);p.onlineState=l;let _=!1;p.queries.forEach((I,S)=>{for(const x of S.listeners)x.bu(l)&&(_=!0)}),_&&ix(p)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qL(n,e,t){return hx.apply(this,arguments)}function hx(){return hx=(0,we.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),u=i&&i.key;if(u){let l=new pr(Ye.comparator);l=l.insert(u,Hn.newNoDocument(u,Nt.min()));const p=Yt().add(u),_=new Tw(Nt.min(),new Map,new Rn(Gt),l,p);yield cP(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),vx(r)}else yield Pm(r.localStore,e,!1).then(()=>jm(r,e,t)).catch(Od)}),hx.apply(this,arguments)}function WL(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,we.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const i=yield lL(t.localStore,e);yx(t,r,null),mx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Kc(t,i)}catch(i){yield Od(i)}}),fx.apply(this,arguments)}function ZL(n,e,t){return px.apply(this,arguments)}function px(){return px=(0,we.Z)(function*(n,e,t){const r=We(n);try{const i=yield function(u,l){const p=We(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return p.mutationQueue.lookupMutationBatch(_,l).next(S=>(Ke(null!==S),I=S.keys(),p.mutationQueue.removeMutationBatch(_,S))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,I,l)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>p.localDocuments.getDocuments(_,I))})}(r.localStore,e);yx(r,e,t),mx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Kc(r,i)}catch(i){yield Od(i)}}),px.apply(this,arguments)}function gx(){return gx=(0,we.Z)(function*(n,e){const t=We(n);Zc(t.remoteStore)||ee("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=We(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>l.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Vm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),gx.apply(this,arguments)}function mx(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function yx(n,e,t){const r=We(n);let i=r.hc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function jm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||dP(n,r)})}function dP(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Hw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),vx(n))}function _x(n,e,t){for(const r of t)r instanceof oP?(n.ac.addReference(r.key,e),YL(n,r)):r instanceof aP?(ee("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||dP(n,r.key)):Re()}function YL(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ee("SyncEngine","New document in limbo: "+t),n.oc.add(r),vx(n))}function vx(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ye(dn.fromString(e)),r=n.fc.next();n.cc.set(r,new jL(t)),n.uc=n.uc.insert(t,r),qb(n.remoteStore,new Bd(ns(bm(t.path)),r,2,Ts.at))}}function Kc(n,e,t){return wx.apply(this,arguments)}function wx(){return wx=(0,we.Z)(function*(n,e,t){const r=We(n),i=[],u=[],l=[];var p;r.ic.isEmpty()||(r.ic.forEach((p,_)=>{l.push(r._c(_,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,I?.fromCache?"not-current":"current"),I){i.push(I);const S=DA.Ci(_.targetId,I);u.push(S)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(p=(0,we.Z)(function*(_,I){const S=We(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>de.forEach(I,U=>de.forEach(U.Si,H=>S.persistence.referenceDelegate.addReference(x,U.targetId,H)).next(()=>de.forEach(U.Di,H=>S.persistence.referenceDelegate.removeReference(x,U.targetId,H)))))}catch(x){if(!Nd(x))throw x;ee("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const U=x.targetId;if(!x.fromCache){const H=S.Ui.get(U),Te=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);S.Ui=S.Ui.insert(U,Te)}}}),function(_,I){return p.apply(this,arguments)})(r.localStore,u))}),wx.apply(this,arguments)}function QL(n,e){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,we.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=yield UN(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(p=>{p.reject(new Le(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Kc(t,r.ji)}var i}),Ex.apply(this,arguments)}function JL(n,e){const t=We(n),r=t.cc.get(e);if(r&&r.nc)return Yt().add(r.key);{let i=Yt();const u=t.rc.get(e);if(!u)return i;for(const l of u){const p=t.ic.get(l);i=i.unionWith(p.view.ju)}return i}}function XL(n,e){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,we.Z)(function*(n,e){const t=We(n),r=yield $b(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&_x(t,e.targetId,i.Xu),i}),Ix.apply(this,arguments)}function eV(n,e){return bx.apply(this,arguments)}function bx(){return bx=(0,we.Z)(function*(n,e){const t=We(n);return HN(t.localStore,e).then(r=>Kc(t,r))}),bx.apply(this,arguments)}function tV(n,e,t,r){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,we.Z)(function*(n,e,t,r){const i=We(n),u=yield function(l,p){const _=We(l),I=We(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>I.Tn(S,p).next(x=>x?_.localDocuments.getDocuments(S,x):de.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield Fm(i.remoteStore):"acknowledged"===t||"rejected"===t?(yx(i,e,r||null),mx(i,e),p=e,We(We(i.localStore).mutationQueue).An(p)):Re(),yield Kc(i,u)):ee("SyncEngine","Cannot apply mutation batch with id: "+e)}),Cx.apply(this,arguments)}function Dx(){return Dx=(0,we.Z)(function*(n,e){const t=We(n);if(xx(t),Mx(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield hP(t,r.toArray());t.dc=!0,yield QA(t.remoteStore,!0);for(const u of i)qb(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(jm(t,l),Pm(t.localStore,l,!0))),Hw(t.remoteStore,l)}),yield i,yield hP(t,r),function(u){const l=We(u);l.cc.forEach((p,_)=>{Hw(l.remoteStore,_)}),l.ac.fs(),l.cc=new Map,l.uc=new pr(Ye.comparator)}(t),t.dc=!1,yield QA(t.remoteStore,!1)}}),Dx.apply(this,arguments)}function hP(n,e,t){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,we.Z)(function*(n,e,t){const r=We(n),i=[],u=[];for(const l of e){let p;const _=r.rc.get(l);if(_&&0!==_.length){p=yield Nm(r.localStore,ns(_[0]));for(const I of _){const S=r.ic.get(I),x=yield XL(r,S);x.snapshot&&u.push(x.snapshot)}}else{const I=yield $N(r.localStore,l);p=yield Nm(r.localStore,I),yield ax(r,fP(I),l,!1,p.resumeToken)}i.push(p)}return r.sc.Wo(u),i}),Sx.apply(this,arguments)}function fP(n){return IO(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function rV(n){const e=We(n);return We(We(e.localStore).persistence).vi()}function iV(n,e,t,r){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,we.Z)(function*(n,e,t,r){const i=We(n);if(i.dc)return void ee("SyncEngine","Ignoring unexpected query state notification.");const u=i.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield HN(i.localStore,DO(u[0])),p=Tw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Gr.EMPTY_BYTE_STRING);yield Kc(i,l,p);break}case"rejected":yield Pm(i.localStore,e,!0),jm(i,e,r);break;default:Re()}}),Tx.apply(this,arguments)}function sV(n,e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,we.Z)(function*(n,e,t){const r=xx(n);if(r.dc){for(const i of e){if(r.rc.has(i)){ee("SyncEngine","Adding an already active target "+i);continue}const u=yield $N(r.localStore,i),l=yield Nm(r.localStore,u);yield ax(r,fP(u),l.targetId,!1,l.resumeToken),qb(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield Pm(r.localStore,i,!1).then(()=>{Hw(r.remoteStore,i),jm(r,i)}).catch(Od))}}),Ax.apply(this,arguments)}function xx(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qL.bind(null,e),e.sc.Wo=FL.bind(null,e.eventManager),e.sc.wc=LL.bind(null,e.eventManager),e}function Mx(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZL.bind(null,e),e}class pP{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.It=jw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return VN(this.persistence,new LN,e.initialUser,this.It)}yc(e){return new kN(Bb.Bs,this.It)}gc(e){return new WN}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class gP extends pP{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Mx(r.Ac.syncEngine),yield Fm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return VN(this.persistence,new LN,e.initialUser,this.It)}Tc(e,t){return new KF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new O1(t,this.persistence);return new R1(e.asyncQueue,r)}yc(e){const t=CA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?xs.withCacheSize(this.cacheSizeBytes):xs.DEFAULT;return new bA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,KN(),zb(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new WN}}class aV extends gP{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof NA&&(r.sharedClientState.syncEngine={Fr:tV.bind(null,i),$r:iV.bind(null,i),Br:sV.bind(null,i),vi:rV.bind(null,i),Mr:eV.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,we.Z)(function*(l){yield function nV(n,e){return Dx.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=KN();if(!NA.C(t))throw new Le(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=CA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new NA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Rx{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>lP(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=QL.bind(null,r.syncEngine),yield QA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new kL}createDatastore(e){const t=jw(e.databaseInfo.databaseId),r=new _L(e.databaseInfo);return new EL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>lP(this.syncEngine,p,0),l=ZN.C()?new ZN:new gL,new CL(t,r,i,u,l);var t,r,i,u,l}createSyncEngine(e,t){return function(r,i,u,l,p,_,I){const S=new $L(r,i,u,l,p,_);return I&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=We(t);ee("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield km(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ox(n,e,t){if(!t)throw new Le(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mP(n,e,t,r){if(!0===e&&!0===r)throw new Le(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yP(n){if(!Ye.isDocumentKey(n))throw new Le(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _P(n){if(Ye.isDocumentKey(n))throw new Le(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Re()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zb(n);throw new Le(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vP(n,e){if(e<=0)throw new Le(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const wP=new Map;class EP{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,mP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new aw;switch(t.type){case"gapi":return new dw(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Le(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=wP.get(e);t&&(ee("ComponentProvider","Removing Datastore"),wP.delete(e),t.terminate())}(this),Promise.resolve()}}class er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new er(this.firestore,e,this._key)}}class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class Nu extends Ui{constructor(e,t,r){super(e,t,bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new er(this.firestore,null,new Ye(e))}withConverter(e){return new Nu(this.firestore,e,this._path)}}function bP(n,e,...t){if(n=(0,Ht.m9)(n),Ox("collection","path",e),n instanceof Gw){const r=dn.fromString(e,...t);return _P(r),new Nu(n,null,r)}{if(!(n instanceof er||n instanceof Nu))throw new Le(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return _P(r),new Nu(n.firestore,null,r)}}function Kb(n,e,...t){if(n=(0,Ht.m9)(n),1===arguments.length&&(e=QR.R()),Ox("doc","path",e),n instanceof Gw){const r=dn.fromString(e,...t);return yP(r),new er(n,null,new Ye(r))}{if(!(n instanceof er||n instanceof Nu))throw new Le(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return yP(r),new er(n.firestore,n instanceof Nu?n.converter:null,new Ye(r))}}function CP(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),(n instanceof er||n instanceof Nu)&&(e instanceof er||e instanceof Nu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Nx(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),n instanceof Ui&&e instanceof Ui&&n.firestore===e.firestore&&Iw(n._query,e._query)&&n.converter===e.converter}function DP(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Yb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):qe("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cV{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new ar,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(i);return new VL(JSON.parse(u),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,we.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class hV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,we.Z)(function*(u,l){const p=We(u),_=Rw(p.It)+"/documents",I={documents:l.map(H=>Mw(p.It,H))},S=yield p._o("BatchGetDocuments",_,I,l.length),x=new Map;S.forEach(H=>{const K=function dF(n,e){return"found"in e?function(t,r){Ke(!!r.found);const i=Ru(t,r.found.name),u=oi(r.found.updateTime),l=new vi({mapValue:{fields:r.found.fields}});return Hn.newFoundDocument(i,u,l)}(n,e):"missing"in e?function(t,r){Ke(!!r.missing),Ke(!!r.readTime);const i=Ru(t,r.missing),u=oi(r.readTime);return Hn.newNoDocument(i,u)}(n,e):Re()}(p.It,H);x.set(K.key.toString(),K)});const U=[];return l.forEach(H=>{const K=x.get(H.toString());Ke(!!K),U.push(K)}),U}),function(u,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Am(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ye.fromPath(i);e.mutations.push(new cA(u,e.precondition(u)))}),yield(r=(0,we.Z)(function*(i,u){const l=We(i),p=Rw(l.It)+"/documents",_={writes:u.map(I=>Ow(l.It,I))};yield l.ao("Commit",p,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Re();t=Nt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Nt.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new Le(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class fV{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.kc=r.maxAttempts,this.xo=new PA(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,we.Z)(function*(){const t=new hV(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Fc(u)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!mw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!BO(t)}return!1}}class pV{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=k.UNAUTHENTICATED,this.clientId=QR.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,we.Z)(function*(p){ee("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ee("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Vm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function SP(n,e){return Px.apply(this,arguments)}function Px(){return Px=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,we.Z)(function*(u){r.isEqual(u)||(yield UN(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Px.apply(this,arguments)}function TP(n,e){return kx.apply(this,arguments)}function kx(){return kx=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Fx(n);ee("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>nP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>nP(e.remoteStore,u)),n.onlineComponents=e}),kx.apply(this,arguments)}function Fx(n){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,we.Z)(function*(n){return n.offlineComponents||(ee("FirestoreClient","Using default OfflineComponentProvider"),yield SP(n,new pP)),n.offlineComponents}),Lx.apply(this,arguments)}function Qb(n){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,we.Z)(function*(n){return n.onlineComponents||(ee("FirestoreClient","Using default OnlineComponentProvider"),yield TP(n,new Rx)),n.onlineComponents}),Vx.apply(this,arguments)}function AP(n){return Fx(n).then(e=>e.persistence)}function Jb(n){return Fx(n).then(e=>e.localStore)}function Ux(n){return Qb(n).then(e=>e.remoteStore)}function Bx(n){return Qb(n).then(e=>e.syncEngine)}function $m(n){return jx.apply(this,arguments)}function jx(){return jx=(0,we.Z)(function*(n){const e=yield Qb(n),t=e.eventManager;return t.onListen=HL.bind(null,e.syncEngine),t.onUnlisten=GL.bind(null,e.syncEngine),t}),jx.apply(this,arguments)}function MP(n,e,t={}){const r=new ar;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,u,l,p,_){const I=new Yb({next:x=>{u.enqueueAndForget(()=>nx(i,S));const U=x.docs.has(l);!U&&x.fromCache?_.reject(new Le(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&x.fromCache&&p&&"server"===p.source?_.reject(new Le(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),S=new sx(bm(l.path),I,{includeMetadataChanges:!0,Nu:!0});return ex(i,S)}(yield $m(n),n.asyncQueue,e,t,r)})),r.promise}function RP(n,e,t={}){const r=new ar;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,u,l,p,_){const I=new Yb({next:x=>{u.enqueueAndForget(()=>nx(i,S)),x.fromCache&&"server"===p.source?_.reject(new Le(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),S=new sx(l,I,{includeMetadataChanges:!0,Nu:!0});return ex(i,S)}(yield $m(n),n.asyncQueue,e,t,r)})),r.promise}class IV{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new PA(this,"async_queue_retry"),this.Wc=()=>{const t=zb();t&&ee("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=zb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=zb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new ar;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,we.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Nd(t))throw t;ee("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,qe("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=XA.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(i),i}zc(){this.Kc&&Re()}verifyOperationInProgress(){}Xc(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function $x(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class bV{constructor(){this._progressObserver={},this._taskCompletionResolver=new ar,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tr extends Gw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new IV,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||OP(this),this._firestoreClient.terminate()}}function Ir(n){return n._firestoreClient||OP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function OP(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new k1(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new pV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function NP(n,e,t){const r=new ar;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield SP(n,t),yield TP(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(l=u).name?l.code===ge.FAILED_PRECONDITION||l.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;mt("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function PP(n){if(n._initialized||n._terminated)throw new Le(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pu(Gr.fromBase64String(e))}catch(t){throw new Le(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pu(Gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yf{constructor(e){this._methodName=e}}class Xb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const NV=/^__.*__$/;class PV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Wc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tm(e,this.data,t,this.fieldTransforms)}}class kP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class eC{constructor(e,t,r,i,u,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new eC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return rC(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(FP(this.sa)&&NV.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class kV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||jw(e)}da(e,t,r,i=!1){return new eC({sa:e,methodName:t,fa:r,path:fr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Qf(n){const e=n._freezeSettings(),t=jw(n._databaseId);return new kV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tC(n,e,t,r,i,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,i);qx("Data must be an object, but it was:",l,r);const p=UP(r,l);let _,I;if(u.merge)_=new po(l.fieldMask),I=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const U=Wx(e,x,t);if(!l.contains(U))throw new Le(ge.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);jP(S,U)||S.push(U)}_=new po(S),I=l.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,I=l.fieldTransforms;return new PV(new vi(p),_,I)}class zw extends Yf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zw}}function LP(n,e,t){return new eC({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Hx extends Yf{_toFieldTransform(e){return new bw(e.path,new Dm)}isEqual(e){return e instanceof Hx}}class FV extends Yf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=LP(this,e,!0),r=this._a.map(u=>Jf(u,t)),i=new Bf(r);return new bw(e.path,i)}isEqual(e){return this===e}}class LV extends Yf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=LP(this,e,!0),r=this._a.map(u=>Jf(u,t)),i=new jf(r);return new bw(e.path,i)}isEqual(e){return this===e}}class VV extends Yf{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Sm(e.It,xO(e.It,this.wa));return new bw(e.path,t)}isEqual(e){return this===e}}function Gx(n,e,t,r){const i=n.da(1,e,t);qx("Data must be an object, but it was:",i,r);const u=[],l=vi.empty();kf(r,(_,I)=>{const S=nC(e,_,t);I=(0,Ht.m9)(I);const x=i.ca(S);if(I instanceof zw)u.push(S);else{const U=Jf(I,x);null!=U&&(u.push(S),l.set(S,U))}});const p=new po(u);return new kP(l,p,i.fieldTransforms)}function zx(n,e,t,r,i,u){const l=n.da(1,e,t),p=[Wx(e,r,t)],_=[i];if(u.length%2!=0)throw new Le(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let U=0;U<u.length;U+=2)p.push(Wx(e,u[U])),_.push(u[U+1]);const I=[],S=vi.empty();for(let U=p.length-1;U>=0;--U)if(!jP(I,p[U])){const H=p[U];let K=_[U];K=(0,Ht.m9)(K);const Te=l.ca(H);if(K instanceof zw)I.push(H);else{const De=Jf(K,Te);null!=De&&(I.push(H),S.set(H,De))}}const x=new po(I);return new kP(S,x,l.fieldTransforms)}function VP(n,e,t,r=!1){return Jf(t,n.da(r?4:3,e))}function Jf(n,e){if(BP(n=(0,Ht.m9)(n)))return qx("Unsupported field value:",e,n),UP(n,e);if(n instanceof Yf)return function(t,r){if(!FP(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const l of t){let p=Jf(l,r.aa(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Ht.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xO(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=rr.fromDate(t);return{timestampValue:xw(r.It,i)}}if(t instanceof rr){const i=new rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:xw(r.It,i)}}if(t instanceof Xb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pu)return{bytesValue:YO(r.It,t._byteString)};if(t instanceof er){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:lA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Zb(t)}`)}(n,e)}function UP(n,e){const t={};return sO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kf(n,(r,i)=>{const u=Jf(i,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function BP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof rr||n instanceof Xb||n instanceof Pu||n instanceof er||n instanceof Yf)}function qx(n,e,t){if(!BP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Zb(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Wx(n,e,t){if((e=(0,Ht.m9)(e))instanceof Yc)return e._internalPath;if("string"==typeof e)return nC(n,e);throw rC("Field path arguments must be of type string or ",n,!1,void 0,t)}const UV=new RegExp("[~\\*/\\[\\]]");function nC(n,e,t){if(e.search(UV)>=0)throw rC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yc(...e.split("."))._internalPath}catch{throw rC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rC(n,e,t,r,i){const u=r&&!r.isEmpty(),l=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Le(ge.INVALID_ARGUMENT,p+n+_)}function jP(n,e){return n.some(t=>t.isEqual(e))}class qw{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new BV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class BV extends qw{data(){return super.data()}}function iC(n,e){return"string"==typeof e?nC(n,e):e instanceof Yc?e._internalPath:e._delegate._internalPath}function $P(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ww{}function Gd(n,...e){for(const t of e)n=t._apply(n);return n}class jV extends Ww{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Qf(e.firestore),r=function(i,u,l,p,_,I,S){let x;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Le(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){ZP(S,I);const H=[];for(const K of S)H.push(WP(p,i,K));x={arrayValue:{values:H}}}else x=WP(p,i,S)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||ZP(S,I),x=VP(l,"where",S,"in"===I||"not-in"===I);const U=wi.create(_,I,x);return function(H,K){if(K.dt()){const De=sA(H);if(null!==De&&!De.isEqual(K.field))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${De.toString()}' and '${K.field.toString()}'`);const ot=iA(H);null!==ot&&KP(0,K.field,ot)}const Te=function(De,ot){for(const vt of De.filters)if(ot.indexOf(vt.op)>=0)return vt.op;return null}(H,function(De){switch(De){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(K.op));if(null!==Te)throw new Le(ge.INVALID_ARGUMENT,Te===K.op?`Invalid query. You cannot use more than one '${K.op.toString()}' filter.`:`Invalid query. You cannot use '${K.op.toString()}' filters with '${Te.toString()}' filters.`)}(i,U),U}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ui(e.firestore,e.converter,function(i,u){const l=i.filters.concat([u]);return new qc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class HV extends Ww{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Im(i,u);return function(p,_){if(null===iA(p)){const I=sA(p);null!==I&&KP(0,I,_.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Ui(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new qc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class HP extends Ww{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Ui(e.firestore,e.converter,Sb(e._query,this.Ia,this.Ta))}}class GP extends Ww{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=qP(e,this.type,this.Ea,this.Aa);return new Ui(e.firestore,e.converter,(i=t,new qc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class zP extends Ww{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=qP(e,this.type,this.Ea,this.Aa);return new Ui(e.firestore,e.converter,(i=t,new qc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function qP(n,e,t,r){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof qw)return function(i,u,l,p,_){if(!p)throw new Le(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const I=[];for(const S of Cm(i))if(S.field.isKeyField())I.push(Vf(u,p.key));else{const x=p.data.field(S.field);if(tA(x))throw new Le(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const U=S.field.canonicalString();throw new Le(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${U}' (used as the orderBy) does not exist.`)}I.push(x)}return new Vd(I,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Qf(n.firestore);return function(u,l,p,_,I,S){const x=u.explicitOrderBy;if(I.length>x.length)throw new Le(ge.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const U=[];for(let H=0;H<I.length;H++){const K=I[H];if(x[H].field.isKeyField()){if("string"!=typeof K)throw new Le(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof K}`);if(!oA(u)&&-1!==K.indexOf("/"))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${K}' contains a slash.`);const Te=u.path.child(dn.fromString(K));if(!Ye.isDocumentKey(Te))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Te}' is not because it contains an odd number of segments.`);const De=new Ye(Te);U.push(Vf(l,De))}else{const Te=VP(p,_,K);U.push(Te)}}return new Vd(U,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function WP(n,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oA(e)&&-1!==t.indexOf("/"))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!Ye.isDocumentKey(r))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vf(n,new Ye(r))}if(t instanceof er)return Vf(n,t._key);throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zb(t)}.`)}function ZP(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Le(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function KP(n,e,t){if(!t.isEqual(e))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Zx{convertValue(e,t="none"){switch(Lf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ff(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Re()}}convertObject(e,t){const r={};return kf(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Xb(gr(e.latitude),gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=aO(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gw(e));default:return null}}convertTimestamp(e){const t=Pd(e);return new rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);Ke(sN(r));const i=new kd(r.get(1),r.get(3)),u=new Ye(r.popFirst(5));return i.isEqual(t)||qe(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function sC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class QV extends Zx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}class Xf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qc extends qw{constructor(e,t,r,i,u,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Zw extends Qc{data(e={}){return super.data(e)}}class zd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Xf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zw(this._firestore,this._userDataWriter,r.key,r,new Xf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Zw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Xf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const p=new Zw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Xf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,I=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),I=u.indexOf(l.doc.key)),{type:JV(l.type),doc:p,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function JV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}function YP(n,e){return n instanceof Qc&&e instanceof Qc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof zd&&e instanceof zd&&n._firestore===e._firestore&&Nx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class qd extends Zx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}function QP(n,e,t){n=sn(n,er);const r=sn(n.firestore,tr),i=sC(n.converter,e,t);return Hm(r,[tC(Qf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ir.none())])}function JP(n,e,t,...r){n=sn(n,er);const i=sn(n.firestore,tr),u=Qf(i);let l;return l="string"==typeof(e=(0,Ht.m9)(e))||e instanceof Yc?zx(u,"updateDoc",n._key,e,t,r):Gx(u,"updateDoc",n._key,e),Hm(i,[l.toMutation(n._key,ir.exists(!0))])}function XP(n,...e){var t,r,i;n=(0,Ht.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||$x(e[l])||(u=e[l],l++);const p={includeMetadataChanges:u.includeMetadataChanges};if($x(e[l])){const x=e[l];e[l]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[l+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[l+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let _,I,S;if(n instanceof er)I=sn(n.firestore,tr),S=bm(n._key.path),_={next:x=>{e[l]&&e[l](Kx(I,n,x))},error:e[l+1],complete:e[l+2]};else{const x=sn(n,Ui);I=sn(x.firestore,tr),S=x._query;const U=new qd(I);_={next:H=>{e[l]&&e[l](new zd(I,U,x,H))},error:e[l+1],complete:e[l+2]},$P(n._query)}return function(x,U,H,K){const Te=new Yb(K),De=new sx(U,Te,H);return x.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return ex(yield $m(x),De)})),()=>{Te.bc(),x.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return nx(yield $m(x),De)}))}}(Ir(I),S,p,_)}function Hm(n,e){return function(t,r){const i=new ar;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function zL(n,e,t){return lx.apply(this,arguments)}(yield Bx(t),r,i)})),i.promise}(Ir(n),e)}function Kx(n,e,t){const r=t.docs.get(e._key),i=new qd(n);return new Qc(n,i,e._key,r,new Xf(t.hasPendingWrites,t.fromCache),e.converter)}const uU={maxAttempts:5};class ek{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qf(e)}set(e,t,r){this._verifyNotCommitted();const i=Wd(e,this._firestore),u=sC(i.converter,t,r),l=tC(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Wd(e,this._firestore);let l;return l="string"==typeof(t=(0,Ht.m9)(t))||t instanceof Yc?zx(this._dataReader,"WriteBatch.update",u._key,t,r,i):Gx(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wd(e,this._firestore);return this._mutations=this._mutations.concat(new Am(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wd(n,e){if((n=(0,Ht.m9)(n)).firestore!==e)throw new Le(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class cU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qf(e)}get(e){const t=Wd(e,this._firestore),r=new QV(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Re();const u=i[0];if(u.isFoundDocument())return new qw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new qw(this._firestore,r,t._key,null,t.converter);throw Re()})}set(e,t,r){const i=Wd(e,this._firestore),u=sC(i.converter,t,r),l=tC(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const u=Wd(e,this._firestore);let l;return l="string"==typeof(t=(0,Ht.m9)(t))||t instanceof Yc?zx(this._dataReader,"Transaction.update",u._key,t,r,i):Gx(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Wd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wd(e,this._firestore),r=new qd(this._firestore);return super.get(e).then(i=>new Qc(this._firestore,r,t._key,i._document,new Xf(!1,!1),t.converter))}}function Yx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function nk(){if(typeof Uint8Array>"u")throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function rk(){if(!function N1(){return typeof atob<"u"}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){W=uo.SDK_VERSION,(0,uo._registerComponent)(new co.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),l=new tr(new cw(t.getProvider("auth-internal")),new C1(t.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Le(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kd(p.options.projectId,_)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,uo.registerVersion)(O,"3.7.3",n),(0,uo.registerVersion)(O,"3.7.3","esm2017")}();class Kw{constructor(e){this._delegate=e}static fromBase64String(e){return rk(),new Kw(Pu.fromBase64String(e))}static fromUint8Array(e){return nk(),new Kw(Pu.fromUint8Array(e))}toBase64(){return rk(),this._delegate.toBase64()}toUint8Array(){return nk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Qx(n){return function _U(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class vU{enableIndexedDbPersistence(e,t){return function DV(n,e){PP(n=sn(n,tr));const t=Ir(n),r=n._freezeSettings(),i=new Rx;return NP(t,i,new gP(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function SV(n){PP(n=sn(n,tr));const e=Ir(n),t=n._freezeSettings(),r=new Rx;return NP(e,r,new aV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function TV(n){if(n._initialized&&!n._terminated)throw new Le(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ar;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!Ga.C())return Promise.resolve();const i=r+"main";yield Ga.delete(i)}),function(r){return t.apply(this,arguments)})(CA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ik{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof kd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function IP(n,e,t,r={}){var i;const u=(n=sn(n,Gw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&mt("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,p;if("string"==typeof r.mockUserToken)l=r.mockUserToken,p=k.MOCK_USER;else{l=(0,Ht.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Le(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new k(_)}n._authCredentials=new uw(new _m(l,p))}}(this._delegate,e,t,r)}enableNetwork(){return function xV(n){return function gV(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield AP(n),t=yield Ux(n);return e.setNetworkEnabled(!0),function(r){const i=We(r);return i._u.delete(0),$w(i)}(t)}))}(Ir(n=sn(n,tr)))}(this._delegate)}disableNetwork(){return function MV(n){return function mV(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield AP(n),t=yield Ux(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(i){const u=We(i);u._u.add(0),yield km(u),u.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ir(n=sn(n,tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function AV(n){return function(e){const t=new ar;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function KL(n,e){return gx.apply(this,arguments)}(yield Bx(e),t)})),t.promise}(Ir(n=sn(n,tr)))}(this._delegate)}onSnapshotsInSync(e){return function aU(n,e){return function vV(n,e){const t=new Yb(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield $m(n),i=t,We(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield $m(n),i=t,void We(r).Ru.delete(i);var r,i}))}}(Ir(n=sn(n,tr)),$x(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gm(this,bP(this._delegate,e))}catch(t){throw is(t,"collection()","Firestore.collection()")}}doc(e){try{return new ra(this,Kb(this._delegate,e))}catch(t){throw is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ss(this,function uV(n,e){if(n=sn(n,Gw),Ox("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ui(n,null,(t=e,new qc(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function lU(n,e,t){n=sn(n,tr);const r=Object.assign(Object.assign({},uU),t);return function(i){if(i.maxAttempts<1)throw new Le(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,l){const p=new ar;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const _=yield function xP(n){return Qb(n).then(e=>e.datastore)}(i);new fV(i.asyncQueue,_,l,u,p).run()})),p.promise}(Ir(n),i=>e(new cU(n,i)),r)}(this._delegate,t=>e(new sk(this,t)))}batch(){return Ir(this._delegate),new ok(new ek(this._delegate,e=>Hm(this._delegate,e)))}loadBundle(e){return function RV(n,e){const t=Ir(n=sn(n,tr)),r=new bV;return function wV(n,e,t,r){const i=function(u,l){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,I){if(_ instanceof Uint8Array)return DP(_,I);if(_ instanceof ArrayBuffer)return DP(new Uint8Array(_),I);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new cV(_,l);var _}(t,jw(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function oV(n,e,t){const r=We(n);var i;(i=(0,we.Z)(function*(u,l,p){try{const _=yield l.getMetadata();if(yield function(U,H){const K=We(U),Te=oi(H.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",De=>K.Ns.getBundleMetadata(De,H.id)).then(De=>!!De&&De.createTime.compareTo(Te)>=0)}(u.localStore,_))return yield l.close(),p._completeWith({taskState:"Success",documentsLoaded:(U=_).totalDocuments,bytesLoaded:U.totalBytes,totalDocuments:U.totalDocuments,totalBytes:U.totalBytes}),Promise.resolve(new Set);p._updateProgress(sP(_));const I=new UL(_,u.localStore,l.It);let S=yield l.mc();for(;S;){const U=yield I.Fu(S);U&&p._updateProgress(U),S=yield l.mc()}const x=yield I.complete();return yield Kc(u,x.Lu,void 0),yield function(U,H){const K=We(U);return K.persistence.runTransaction("Save bundle","readwrite",Te=>K.Ns.saveBundleMetadata(Te,H))}(u.localStore,_),p._completeWith(x.progress),Promise.resolve(x.Bu)}catch(_){return mt("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var U}),function(u,l,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Bx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function OV(n,e){return function EV(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const i=We(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield Jb(n),e)}))}(Ir(n=sn(n,tr)),e).then(t=>t?new Ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ss(this,t):null)}}class oC extends Zx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kw(new Pu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ra.forKey(t,this.firestore,null)}}class sk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oC(e)}get(e){const t=tp(e);return this._delegate.get(t).then(r=>new Yw(this._firestore,new Qc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=tp(e);return r?(Yx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=tp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=tp(e);return this._delegate.delete(t),this}}class ok{constructor(e){this._delegate=e}set(e,t,r){const i=tp(e);return r?(Yx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=tp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=tp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ep{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Zw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ep.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new ep(e,new oC(e),t),i.set(t,u)),u}}ep.INSTANCES=new WeakMap;class ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ra(t,new er(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new ra(t,new er(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Gm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gm(this.firestore,bP(this._delegate,e))}catch(t){throw is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof er&&CP(this._delegate,e)}set(e,t){t=Yx("DocumentReference.set",t);try{return t?QP(this._delegate,e,t):QP(this._delegate,e)}catch(r){throw is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?JP(this._delegate,e):JP(this._delegate,e,t,...r)}catch(i){throw is(i,"updateDoc()","DocumentReference.update()")}}delete(){return function sU(n){return Hm(sn(n.firestore,tr),[new Am(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=ak(e),r=uk(e,i=>new Yw(this.firestore,new Qc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return XP(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function eU(n){n=sn(n,er);const e=sn(n.firestore,tr),t=Ir(e),r=new qd(e);return function yV(n,e){const t=new ar;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,u,l){try{const p=yield function(_,I){const S=We(_);return S.persistence.runTransaction("read document","readonly",x=>S.localDocuments.getDocument(x,I))}(i,u);p.isFoundDocument()?l.resolve(p):p.isNoDocument()?l.resolve(null):l.reject(new Le(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Vm(p,`Failed to get document '${u} from cache`);l.reject(_)}}),function(i,u,l){return r.apply(this,arguments)})(yield Jb(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Qc(e,r,n._key,i,new Xf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function tU(n){n=sn(n,er);const e=sn(n.firestore,tr);return MP(Ir(e),n._key,{source:"server"}).then(t=>Kx(e,n,t))}(this._delegate):function XV(n){n=sn(n,er);const e=sn(n.firestore,tr);return MP(Ir(e),n._key).then(t=>Kx(e,n,t))}(this._delegate),t.then(r=>new Yw(this.firestore,new Qc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ra(this.firestore,this._delegate.withConverter(e?ep.getInstance(this.firestore,e):null))}}function is(n,e,t){return n.message=n.message.replace(e,t),n}function ak(n){for(const e of n)if("object"==typeof e&&!Qx(e))return e;return{}}function uk(n,e){var t,r;let i;return i=Qx(n[0])?n[0]:Qx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Yw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return YP(this._delegate,e._delegate)}}class Qw extends Yw{data(e){const t=this._delegate.data(e);return function $n(n,e){n||Re()}(void 0!==t),t}}class ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oC(e)}where(e,t,r){try{return new ss(this.firestore,Gd(this._delegate,function $V(n,e,t){const r=e,i=iC("where",n);return new jV(i,r,t)}(e,t,r)))}catch(i){throw is(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ss(this.firestore,Gd(this._delegate,function GV(n,e="asc"){const t=e,r=iC("orderBy",n);return new HV(r,t)}(e,t)))}catch(r){throw is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ss(this.firestore,Gd(this._delegate,function zV(n){return vP("limit",n),new HP("limit",n,"F")}(e)))}catch(t){throw is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ss(this.firestore,Gd(this._delegate,function qV(n){return vP("limitToLast",n),new HP("limitToLast",n,"L")}(e)))}catch(t){throw is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ss(this.firestore,Gd(this._delegate,function WV(...n){return new GP("startAt",n,!0)}(...e)))}catch(t){throw is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ss(this.firestore,Gd(this._delegate,function ZV(...n){return new GP("startAfter",n,!1)}(...e)))}catch(t){throw is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ss(this.firestore,Gd(this._delegate,function KV(...n){return new zP("endBefore",n,!1)}(...e)))}catch(t){throw is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ss(this.firestore,Gd(this._delegate,function YV(...n){return new zP("endAt",n,!0)}(...e)))}catch(t){throw is(t,"endAt()","Query.endAt()")}}isEqual(e){return Nx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function rU(n){n=sn(n,Ui);const e=sn(n.firestore,tr),t=Ir(e),r=new qd(e);return function _V(n,e){const t=new ar;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,u,l){try{const p=yield $b(i,u,!0),_=new uP(u,p.Hi),I=_.Wu(p.documents),S=_.applyChanges(I,!1);l.resolve(S.snapshot)}catch(p){const _=Vm(p,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(i,u,l){return r.apply(this,arguments)})(yield Jb(n),e,t);var r})),t.promise}(t,n._query).then(i=>new zd(e,r,n,i))}(this._delegate):"server"===e?.source?function iU(n){n=sn(n,Ui);const e=sn(n.firestore,tr),t=Ir(e),r=new qd(e);return RP(t,n._query,{source:"server"}).then(i=>new zd(e,r,n,i))}(this._delegate):function nU(n){n=sn(n,Ui);const e=sn(n.firestore,tr),t=Ir(e),r=new qd(e);return $P(n._query),RP(t,n._query).then(i=>new zd(e,r,n,i))}(this._delegate),t.then(r=>new Jx(this.firestore,new zd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ak(e),r=uk(e,i=>new Jx(this.firestore,new zd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return XP(this._delegate,t,r)}withConverter(e){return new ss(this.firestore,this._delegate.withConverter(e?ep.getInstance(this.firestore,e):null))}}class EU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Jx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new EU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Qw(this._firestore,r))})}isEqual(e){return YP(this._delegate,e._delegate)}}class Gm extends ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ra(this.firestore,e):null}doc(e){try{return new ra(this.firestore,void 0===e?Kb(this._delegate):Kb(this._delegate,e))}catch(t){throw is(t,"doc()","CollectionReference.doc()")}}add(e){return function oU(n,e){const t=sn(n.firestore,tr),r=Kb(n),i=sC(n.converter,e);return Hm(t,[tC(Qf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ra(this.firestore,t))}isEqual(e){return CP(this._delegate,e._delegate)}withConverter(e){return new Gm(this.firestore,this._delegate.withConverter(e?ep.getInstance(this.firestore,e):null))}}function tp(n){return sn(n,er)}class Xx{constructor(...e){this._delegate=new Yc(...e)}static documentId(){return new Xx(fr.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof Yc&&this._delegate._internalPath.isEqual(e._internalPath)}}class np{constructor(e){this._delegate=e}static serverTimestamp(){const e=function hU(){return new Hx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new np(e)}static delete(){const e=function dU(){return new zw("deleteField")}();return e._methodName="FieldValue.delete",new np(e)}static arrayUnion(...e){const t=function fU(...n){return new FV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new np(t)}static arrayRemove(...e){const t=function pU(...n){return new LV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new np(t)}static increment(e){const t=function gU(n){return new VV("increment",n)}(e);return t._methodName="FieldValue.increment",new np(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IU={Firestore:ik,GeoPoint:Xb,Timestamp:rr,Blob:Kw,Transaction:sk,WriteBatch:ok,DocumentReference:ra,DocumentSnapshot:Yw,Query:ss,QueryDocumentSnapshot:Qw,QuerySnapshot:Jx,CollectionReference:Gm,FieldPath:Xx,FieldValue:np,setLogLevel:function wU(n){!function He(n){te.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function ck(n,e){return function DU(n,e=FI.z){return new Tn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function eM(n,e){return ck(n,e).pipe((0,rt.U)(t=>({payload:t,type:"query"})))}function aC(n,e){return eM(n,e).pipe(Y(void 0),lv(),(0,rt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,p)=>{const _=i.find(S=>S.doc.ref.isEqual(l.ref)),I=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&I&&JSON.stringify(I.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:l}})}),u}))}function lk(n,e,t){return aC(n,t).pipe(Mi((r,i)=>function TU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function AU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return tM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return tM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),Cc(),(0,rt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function tM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function dk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function CU(n){(function bU(n,e){n.INTERNAL.registerComponent(new co.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},IU)))})(n,(e,t)=>new ik(e,t,new vU)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(dv.Z);class hk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,rt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Y(void 0),lv(),re(([r,i])=>i.length>0||!r),(0,rt.U)(([r,i])=>i),Bt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=dk(e);return lk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Bt.iC)}valueChanges(e={}){return eM(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Bt.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(Bt.iC)}add(e){return this.ref.add(e)}doc(e){return new fk(this.ref.doc(e),this.afs)}}class fk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=mk(r,t);return new hk(i,u,this.afs)}snapshotChanges(){return function SU(n,e){return ck(n,e).pipe(Y(void 0),lv(),(0,rt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Bt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Jt.D)(this.ref.get(e)).pipe(Bt.iC)}}class xU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aC(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),re(t=>t.length>0),Bt.iC):aC(this.query,this.afs.schedulers.outsideAngular).pipe(Bt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=dk(e);return lk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Bt.iC)}valueChanges(e={}){return eM(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Bt.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(Bt.iC)}}const pk=new d.OlP("angularfire2.enableFirestorePersistence"),gk=new d.OlP("angularfire2.firestore.persistenceSettings"),MU=new d.OlP("angularfire2.firestore.settings"),RU=new d.OlP("angularfire2.firestore.use-emulator");function mk(n,e=(t=>t)){return{query:e(n),ref:n}}let zm=(()=>{class n{constructor(t,r,i,u,l,p,_,I,S,x,U,H,K,Te,De,ot,vt){this.schedulers=_;const ht=(0,ki.on)(t,p,r),dt=S;x&&av(ht,p,U,K,Te,De,H,ot),[this.firestore,this.persistenceEnabled$]=(0,ki.cc)(`${ht.name}.firestore`,"AngularFirestore",ht.name,()=>{const Tt=p.runOutsideAngular(()=>ht.firestore());if(u&&Tt.settings(u),dt&&Tt.useEmulator(...dt),i&&!Us(l)){const Lt=()=>{try{return(0,Jt.D)(Tt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(cr){return typeof console<"u"&&console.warn(cr),nt(!1)}};return[Tt,p.runOutsideAngular(Lt)]}return[Tt,nt(!1)]},[u,dt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=mk(i,r),p=this.schedulers.ngZone.run(()=>u);return new hk(p,l,this)}collectionGroup(t,r){const i=r||(l=>l),u=this.firestore.collectionGroup(t);return new xU(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new fk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ki.Dh),d.LFG(ki.xv,8),d.LFG(pk,8),d.LFG(MU,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Bt.HU),d.LFG(gk,8),d.LFG(RU,8),d.LFG(uv,8),d.LFG(md,8),d.LFG(nv,8),d.LFG(rv,8),d.LFG(iv,8),d.LFG(sv,8),d.LFG(ov,8),d.LFG(ev,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),OU=(()=>{class n{constructor(){kI.Z.registerVersion("angularfire",Bt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:pk,useValue:!0},{provide:gk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[zm]}),n})();const NU=function(n){return{"no-border":n}},PU=function(n,e){return{income:n,outcome:e}};let kU=(()=>{class n{constructor(t){this.store=t}deleteTransaction(){confirm('Are you sure you want to delete the transaction with description "'+this.transaction.name+'"?')&&this.store.dispatch(new Li.Delete(this.transaction))}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(xr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-transaction"]],inputs:{transaction:"transaction",isLast:"isLast"},decls:22,vars:19,consts:[[1,"container",3,"ngClass"],[1,"date-category"],[1,"hidden-header"],[1,"val"],[1,"description"],[1,"amount",3,"ngClass"],[1,"delete","hide",3,"click"],[1,"grid-placeholder"],[1,"delete-transaction-text",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"span",2),d._uU(3,"Date/Category: "),d.qZA(),d.TgZ(4,"span",3),d._uU(5),d.ALo(6,"date"),d.qZA()(),d.TgZ(7,"div",4)(8,"span",2),d._uU(9,"Name: "),d.qZA(),d.TgZ(10,"span",3),d._uU(11),d.qZA()(),d.TgZ(12,"div",5)(13,"span",2),d._uU(14,"Amount "),d.qZA(),d.TgZ(15,"span",3),d._uU(16),d.ALo(17,"currency"),d.qZA()(),d.TgZ(18,"div",6),d.NdJ("click",function(){return r.deleteTransaction()}),d.qZA(),d._UZ(19,"div",7),d.TgZ(20,"button",8),d.NdJ("click",function(){return r.deleteTransaction()}),d._uU(21," Delete "),d.qZA()()),2&t&&(d.Q6J("ngClass",d.VKq(14,NU,r.isLast)),d.xp6(5),d.AsE("",d.xi3(6,6,r.transaction.date,"dd/MM/yyyy")," (",r.transaction.category,")"),d.xp6(6),d.Oqu(r.transaction.name),d.xp6(1),d.Q6J("ngClass",d.WLB(16,PU,r.transaction.isIncome,!r.transaction.isIncome)),d.xp6(4),d.Oqu(d.gM2(17,9,r.transaction.amount,"EUR","symbol","1.2-2")))},dependencies:[rn,ca,Hu],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:27% calc(58% - 72px) 15% 24px;gap:8px 16px;align-items:center;font-size:14px;line-height:19px;margin-top:4px}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:19px}.container[_ngcontent-%COMP%]   span.val[_ngcontent-%COMP%]{width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;display:inline-block}.container[_ngcontent-%COMP%]   .date-category[_ngcontent-%COMP%]{text-align:left;opacity:.7}.container[_ngcontent-%COMP%]   .date-category[_ngcontent-%COMP%]   span.val[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%}.container[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;width:16px;height:16px;background-image:url(delete.fa3dbab8bbf726c0.svg);background-size:contain;background-position:center;background-repeat:no-repeat}.container[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{opacity:.6}.hidden-header[_ngcontent-%COMP%]{display:none}.income[_ngcontent-%COMP%]{color:#06cd06}.outcome[_ngcontent-%COMP%]{color:#fd6d6d}.delete-transaction-text[_ngcontent-%COMP%], .grid-placeholder[_ngcontent-%COMP%]{display:none}@media only screen and (max-width: 500px){div.grid-placeholder[_ngcontent-%COMP%]{display:none}.hidden-header[_ngcontent-%COMP%]{display:inline-block;font-weight:700;margin-right:4px}.hide[_ngcontent-%COMP%]{display:none}.delete-transaction-text[_ngcontent-%COMP%], .grid-placeholder[_ngcontent-%COMP%]{display:inline-block}.category[_ngcontent-%COMP%]{opacity:1!important}.container[_ngcontent-%COMP%]{grid-template-columns:calc(50% - 8px) calc(50% - 8px);grid-gap:0px 4px;border-bottom:1px solid #59a1d1}.container.no-border[_ngcontent-%COMP%]{border-bottom:0px}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:unset}}@media only screen and (max-width: 420px){div.container[_ngcontent-%COMP%]{grid-template-columns:100%!important;padding-bottom:16px}}"]}),n})();function FU(n,e){if(1&n&&d._UZ(0,"app-transaction",6),2&n){const t=e.$implicit,r=e.index,i=d.oxw();d.Q6J("isLast",r===i.transactions.transactions.length-1)("transaction",t)}}let LU=(()=>{class n{constructor(){}returnMonthName(t){var r=["January","February","March","April","May","June","July","August","September","October","November","December"];return window.innerWidth>=350?r[t]:r[t].substring(0,3)}ngOnInit(){console.log(this.transactions)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-transactions-group"]],inputs:{transactions:"transactions"},decls:12,vars:15,consts:[[1,"page-container","extended"],[1,"transactions-group"],[1,"page-title","special"],[1,"green","ml-16"],[1,"red","ml-16"],[3,"isLast","transaction",4,"ngFor","ngForOf"],[3,"isLast","transaction"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),d._uU(4),d.qZA(),d.TgZ(5,"span",3),d._uU(6),d.ALo(7,"currency"),d.qZA(),d.TgZ(8,"span",4),d._uU(9),d.ALo(10,"currency"),d.qZA()(),d.YNc(11,FU,1,2,"app-transaction",5),d.qZA()()),2&t&&(d.xp6(4),d.AsE("",r.returnMonthName(r.transactions.month)," ",r.transactions.year," "),d.xp6(2),d.hij("+ ",d.gM2(7,5,r.transactions.totalIncome,"EUR","symbol","1.2-2"),""),d.xp6(3),d.hij("- ",d.gM2(10,10,r.transactions.totalOutcome,"EUR","symbol","1.2-2"),""),d.xp6(2),d.Q6J("ngForOf",r.transactions.transactions))},dependencies:[Wr,kU,ca],styles:[".transactions-group[_ngcontent-%COMP%]{max-width:678px;margin:auto;box-sizing:border-box;font-size:24px;line-height:29px}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:20px;line-height:29px;align-items:center;margin:auto auto 16px;gap:24px}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .min-width[_ngcontent-%COMP%]{min-width:160px}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .v-flex[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center;width:max-content;margin:auto;text-align:left;width:100%}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .v-flex[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#000;font-size:20px;line-height:29px}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .income[_ngcontent-%COMP%]{color:#06cd06}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .outcome[_ngcontent-%COMP%]{color:#fd6d6d}"]}),n})();function VU(n,e){if(1&n&&d._UZ(0,"app-transactions-group",3),2&n){const t=e.$implicit,r=d.oxw(2);d.Q6J("transactions",r.groupedTransactions.transactions[t])}}function UU(n,e){if(1&n&&(d.TgZ(0,"div",1),d.YNc(1,VU,1,1,"app-transactions-group",2),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",null==t.groupedTransactions?null:t.groupedTransactions.dateOrder)}}class Zd{constructor(e,t){this.store=e,this.db=t,this.transactions=[],this.transactions$.subscribe(r=>this.transactions=r),this.groupedTransactions$.subscribe(r=>this.groupedTransactions=r)}log(){console.log(this.groupedTransactions)}fetchTransactions(){this.store.dispatch(new Li.Fetch)}ngOnInit(){console.log("ngondestroy on components to unsubscribe"),this.fetchTransactions()}}function BU(n,e){if(1&n&&(d.TgZ(0,"div")(1,"span",5),d._uU(2),d.qZA(),d.TgZ(3,"span"),d._uU(4),d.ALo(5,"currency"),d.qZA()()),2&n){const t=e.$implicit,r=d.oxw().$implicit,i=d.oxw();d.xp6(2),d.hij("",t.name,": "),d.xp6(2),d.hij(" ",d.gM2(5,2,(null==i.transactionsGrouped||null==i.transactionsGrouped.transactions||null==i.transactionsGrouped.transactions[r]||null==i.transactionsGrouped.transactions[r].summary?null:i.transactionsGrouped.transactions[r].summary[t.name])||0,"EUR","symbol","1.2-2"),"")}}function jU(n,e){if(1&n&&(d.TgZ(0,"div",1)(1,"span",2),d._uU(2),d.qZA(),d.TgZ(3,"div",3),d.YNc(4,BU,6,7,"div",4),d.qZA()()),2&n){const t=e.$implicit,r=d.oxw();d.xp6(2),d.Oqu(r.parseDate(t)),d.xp6(2),d.Q6J("ngForOf",r.categories)}}Zd.\u0275fac=function(e){return new(e||Zd)(d.Y36(xr),d.Y36(zm))},Zd.\u0275cmp=d.Xpm({type:Zd,selectors:[["app-transactions-page"]],decls:1,vars:1,consts:[["class","transactions-list",4,"ngIf"],[1,"transactions-list"],[3,"transactions",4,"ngFor","ngForOf"],[3,"transactions"]],template:function(e,t){1&e&&d.YNc(0,UU,2,1,"div",0),2&e&&d.Q6J("ngIf",t.transactions)},dependencies:[Wr,bn,LU],styles:[".transactions-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:100%;grid-gap:24px;width:100%;padding-bottom:24px}"]}),(0,ln.gn)([ka(n=>n.transactions.transactionsRaw)],Zd.prototype,"transactions$",void 0),(0,ln.gn)([ka(n=>n.transactions.transactionsGrouped)],Zd.prototype,"groupedTransactions$",void 0);class rp{constructor(e){this.store=e,this.transactionsGrouped$.subscribe(t=>{this.transactionsGrouped=t,console.log(t)}),this.categories$.subscribe(t=>{this.categories=t,console.log(t)})}parseDate(e){const t=e.split("/");return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t[0])]} ${t[1]}`}ngOnInit(){this.store.dispatch(new Li.Fetch),this.store.dispatch(new gi.Fetch)}}rp.\u0275fac=function(e){return new(e||rp)(d.Y36(xr))},rp.\u0275cmp=d.Xpm({type:rp,selectors:[["app-transactions-summary"]],decls:1,vars:1,consts:[["class","page-container mt-24",4,"ngFor","ngForOf"],[1,"page-container","mt-24"],[1,"page-title","special"],[1,"grid"],[4,"ngFor","ngForOf"],[1,"bold"]],template:function(e,t){1&e&&d.YNc(0,jU,5,2,"div",0),2&e&&d.Q6J("ngForOf",t.transactionsGrouped.dateOrder)},dependencies:[Wr,ca],styles:[".mt-24[_ngcontent-%COMP%]{margin-top:24px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:calc(33% - 6px) calc(33% - 6px) calc(33% - 6px);width:100%;margin:auto;font-size:14px;line-height:19px;grid-gap:4px 9px}.grid[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;display:block}.page-title.special[_ngcontent-%COMP%]{margin-bottom:8px}@media only screen and (max-width: 380px){div.grid[_ngcontent-%COMP%]{grid-template-columns:calc(50% - 9px) calc(50% - 9px)}}"]}),(0,ln.gn)([ka(n=>n.transactions.transactionsGrouped)],rp.prototype,"transactionsGrouped$",void 0),(0,ln.gn)([ka(n=>n.categories.categories)],rp.prototype,"categories$",void 0);const $U=[{path:"",component:cT,canActivate:[Ug]},{path:"signup",component:jg,canActivate:[Ug]},{path:"add",component:Ua,canActivate:[gf]},{path:"history",component:Zd,canActivate:[gf]},{path:"categories",component:Lc,canActivate:[gf]},{path:"summary",component:rp,canActivate:[gf]},{path:"*",component:Zd}];let HU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rE.forRoot($U),rE]}),n})();function GU(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span",8),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.logout())}),d._uU(1,"Logout"),d.qZA()}}class qm{constructor(e){this.store=e}logout(){this.store.dispatch(new ao.Logout)}ngOnInit(){}}function zU(n,e){1&n&&(d.TgZ(0,"div",1)(1,"div",2),d._UZ(2,"div")(3,"div")(4,"div")(5,"div"),d.qZA()())}qm.\u0275fac=function(e){return new(e||qm)(d.Y36(xr))},qm.\u0275cmp=d.Xpm({type:qm,selectors:[["app-header"]],decls:14,vars:3,consts:[[1,"navbar"],[1,"navbar_title"],[1,"navigation_menu"],["routerLink","/add","routerLinkActive","active"],["routerLink","/history","routerLinkActive","active"],["routerLink","/summary","routerLinkActive","active"],["routerLink","/categories","routerLinkActive","active"],[3,"click",4,"ngIf"],[3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"span",1),d._uU(2,"Costs Logger"),d.qZA(),d.TgZ(3,"div",2)(4,"span",3),d._uU(5,"Add"),d.qZA(),d.TgZ(6,"span",4),d._uU(7,"Transactions"),d.qZA(),d.TgZ(8,"span",5),d._uU(9,"Summary"),d.qZA(),d.TgZ(10,"span",6),d._uU(11,"Categories"),d.qZA(),d.YNc(12,GU,2,0,"span",7),d.ALo(13,"async"),d.qZA()()),2&e&&(d.xp6(12),d.Q6J("ngIf",d.lcZ(13,1,t.isLoggedIn$)))},dependencies:[bn,$l,kh,$u],styles:[".navbar[_ngcontent-%COMP%]{padding:0 48px;margin-bottom:48px;width:100%;display:flex;gap:8px;align-items:center;background-color:#fff;box-sizing:border-box}.navbar_title[_ngcontent-%COMP%]{font-size:26px;line-height:36px;font-weight:700;display:block;white-space:nowrap;width:150px;color:#59a1d1}.navbar[_ngcontent-%COMP%]   .navigation_menu[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;margin-right:158px}.navbar[_ngcontent-%COMP%]   .navigation_menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;padding:18px 24px;cursor:pointer;color:#59a1d1}.navbar[_ngcontent-%COMP%]   .navigation_menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .navigation_menu[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{background-color:#59a1d1;color:#fff}.navbar[_ngcontent-%COMP%]   .navigation_menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{opacity:.8}@media only screen and (max-width: 822px){span.navbar_title[_ngcontent-%COMP%]{display:none}div.navbar[_ngcontent-%COMP%]{padding:0!important}div.navbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:8px 16px!important}div.navigation_menu[_ngcontent-%COMP%]{margin-right:0!important}}@media only screen and (max-width: 500px){div.navigation_menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px!important;line-height:19px!important;padding:8px!important}}"]}),(0,ln.gn)([ka(n=>n.auth.isLoggedIn)],qm.prototype,"isLoggedIn$",void 0);class Wm{constructor(){this.isVisible$.subscribe(e=>this.isVisible=e)}ngOnInit(){}}function qU(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",1)(1,"div",2),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.hide())}),d.qZA(),d.TgZ(2,"div",3)(3,"span",4),d._uU(4),d.qZA(),d.TgZ(5,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.hide())}),d._uU(6,"Okay"),d.qZA()()()}if(2&n){const t=d.oxw();d.xp6(4),d.Oqu(t.message||"An error occured")}}Wm.\u0275fac=function(e){return new(e||Wm)},Wm.\u0275cmp=d.Xpm({type:Wm,selectors:[["app-loader"]],decls:1,vars:1,consts:[["class","loaderContainer",4,"ngIf"],[1,"loaderContainer"],[1,"lds-ring"]],template:function(e,t){1&e&&d.YNc(0,zU,6,0,"div",0),2&e&&d.Q6J("ngIf",t.isVisible)},dependencies:[bn],styles:[".loaderContainer[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#00000080;position:fixed;z-index:100;top:0;left:0}.lds-ring[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid #59a1d1;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#59a1d1 transparent transparent transparent}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.45s}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.3s}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.15s}@keyframes lds-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),(0,ln.gn)([ka(n=>n.loader.isVisible)],Wm.prototype,"isVisible$",void 0);class ip{constructor(e){this.store=e,this.isVisible$.subscribe(t=>this.isVisible=t),this.message$.subscribe(t=>this.message=t)}hide1(){console.log("aa")}hide(){this.store.dispatch(new ii.Hide)}ngOnInit(){}}ip.\u0275fac=function(e){return new(e||ip)(d.Y36(xr))},ip.\u0275cmp=d.Xpm({type:ip,selectors:[["app-modal"]],decls:1,vars:1,consts:[["class","modal-background",4,"ngIf"],[1,"modal-background"],[1,"clickable-overlay",3,"click"],[1,"modal-box"],[1,"text-content"],[3,"click"]],template:function(e,t){1&e&&d.YNc(0,qU,7,1,"div",0),2&e&&d.Q6J("ngIf",t.isVisible)},dependencies:[bn],styles:[".modal-background[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#00000080;position:fixed;top:0;left:0;z-index:998}.clickable-overlay[_ngcontent-%COMP%]{width:100%;height:100%;opacity:0;position:fixed;top:0;left:0;z-index:999}.modal-box[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;border-radius:8px;padding:8px 24px 16px;text-align:center;min-width:250px;z-index:1000}.text-content[_ngcontent-%COMP%]{font-size:16px;line-height:22px;display:block;margin-bottom:24px}"]}),(0,ln.gn)([ka(n=>n.modal.isVisible)],ip.prototype,"isVisible$",void 0),(0,ln.gn)([ka(n=>n.modal.message)],ip.prototype,"message$",void 0);let WU=(()=>{class n{constructor(){this.title="money-app"}ngOnInit(){console.log("The UUID generator function should be common"),console.log("Check components and data types")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,template:function(t,r){1&t&&d._UZ(0,"app-loader")(1,"app-modal")(2,"app-header")(3,"router-outlet")},dependencies:[wc,qm,Wm,ip]}),n})(),za=class{constructor(e,t){this.db=e,this.store=t,this.sortFunc=(r,i)=>new Date(i.date).getTime()-new Date(r.date).getTime(),this.safeAdd=(r,i)=>{let u="string"==typeof r?parseFloat(r):r,l="string"==typeof i?parseFloat(i):i;return parseFloat((u+l).toFixed(2))}}generateUniqSerial(){return console.log("generateUniqSerial and showModal in utils.js"),"xxxx-xxxx-xxx-xxxx".replace(/[x]/g,e=>Math.floor(16*Math.random()).toString(16))}showModal(e){this.store.dispatch(new ii.Show({message:e}))}addTransaction(e,t){this.store.dispatch(new Cn.Show);const r=this.store.selectSnapshot(i=>i.auth.email);this.db.collection("transactions").add({...t.payload,id:this.generateUniqSerial(),email:r}).then(()=>this.showModal("Transaction added succesfully")).catch(()=>this.showModal("There was an error with adding the transaction")).finally(()=>{this.store.dispatch(new Cn.Hide)})}deleteTransaction(e,t){this.store.dispatch(new Cn.Show);let r=this.db.collection("transactions",i=>i.where("id","==",t.payload.id)).get().subscribe(i=>{i.forEach(u=>{u.ref.delete().catch(()=>this.showModal("Could not delete the entry"))}),this.store.dispatch(new Cn.Hide),this.store.dispatch(new Li.Fetch),r.unsubscribe()})}fetchTransactions(e){this.store.dispatch(new Cn.Show),console.log('remove "any" types');const t=e.getState();let r;const i=this.store.selectSnapshot(l=>l.auth.email);let u=this.db.collection("transactions",l=>l.where("email","==",i)).valueChanges().subscribe(l=>{r=l;let p=this.groupTransactions(r);p=this.calculateTransactionsSummary(p),e.setState({...t,transactionsRaw:r,transactionsGrouped:p}),this.store.dispatch(new Cn.Hide),u.unsubscribe()})}groupTransactions(e){let t=e.sort((i,u)=>this.sortFunc(i,u)),r={transactions:[],dateOrder:[]};return t.forEach(i=>{const u=new Date(i.date);let l=u.getMonth()+"/"+u.getFullYear();r.transactions[l]?(r.transactions[l].summary[i.category]||(r.transactions[l].summary[i.category]=0),r.transactions[l].summary[i.category]=this.safeAdd(r.transactions[l].summary[i.category],i.amount*(i.isIncome?1:-1)),i.isIncome?r.transactions[l].totalIncome=this.safeAdd(r.transactions[l].totalIncome,i.amount):r.transactions[l].totalOutcome=this.safeAdd(r.transactions[l].totalOutcome,i.amount),r.transactions[l].transactions.push(i)):(r.dateOrder.push(l),r.transactions[l]={transactions:[i],month:u.getMonth(),year:u.getFullYear(),totalIncome:i.isIncome?i.amount:0,totalOutcome:i.isIncome?0:i.amount,summary:{[i.category]:i.isIncome?i.amount:-1*i.amount}})}),r}calculateTransactionsSummary(e){return Object.keys(e.transactions).forEach(r=>{e.transactions[r].summary={},e.transactions[r].transactions.forEach(i=>{e.transactions[r].summary[i?.category]||(e.transactions[r].summary[i.category]=0),e.transactions[r].summary[i.category]=this.safeAdd(i.amount*(i.isIncome?1:-1),e.transactions[r].summary[i.category])})}),e}};za.\u0275fac=function(e){return new(e||za)(d.LFG(zm),d.LFG(xr))},za.\u0275prov=d.Yz7({token:za,factory:za.\u0275fac}),(0,ln.gn)([ri(Li.Add)],za.prototype,"addTransaction",null),(0,ln.gn)([ri(Li.Delete)],za.prototype,"deleteTransaction",null),(0,ln.gn)([ri(Li.Fetch)],za.prototype,"fetchTransactions",null),za=(0,ln.gn)([Hh({name:"transactions",defaults:{transactionsRaw:[],transactionsGrouped:{transactions:{},dateOrder:[]}}})],za);class yk{}class _k{}class Jc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Jc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Jc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Jc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(p=>-1===u.indexOf(p)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ZU{encodeKey(e){return vk(e)}encodeValue(e){return vk(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const YU=/%(\d[a-f0-9])/gi,QU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vk(n){return encodeURIComponent(n).replace(YU,(e,t)=>QU[t]??e)}function uC(n){return`${n}`}class Kd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ZU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function KU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[l,p]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],_=t.get(l)||[];_.push(p),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(uC):[uC(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Kd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(uC(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(uC(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class JU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function wk(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ek(n){return typeof Blob<"u"&&n instanceof Blob}function Ik(n){return typeof FormData<"u"&&n instanceof FormData}class Jw{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function XU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Jc),this.context||(this.context=new JU),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+l}}else this.params=new Kd,this.urlWithParams=t}serializeBody(){return null===this.body?null:wk(this.body)||Ek(this.body)||Ik(this.body)||function e2(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Kd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ik(this.body)?null:Ek(this.body)?this.body.type||null:wk(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Kd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,I=e.params||this.params;const S=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((x,U)=>x.set(U,e.setHeaders[U]),_)),e.setParams&&(I=Object.keys(e.setParams).reduce((x,U)=>x.set(U,e.setParams[U]),I)),new Jw(t,r,u,{params:I,headers:_,context:S,reportProgress:p,responseType:i,withCredentials:l})}}var Pr=(()=>((Pr=Pr||{})[Pr.Sent=0]="Sent",Pr[Pr.UploadProgress=1]="UploadProgress",Pr[Pr.ResponseHeader=2]="ResponseHeader",Pr[Pr.DownloadProgress=3]="DownloadProgress",Pr[Pr.Response=4]="Response",Pr[Pr.User=5]="User",Pr))();class nM{constructor(e,t=200,r="OK"){this.headers=e.headers||new Jc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class rM extends nM{constructor(e={}){super(e),this.type=Pr.ResponseHeader}clone(e={}){return new rM({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class cC extends nM{constructor(e={}){super(e),this.type=Pr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new cC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class bk extends nM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function iM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let t2=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof Jw)u=t;else{let _,I;_=i.headers instanceof Jc?i.headers:new Jc(i.headers),i.params&&(I=i.params instanceof Kd?i.params:new Kd({fromObject:i.params})),u=new Jw(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:I,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=nt(u).pipe(ct(_=>this.handler.handle(_)));if(t instanceof Jw||"events"===i.observe)return l;const p=l.pipe(re(_=>_ instanceof cC));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return p.pipe((0,rt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return p.pipe((0,rt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return p.pipe((0,rt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return p.pipe((0,rt.U)(_=>_.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Kd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,iM(i,r))}post(t,r,i={}){return this.request("POST",t,iM(i,r))}put(t,r,i={}){return this.request("PUT",t,iM(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(yk))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Ck{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Dk=new d.OlP("HTTP_INTERCEPTORS");let n2=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const r2=/^\)\]\}',?\n/;let Sk=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Tn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((H,K)=>i.setRequestHeader(H,K.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const H=t.detectContentTypeHeader();null!==H&&i.setRequestHeader("Content-Type",H)}if(t.responseType){const H=t.responseType.toLowerCase();i.responseType="json"!==H?H:"text"}const u=t.serializeBody();let l=null;const p=()=>{if(null!==l)return l;const H=i.statusText||"OK",K=new Jc(i.getAllResponseHeaders()),Te=function i2(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new rM({headers:K,status:i.status,statusText:H,url:Te}),l},_=()=>{let{headers:H,status:K,statusText:Te,url:De}=p(),ot=null;204!==K&&(ot=typeof i.response>"u"?i.responseText:i.response),0===K&&(K=ot?200:0);let vt=K>=200&&K<300;if("json"===t.responseType&&"string"==typeof ot){const ht=ot;ot=ot.replace(r2,"");try{ot=""!==ot?JSON.parse(ot):null}catch(dt){ot=ht,vt&&(vt=!1,ot={error:dt,text:ot})}}vt?(r.next(new cC({body:ot,headers:H,status:K,statusText:Te,url:De||void 0})),r.complete()):r.error(new bk({error:ot,headers:H,status:K,statusText:Te,url:De||void 0}))},I=H=>{const{url:K}=p(),Te=new bk({error:H,status:i.status||0,statusText:i.statusText||"Unknown Error",url:K||void 0});r.error(Te)};let S=!1;const x=H=>{S||(r.next(p()),S=!0);let K={type:Pr.DownloadProgress,loaded:H.loaded};H.lengthComputable&&(K.total=H.total),"text"===t.responseType&&!!i.responseText&&(K.partialText=i.responseText),r.next(K)},U=H=>{let K={type:Pr.UploadProgress,loaded:H.loaded};H.lengthComputable&&(K.total=H.total),r.next(K)};return i.addEventListener("load",_),i.addEventListener("error",I),i.addEventListener("timeout",I),i.addEventListener("abort",I),t.reportProgress&&(i.addEventListener("progress",x),null!==u&&i.upload&&i.upload.addEventListener("progress",U)),i.send(u),r.next({type:Pr.Sent}),()=>{i.removeEventListener("error",I),i.removeEventListener("abort",I),i.removeEventListener("load",_),i.removeEventListener("timeout",I),t.reportProgress&&(i.removeEventListener("progress",x),null!==u&&i.upload&&i.upload.removeEventListener("progress",U)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Bs))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const sM=new d.OlP("XSRF_COOKIE_NAME"),oM=new d.OlP("XSRF_HEADER_NAME");class Tk{}let s2=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ya(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(d.Lbi),d.LFG(sM))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),aM=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Tk),d.LFG(oM))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),o2=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Dk,[]);this.chain=r.reduceRight((i,u)=>new Ck(i,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_k),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),a2=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:aM,useClass:n2}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:sM,useValue:t.cookieName}:[],t.headerName?{provide:oM,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[aM,{provide:Dk,useExisting:aM,multi:!0},{provide:Tk,useClass:s2},{provide:sM,useValue:"XSRF-TOKEN"},{provide:oM,useValue:"X-XSRF-TOKEN"}]}),n})(),u2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[t2,{provide:yk,useClass:o2},Sk,{provide:_k,useExisting:Sk}],imports:[a2.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const Ak_firebaseConfig={apiKey:"AIzaSyCXqTYXh9oxtsvBkNupeCdn8pYLcsVOf0U",authDomain:"money-manager-764a8.firebaseapp.com",databaseURL:"https://money-manager-764a8-default-rtdb.europe-west1.firebasedatabase.app",projectId:"money-manager-764a8",storageBucket:"money-manager-764a8.appspot.com",messagingSenderId:"728138341088",appId:"1:728138341088:web:81dcd6b958c84784f40e85"},xk="firebasestorage.googleapis.com",Mk="storageBucket";class ur extends Ht.ZR{constructor(e,t,r=0){super(uM(e),`Firebase Storage: ${t} (${uM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ur.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function uM(n){return"storage/"+n}function cM(){return new ur("unknown","An unknown error occurred, please check the error payload for server response.")}function Rk(){return new ur("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Ok(){return new ur("canceled","User canceled the upload/download.")}function Nk(){return new ur("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Zm(n){return new ur("invalid-argument",n)}function Pk(){return new ur("app-deleted","The Firebase app was deleted.")}function kk(n){return new ur("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xw(n,e){return new ur("invalid-format","String does not match format '"+n+"': "+e)}function e0(n){throw new ur("internal-error","Internal error: "+n)}class Bi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Bi.makeFromUrl(e,t)}catch{return new Bi(e,"")}if(""===r.path)return r;throw function v2(n){return new ur("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function I(dt){dt.path_=decodeURIComponent(dt.path)}const x=t.replace(/[.]/g,"\\."),ht=[{regex:p,indices:{bucket:1,path:3},postModify:function u(dt){"/"===dt.path.charAt(dt.path.length-1)&&(dt.path_=dt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:I},{regex:new RegExp(`^https?://${t===xk?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:I}];for(let dt=0;dt<ht.length;dt++){const Tt=ht[dt],Lt=Tt.regex.exec(e);if(Lt){let Za=Lt[Tt.indices.path];Za||(Za=""),r=new Bi(Lt[Tt.indices.bucket],Za),Tt.postModify(r);break}}if(null==r)throw function _2(n){return new ur("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class C2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function lC(n){return"string"==typeof n||n instanceof String}function Fk(n){return lM()&&n instanceof Blob}function lM(){return typeof Blob<"u"&&!(0,Ht.UG)()}function dM(n,e,t,r){if(r<e)throw Zm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Zm(`Invalid value for '${n}'. Expected ${t} or less.`)}function Xc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Lk(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Yd=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Yd||(Yd={})),Yd))();function Vk(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||i||u}class M2{constructor(e,t,r,i,u,l,p,_,I,S,x,U=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=p,this.errorCallback_=_,this.timeout_=I,this.progressCallback_=S,this.connectionFactory_=x,this.retry=U,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,K)=>{this.resolve_=H,this.reject_=K,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,l=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function T2(n){return void 0!==n}(_)?u():u(_)}catch(_){l(_)}else if(null!==p){const _=cM();_.serverResponse=p.getErrorText(),l(this.errorCallback_?this.errorCallback_(p,_):_)}else l(i.canceled?this.appDelete_?Pk():Ok():Rk())};this.canceled_?t(0,new dC(!1,null,!0)):this.backoffId_=function D2(n,e,t){let r=1,i=null,u=null,l=!1,p=0;function _(){return 2===p}let I=!1;function S(...De){I||(I=!0,e.apply(null,De))}function x(De){i=setTimeout(()=>{i=null,n(H,_())},De)}function U(){u&&clearTimeout(u)}function H(De,...ot){if(I)return void U();if(De)return U(),void S.call(null,De,...ot);if(_()||l)return U(),void S.call(null,De,...ot);let ht;r<64&&(r*=2),1===p?(p=2,ht=0):ht=1e3*(r+Math.random()),x(ht)}let K=!1;function Te(De){K||(K=!0,U(),!I&&(null!==i?(De||(p=2),clearTimeout(i),x(0)):De||(p=1)))}return x(0),u=setTimeout(()=>{l=!0,Te(!0)},t),Te}((r,i)=>{if(i)return void r(!1,new dC(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const p=u.getErrorCode()===Yd.NO_ERROR,_=u.getStatus();if((!p||Vk(_,this.additionalRetryCodes_))&&this.retry){const S=u.getErrorCode()===Yd.ABORT;return void r(!1,new dC(!1,null,S))}const I=-1!==this.successCodes_.indexOf(_);r(!0,new dC(I,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function S2(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class dC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function L2(...n){const e=function F2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(lM())return new Blob(n);throw new ur("unsupported-environment","This browser doesn't seem to support creating Blobs")}const go={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hM{constructor(e,t){this.data=e,this.contentType=t||null}}function fM(n,e){switch(n){case go.RAW:return new hM(Uk(e));case go.BASE64:case go.BASE64URL:return new hM(Bk(n,e));case go.DATA_URL:return new hM(function j2(n){const e=new jk(n);return e.base64?Bk(go.BASE64,e.rest):function B2(n){let e;try{e=decodeURIComponent(n)}catch{throw Xw(go.DATA_URL,"Malformed data URL.")}return Uk(e)}(e.rest)}(e),function $2(n){return new jk(n).contentType}(e))}throw cM()}function Uk(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Bk(n,e){switch(n){case go.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw Xw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case go.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw Xw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function U2(n){if(typeof atob>"u")throw function b2(n){return new ur("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Xw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class jk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Xw(go.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function H2(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ku{constructor(e,t){let r=0,i="";Fk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Fk(this.data_)){const i=function V2(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ku(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ku(r,!0)}}static getBlob(...e){if(lM()){const t=e.map(r=>r instanceof ku?r.data_:r);return new ku(L2.apply(null,t))}{const t=e.map(l=>lC(l)?fM(go.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let p=0;p<l.length;p++)i[u++]=l[p]}),new ku(i,!0)}}uploadData(){return this.data_}}function pM(n){let e;try{e=JSON.parse(n)}catch{return null}return function x2(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function $k(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function q2(n,e){return e}class os{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||q2}}let hC=null;function t0(){if(hC)return hC;const n=[];n.push(new os("bucket")),n.push(new os("generation")),n.push(new os("metageneration")),n.push(new os("name","fullPath",!0));const t=new os("name");t.xform=function e(u,l){return function W2(n){return!lC(n)||n.length<2?n:$k(n)}(l)},n.push(t);const i=new os("size");return i.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(i),n.push(new os("timeCreated")),n.push(new os("updated")),n.push(new os("md5Hash",null,!0)),n.push(new os("cacheControl",null,!0)),n.push(new os("contentDisposition",null,!0)),n.push(new os("contentEncoding",null,!0)),n.push(new os("contentLanguage",null,!0)),n.push(new os("contentType",null,!0)),n.push(new os("metadata","customMetadata",!0)),hC=n,hC}function Hk(n,e,t){const r=pM(e);return null===r?null:function K2(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function Z2(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Bi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function gM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const Gk="prefixes";class Fu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Lu(n){if(!n)throw cM()}function fC(n,e){return function t(r,i){const u=Hk(n,i,e);return Lu(null!==u),u}}function Km(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function m2(){return new ur("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function g2(){return new ur("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function p2(n){return new ur("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function y2(n){return new ur("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function n0(n){const e=Km(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function f2(n){return new ur("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function qk(n,e,t){const i=Xc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,p=new Fu(i,"GET",fC(n,t),l);return p.errorHandler=n0(e),p}function tB(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const p=Xc(e.bucketOnlyServerUrl(),n.host,n._protocol),I=n.maxOperationRetryTime,S=new Fu(p,"GET",function X2(n,e){return function t(r,i){const u=function J2(n,e,t){const r=pM(t);return null===r?null:function Q2(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Gk])for(const i of t[Gk]){const u=i.replace(/\/$/,""),l=n._makeStorageReference(new Bi(e,u));r.prefixes.push(l)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new Bi(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return Lu(null!==u),u}}(n,e.bucket),I);return S.urlParams=u,S.errorHandler=Km(e),S}function Zk(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function sB(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class pC{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function mM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Lu(!1)}return Lu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const cB={STATE_CHANGED:"state_changed"},as={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yM(n){switch(n){case"running":case"pausing":case"canceling":return as.RUNNING;case"paused":return as.PAUSED;case"success":return as.SUCCESS;case"canceled":return as.CANCELED;default:return as.ERROR}}class lB{constructor(e,t,r){if(function A2(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Ym(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class hB extends class dB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw e0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw e0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw e0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw e0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw e0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function qa(){return new hB}class Jk{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=t0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(Vk(i.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Rk()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function oB(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),l=Zk(e,r,i),p={name:l.fullPath},_=Xc(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},x=gM(l,t),K=new Fu(_,"POST",function H(Te){let De;mM(Te);try{De=Te.getResponseHeader("X-Goog-Upload-URL")}catch{Lu(!1)}return Lu(lC(De)),De},n.maxUploadRetryTime);return K.urlParams=p,K.headers=S,K.body=x,K.errorHandler=Km(e),K}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,qa,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function aB(n,e,t,r){const _=new Fu(t,"POST",function u(I){const S=mM(I,["active","final"]);let x=null;try{x=I.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Lu(!1)}x||Lu(!1);const U=Number(x);return Lu(!isNaN(U)),new pC(U,r.size(),"final"===S)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Km(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,qa,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new pC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let l;try{l=function uB(n,e,t,r,i,u,l,p){const _=new pC(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function E2(){return new ur("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const I=_.total-_.current;let S=I;i>0&&(S=Math.min(S,i));const x=_.current;let H="";H=0===S?"finalize":I===S?"upload, finalize":"upload";const K={"X-Goog-Upload-Command":H,"X-Goog-Upload-Offset":`${_.current}`},Te=r.slice(x,x+S);if(null===Te)throw Nk();const ht=new Fu(t,"POST",function De(dt,Tt){const Lt=mM(dt,["active","final"]),cr=_.current+S,Za=r.size();let wM;return wM="final"===Lt?fC(e,u)(dt,Tt):null,new pC(cr,Za,"final"===Lt,wM)},e.maxUploadRetryTime);return ht.headers=K,ht.body=Te.uploadData(),ht.progressCallback=p||null,ht.errorHandler=Km(n),ht}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(l,qa,i,u,!1);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=qk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,qa,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Kk(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let ht="";for(let dt=0;dt<2;dt++)ht+=Math.random().toString().slice(2);return ht}();l["Content-Type"]="multipart/related; boundary="+_;const I=Zk(e,r,i),S=gM(I,t),H=ku.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+_+"\r\nContent-Type: "+I.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===H)throw Nk();const K={name:I.fullPath},Te=Xc(u,n.host,n._protocol),ot=n.maxUploadRetryTime,vt=new Fu(Te,"POST",fC(n,t),ot);return vt.urlParams=K,vt.headers=l,vt.body=H.uploadData(),vt.errorHandler=Km(e),vt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,qa,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ok(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=yM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new lB(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(yM(this._state)){case as.SUCCESS:Ym(this._resolve.bind(null,this.snapshot))();break;case as.CANCELED:case as.ERROR:Ym(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(yM(this._state)){case as.RUNNING:case as.PAUSED:e.next&&Ym(e.next.bind(e,this.snapshot))();break;case as.SUCCESS:e.complete&&Ym(e.complete.bind(e))();break;default:e.error&&Ym(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class sp{constructor(e,t){this._service=e,this._location=t instanceof Bi?t:Bi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new sp(e,t)}get root(){const e=new Bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $k(this._location.path)}get storage(){return this._service}get parent(){const e=function G2(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Bi(this._location.bucket,e);return new sp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw kk(e)}}function e1(n,e,t){return _M.apply(this,arguments)}function _M(){return _M=(0,we.Z)(function*(n,e,t){const i=yield t1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield e1(n,e,i.nextPageToken))}),_M.apply(this,arguments)}function t1(n,e){null!=e&&"number"==typeof e.maxResults&&dM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=tB(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,qa)}function CB(n){n._throwIfRoot("getDownloadURL");const e=function nB(n,e,t){const i=Xc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,p=new Fu(i,"GET",function eB(n,e){return function t(r,i){const u=Hk(n,i,e);return Lu(null!==u),function Y2(n,e,t,r){const i=pM(e);if(null===i||!lC(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(I=>{const x=n.fullPath;return Xc("/b/"+l(n.bucket)+"/o/"+l(x),t,r)+Lk({alt:"media",token:I})})[0]}(u,i,n.host,n._protocol)}}(n,t),l);return p.errorHandler=n0(e),p}(n.storage,n._location,t0());return n.storage.makeRequestWithTokens(e,qa).then(t=>{if(null===t)throw function I2(){return new ur("no-download-url","The given file does not have any download URLs.")}();return t})}function n1(n,e){const t=function z2(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Bi(n._location.bucket,t);return new sp(n.storage,r)}function r1(n,e){if(n instanceof vM){const t=n;if(null==t._bucket)throw function w2(){return new ur("no-default-bucket","No default bucket found. Did you set the '"+Mk+"' property when initializing the app?")}();const r=new sp(t,t._bucket);return null!=e?r1(r,e):r}return void 0!==e?n1(n,e):n}function AB(n,e){if(e&&function SB(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof vM)return function TB(n,e){return new sp(n,e)}(n,e);throw Zm("To use ref(service, url), the first argument must be a Storage instance.")}return r1(n,e)}function i1(n,e){const t=e?.[Mk];return null==t?null:Bi.makeFromBucketSpec(t,n)}class vM{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=xk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Bi.makeFromBucketSpec(i,this._host):i1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Bi.makeFromBucketSpec(this._url,e):i1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,we.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,we.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sp(this,e)}_makeRequest(e,t,r,i,u=!0){if(this._deleted)return new C2(Pk());{const l=function k2(n,e,t,r,i,u,l=!0){const p=Lk(n.urlParams),_=n.url+p,I=Object.assign({},n.headers);return function N2(n,e){e&&(n["X-Firebase-GMPID"]=e)}(I,e),function R2(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(I,t),function O2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(I,u),function P2(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(I,r),new M2(_,n.method,I,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,we.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const s1="@firebase/storage";function u1(n,e){return AB(n=(0,Ht.m9)(n),e)}function VB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new vM(t,r,i,e,uo.SDK_VERSION)}!function UB(){(0,uo._registerComponent)(new co.wA("storage",VB,"PUBLIC").setMultipleInstances(!0)),(0,uo.registerVersion)(s1,"0.9.14",""),(0,uo.registerVersion)(s1,"0.9.14","esm2017")}();class gC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class l1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new gC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new gC(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?l=>t(new gC(l,this,this._ref)):{next:t.next?l=>t.next(new gC(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class d1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new el(e,this._service))}get items(){return this._delegate.items.map(e=>new el(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class el{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function LB(n,e){return n1(n,e)}(this._delegate,e);return new el(t,this.storage)}get root(){return new el(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new el(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new l1(function MB(n,e,t){return function vB(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Jk(n,new ku(e),t)}(n=(0,Ht.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=go.RAW,r){this._throwIfRoot("putString");const i=fM(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new l1(new Jk(this._delegate,new ku(i.data,!0),u),this)}listAll(){return function PB(n){return function EB(n){const e={prefixes:[],items:[]};return e1(n,e).then(()=>e)}(n=(0,Ht.m9)(n))}(this._delegate).then(e=>new d1(e,this.storage))}list(e){return function NB(n,e){return t1(n=(0,Ht.m9)(n),e)}(this._delegate,e||void 0).then(t=>new d1(t,this.storage))}getMetadata(){return function RB(n){return function IB(n){n._throwIfRoot("getMetadata");const e=qk(n.storage,n._location,t0());return n.storage.makeRequestWithTokens(e,qa)}(n=(0,Ht.m9)(n))}(this._delegate)}updateMetadata(e){return function OB(n,e){return function bB(n,e){n._throwIfRoot("updateMetadata");const t=function rB(n,e,t,r){const u=Xc(e.fullServerUrl(),n.host,n._protocol),p=gM(t,r),I=n.maxOperationRetryTime,S=new Fu(u,"PATCH",fC(n,r),I);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=p,S.errorHandler=n0(e),S}(n.storage,n._location,e,t0());return n.storage.makeRequestWithTokens(t,qa)}(n=(0,Ht.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function kB(n){return CB(n=(0,Ht.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function FB(n){return function DB(n){n._throwIfRoot("deleteObject");const e=function iB(n,e){const r=Xc(e.fullServerUrl(),n.host,n._protocol),p=new Fu(r,"DELETE",function l(_,I){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=n0(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,qa)}(n=(0,Ht.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw kk(e)}}class h1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(f1(e))throw Zm("ref() expected a child path but got a URL, use refFromURL instead.");return new el(u1(this._delegate,e),this)}refFromURL(e){if(!f1(e))throw Zm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bi.makeFromUrl(e,this._delegate.host)}catch{throw Zm("refFromUrl() expected a valid full URL but got an invalid one.")}return new el(u1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function c1(n,e,t,r={}){!function xB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Ht.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function f1(n){return/^[A-Za-z]+:\/\//.test(n)}function HB(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new h1(t,r)}function p1(n){const e=function zB(n){return new Tn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function c2(n,e=FI.z){return(0,Qn.e)((t,r)=>{let i=null,u=null,l=null;const p=()=>{if(i){i.unsubscribe(),i=null;const I=u;u=null,r.next(I)}};function _(){const I=l+n,S=e.now();if(S<I)return i=this.schedule(void 0,I-S),void r.add(i);p()}t.subscribe((0,Yn.x)(r,I=>{u=I,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,rt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function mC(n){return{getDownloadURL:()=>nt(void 0).pipe(Bt.fc,M(()=>n.getDownloadURL()),Bt.iC),getMetadata:()=>nt(void 0).pipe(Bt.fc,M(()=>n.getMetadata()),Bt.iC),delete:()=>(0,Jt.D)(n.delete()),child:e=>mC(n.child(e)),updateMetadata:e=>(0,Jt.D)(n.updateMetadata(e)),put:(e,t)=>p1(n.put(e,t)),putString:(e,t,r)=>p1(n.putString(e,t,r)),list:e=>(0,Jt.D)(n.list(e)),listAll:()=>(0,Jt.D)(n.listAll())}}!function GB(n){const e={TaskState:as,TaskEvent:cB,StringFormat:go,Storage:h1,Reference:el};n.INTERNAL.registerComponent(new co.wA("storage-compat",HB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(dv.Z);const qB=new d.OlP("angularfire2.storageBucket"),WB=new d.OlP("angularfire2.storage.maxUploadRetryTime"),ZB=new d.OlP("angularfire2.storage.maxOperationRetryTime"),KB=new d.OlP("angularfire2.storage.use-emulator");let YB=(()=>{class n{constructor(t,r,i,u,l,p,_,I,S,x){const U=(0,ki.on)(t,l,r);this.storage=(0,ki.cc)(`${U.name}.storage.${i}`,"AngularFireStorage",U.name,()=>{const H=l.runOutsideAngular(()=>U.storage(i||void 0)),K=S;return K&&H.useEmulator(...K),_&&H.setMaxUploadRetryTime(_),I&&H.setMaxOperationRetryTime(I),H},[_,I])}ref(t){return mC(this.storage.ref(t))}refFromURL(t){return mC(this.storage.refFromURL(t))}upload(t,r,i){return mC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ki.Dh),d.LFG(ki.xv,8),d.LFG(qB,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Bt.HU),d.LFG(WB,8),d.LFG(ZB,8),d.LFG(KB,8),d.LFG(ev,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),QB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),JB=(()=>{class n{constructor(){kI.Z.registerVersion("angularfire",Bt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[YB],imports:[QB]}),n})(),Wa=class{constructor(e,t){this.db=e,this.store=t}generateUniqSerial(){return"xxxx-xxxx-xxx-xxxx".replace(/[x]/g,e=>Math.floor(16*Math.random()).toString(16))}showModal(e){this.store.dispatch(new ii.Show({message:e}))}addCategory(e,t){this.store.dispatch(new Cn.Show);const r=this.store.selectSnapshot(i=>i.auth.email);this.db.collection("categories").add({...t.payload,id:this.generateUniqSerial(),email:r}).catch(()=>this.showModal("There was an error with adding the category "+t.payload.name)).finally(()=>{this.store.dispatch(new Cn.Hide),this.store.dispatch(new gi.Fetch)})}removeCategory(e,t){this.store.dispatch(new Cn.Show);let r=this.db.collection("categories",i=>i.where("id","==",t.payload.id)).get().subscribe(i=>{i.forEach(u=>{u.ref.delete().catch(()=>this.showModal("Problem with deleting category "+t.payload.name))}),r.unsubscribe(),this.store.dispatch(new Cn.Hide),this.store.dispatch(new gi.Fetch)})}fetchCategories(e){this.store.dispatch(new Cn.Show);const t=e.getState(),r=this.store.selectSnapshot(u=>u.auth.email);let i=this.db.collection("categories",u=>u.where("email","==",r)).valueChanges().subscribe(u=>{e.setState({...t,categories:u}),this.store.dispatch(new Cn.Hide),i.unsubscribe()})}};Wa.\u0275fac=function(e){return new(e||Wa)(d.LFG(zm),d.LFG(xr))},Wa.\u0275prov=d.Yz7({token:Wa,factory:Wa.\u0275fac}),(0,ln.gn)([ri(gi.Add)],Wa.prototype,"addCategory",null),(0,ln.gn)([ri(gi.Remove)],Wa.prototype,"removeCategory",null),(0,ln.gn)([ri(gi.Fetch)],Wa.prototype,"fetchCategories",null),Wa=(0,ln.gn)([Hh({name:"categories",defaults:{categories:[]}})],Wa);let Vu=class{constructor(e){this.db=e}showLoader(e){const t=e.getState();e.setState({...t,isVisible:!0})}hideLoader(e){const t=e.getState();e.setState({...t,isVisible:!1})}};Vu.\u0275fac=function(e){return new(e||Vu)(d.LFG(zm))},Vu.\u0275prov=d.Yz7({token:Vu,factory:Vu.\u0275fac}),(0,ln.gn)([ri(Cn.Show)],Vu.prototype,"showLoader",null),(0,ln.gn)([ri(Cn.Hide)],Vu.prototype,"hideLoader",null),Vu=(0,ln.gn)([Hh({name:"loader",defaults:{isVisible:!1}})],Vu);let Uu=class{constructor(e){this.db=e}showModal(e,t){const r=e.getState();e.setState({...r,isVisible:!0,message:t.payload.message})}hideModal(e){const t=e.getState();e.setState({...t,isVisible:!1,message:""})}};Uu.\u0275fac=function(e){return new(e||Uu)(d.LFG(zm))},Uu.\u0275prov=d.Yz7({token:Uu,factory:Uu.\u0275fac}),(0,ln.gn)([ri(ii.Show)],Uu.prototype,"showModal",null),(0,ln.gn)([ri(ii.Hide)],Uu.prototype,"hideModal",null),Uu=(0,ln.gn)([Hh({name:"modal",defaults:{isVisible:!1,message:""}})],Uu);let XB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[WU]}),n.\u0275inj=d.cJS({providers:[pf,gf,Ug],imports:[Po,HU,Pi.forRoot([za,Wa,Vu,Uu,$r]),dI,u2,lI,ki.hO.initializeApp(Ak_firebaseConfig,"money-manager"),OU,JB]}),n})();(0,d.G48)(),Ca().bootstrapModule(XB).catch(n=>console.error(n))},5867:(lt,Ae,F)=>{F.d(Ae,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=F(9681);(0,d.registerVersion)("firebase","9.14.0","app")},127:(lt,Ae,F)=>{F.d(Ae,{Z:()=>d.Z});var d=F(3942);d.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(lt,Ae,F)=>{F.r(Ae);var d=F(5861),j=F(3942),N=F(8247),oe=F(2090),pe=(F(9681),F(1877),F(4859));function ue(){return window}function z(){return(z=(0,d.Z)(function*(B,R,V){var ie;const{BuildInfo:Fe}=ue();(0,N.ap)(R.sessionId,"AuthEvent did not contain a session ID");const at=yield me(R.sessionId),ut={};return(0,N.aq)()?ut.ibi=Fe.packageName:(0,N.ar)()?ut.apn=Fe.packageName:(0,N.as)(B,"operation-not-supported-in-this-environment"),Fe.displayName&&(ut.appDisplayName=Fe.displayName),ut.sessionId=at,(0,N.at)(B,V,R.type,void 0,null!==(ie=R.eventId)&&void 0!==ie?ie:void 0,ut)})).apply(this,arguments)}function $e(){return($e=(0,d.Z)(function*(B){const{BuildInfo:R}=ue(),V={};(0,N.aq)()?V.iosBundleId=R.packageName:(0,N.ar)()?V.androidPackageName=R.packageName:(0,N.as)(B,"operation-not-supported-in-this-environment"),yield(0,N.au)(B,V)})).apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(B,R,V){const{cordova:ie}=ue();let Fe=()=>{};try{yield new Promise((at,ut)=>{let xe=null;function Ue(){var Rt;at();const un=null===(Rt=ie.plugins.browsertab)||void 0===Rt?void 0:Rt.close;"function"==typeof un&&un(),"function"==typeof V?.close&&V.close()}function xt(){xe||(xe=window.setTimeout(()=>{ut((0,N.aw)(B,"redirect-cancelled-by-user"))},2e3))}function an(){"visible"===document?.visibilityState&&xt()}R.addPassiveListener(Ue),document.addEventListener("resume",xt,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",an,!1),Fe=()=>{R.removePassiveListener(Ue),document.removeEventListener("resume",xt,!1),document.removeEventListener("visibilitychange",an,!1),xe&&window.clearTimeout(xe)}})}finally{Fe()}})).apply(this,arguments)}function me(B){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,d.Z)(function*(B){const R=Qe(B),V=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(V)).map(Fe=>Fe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Qe(B){if((0,N.ap)(/[0-9a-zA-Z]+/.test(B),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(B);const R=new ArrayBuffer(B.length),V=new Uint8Array(R);for(let ie=0;ie<B.length;ie++)V[ie]=B.charCodeAt(ie);return V}class Ne extends N.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(V=>V(R)),super.onEvent(R)}initialized(){var R=this;return(0,d.Z)(function*(){yield R.initPromise})()}}function se(B){return le.apply(this,arguments)}function le(){return(le=(0,d.Z)(function*(B){const R=yield X()._get(fe(B));return R&&(yield X()._remove(fe(B))),R})).apply(this,arguments)}function Q(){const B=[],R="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let V=0;V<20;V++){const ie=Math.floor(Math.random()*R.length);B.push(R.charAt(ie))}return B.join("")}function X(){return(0,N.az)(N.b)}function fe(B){return(0,N.aA)("authEvent",B.config.apiKey,B.name)}function je(B){if(!B?.includes("?"))return{};const[R,...V]=B.split("?");return(0,oe.zd)(V.join("?"))}function Ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function $t(){var B;return(null===(B=self?.location)||void 0===B?void 0:B.protocol)||null}function mr(B=(0,oe.z$)()){return!("file:"!==$t()&&"ionic:"!==$t()&&"capacitor:"!==$t()||!B.toLowerCase().match(/iphone|ipad|ipod|android/))}function $i(){try{const B=self.localStorage,R=N.aI();if(B)return B.setItem(R,"1"),B.removeItem(R),!function ji(B=(0,oe.z$)()){return function br(){return(0,oe.w1)()&&11===document?.documentMode}()||function An(B=(0,oe.z$)()){return/Edge\/\d+/.test(B)}(B)}()||(0,oe.hl)()}catch{return Cr()&&(0,oe.hl)()}return!1}function Cr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ln(){return(function kt(){return"http:"===$t()||"https:"===$t()}()||(0,oe.ru)()||mr())&&!function Ei(){return(0,oe.b$)()||(0,oe.UG)()}()&&$i()&&!Cr()}function ci(){return mr()&&typeof document<"u"}function Je(){return(Je=(0,d.Z)(function*(){return!!ci()&&new Promise(B=>{const R=setTimeout(()=>{B(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),B(!0)})})})).apply(this,arguments)}const Vn={LOCAL:"local",NONE:"none",SESSION:"session"},pn=N.ax,sr="persistence";function yn(B){return _n.apply(this,arguments)}function _n(){return(_n=(0,d.Z)(function*(B){yield B._initializationPromise;const R=ft(),V=N.aA(sr,B.config.apiKey,B.name);R&&R.setItem(V,B._getPersistence())})).apply(this,arguments)}function ft(){var B;try{return(null===(B=function Gn(){return typeof window<"u"?window:null}())||void 0===B?void 0:B.sessionStorage)||null}catch{return null}}const pt=N.ax;class At{constructor(){this.browserResolver=N.az(N.k),this.cordovaResolver=N.az(class tn{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(R){var V=this;return(0,d.Z)(function*(){const ie=R._key();let Fe=V.eventManagers.get(ie);return Fe||(Fe=new Ne(R),V.eventManagers.set(ie,Fe),V.attachCallbackListeners(R,Fe)),Fe})()}_openPopup(R){(0,N.as)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,V,ie,Fe){var at=this;return(0,d.Z)(function*(){!function ve(B){var R,V,ie,Fe,at,ut,xe,Ue,xt,an;const Rt=ue();(0,N.ax)("function"==typeof(null===(R=Rt?.universalLinks)||void 0===R?void 0:R.subscribe),B,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===(V=Rt?.BuildInfo)||void 0===V?void 0:V.packageName)<"u",B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(at=null===(Fe=null===(ie=Rt?.cordova)||void 0===ie?void 0:ie.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===at?void 0:at.openUrl),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Ue=null===(xe=null===(ut=Rt?.cordova)||void 0===ut?void 0:ut.plugins)||void 0===xe?void 0:xe.browsertab)||void 0===Ue?void 0:Ue.isAvailable),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(an=null===(xt=Rt?.cordova)||void 0===xt?void 0:xt.InAppBrowser)||void 0===an?void 0:an.open),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const ut=yield at._initialize(R);yield ut.initialized(),ut.resetRedirect(),(0,N.aD)(),yield at._originValidation(R);const xe=function be(B,R,V=null){return{type:R,eventId:V,urlResponse:null,sessionId:Q(),postBody:null,tenantId:B.tenantId,error:(0,N.aw)(B,"no-auth-event")}}(R,ie,Fe);yield function ze(B,R){return X()._set(fe(B),R)}(R,xe);const Ue=yield function G(B,R,V){return z.apply(this,arguments)}(R,xe,V),xt=yield function ke(B){const{cordova:R}=ue();return new Promise(V=>{R.plugins.browsertab.isAvailable(ie=>{let Fe=null;ie?R.plugins.browsertab.openUrl(B):Fe=R.InAppBrowser.open(B,(0,N.av)()?"_blank":"_system","location=yes"),V(Fe)})})}(Ue);return function Ce(B,R,V){return it.apply(this,arguments)}(R,ut,xt)})()}_isIframeWebStorageSupported(R,V){throw new Error("Method not implemented.")}_originValidation(R){const V=R._key();return this.originValidationPromises[V]||(this.originValidationPromises[V]=function J(B){return $e.apply(this,arguments)}(R)),this.originValidationPromises[V]}attachCallbackListeners(R,V){const{universalLinks:ie,handleOpenURL:Fe,BuildInfo:at}=ue(),ut=setTimeout((0,d.Z)(function*(){yield se(R),V.onEvent(Ze())}),500),xe=function(){var an=(0,d.Z)(function*(Rt){clearTimeout(ut);const un=yield se(R);let Gi=null;un&&Rt?.url&&(Gi=function _e(B,R){var V,ie;const Fe=function Be(B){const R=je(B),V=R.link?decodeURIComponent(R.link):void 0,ie=je(V).link,Fe=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return je(Fe).link||Fe||ie||V||B}(R);if(Fe.includes("/__/auth/callback")){const at=je(Fe),ut=at.firebaseError?function ae(B){try{return JSON.parse(B)}catch{return null}}(decodeURIComponent(at.firebaseError)):null,xe=null===(ie=null===(V=ut?.code)||void 0===V?void 0:V.split("auth/"))||void 0===ie?void 0:ie[1],Ue=xe?(0,N.aw)(xe):null;return Ue?{type:B.type,eventId:B.eventId,tenantId:B.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:B.type,eventId:B.eventId,tenantId:B.tenantId,sessionId:B.sessionId,urlResponse:Fe,postBody:null}}return null}(un,Rt.url)),V.onEvent(Gi||Ze())});return function(un){return an.apply(this,arguments)}}();typeof ie<"u"&&"function"==typeof ie.subscribe&&ie.subscribe(null,xe);const Ue=Fe,xt=`${at.packageName.toLowerCase()}://`;ue().handleOpenURL=function(){var an=(0,d.Z)(function*(Rt){if(Rt.toLowerCase().startsWith(xt)&&xe({url:Rt}),"function"==typeof Ue)try{Ue(Rt)}catch(un){console.error(un)}});return function(Rt){return an.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(R){var V=this;return(0,d.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,V,ie,Fe){var at=this;return(0,d.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openPopup(R,V,ie,Fe)})()}_openRedirect(R,V,ie,Fe){var at=this;return(0,d.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openRedirect(R,V,ie,Fe)})()}_isIframeWebStorageSupported(R,V){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,V)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return ci()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,d.Z)(function*(){if(R.underlyingResolver)return;const V=yield function Hi(){return Je.apply(this,arguments)}();R.underlyingResolver=V?R.cordovaResolver:R.browserResolver})()}}function kr(B){return B.unwrap()}function yr(B){return Dr(B)}function Dr(B){const{_tokenResponse:R}=B instanceof oe.ZR?B.customData:B;if(!R)return null;if(!(B instanceof oe.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return N.P.credentialFromResult(B);const V=R.providerId;if(!V||V===N.o.PASSWORD)return null;let ie;switch(V){case N.o.GOOGLE:ie=N.Q;break;case N.o.FACEBOOK:ie=N.N;break;case N.o.GITHUB:ie=N.T;break;case N.o.TWITTER:ie=N.W;break;default:const{oauthIdToken:Fe,oauthAccessToken:at,oauthTokenSecret:ut,pendingToken:xe,nonce:Ue}=R;return at||ut||Fe||xe?xe?V.startsWith("saml.")?N.aL._create(V,xe):N.J._fromParams({providerId:V,signInMethod:V,pendingToken:xe,idToken:Fe,accessToken:at}):new N.U(V).credential({idToken:Fe,accessToken:at,rawNonce:Ue}):null}return B instanceof oe.ZR?ie.credentialFromError(B):ie.credentialFromResult(B)}function Pt(B,R){return R.catch(V=>{throw V instanceof oe.ZR&&function Dt(B,R){var V,ie;const Fe=null===(V=R.customData)||void 0===V?void 0:V._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ie=R)||void 0===ie?void 0:ie.code))R.resolver=new nr(B,N.an(B,R));else if(Fe){const at=Dr(R),ut=R;at&&(ut.credential=at,ut.tenantId=Fe.tenantId||void 0,ut.email=Fe.email||void 0,ut.phoneNumber=Fe.phoneNumber||void 0)}}(B,V),V}).then(V=>{const Fe=V.user;return{operationType:V.operationType,credential:yr(V),additionalUserInfo:N.al(V),user:In.getOrCreate(Fe)}})}function zr(B,R){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,d.Z)(function*(B,R){const V=yield R;return{verificationId:V.verificationId,confirm:ie=>Pt(B,V.confirm(ie))}})).apply(this,arguments)}class nr{constructor(R,V){this.resolver=V,this.auth=function zn(B){return B.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return Pt(kr(this.auth),this.resolver.resolveSignIn(R))}}class In{constructor(R){this._delegate=R,this.multiFactor=N.ao(R)}static getOrCreate(R){return In.USER_MAP.has(R)||In.USER_MAP.set(R,new In(R)),In.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var V=this;return(0,d.Z)(function*(){return Pt(V.auth,N.Z(V._delegate,R))})()}linkWithPhoneNumber(R,V){var ie=this;return(0,d.Z)(function*(){return zr(ie.auth,N.l(ie._delegate,R,V))})()}linkWithPopup(R){var V=this;return(0,d.Z)(function*(){return Pt(V.auth,N.d(V._delegate,R,At))})()}linkWithRedirect(R){var V=this;return(0,d.Z)(function*(){return yield yn(N.aE(V.auth)),N.g(V._delegate,R,At)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var V=this;return(0,d.Z)(function*(){return Pt(V.auth,N._(V._delegate,R))})()}reauthenticateWithPhoneNumber(R,V){return zr(this.auth,N.r(this._delegate,R,V))}reauthenticateWithPopup(R){return Pt(this.auth,N.e(this._delegate,R,At))}reauthenticateWithRedirect(R){var V=this;return(0,d.Z)(function*(){return yield yn(N.aE(V.auth)),N.h(V._delegate,R,At)})()}sendEmailVerification(R){return N.ab(this._delegate,R)}unlink(R){var V=this;return(0,d.Z)(function*(){return yield N.ak(V._delegate,R),V})()}updateEmail(R){return N.ag(this._delegate,R)}updatePassword(R){return N.ah(this._delegate,R)}updatePhoneNumber(R){return N.u(this._delegate,R)}updateProfile(R){return N.af(this._delegate,R)}verifyBeforeUpdateEmail(R,V){return N.ac(this._delegate,R,V)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}In.USER_MAP=new WeakMap;const et=N.ax;let Se=(()=>{class B{constructor(V,ie){if(this.app=V,ie.isInitialized())return this._delegate=ie.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Fe}=V.options;et(Fe,"invalid-api-key",{appName:V.name}),et(Fe,"invalid-api-key",{appName:V.name});const at=typeof window<"u"?At:void 0;this._delegate=ie.initialize({options:{persistence:wt(Fe,V.name),popupRedirectResolver:at}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?In.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(V){this._delegate.languageCode=V}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(V){this._delegate.tenantId=V}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(V,ie){N.G(this._delegate,V,ie)}applyActionCode(V){return N.a2(this._delegate,V)}checkActionCode(V){return N.a3(this._delegate,V)}confirmPasswordReset(V,ie){return N.a1(this._delegate,V,ie)}createUserWithEmailAndPassword(V,ie){var Fe=this;return(0,d.Z)(function*(){return Pt(Fe._delegate,N.a5(Fe._delegate,V,ie))})()}fetchProvidersForEmail(V){return this.fetchSignInMethodsForEmail(V)}fetchSignInMethodsForEmail(V){return N.aa(this._delegate,V)}isSignInWithEmailLink(V){return N.a8(this._delegate,V)}getRedirectResult(){var V=this;return(0,d.Z)(function*(){et(Ln(),V._delegate,"operation-not-supported-in-this-environment");const ie=yield N.j(V._delegate,At);return ie?Pt(V._delegate,Promise.resolve(ie)):{credential:null,user:null}})()}addFrameworkForLogging(V){!function on(B,R){(0,N.aE)(B)._logFramework(R)}(this._delegate,V)}onAuthStateChanged(V,ie,Fe){const{next:at,error:ut,complete:xe}=tt(V,ie,Fe);return this._delegate.onAuthStateChanged(at,ut,xe)}onIdTokenChanged(V,ie,Fe){const{next:at,error:ut,complete:xe}=tt(V,ie,Fe);return this._delegate.onIdTokenChanged(at,ut,xe)}sendSignInLinkToEmail(V,ie){return N.a7(this._delegate,V,ie)}sendPasswordResetEmail(V,ie){return N.a0(this._delegate,V,ie||void 0)}setPersistence(V){var ie=this;return(0,d.Z)(function*(){let Fe;switch(function Ms(B,R){pn(Object.values(Vn).includes(R),B,"invalid-persistence-type"),(0,oe.b$)()?pn(R!==Vn.SESSION,B,"unsupported-persistence-type"):(0,oe.UG)()?pn(R===Vn.NONE,B,"unsupported-persistence-type"):Cr()?pn(R===Vn.NONE||R===Vn.LOCAL&&(0,oe.hl)(),B,"unsupported-persistence-type"):pn(R===Vn.NONE||$i(),B,"unsupported-persistence-type")}(ie._delegate,V),V){case Vn.SESSION:Fe=N.a;break;case Vn.LOCAL:Fe=(yield N.az(N.i)._isAvailable())?N.i:N.b;break;case Vn.NONE:Fe=N.L;break;default:return N.as("argument-error",{appName:ie._delegate.name})}return ie._delegate.setPersistence(Fe)})()}signInAndRetrieveDataWithCredential(V){return this.signInWithCredential(V)}signInAnonymously(){return Pt(this._delegate,N.X(this._delegate))}signInWithCredential(V){return Pt(this._delegate,N.Y(this._delegate,V))}signInWithCustomToken(V){return Pt(this._delegate,N.$(this._delegate,V))}signInWithEmailAndPassword(V,ie){return Pt(this._delegate,N.a6(this._delegate,V,ie))}signInWithEmailLink(V,ie){return Pt(this._delegate,N.a9(this._delegate,V,ie))}signInWithPhoneNumber(V,ie){return zr(this._delegate,N.s(this._delegate,V,ie))}signInWithPopup(V){var ie=this;return(0,d.Z)(function*(){return et(Ln(),ie._delegate,"operation-not-supported-in-this-environment"),Pt(ie._delegate,N.c(ie._delegate,V,At))})()}signInWithRedirect(V){var ie=this;return(0,d.Z)(function*(){return et(Ln(),ie._delegate,"operation-not-supported-in-this-environment"),yield yn(ie._delegate),N.f(ie._delegate,V,At)})()}updateCurrentUser(V){return this._delegate.updateCurrentUser(V)}verifyPasswordResetCode(V){return N.a4(this._delegate,V)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return B.Persistence=Vn,B})();function tt(B,R,V){let ie=B;"function"!=typeof B&&({next:ie,error:R,complete:V}=B);const Fe=ie;return{next:ut=>Fe(ut&&In.getOrCreate(ut)),error:R,complete:V}}function wt(B,R){const V=function fn(B,R){const V=ft();if(!V)return[];const ie=N.aA(sr,B,R);switch(V.getItem(ie)){case Vn.NONE:return[N.L];case Vn.LOCAL:return[N.i,N.a];case Vn.SESSION:return[N.a];default:return[]}}(B,R);if(typeof self<"u"&&!V.includes(N.i)&&V.push(N.i),typeof window<"u")for(const ie of[N.b,N.a])V.includes(ie)||V.push(ie);return V.includes(N.L)||V.push(N.L),V}class It{constructor(){this.providerId="phone",this._delegate=new N.P(kr(j.Z.auth()))}static credential(R,V){return N.P.credential(R,V)}verifyPhoneNumber(R,V){return this._delegate.verifyPhoneNumber(R,V)}unwrap(){return this._delegate}}It.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,It.PROVIDER_ID=N.P.PROVIDER_ID;const Qt=N.ax;class q{constructor(R,V,ie=j.Z.app()){var Fe;Qt(null===(Fe=ie.options)||void 0===Fe?void 0:Fe.apiKey,"invalid-api-key",{appName:ie.name}),this._delegate=new N.R(R,V,ie.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Z(B){B.INTERNAL.registerComponent(new pe.wA("auth-compat",R=>{const V=R.getProvider("app-compat").getImmediate(),ie=R.getProvider("auth");return new Se(V,ie)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:It,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:q,TwitterAuthProvider:N.W,Auth:Se,AuthCredential:N.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),B.registerVersion("@firebase/auth-compat","0.2.24")}(j.Z)},9751:(lt,Ae,F)=>{F.d(Ae,{y:()=>ue});var d=F(930),j=F(727),N=F(8822),oe=F(9635),ce=F(2416),ye=F(576),pe=F(2806);let ue=(()=>{class J{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const Ce=new J;return Ce.source=this,Ce.operator=ke,Ce}subscribe(ke,Ce,it){const ve=function z(J){return J&&J instanceof d.Lv||function G(J){return J&&(0,ye.m)(J.next)&&(0,ye.m)(J.error)&&(0,ye.m)(J.complete)}(J)&&(0,j.Nn)(J)}(ke)?ke:new d.Hp(ke,Ce,it);return(0,pe.x)(()=>{const{operator:me,source:Xe}=this;ve.add(me?me.call(ve,Xe):Xe?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(ke){try{return this._subscribe(ke)}catch(Ce){ke.error(Ce)}}forEach(ke,Ce){return new(Ce=he(Ce))((it,ve)=>{const me=new d.Hp({next:Xe=>{try{ke(Xe)}catch(Qe){ve(Qe),me.unsubscribe()}},error:ve,complete:it});this.subscribe(me)})}_subscribe(ke){var Ce;return null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(ke)}[N.L](){return this}pipe(...ke){return(0,oe.U)(ke)(this)}toPromise(ke){return new(ke=he(ke))((Ce,it)=>{let ve;this.subscribe(me=>ve=me,me=>it(me),()=>Ce(ve))})}}return J.create=$e=>new J($e),J})();function he(J){var $e;return null!==($e=J??ce.v.Promise)&&void 0!==$e?$e:Promise}},7579:(lt,Ae,F)=>{F.d(Ae,{x:()=>pe});var d=F(9751),j=F(727);const oe=(0,F(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=F(8737),ye=F(2806);let pe=(()=>{class he extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const J=new ue(this,this);return J.operator=z,J}_throwIfClosed(){if(this.closed)throw new oe}next(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(z)}})}error(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:J}=this;for(;J.length;)J.shift().error(z)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:J,isStopped:$e,observers:ke}=this;return J||$e?j.Lc:(this.currentObservers=null,ke.push(z),new j.w0(()=>{this.currentObservers=null,(0,ce.P)(ke,z)}))}_checkFinalizedStatuses(z){const{hasError:J,thrownError:$e,isStopped:ke}=this;J?z.error($e):ke&&z.complete()}asObservable(){const z=new d.y;return z.source=this,z}}return he.create=(G,z)=>new ue(G,z),he})();class ue extends pe{constructor(G,z){super(),this.destination=G,this.source=z}next(G){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===J||J.call(z,G)}error(G){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===J||J.call(z,G)}complete(){var G,z;null===(z=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===z||z.call(G)}_subscribe(G){var z,J;return null!==(J=null===(z=this.source)||void 0===z?void 0:z.subscribe(G))&&void 0!==J?J:j.Lc}}},930:(lt,Ae,F)=>{F.d(Ae,{Hp:()=>it,Lv:()=>J});var d=F(576),j=F(727),N=F(2416),oe=F(7849),ce=F(5032);const ye=he("C",void 0,void 0);function he(Ve,Ne,be){return{kind:Ve,value:Ne,error:be}}var G=F(3410),z=F(2806);class J extends j.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,j.Nn)(Ne)&&Ne.add(this)):this.destination=Qe}static create(Ne,be,ze){return new it(Ne,be,ze)}next(Ne){this.isStopped?Xe(function ue(Ve){return he("N",Ve,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?Xe(function pe(Ve){return he("E",void 0,Ve)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?Xe(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function ke(Ve,Ne){return $e.call(Ve,Ne)}class Ce{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:be}=this;if(be.next)try{be.next(Ne)}catch(ze){ve(ze)}}error(Ne){const{partialObserver:be}=this;if(be.error)try{be.error(Ne)}catch(ze){ve(ze)}else ve(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(be){ve(be)}}}class it extends J{constructor(Ne,be,ze){let se;if(super(),(0,d.m)(Ne)||!Ne)se={next:Ne??void 0,error:be??void 0,complete:ze??void 0};else{let le;this&&N.v.useDeprecatedNextContext?(le=Object.create(Ne),le.unsubscribe=()=>this.unsubscribe(),se={next:Ne.next&&ke(Ne.next,le),error:Ne.error&&ke(Ne.error,le),complete:Ne.complete&&ke(Ne.complete,le)}):se=Ne}this.destination=new Ce(se)}}function ve(Ve){N.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Ve):(0,oe.h)(Ve)}function Xe(Ve,Ne){const{onStoppedNotification:be}=N.v;be&&G.z.setTimeout(()=>be(Ve,Ne))}const Qe={closed:!0,next:ce.Z,error:function me(Ve){throw Ve},complete:ce.Z}},727:(lt,Ae,F)=>{F.d(Ae,{Lc:()=>ye,w0:()=>ce,Nn:()=>pe});var d=F(576);const N=(0,F(3888).d)(he=>function(z){he(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((J,$e)=>`${$e+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var oe=F(8737);class ce{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const ke of z)ke.remove(this);else z.remove(this);const{initialTeardown:J}=this;if((0,d.m)(J))try{J()}catch(ke){G=ke instanceof N?ke.errors:[ke]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const ke of $e)try{ue(ke)}catch(Ce){G=G??[],Ce instanceof N?G=[...G,...Ce.errors]:G.push(Ce)}}if(G)throw new N(G)}}add(G){var z;if(G&&G!==this)if(this.closed)ue(G);else{if(G instanceof ce){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(G)}}_hasParent(G){const{_parentage:z}=this;return z===G||Array.isArray(z)&&z.includes(G)}_addParent(G){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(G),z):z?[z,G]:G}_removeParent(G){const{_parentage:z}=this;z===G?this._parentage=null:Array.isArray(z)&&(0,oe.P)(z,G)}remove(G){const{_finalizers:z}=this;z&&(0,oe.P)(z,G),G instanceof ce&&G._removeParent(this)}}ce.EMPTY=(()=>{const he=new ce;return he.closed=!0,he})();const ye=ce.EMPTY;function pe(he){return he instanceof ce||he&&"closed"in he&&(0,d.m)(he.remove)&&(0,d.m)(he.add)&&(0,d.m)(he.unsubscribe)}function ue(he){(0,d.m)(he)?he():he.unsubscribe()}},2416:(lt,Ae,F)=>{F.d(Ae,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Ae,F)=>{F.d(Ae,{E:()=>j});const j=new(F(9751).y)(ce=>ce.complete())},8996:(lt,Ae,F)=>{F.d(Ae,{D:()=>Ne});var d=F(8421),j=F(5363),N=F(9468),ye=F(9751),ue=F(2202),he=F(576),G=F(9672);function J(be,ze){if(!be)throw new Error("Iterable cannot be null");return new ye.y(se=>{(0,G.f)(se,ze,()=>{const le=be[Symbol.asyncIterator]();(0,G.f)(se,ze,()=>{le.next().then(_e=>{_e.done?se.complete():se.next(_e.value)})},0,!0)})})}var $e=F(3670),ke=F(8239),Ce=F(1144),it=F(6495),ve=F(2206),me=F(4532),Xe=F(3260);function Ne(be,ze){return ze?function Ve(be,ze){if(null!=be){if((0,$e.c)(be))return function oe(be,ze){return(0,d.Xf)(be).pipe((0,N.R)(ze),(0,j.Q)(ze))}(be,ze);if((0,Ce.z)(be))return function pe(be,ze){return new ye.y(se=>{let le=0;return ze.schedule(function(){le===be.length?se.complete():(se.next(be[le++]),se.closed||this.schedule())})})}(be,ze);if((0,ke.t)(be))return function ce(be,ze){return(0,d.Xf)(be).pipe((0,N.R)(ze),(0,j.Q)(ze))}(be,ze);if((0,ve.D)(be))return J(be,ze);if((0,it.T)(be))return function z(be,ze){return new ye.y(se=>{let le;return(0,G.f)(se,ze,()=>{le=be[ue.h](),(0,G.f)(se,ze,()=>{let _e,Q;try{({value:_e,done:Q}=le.next())}catch(X){return void se.error(X)}Q?se.complete():se.next(_e)},0,!0)}),()=>(0,he.m)(le?.return)&&le.return()})}(be,ze);if((0,Xe.L)(be))return function Qe(be,ze){return J((0,Xe.Q)(be),ze)}(be,ze)}throw(0,me.z)(be)}(be,ze):(0,d.Xf)(be)}},8421:(lt,Ae,F)=>{F.d(Ae,{Xf:()=>$e});var d=F(655),j=F(1144),N=F(8239),oe=F(9751),ce=F(3670),ye=F(2206),pe=F(4532),ue=F(6495),he=F(3260),G=F(576),z=F(7849),J=F(8822);function $e(Ve){if(Ve instanceof oe.y)return Ve;if(null!=Ve){if((0,ce.c)(Ve))return function ke(Ve){return new oe.y(Ne=>{const be=Ve[J.L]();if((0,G.m)(be.subscribe))return be.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,j.z)(Ve))return function Ce(Ve){return new oe.y(Ne=>{for(let be=0;be<Ve.length&&!Ne.closed;be++)Ne.next(Ve[be]);Ne.complete()})}(Ve);if((0,N.t)(Ve))return function it(Ve){return new oe.y(Ne=>{Ve.then(be=>{Ne.closed||(Ne.next(be),Ne.complete())},be=>Ne.error(be)).then(null,z.h)})}(Ve);if((0,ye.D)(Ve))return me(Ve);if((0,ue.T)(Ve))return function ve(Ve){return new oe.y(Ne=>{for(const be of Ve)if(Ne.next(be),Ne.closed)return;Ne.complete()})}(Ve);if((0,he.L)(Ve))return function Xe(Ve){return me((0,he.Q)(Ve))}(Ve)}throw(0,pe.z)(Ve)}function me(Ve){return new oe.y(Ne=>{(function Qe(Ve,Ne){var be,ze,se,le;return(0,d.mG)(this,void 0,void 0,function*(){try{for(be=(0,d.KL)(Ve);!(ze=yield be.next()).done;)if(Ne.next(ze.value),Ne.closed)return}catch(_e){se={error:_e}}finally{try{ze&&!ze.done&&(le=be.return)&&(yield le.call(be))}finally{if(se)throw se.error}}Ne.complete()})})(Ve,Ne).catch(be=>Ne.error(be))})}},6451:(lt,Ae,F)=>{F.d(Ae,{T:()=>ye});var d=F(8189),j=F(8421),N=F(515),oe=F(7669),ce=F(8996);function ye(...pe){const ue=(0,oe.yG)(pe),he=(0,oe._6)(pe,1/0),G=pe;return G.length?1===G.length?(0,j.Xf)(G[0]):(0,d.J)(he)((0,ce.D)(G,ue)):N.E}},5403:(lt,Ae,F)=>{F.d(Ae,{x:()=>j});var d=F(930);function j(oe,ce,ye,pe,ue){return new N(oe,ce,ye,pe,ue)}class N extends d.Lv{constructor(ce,ye,pe,ue,he,G){super(ce),this.onFinalize=he,this.shouldUnsubscribe=G,this._next=ye?function(z){try{ye(z)}catch(J){ce.error(J)}}:super._next,this._error=ue?function(z){try{ue(z)}catch(J){ce.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(z){ce.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},4004:(lt,Ae,F)=>{F.d(Ae,{U:()=>N});var d=F(4482),j=F(5403);function N(oe,ce){return(0,d.e)((ye,pe)=>{let ue=0;ye.subscribe((0,j.x)(pe,he=>{pe.next(oe.call(ce,he,ue++))}))})}},8189:(lt,Ae,F)=>{F.d(Ae,{J:()=>N});var d=F(5577),j=F(4671);function N(oe=1/0){return(0,d.z)(j.y,oe)}},5577:(lt,Ae,F)=>{F.d(Ae,{z:()=>ue});var d=F(4004),j=F(8421),N=F(4482),oe=F(9672),ce=F(5403),pe=F(576);function ue(he,G,z=1/0){return(0,pe.m)(G)?ue((J,$e)=>(0,d.U)((ke,Ce)=>G(J,ke,$e,Ce))((0,j.Xf)(he(J,$e))),z):("number"==typeof G&&(z=G),(0,N.e)((J,$e)=>function ye(he,G,z,J,$e,ke,Ce,it){const ve=[];let me=0,Xe=0,Qe=!1;const Ve=()=>{Qe&&!ve.length&&!me&&G.complete()},Ne=ze=>me<J?be(ze):ve.push(ze),be=ze=>{ke&&G.next(ze),me++;let se=!1;(0,j.Xf)(z(ze,Xe++)).subscribe((0,ce.x)(G,le=>{$e?.(le),ke?Ne(le):G.next(le)},()=>{se=!0},void 0,()=>{if(se)try{for(me--;ve.length&&me<J;){const le=ve.shift();Ce?(0,oe.f)(G,Ce,()=>be(le)):be(le)}Ve()}catch(le){G.error(le)}}))};return he.subscribe((0,ce.x)(G,Ne,()=>{Qe=!0,Ve()})),()=>{it?.()}}(J,$e,he,z)))}},5363:(lt,Ae,F)=>{F.d(Ae,{Q:()=>oe});var d=F(9672),j=F(4482),N=F(5403);function oe(ce,ye=0){return(0,j.e)((pe,ue)=>{pe.subscribe((0,N.x)(ue,he=>(0,d.f)(ue,ce,()=>ue.next(he),ye),()=>(0,d.f)(ue,ce,()=>ue.complete(),ye),he=>(0,d.f)(ue,ce,()=>ue.error(he),ye)))})}},3099:(lt,Ae,F)=>{F.d(Ae,{B:()=>ce});var d=F(8421),j=F(7579),N=F(930),oe=F(4482);function ce(pe={}){const{connector:ue=(()=>new j.x),resetOnError:he=!0,resetOnComplete:G=!0,resetOnRefCountZero:z=!0}=pe;return J=>{let $e,ke,Ce,it=0,ve=!1,me=!1;const Xe=()=>{ke?.unsubscribe(),ke=void 0},Qe=()=>{Xe(),$e=Ce=void 0,ve=me=!1},Ve=()=>{const Ne=$e;Qe(),Ne?.unsubscribe()};return(0,oe.e)((Ne,be)=>{it++,!me&&!ve&&Xe();const ze=Ce=Ce??ue();be.add(()=>{it--,0===it&&!me&&!ve&&(ke=ye(Ve,z))}),ze.subscribe(be),!$e&&it>0&&($e=new N.Hp({next:se=>ze.next(se),error:se=>{me=!0,Xe(),ke=ye(Qe,he,se),ze.error(se)},complete:()=>{ve=!0,Xe(),ke=ye(Qe,G),ze.complete()}}),(0,d.Xf)(Ne).subscribe($e))})(J)}}function ye(pe,ue,...he){if(!0===ue)return void pe();if(!1===ue)return;const G=new N.Hp({next:()=>{G.unsubscribe(),pe()}});return ue(...he).subscribe(G)}},9468:(lt,Ae,F)=>{F.d(Ae,{R:()=>j});var d=F(4482);function j(N,oe=0){return(0,d.e)((ce,ye)=>{ye.add(N.schedule(()=>ce.subscribe(ye),oe))})}},8505:(lt,Ae,F)=>{F.d(Ae,{b:()=>ce});var d=F(576),j=F(4482),N=F(5403),oe=F(4671);function ce(ye,pe,ue){const he=(0,d.m)(ye)||pe||ue?{next:ye,error:pe,complete:ue}:ye;return he?(0,j.e)((G,z)=>{var J;null===(J=he.subscribe)||void 0===J||J.call(he);let $e=!0;G.subscribe((0,N.x)(z,ke=>{var Ce;null===(Ce=he.next)||void 0===Ce||Ce.call(he,ke),z.next(ke)},()=>{var ke;$e=!1,null===(ke=he.complete)||void 0===ke||ke.call(he),z.complete()},ke=>{var Ce;$e=!1,null===(Ce=he.error)||void 0===Ce||Ce.call(he,ke),z.error(ke)},()=>{var ke,Ce;$e&&(null===(ke=he.unsubscribe)||void 0===ke||ke.call(he)),null===(Ce=he.finalize)||void 0===Ce||Ce.call(he)}))}):oe.y}},4408:(lt,Ae,F)=>{F.d(Ae,{o:()=>ce});var d=F(727);class j extends d.w0{constructor(pe,ue){super()}schedule(pe,ue=0){return this}}const N={setInterval(ye,pe,...ue){const{delegate:he}=N;return he?.setInterval?he.setInterval(ye,pe,...ue):setInterval(ye,pe,...ue)},clearInterval(ye){const{delegate:pe}=N;return(pe?.clearInterval||clearInterval)(ye)},delegate:void 0};var oe=F(8737);class ce extends j{constructor(pe,ue){super(pe,ue),this.scheduler=pe,this.work=ue,this.pending=!1}schedule(pe,ue=0){var he;if(this.closed)return this;this.state=pe;const G=this.id,z=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(z,G,ue)),this.pending=!0,this.delay=ue,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(z,this.id,ue),this}requestAsyncId(pe,ue,he=0){return N.setInterval(pe.flush.bind(pe,this),he)}recycleAsyncId(pe,ue,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ue;null!=ue&&N.clearInterval(ue)}execute(pe,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(pe,ue);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,ue){let G,he=!1;try{this.work(pe)}catch(z){he=!0,G=z||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:pe,scheduler:ue}=this,{actions:he}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(he,this),null!=pe&&(this.id=this.recycleAsyncId(ue,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Ae,F)=>{F.d(Ae,{v:()=>N});var d=F(6063);class j{constructor(ce,ye=j.now){this.schedulerActionCtor=ce,this.now=ye}schedule(ce,ye=0,pe){return new this.schedulerActionCtor(this,ce).schedule(pe,ye)}}j.now=d.l.now;class N extends j{constructor(ce,ye=j.now){super(ce,ye),this.actions=[],this._active=!1}flush(ce){const{actions:ye}=this;if(this._active)return void ye.push(ce);let pe;this._active=!0;do{if(pe=ce.execute(ce.state,ce.delay))break}while(ce=ye.shift());if(this._active=!1,pe){for(;ce=ye.shift();)ce.unsubscribe();throw pe}}}},4986:(lt,Ae,F)=>{F.d(Ae,{z:()=>N});var d=F(4408);const N=new(F(7565).v)(d.o)},6063:(lt,Ae,F)=>{F.d(Ae,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},233:(lt,Ae,F)=>{F.d(Ae,{N:()=>ce});var d=F(4408),N=F(7565);const ce=new class oe extends N.v{}(class j extends d.o{constructor(ue,he){super(ue,he),this.scheduler=ue,this.work=he}schedule(ue,he=0){return he>0?super.schedule(ue,he):(this.delay=he,this.state=ue,this.scheduler.flush(this),this)}execute(ue,he){return he>0||this.closed?super.execute(ue,he):this._execute(ue,he)}requestAsyncId(ue,he,G=0){return null!=G&&G>0||null==G&&this.delay>0?super.requestAsyncId(ue,he,G):(ue.flush(this),0)}})},3410:(lt,Ae,F)=>{F.d(Ae,{z:()=>d});const d={setTimeout(j,N,...oe){const{delegate:ce}=d;return ce?.setTimeout?ce.setTimeout(j,N,...oe):setTimeout(j,N,...oe)},clearTimeout(j){const{delegate:N}=d;return(N?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(lt,Ae,F)=>{F.d(Ae,{h:()=>j});const j=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Ae,F)=>{F.d(Ae,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Ae,F)=>{F.d(Ae,{_6:()=>ye,jO:()=>oe,yG:()=>ce});var d=F(576);function N(pe){return pe[pe.length-1]}function oe(pe){return(0,d.m)(N(pe))?pe.pop():void 0}function ce(pe){return function j(pe){return pe&&(0,d.m)(pe.schedule)}(N(pe))?pe.pop():void 0}function ye(pe,ue){return"number"==typeof N(pe)?pe.pop():ue}},8737:(lt,Ae,F)=>{function d(j,N){if(j){const oe=j.indexOf(N);0<=oe&&j.splice(oe,1)}}F.d(Ae,{P:()=>d})},3888:(lt,Ae,F)=>{function d(j){const oe=j(ce=>{Error.call(ce),ce.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}F.d(Ae,{d:()=>d})},2806:(lt,Ae,F)=>{F.d(Ae,{O:()=>oe,x:()=>N});var d=F(2416);let j=null;function N(ce){if(d.v.useDeprecatedSynchronousErrorHandling){const ye=!j;if(ye&&(j={errorThrown:!1,error:null}),ce(),ye){const{errorThrown:pe,error:ue}=j;if(j=null,pe)throw ue}}else ce()}function oe(ce){d.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=ce)}},9672:(lt,Ae,F)=>{function d(j,N,oe,ce=0,ye=!1){const pe=N.schedule(function(){oe(),ye?j.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(j.add(pe),!ye)return pe}F.d(Ae,{f:()=>d})},4671:(lt,Ae,F)=>{function d(j){return j}F.d(Ae,{y:()=>d})},1144:(lt,Ae,F)=>{F.d(Ae,{z:()=>d});const d=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(lt,Ae,F)=>{F.d(Ae,{D:()=>j});var d=F(576);function j(N){return Symbol.asyncIterator&&(0,d.m)(N?.[Symbol.asyncIterator])}},576:(lt,Ae,F)=>{function d(j){return"function"==typeof j}F.d(Ae,{m:()=>d})},3670:(lt,Ae,F)=>{F.d(Ae,{c:()=>N});var d=F(8822),j=F(576);function N(oe){return(0,j.m)(oe[d.L])}},6495:(lt,Ae,F)=>{F.d(Ae,{T:()=>N});var d=F(2202),j=F(576);function N(oe){return(0,j.m)(oe?.[d.h])}},8239:(lt,Ae,F)=>{F.d(Ae,{t:()=>j});var d=F(576);function j(N){return(0,d.m)(N?.then)}},3260:(lt,Ae,F)=>{F.d(Ae,{L:()=>oe,Q:()=>N});var d=F(655),j=F(576);function N(ce){return(0,d.FC)(this,arguments,function*(){const pe=ce.getReader();try{for(;;){const{value:ue,done:he}=yield(0,d.qq)(pe.read());if(he)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ue)}}finally{pe.releaseLock()}})}function oe(ce){return(0,j.m)(ce?.getReader)}},4482:(lt,Ae,F)=>{F.d(Ae,{A:()=>j,e:()=>N});var d=F(576);function j(oe){return(0,d.m)(oe?.lift)}function N(oe){return ce=>{if(j(ce))return ce.lift(function(ye){try{return oe(ye,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(lt,Ae,F)=>{function d(){}F.d(Ae,{Z:()=>d})},9635:(lt,Ae,F)=>{F.d(Ae,{U:()=>N,z:()=>j});var d=F(4671);function j(...oe){return N(oe)}function N(oe){return 0===oe.length?d.y:1===oe.length?oe[0]:function(ye){return oe.reduce((pe,ue)=>ue(pe),ye)}}},7849:(lt,Ae,F)=>{F.d(Ae,{h:()=>N});var d=F(2416),j=F(3410);function N(oe){j.z.setTimeout(()=>{const{onUnhandledError:ce}=d.v;if(!ce)throw oe;ce(oe)})}},4532:(lt,Ae,F)=>{function d(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ae,{z:()=>d})},655:(lt,Ae,F)=>{function oe(Q,X){var fe={};for(var ae in Q)Object.prototype.hasOwnProperty.call(Q,ae)&&X.indexOf(ae)<0&&(fe[ae]=Q[ae]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(ae=Object.getOwnPropertySymbols(Q);Be<ae.length;Be++)X.indexOf(ae[Be])<0&&Object.prototype.propertyIsEnumerable.call(Q,ae[Be])&&(fe[ae[Be]]=Q[ae[Be]])}return fe}function ce(Q,X,fe,ae){var yt,Be=arguments.length,je=Be<3?X:null===ae?ae=Object.getOwnPropertyDescriptor(X,fe):ae;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)je=Reflect.decorate(Q,X,fe,ae);else for(var tn=Q.length-1;tn>=0;tn--)(yt=Q[tn])&&(je=(Be<3?yt(je):Be>3?yt(X,fe,je):yt(X,fe))||je);return Be>3&&je&&Object.defineProperty(X,fe,je),je}function ue(Q,X,fe,ae){return new(fe||(fe=Promise))(function(je,yt){function tn(on){try{Ze(ae.next(on))}catch(mn){yt(mn)}}function Vt(on){try{Ze(ae.throw(on))}catch(mn){yt(mn)}}function Ze(on){on.done?je(on.value):function Be(je){return je instanceof fe?je:new fe(function(yt){yt(je)})}(on.value).then(tn,Vt)}Ze((ae=ae.apply(Q,X||[])).next())})}function ve(Q){return this instanceof ve?(this.v=Q,this):new ve(Q)}function me(Q,X,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,ae=fe.apply(Q,X||[]),je=[];return Be={},yt("next"),yt("throw"),yt("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function yt(en){ae[en]&&(Be[en]=function(Xt){return new Promise(function($t,kt){je.push([en,Xt,$t,kt])>1||tn(en,Xt)})})}function tn(en,Xt){try{!function Vt(en){en.value instanceof ve?Promise.resolve(en.value.v).then(Ze,on):mn(je[0][2],en)}(ae[en](Xt))}catch($t){mn(je[0][3],$t)}}function Ze(en){tn("next",en)}function on(en){tn("throw",en)}function mn(en,Xt){en(Xt),je.shift(),je.length&&tn(je[0][0],je[0][1])}}function Qe(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,X=Q[Symbol.asyncIterator];return X?X.call(Q):(Q=function J(Q){var X="function"==typeof Symbol&&Symbol.iterator,fe=X&&Q[X],ae=0;if(fe)return fe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ae>=Q.length&&(Q=void 0),{value:Q&&Q[ae++],done:!Q}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),fe={},ae("next"),ae("throw"),ae("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ae(je){fe[je]=Q[je]&&function(yt){return new Promise(function(tn,Vt){!function Be(je,yt,tn,Vt){Promise.resolve(Vt).then(function(Ze){je({value:Ze,done:tn})},yt)}(tn,Vt,(yt=Q[je](yt)).done,yt.value)})}}}F.d(Ae,{FC:()=>me,KL:()=>Qe,_T:()=>oe,gn:()=>ce,mG:()=>ue,qq:()=>ve})},4650:(lt,Ae,F)=>{F.d(Ae,{$8M:()=>du,$Z:()=>Dc,AFp:()=>Lv,ALo:()=>av,AaK:()=>ue,AsE:()=>A_,CHM:()=>eh,CRH:()=>$g,CZH:()=>Id,CqO:()=>Xh,D6c:()=>mb,EJc:()=>jc,EpF:()=>GD,Ez6:()=>$t,F4k:()=>zD,FYo:()=>IC,FiY:()=>zt,G48:()=>Ad,GfV:()=>T0,Gpc:()=>z,JOm:()=>Zo,KtG:()=>Co,LFG:()=>L,LSH:()=>bp,Lbi:()=>WI,Lck:()=>QS,MMx:()=>Fg,NdJ:()=>Pc,O4$:()=>Qu,OlP:()=>wn,Oqu:()=>sf,PSE:()=>ym,PXZ:()=>tb,Q6J:()=>Qh,QGY:()=>d_,QP$:()=>Fe,Qsj:()=>CM,R0b:()=>Vi,RDi:()=>vp,Rgc:()=>mf,SBq:()=>Ec,Sil:()=>ZI,Suo:()=>gv,TTD:()=>us,TgZ:()=>Jh,VKq:()=>aT,WLB:()=>PI,X6Q:()=>ob,XFs:()=>Je,Xpm:()=>Se,Xts:()=>uy,Y36:()=>_u,YKP:()=>xI,YNc:()=>Kh,Yjl:()=>B,Yz7:()=>Xt,Z0I:()=>Ei,ZZ4:()=>Md,_Bn:()=>Q_,_UZ:()=>_g,_Vd:()=>wc,_c5:()=>iw,_uU:()=>tI,aQg:()=>rw,c2e:()=>bd,cJS:()=>kt,cg1:()=>k_,dDg:()=>JI,dqk:()=>At,eFA:()=>Tf,ekj:()=>E_,eoX:()=>XI,f3M:()=>re,g9A:()=>Vv,gM2:()=>Ug,gxx:()=>cy,h0i:()=>Tu,hGG:()=>sw,hij:()=>Dg,iGM:()=>Ba,ifc:()=>pt,ip1:()=>nm,jDz:()=>JS,kL8:()=>Lc,kcU:()=>fl,lG2:()=>Z,lcZ:()=>pf,lqb:()=>Wo,lri:()=>zv,n5z:()=>fs,oAB:()=>Qt,oxw:()=>zE,q4F:()=>A0,qLn:()=>Rh,qOj:()=>fg,qZA:()=>Nc,rWj:()=>qv,sBO:()=>kT,sIi:()=>Xl,s_b:()=>jg,soG:()=>sm,tb:()=>wf,tp0:()=>xi,uIk:()=>Rc,vHH:()=>Ce,vpe:()=>Xo,wAp:()=>St,xi3:()=>$r,xp6:()=>iE,z2F:()=>um,zSh:()=>Tp,zs3:()=>Na});var d=F(7579),j=F(727),N=F(9751),oe=F(6451),ce=F(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function pe(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function ue(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ue).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ye({__forward_ref__:ye});function z(s){return s.__forward_ref__=z,s.toString=function(){return ue(this())},s}function J(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===z}class Ce extends Error{constructor(o,a){super(function it(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ve(s){return"string"==typeof s?s:null==s?"":String(s)}function Ne(s,o){throw new Ce(-201,!1)}function Vt(s,o){null==s&&function Ze(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Xt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}const $t=Xt;function kt(s){return{providers:s.providers||[],imports:s.imports||[]}}function mr(s){return br(s,Cr)||br(s,ci)}function Ei(s){return null!==mr(s)}function br(s,o){return s.hasOwnProperty(o)?s[o]:null}function $i(s){return s&&(s.hasOwnProperty(Ln)||s.hasOwnProperty(Hi))?s[Ln]:null}const Cr=ye({\u0275prov:ye}),Ln=ye({\u0275inj:ye}),ci=ye({ngInjectableDef:ye}),Hi=ye({ngInjectorDef:ye});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let Gn;function pn(s){const o=Gn;return Gn=s,o}function sr(s,o,a){const c=mr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Je.Optional?null:void 0!==o?o:void Ne(ue(s))}function yn(s){return{toString:s}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),pt=(()=>{return(s=pt||(pt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",pt;var s})();const At=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),yr={},Dt=[],Dr=ye({\u0275cmp:ye}),Pt=ye({\u0275dir:ye}),zr=ye({\u0275pipe:ye}),Zt=ye({\u0275mod:ye}),nr=ye({\u0275fac:ye}),In=ye({__NG_ELEMENT_ID__:ye});let et=0;function Se(s){return yn(()=>{const a=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Dt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||pt.Emulated,id:"c"+et++,styles:s.styles||Dt,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.dependencies,y=s.features;return h.inputs=$(s.inputs,c),h.outputs=$(s.outputs),y&&y.forEach(w=>w(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(wt).filter(It):null,h.pipeDefs=f?()=>("function"==typeof f?f():f).map(ie).filter(It):null,h})}function wt(s){return R(s)||V(s)}function It(s){return null!==s}function Qt(s){return yn(()=>({type:s.type,bootstrap:s.bootstrap||Dt,declarations:s.declarations||Dt,imports:s.imports||Dt,exports:s.exports||Dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function $(s,o){if(null==s)return yr;const a={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),a[h]=c,o&&(o[h]=f)}return a}const Z=Se;function B(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function R(s){return s[Dr]||null}function V(s){return s[Pt]||null}function ie(s){return s[zr]||null}function Fe(s){const o=R(s)||V(s)||ie(s);return null!==o&&o.standalone}function at(s,o){const a=s[Zt]||null;if(!a&&!0===o)throw new Error(`Type ${ue(s)} does not have '\u0275mod' property.`);return a}function qn(s){return Array.isArray(s)&&"object"==typeof s[1]}function Zr(s){return Array.isArray(s)&&!0===s[1]}function yo(s){return 0!=(8&s.flags)}function Bu(s){return 2==(2&s.flags)}function oa(s){return 1==(1&s.flags)}function Lr(s){return null!==s.template}function ju(s){return 0!=(256&s[2])}function lr(s,o){return s.hasOwnProperty(nr)?s[nr]:null}class Eo{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function us(){return ca}function ca(s){return s.type.prototype.ngOnChanges&&(s.setInput=Gu),Xa}function Xa(){const s=Io(this),o=s?.current;if(o){const a=s.previous;if(a===yr)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Gu(s,o,a,c){const h=Io(s)||function dp(s,o){return s[sl]=o}(s,{previous:yr,current:null}),f=h.current||(h.current={}),y=h.previous,w=this.declaredInputs[a],b=y[w];f[w]=new Eo(b&&b.currentValue,o,y===yr),s[c]=o}us.ngInherit=!0;const sl="__ngSimpleChanges__";function Io(s){return s[sl]||null}function xn(s){for(;Array.isArray(s);)s=s[0];return s}function di(s,o){return xn(o[s])}function dr(s,o){return xn(o[s.index])}function Bs(s,o){return s.data[o]}function Ii(s,o){return s[o]}function nn(s,o){const a=o[s];return qn(a)?a:a[0]}function cs(s){return 64==(64&s[2])}function Qr(s,o){return null==o?null:s[o]}function la(s){s[18]=0}function On(s,o){s[5]+=o;let a=s,c=s[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const Mt={lFrame:wa(null),bindingsEnabled:!0};function js(){return Mt.bindingsEnabled}function Oe(){return Mt.lFrame.lView}function qt(){return Mt.lFrame.tView}function eh(s){return Mt.lFrame.contextLView=s,s[8]}function Co(s){return Mt.lFrame.contextLView=null,s}function Wn(){let s=Do();for(;null!==s&&64===s.type;)s=s.parent;return s}function Do(){return Mt.lFrame.currentTNode}function Sr(s,o){const a=Mt.lFrame;a.currentTNode=s,a.isParent=o}function nu(){return Mt.lFrame.isParent}function Zn(){const s=Mt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function ya(){return Mt.lFrame.bindingIndex++}function Ki(s){const o=Mt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function cl(s,o){const a=Mt.lFrame;a.bindingIndex=a.bindingRootIndex=s,To(o)}function To(s){Mt.lFrame.currentDirectiveIndex=s}function _a(){return Mt.lFrame.currentQueryIndex}function Yu(s){Mt.lFrame.currentQueryIndex=s}function va(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ll(s,o,a){if(a&Je.SkipSelf){let h=o,f=s;for(;!(h=h.parent,null!==h||a&Je.Host||(h=va(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;o=h,s=f}const c=Mt.lFrame=rh();return c.currentTNode=o,c.lView=s,!0}function Ao(s){const o=rh(),a=s[1];Mt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function rh(){const s=Mt.lFrame,o=null===s?null:s.child;return null===o?wa(s):o}function wa(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ih(){const s=Mt.lFrame;return Mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const dl=ih;function ls(){const s=ih();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Dn(){return Mt.lFrame.selectedIndex}function Yi(s){Mt.lFrame.selectedIndex=s}function Sn(){const s=Mt.lFrame;return Bs(s.tView,s.selectedIndex)}function Qu(){Mt.lFrame.currentNamespace="svg"}function fl(){!function Xu(){Mt.lFrame.currentNamespace=null}()}function ru(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const f=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:O}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-a,y),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),b&&(s.viewHooks||(s.viewHooks=[])).push(-a,b),T&&((s.viewHooks||(s.viewHooks=[])).push(a,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,T)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(a,O)}}function xo(s,o,a){Ro(s,o,3,a)}function Mo(s,o,a,c){(3&s[2])===a&&Ro(s,o,a,c)}function pl(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Ro(s,o,a,c){const f=c??-1,y=o.length-1;let w=0;for(let b=void 0!==c?65535&s[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(w=o[b],null!=c&&w>=c)break}else o[b]<0&&(s[18]+=65536),(w<f||-1==f)&&(gl(s,a,o,b),s[18]=(4294901760&s[18])+b+2),b++}function gl(s,o,a,c){const h=a[c]<0,f=a[c+1],w=s[h?-a[c]:a[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class Jr{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Qi(s,o,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const f=a[c++],y=a[c++],w=a[c++];s.setAttribute(o,y,w,f)}else{const f=h,y=a[++c];rc(f)?s.setProperty(o,f,y):s.setAttribute(o,f,y),c++}}return c}function Ea(s){return 3===s||4===s||6===s}function rc(s){return 64===s.charCodeAt(0)}function Ia(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||yl(s,a,h,null,-1===a||2===a?o[++c]:null)}}return s}function yl(s,o,a,c,h){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const w=s[f++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=f-1;break}}}for(;f<s.length;){const w=s[f];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==h&&(s[f+1]=h));if(c===s[f+1])return void(s[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,a),null!==c&&s.splice(f++,0,c),null!==h&&s.splice(f++,0,h)}function oh(s){return-1!==s}function Kn(s){return 32767&s}function hs(s,o){let a=function ah(s){return s>>16}(s),c=o;for(;a>0;)c=c[15],a--;return c}let ic=!0;function ba(s){const o=ic;return ic=s,o}let _l=0;const Ur={};function Ji(s,o){const a=uu(s,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,sc(c.data,s),sc(o,null),sc(c.blueprint,null));const h=Ca(s,o),f=s.injectorIndex;if(oh(h)){const y=Kn(h),w=hs(h,o),b=w[1].data;for(let T=0;T<8;T++)o[f+T]=w[y+T]|b[y+T]}return o[f+8]=h,f}function sc(s,o){s.push(0,0,0,0,0,0,0,0,o)}function uu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ca(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){if(c=Uo(h),null===c)return-1;if(a++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Hs(s,o,a){!function vl(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(In)&&(c=a[In]),null==c&&(c=a[In]=_l++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,a)}function No(s,o,a){if(a&Je.Optional||void 0!==s)return s;Ne()}function Po(s,o,a,c){if(a&Je.Optional&&void 0===c&&(c=null),0==(a&(Je.Self|Je.Host))){const h=s[9],f=pn(void 0);try{return h?h.get(o,c,a&Je.Optional):sr(o,c,a&Je.Optional)}finally{pn(f)}}return No(c,0,a)}function ko(s,o,a,c=Je.Default,h){if(null!==s){if(1024&o[2]){const y=function lh(s,o,a,c,h){let f=s,y=o;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=wl(f,y,a,c|Je.Self,Ur);if(w!==Ur)return w;let b=f.parent;if(!b){const T=y[21];if(T){const O=T.get(a,Ur,c);if(O!==Ur)return O}b=Uo(y),y=y[15]}f=b}return h}(s,o,a,c,Ur);if(y!==Ur)return y}const f=wl(s,o,a,c,Ur);if(f!==Ur)return f}return Po(o,a,c,h)}function wl(s,o,a,c,h){const f=function ch(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(In)?s[In]:void 0;return"number"==typeof o?o>=0?255&o:oc:o}(a);if("function"==typeof f){if(!ll(o,s,c))return c&Je.Host?No(h,0,c):Po(o,a,c,h);try{const y=f(c);if(null!=y||c&Je.Optional)return y;Ne()}finally{dl()}}else if("number"==typeof f){let y=null,w=uu(s,o),b=-1,T=c&Je.Host?o[16][6]:null;for((-1===w||c&Je.SkipSelf)&&(b=-1===w?Ca(s,o):o[w+8],-1!==b&&lu(c,!1)?(y=o[1],w=Kn(b),o=hs(b,o)):w=-1);-1!==w;){const O=o[1];if(Fo(f,w,O.data)){const k=cu(w,o,a,y,c,T);if(k!==Ur)return k}b=o[w+8],-1!==b&&lu(c,o[1].data[w+8]===T)&&Fo(f,w,o)?(y=O,w=Kn(b),o=hs(b,o)):w=-1}}return h}function cu(s,o,a,c,h,f){const y=o[1],w=y.data[s+8],O=Sa(w,y,a,null==c?Bu(w)&&ic:c!=y&&0!=(3&w.type),h&Je.Host&&f===w);return null!==O?Ci(o,y,O,w):Ur}function Sa(s,o,a,c,h){const f=s.providerIndexes,y=o.data,w=1048575&f,b=s.directiveStart,O=f>>20,W=h?w+O:s.directiveEnd;for(let te=c?w:w+O;te<W;te++){const Ie=y[te];if(te<b&&a===Ie||te>=b&&Ie.type===a)return te}if(h){const te=y[b];if(te&&Lr(te)&&te.type===a)return b}return null}function Ci(s,o,a,c){let h=s[a];const f=o.data;if(function nc(s){return s instanceof Jr}(h)){const y=h;y.resolving&&function Xe(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ce(-200,`Circular dependency in DI detected for ${s}${a}`)}(function me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ve(s)}(f[a]));const w=ba(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?pn(y.injectImpl):null;ll(s,c,Je.Default);try{h=s[a]=y.factory(void 0,f,s,c),o.firstCreatePass&&a>=c.directiveStart&&function tc(s,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(c){const y=ca(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,y)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,h),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,f))}(a,f[a],o)}finally{null!==b&&pn(b),ba(w),y.resolving=!1,dl()}}return h}function Fo(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function lu(s,o){return!(s&Je.Self||s&Je.Host&&o)}class Lo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return ko(this._tNode,this._lView,o,c,a)}}function oc(){return new Lo(Wn(),Oe())}function fs(s){return yn(()=>{const o=s.prototype.constructor,a=o[nr]||Vo(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const f=h[nr]||Vo(h);if(f&&f!==a)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function Vo(s){return $e(s)?()=>{const o=Vo(J(s));return o&&o()}:lr(s)}function Uo(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function du(s){return function Da(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const f=a[h];if(Ea(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(f===o)return a[h+1];h+=2}}}return null}(Wn(),s)}const Bo="__parameters__";function $o(s,o,a){return yn(()=>{const c=function ac(s){return function(...a){if(s){const c=s(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...f){if(this instanceof h)return c.apply(this,f),this;const y=new h(...f);return w.annotation=y,w;function w(b,T,O){const k=b.hasOwnProperty(Bo)?b[Bo]:Object.defineProperty(b,Bo,{value:[]})[Bo];for(;k.length<=O;)k.push(null);return(k[O]=k[O]||[]).push(y),b}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class wn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function gn(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let c=s[a];Array.isArray(c)?(o===s&&(o=s.slice(0,a)),gn(c,o)):o!==s&&o.push(c)}return o}function es(s,o){s.forEach(a=>Array.isArray(a)?es(a,o):o(a))}function zs(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Tn(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function rt(s,o,a){let c=Si(s,o);return c>=0?s[1|c]=a:(c=~c,function cc(s,o,a,c){let h=s.length;if(h==o)s.push(a,c);else if(1===h)s.push(c,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=c}}(s,c,o,a)),c}function Ta(s,o){const a=Si(s,o);if(a>=0)return s[1|a]}function Si(s,o){return function bl(s,o,a){let c=0,h=s.length>>a;for(;h!==c;){const f=c+(h-c>>1),y=s[f<<a];if(o===y)return f<<a;y>o?h=f:c=f+1}return~(h<<a)}(s,o,1)}const ei={},hc="__NG_DI_FLAG__",Ws="ngTempTokenPath",Ai=/\n/gm,Qn="__source";let C;function D(s){const o=C;return C=s,o}function M(s,o=Je.Default){if(void 0===C)throw new Ce(-203,!1);return null===C?sr(s,void 0,o):C.get(s,o&Je.Optional?null:void 0,o)}function L(s,o=Je.Default){return(function Vn(){return Gn}()||M)(J(s),o)}function re(s,o=Je.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),L(s,o)}function Ee(s){const o=[];for(let a=0;a<s.length;a++){const c=J(s[a]);if(Array.isArray(c)){if(0===c.length)throw new Ce(900,!1);let h,f=Je.Default;for(let y=0;y<c.length;y++){const w=c[y],b=bt(w);"number"==typeof b?-1===b?h=w.token:f|=b:h=w}o.push(L(h,f))}else o.push(L(c))}return o}function Ge(s,o){return s[hc]=o,s.prototype[hc]=o,s}function bt(s){return s[hc]}const zt=Ge($o("Optional"),8),xi=Ge($o("SkipSelf"),4);let yh;function vp(s){yh=s}class Ep{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ys(s){return s instanceof Ep?s.changingThisBreaksApplicationSecurity:s}const g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Mn=(()=>((Mn=Mn||{})[Mn.NONE=0]="NONE",Mn[Mn.HTML=1]="HTML",Mn[Mn.STYLE=2]="STYLE",Mn[Mn.SCRIPT=3]="SCRIPT",Mn[Mn.URL=4]="URL",Mn[Mn.RESOURCE_URL=5]="RESOURCE_URL",Mn))();function bp(s){const o=function Dh(){const s=Oe();return s&&s[12]}();return o?o.sanitize(Mn.URL,s)||"":function Xs(s,o){const a=function Eh(s){return s instanceof Ep&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?ys(s):function m(s){return(s=String(s)).match(g)?s:"unsafe:"+s}(ve(s))}const uy=new wn("ENVIRONMENT_INITIALIZER"),cy=new wn("INJECTOR",-1),m0=new wn("INJECTOR_DEF_TYPES");class y0{get(o,a=ei){if(a===ei){const c=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw c.name="NullInjectorError",c}return a}}function _C(...s){return{\u0275providers:_0(0,s)}}function _0(s,...o){const a=[],c=new Set;let h;return es(o,f=>{const y=f;Dp(y,a,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&v0(h,a),a}function v0(s,o){for(let a=0;a<s.length;a++){const{providers:h}=s[a];es(h,f=>{o.push(f)})}}function Dp(s,o,a,c){if(!(s=J(s)))return!1;let h=null,f=$i(s);const y=!f&&R(s);if(f||y){if(y&&!y.standalone)return!1;h=s}else{const b=s.ngModule;if(f=$i(b),!f)return!1;h=b}const w=c.has(h);if(y){if(w)return!1;if(c.add(h),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of b)Dp(T,o,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;c.add(h);try{es(f.imports,O=>{Dp(O,o,a,c)&&(T||(T=[]),T.push(O))})}finally{}void 0!==T&&v0(T,o)}if(!w){const T=lr(h)||(()=>new h);o.push({provide:h,useFactory:T,deps:Dt},{provide:m0,useValue:h,multi:!0},{provide:uy,useValue:()=>L(h),multi:!0})}const b=f.providers;null==b||w||es(b,O=>{o.push(O)})}}return h!==s&&void 0!==s.providers}const w0=ye({provide:String,useValue:ye});function Sh(s){return null!==s&&"object"==typeof s&&w0 in s}function _s(s){return"function"==typeof s}const Tp=new wn("Set Injector scope."),Ap={},vc={};let xp;function Mp(){return void 0===xp&&(xp=new y0),xp}class Wo{}class ly extends Wo{constructor(o,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Op(o,y=>this.processProvider(y)),this.records.set(cy,Pl(void 0,this)),h.has("environment")&&this.records.set(Wo,Pl(void 0,this));const f=this.records.get(Tp);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(m0.multi,Dt,Je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=D(this),c=pn(void 0);try{return o()}finally{D(a),pn(c)}}get(o,a=ei,c=Je.Default){this.assertNotDestroyed();const h=D(this),f=pn(void 0);try{if(!(c&Je.SkipSelf)){let w=this.records.get(o);if(void 0===w){const b=function wC(s){return"function"==typeof s||"object"==typeof s&&s instanceof wn}(o)&&mr(o);w=b&&this.injectableDefInScope(b)?Pl(Th(o),Ap):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(c&Je.Self?Mp():this.parent).get(o,a=c&Je.Optional&&a===ei?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Ws]=y[Ws]||[]).unshift(ue(o)),h)throw y;return function Ft(s,o,a,c){const h=s[Ws];throw o[Qn]&&h.unshift(o[Qn]),s.message=function Ct(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=ue(o);if(Array.isArray(o))h=o.map(ue).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):ue(w)))}h=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${s.replace(Ai,"\n  ")}`}("\n"+s.message,h,a,c),s.ngTokenPath=h,s[Ws]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{pn(f),D(h)}}resolveInjectorInitializers(){const o=D(this),a=pn(void 0);try{const c=this.get(uy.multi,Dt,Je.Self);for(const h of c)h()}finally{D(o),pn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(ue(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processProvider(o){let a=_s(o=J(o))?o:J(o&&o.provide);const c=function dy(s){return Sh(s)?Pl(void 0,s.useValue):Pl(Rp(s),Ap)}(o);if(_s(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Pl(void 0,Ap,!0),h.factory=()=>Ee(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Ap&&(a.value=vc,a.value=a.factory()),"object"==typeof a.value&&a.value&&function vC(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=J(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Th(s){const o=mr(s),a=null!==o?o.factory:lr(s);if(null!==a)return a;if(s instanceof wn)throw new Ce(204,!1);if(s instanceof Function)return function I0(s){const o=s.length;if(o>0)throw function ps(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}(o,"?"),new Ce(204,!1);const a=function An(s){const o=s&&(s[Cr]||s[ci]);if(o){const a=function ji(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ce(204,!1)}function Rp(s,o,a){let c;if(_s(s)){const h=J(s);return lr(h)||Th(h)}if(Sh(s))c=()=>J(s.useValue);else if(function qo(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Ee(s.deps||[]));else if(function Sp(s){return!(!s||!s.useExisting)}(s))c=()=>L(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function Ah(s){return!!s.deps}(s))return lr(h)||Th(h);c=()=>new h(...Ee(s.deps))}return c}function Pl(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function hy(s){return!!s.\u0275providers}function Op(s,o){for(const a of s)Array.isArray(a)?Op(a,o):hy(a)?Op(a.\u0275providers,o):o(a)}class fy{}class Pp{resolveComponentFactory(o){throw function C0(s){const o=Error(`No component factory found for ${ue(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let wc=(()=>{class s{}return s.NULL=new Pp,s})();function EC(){return kl(Wn(),Oe())}function kl(s,o){return new Ec(dr(s,o))}let Ec=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=EC,s})();function S0(s){return s instanceof Ec?s.nativeElement:s}class IC{}let CM=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function DM(){const s=Oe(),a=nn(Wn().index,s);return(qn(a)?a:s)[11]}(),s})(),py=(()=>{class s{}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:()=>null}),s})();class T0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const A0=new T0("14.2.5"),gy={};function Ey(s){return s.ngOriginalError}class Rh{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Ey(o);for(;a&&Ey(a);)a=Ey(a);return a||null}}const Iy=new Map;let xC=0;const Bp="__ngContext__";function Ar(s,o){qn(o)?(s[Bp]=o[20],function RC(s){Iy.set(s[20],s)}(o)):s[Bp]=o}function Oa(s){return s instanceof Function?s():s}var Zo=(()=>((Zo=Zo||{})[Zo.Important=1]="Important",Zo[Zo.DashCase=2]="DashCase",Zo))();function Ty(s,o){return undefined(s,o)}function Bl(s){const o=s[3];return Zr(o)?o[3]:o}function Hp(s){return B0(s[13])}function Gp(s){return B0(s[4])}function B0(s){for(;null!==s&&!Zr(s);)s=s[4];return s}function jl(s,o,a,c,h){if(null!=c){let f,y=!1;Zr(c)?f=c:qn(c)&&(y=!0,c=c[0]);const w=xn(c);0===s&&null!==a?null==h?W0(o,a,w):Ko(o,a,w,h||null,!0):1===s&&null!==a?Ko(o,a,w,h||null,!0):2===s?function zC(s,o,a){const c=Wp(s,o);c&&function GC(s,o,a,c){s.removeChild(o,a,c)}(s,c,o,a)}(o,w,y):3===s&&o.destroyNode(w),null!=f&&function kM(s,o,a,c,h){const f=a[7];f!==xn(a)&&jl(o,s,c,f,h);for(let w=10;w<a.length;w++){const b=a[w];Ic(b[1],b,s,o,c,f)}}(o,s,f,a,h)}}function zp(s,o,a){return s.createElement(o,a)}function G0(s,o){const a=s[9],c=a.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,On(h,-1)),a.splice(c,1)}function Ry(s,o){if(s.length<=10)return;const a=10+o,c=s[a];if(c){const h=c[17];null!==h&&h!==s&&G0(h,c),o>0&&(s[a-1][4]=c[4]);const f=Tn(s,10+o);!function My(s,o){Ic(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Ph(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Ic(s,o,a,3,null,null),function NM(s){let o=s[13];if(!o)return qp(s[1],s);for(;o;){let a=null;if(qn(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==s;)qn(o)&&qp(o[1],o),o=o[3];null===o&&(o=s),qn(o)&&qp(o[1],o),a=o&&o[4]}o=a}}(o)}}function qp(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Ny(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof Jr)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=h[f[y]],b=f[y+1];try{b.call(w)}finally{}}else try{f.call(h)}finally{}}}}(s,o),function Oy(s,o){const a=s.cleanup,c=o[7];let h=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],w="function"==typeof y?y(o):xn(o[y]),b=c[h=a[f+2]],T=a[f+3];"boolean"==typeof T?w.removeEventListener(a[f],b,T):T>=0?c[h=T]():c[h=-T].unsubscribe(),f+=2}else{const y=c[h=a[f+1]];a[f].call(y)}if(null!==c){for(let f=h+1;f<c.length;f++)(0,c[f])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Zr(o[3])){a!==o[3]&&G0(a,o);const c=o[19];null!==c&&c.detachView(s)}!function OC(s){Iy.delete(s[20])}(o)}}function z0(s,o,a){return function q0(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===pt.None||h===pt.Emulated)return null}return dr(c,a)}(s,o.parent,a)}function Ko(s,o,a,c,h){s.insertBefore(o,a,c,h)}function W0(s,o,a){s.appendChild(o,a)}function Z0(s,o,a,c,h){null!==c?Ko(s,o,a,c,h):W0(s,o,a)}function Wp(s,o){return s.parentNode(o)}let Py=function Y0(s,o,a){return 40&s.type?dr(s,a):null};function kh(s,o,a,c){const h=z0(s,c,o),f=o[11],w=function Jn(s,o,a){return Py(s,o,a)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(a))for(let b=0;b<a.length;b++)Z0(f,h,a[b],w,!1);else Z0(f,h,a,w,!1)}function Kp(s,o){if(null!==o){const a=o.type;if(3&a)return dr(o,s);if(4&a)return Q0(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return Kp(s,c);{const h=s[o.index];return Zr(h)?Q0(-1,h):xn(h)}}if(32&a)return Ty(o,s)()||xn(s[o.index]);{const c=ky(s,o);return null!==c?Array.isArray(c)?c[0]:Kp(Bl(s[16]),c):Kp(s,o.next)}}return null}function ky(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Q0(s,o){const a=10+s+1;if(a<o.length){const c=o[a],h=c[1].firstChild;if(null!==h)return Kp(c,h)}return o[7]}function Fy(s,o,a,c,h,f,y){for(;null!=a;){const w=c[a.index],b=a.type;if(y&&0===o&&(w&&Ar(xn(w),c),a.flags|=4),64!=(64&a.flags))if(8&b)Fy(s,o,a.child,c,h,f,!1),jl(o,s,h,w,f);else if(32&b){const T=Ty(a,c);let O;for(;O=T();)jl(o,s,h,O,f);jl(o,s,h,w,f)}else 16&b?Fh(s,o,c,a,h,f):jl(o,s,h,w,f);a=y?a.projectionNext:a.next}}function Ic(s,o,a,c,h,f){Fy(a,c,s.firstChild,o,h,f,!1)}function Fh(s,o,a,c,h,f){const y=a[16],b=y[6].projection[c.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)jl(o,s,h,b[T],f);else Fy(s,o,b,y[3],h,f,!0)}function bc(s,o,a){s.setAttribute(o,"style",a)}function Lh(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function qC(s,o,a){let c=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const f=o.length;if(h+f===c||s.charCodeAt(h+f)<=32)return h}a=h+1}}const Ly="ng-template";function Vy(s,o,a){let c=0;for(;c<s.length;){let h=s[c++];if(a&&"class"===h){if(h=s[c],-1!==qC(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function eE(s){return 4===s.type&&s.value!==Ly}function ZC(s,o,a){return o===(4!==s.type||a?s.value:Ly)}function KC(s,o,a){let c=4;const h=s.attrs||[],f=function FM(s){for(let o=0;o<s.length;o++)if(Ea(s[o]))return o;return s.length}(h);let y=!1;for(let w=0;w<o.length;w++){const b=o[w];if("number"!=typeof b){if(!y)if(4&c){if(c=2|1&c,""!==b&&!ZC(s,b,a)||""===b&&1===o.length){if(ws(c))return!1;y=!0}}else{const T=8&c?b:o[++w];if(8&c&&null!==s.attrs){if(!Vy(s.attrs,T,a)){if(ws(c))return!1;y=!0}continue}const k=YC(8&c?"class":b,h,eE(s),a);if(-1===k){if(ws(c))return!1;y=!0;continue}if(""!==T){let W;W=k>f?"":h[k+1].toLowerCase();const te=8&c?W:null;if(te&&-1!==qC(te,T,0)||2&c&&T!==W){if(ws(c))return!1;y=!0}}}}else{if(!y&&!ws(c)&&!ws(b))return!1;if(y&&ws(b))continue;y=!1,c=b|1&c}}return ws(c)||y}function ws(s){return 0==(1&s)}function YC(s,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let f=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function tE(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function QC(s,o,a=!1){for(let c=0;c<o.length;c++)if(KC(s,o[c],a))return!0;return!1}function nE(s,o){return s?":not("+o.trim()+")":o}function rE(s){let o=s[0],a=1,c=2,h="",f=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&c){const w=s[++a];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!ws(y)&&(o+=nE(f,h),h=""),c=y,f=f||!ws(c);a++}return""!==h&&(o+=nE(f,h)),o}const Ut={};function iE(s){sE(qt(),Oe(),Dn()+s,!1)}function sE(s,o,a,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&xo(o,f,a)}else{const f=s.preOrderHooks;null!==f&&Mo(o,f,0,a)}Yi(a)}function oE(s,o=null,a=null,c){const h=Qp(s,o,a,c);return h.resolveInjectorInitializers(),h}function Qp(s,o=null,a=null,c,h=new Set){const f=[a||Dt,_C(s)];return c=c||("object"==typeof s?void 0:ue(s)),new ly(f,o||Mp(),c||null,h)}let Na=(()=>{class s{static create(a,c){if(Array.isArray(a))return oE({name:""},c,a,"");{const h=a.name??"";return oE({name:h},a.parent,a.providers,h)}}}return s.THROW_IF_NOT_FOUND=ei,s.NULL=new y0,s.\u0275prov=Xt({token:s,providedIn:"any",factory:()=>L(cy)}),s.__NG_ELEMENT_ID__=-1,s})();function _u(s,o=Je.Default){const a=Oe();return null===a?L(s,o):ko(Wn(),a,J(s),o)}function Dc(){throw new Error("invalid")}function qy(s,o){return s<<17|o<<2}function Yo(s){return s>>17&32767}function fE(s){return 2|s}function vu(s){return(131068&s)>>2}function to(s,o){return-131069&s|o<<2}function Zy(s){return 1|s}function zl(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const h=a[c],f=a[c+1];if(-1!==f){const y=s.data[f];Yu(h),y.contentQueries(2,o[f],f)}}}function Jy(s,o,a,c,h,f,y,w,b,T,O){const k=o.blueprint.slice();return k[0]=h,k[2]=76|c,(null!==O||s&&1024&s[2])&&(k[2]|=1024),la(k),k[3]=k[15]=s,k[8]=a,k[10]=y||s&&s[10],k[11]=w||s&&s[11],k[12]=b||s&&s[12]||null,k[9]=T||s&&s[9]||null,k[6]=f,k[20]=function MC(){return xC++}(),k[21]=O,k[16]=2==o.type?s[16]:k,k}function ql(s,o,a,c,h){let f=s.data[o];if(null===f)f=function Wl(s,o,a,c,h){const f=Do(),y=nu(),b=s.data[o]=function Kl(s,o,a,c,h,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,c,h);return null===s.firstChild&&(s.firstChild=b),null!==f&&(y?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(s,o,a,c,h),function ul(){return Mt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=h;const y=function tu(){const s=Mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Sr(f,!0),f}function Zl(s,o,a,c){if(0===a)return-1;const h=o.length;for(let f=0;f<a;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function ng(s,o,a){Ao(o);try{const c=s.viewQuery;null!==c&&lg(1,c,a);const h=s.template;null!==h&&rg(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&zl(s,o),s.staticViewQueries&&lg(2,s.viewQuery,a);const f=s.components;null!==f&&function iR(s,o){for(let a=0;a<o.length;a++)cR(s,o[a])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ls()}}function xc(s,o,a,c){const h=o[2];if(128!=(128&h)){Ao(o);try{la(o),function ma(s){return Mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&rg(s,o,a,2,c);const y=3==(3&h);if(y){const T=s.preOrderCheckHooks;null!==T&&xo(o,T,null)}else{const T=s.preOrderHooks;null!==T&&Mo(o,T,0,null),pl(o,0)}if(function aR(s){for(let o=Hp(s);null!==o;o=Gp(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const h=a[c],f=h[3];0==(512&h[2])&&On(f,1),h[2]|=512}}}(o),function oR(s){for(let o=Hp(s);null!==o;o=Gp(o))for(let a=10;a<o.length;a++){const c=o[a],h=c[1];cs(c)&&xc(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&zl(s,o),y){const T=s.contentCheckHooks;null!==T&&xo(o,T)}else{const T=s.contentHooks;null!==T&&Mo(o,T,1),pl(o,1)}!function ED(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const h=a[c];if(h<0)Yi(~h);else{const f=h,y=a[++c],w=a[++c];cl(y,f),w(2,o[f])}}}finally{Yi(-1)}}(s,o);const w=s.components;null!==w&&function tg(s,o){for(let a=0;a<o.length;a++)uR(s,o[a])}(o,w);const b=s.viewQuery;if(null!==b&&lg(2,b,c),y){const T=s.viewCheckHooks;null!==T&&xo(o,T)}else{const T=s.viewHooks;null!==T&&Mo(o,T,2),pl(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,On(o[3],-1))}finally{ls()}}}function rg(s,o,a,c,h){const f=Dn(),y=2&c;try{Yi(-1),y&&o.length>22&&sE(s,o,22,!1),a(c,h)}finally{Yi(f)}}function sg(s,o,a){!js()||(function xr(s,o,a,c){const h=a.directiveStart,f=a.directiveEnd;s.firstCreatePass||Ji(a,o),Ar(c,o);const y=a.initialInputs;for(let w=h;w<f;w++){const b=s.data[w],T=Lr(b);T&&Hh(o,a,b);const O=Ci(o,s,w,a);Ar(O,o),null!==y&&RD(0,w-h,O,b,0,y),T&&(nn(a.index,o)[8]=O)}}(s,o,a,dr(a,o)),128==(128&a.flags)&&function $h(s,o,a){const c=a.directiveStart,h=a.directiveEnd,f=a.index,y=function nh(){return Mt.lFrame.currentDirectiveIndex}();try{Yi(f);for(let w=c;w<h;w++){const b=s.data[w],T=o[w];To(w),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&EE(b,T)}}finally{Yi(-1),To(y)}}(s,o,a))}function og(s,o,a=dr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],w=-1===y?a(o,s):s[y];s[h++]=w}}}function Mc(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=_E(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function _E(s,o,a,c,h,f,y,w,b,T){const O=22+c,k=O+h,W=function ID(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:Ut);return a}(O,k),te="function"==typeof T?T():T;return W[1]={type:s,blueprint:W,template:a,queries:null,viewQuery:w,declTNode:o,data:W.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:te,incompleteFirstPass:!1}}function CD(s,o,a,c){const h=no(o);null===a?h.push(c):(h.push(a),s.firstCreatePass&&DE(s).push(c,h.length-1))}function ag(s,o,a){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,h):a[c]=[o,h]}return a}function e_(s,o){const c=o.directiveEnd,h=s.data,f=o.attrs,y=[];let w=null,b=null;for(let T=o.directiveStart;T<c;T++){const O=h[T],k=O.inputs,W=null===f||eE(o)?null:OD(k,f);y.push(W),w=ag(k,T,w),b=ag(O.outputs,T,b)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=w,o.outputs=b}function DD(s,o){const a=nn(o,s);16&a[2]||(a[2]|=32)}function t_(s,o,a,c){let h=!1;if(js()){const f=function AD(s,o,a){const c=s.directiveRegistry;let h=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];QC(a,y.selectors,!1)&&(h||(h=[]),Hs(Ji(a,o),s,y.type),Lr(y)?(IE(s,a),h.unshift(y)):h.push(y))}return h}(s,o,a),y=null===c?null:{"":-1};if(null!==f){h=!0,ri(a,s.data.length,f.length);for(let O=0;O<f.length;O++){const k=f[O];k.providersResolver&&k.providersResolver(k)}let w=!1,b=!1,T=Zl(s,o,f.length,null);for(let O=0;O<f.length;O++){const k=f[O];a.mergedAttrs=Ia(a.mergedAttrs,k.hostAttrs),MD(s,a,o,T,k),Pi(T,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const W=k.type.prototype;!w&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!b&&(W.ngOnChanges||W.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),b=!0),T++}e_(s,a)}y&&function xD(s,o,a){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const f=a[o[h+1]];if(null==f)throw new Ce(-301,!1);c.push(o[h],f)}}}(a,c,y)}return a.mergedAttrs=Ia(a.mergedAttrs,a.attrs),h}function vE(s,o,a,c,h,f){const y=f.hostBindings;if(y){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const b=~o.index;(function wE(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=b&&w.push(b),w.push(c,h,y)}}function EE(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function IE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Pi(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;Lr(o)&&(a[""]=s)}}function ri(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function MD(s,o,a,c,h){s.data[c]=h;const f=h.factory||(h.factory=lr(h.type)),y=new Jr(f,Lr(h),_u);s.blueprint[c]=y,a[c]=y,vE(s,o,0,c,Zl(s,a,h.hostVars,Ut),h)}function Hh(s,o,a){const c=dr(o,s),h=Mc(a),f=s[10],y=cg(s,Jy(s,h,null,a.onPush?32:16,c,o,f,f.createRenderer(c,a),null,null,null));s[o.index]=y}function Qo(s,o,a,c,h,f){const y=dr(s,o);!function n_(s,o,a,c,h,f,y){if(null==f)s.removeAttribute(o,h,a);else{const w=null==y?ve(f):y(f,c||"",h);s.setAttribute(o,h,w,a)}}(o[11],y,f,s.value,a,c,h)}function RD(s,o,a,c,h,f){const y=f[o];if(null!==y){const w=c.setInput;for(let b=0;b<y.length;){const T=y[b++],O=y[b++],k=y[b++];null!==w?c.setInput(a,k,T,O):a[O]=k}}}function OD(s,o){let a=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return a}function ND(s,o,a,c){return new Array(s,!0,!1,o,null,0,c,a,null,null)}function uR(s,o){const a=nn(o,s);if(cs(a)){const c=a[1];48&a[2]?xc(c,a,c.template,a[8]):a[5]>0&&bE(a)}}function bE(s){for(let c=Hp(s);null!==c;c=Gp(c))for(let h=10;h<c.length;h++){const f=c[h];if(cs(f))if(512&f[2]){const y=f[1];xc(y,f,y.template,f[8])}else f[5]>0&&bE(f)}const a=s[1].components;if(null!==a)for(let c=0;c<a.length;c++){const h=nn(a[c],s);cs(h)&&h[5]>0&&bE(h)}}function cR(s,o){const a=nn(o,s),c=a[1];(function lR(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),ng(c,a,a[8])}function cg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function CE(s){for(;s;){s[2]|=32;const o=Bl(s);if(ju(s)&&!o)return s;s=o}return null}function gi(s,o,a,c=!0){const h=o[10];h.begin&&h.begin();try{xc(s,o,s.template,a)}catch(y){throw c&&SE(o,y),y}finally{h.end&&h.end()}}function lg(s,o,a){Yu(0),o(s,a)}function no(s){return s[7]||(s[7]=[])}function DE(s){return s.cleanup||(s.cleanup=[])}function SE(s,o){const a=s[9],c=a?a.get(Rh,null):null;c&&c.handleError(o)}function i_(s,o,a,c,h){for(let f=0;f<a.length;){const y=a[f++],w=a[f++],b=o[y],T=s.data[y];null!==T.setInput?T.setInput(b,h,c,w):b[w]=h}}function Fa(s,o,a){const c=di(o,s);!function j0(s,o,a){s.setValue(o,a)}(s[11],c,a)}function Jo(s,o,a){let c=a?s.styles:null,h=a?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?f=w:1==f?h=he(h,w):2==f&&(c=he(c,w+": "+o[++y]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=h:s.classesWithoutHost=h}function dg(s,o,a,c,h=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&c.push(xn(f)),Zr(f))for(let w=10;w<f.length;w++){const b=f[w],T=b[1].firstChild;null!==T&&dg(b[1],b,T,c)}const y=a.type;if(8&y)dg(s,o,a.child,c);else if(32&y){const w=Ty(a,o);let b;for(;b=w();)c.push(b)}else if(16&y){const w=ky(o,a);if(Array.isArray(w))c.push(...w);else{const b=Bl(o[16]);dg(b[1],b,w,c,!0)}}a=h?a.projectionNext:a.next}return c}class Is{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return dg(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Zr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Ry(o,c),Tn(a,c))}this._attachedToViewContainer=!1}Ph(this._lView[1],this._lView)}onDestroy(o){CD(this._lView[1],this._lView,null,o)}markForCheck(){CE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){gi(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function H0(s,o){Ic(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=o}}class TE extends Is{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;gi(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Mr extends wc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=R(o);return new Ql(a,this.ngModule)}}function La(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class hg{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){const h=this.injector.get(o,gy,c);return h!==gy||a===gy?h:this.parentInjector.get(o,a,c)}}class Ql extends fy{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function XC(s){return s.map(rE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return La(this.componentDef.inputs)}get outputs(){return La(this.componentDef.outputs)}create(o,a,c,h){let f=(h=h||this.ngModule)instanceof Wo?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new hg(o,f):o,w=y.get(IC,null);if(null===w)throw new Ce(407,!1);const b=y.get(py,null),T=w.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",k=c?function bD(s,o,a){return s.selectRootElement(o,a===pt.ShadowDom)}(T,c,this.componentDef.encapsulation):zp(w.createRenderer(null,this.componentDef),O,function PD(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(O)),W=this.componentDef.onPush?288:272,te=_E(0,null,null,1,0,null,null,null,null,null),Ie=Jy(null,te,null,W,null,null,w,T,b,y,null);let He,ee;Ao(Ie);try{const qe=function ME(s,o,a,c,h,f){const y=a[1];a[22]=s;const b=ql(y,22,2,"#host",null),T=b.mergedAttrs=o.hostAttrs;null!==T&&(Jo(b,T,!0),null!==s&&(Qi(h,s,T),null!==b.classes&&Lh(h,s,b.classes),null!==b.styles&&bc(h,s,b.styles)));const O=c.createRenderer(s,o),k=Jy(a,Mc(o),null,o.onPush?32:16,a[22],b,c,O,f||null,null,null);return y.firstCreatePass&&(Hs(Ji(b,a),y,o.type),IE(y,b),ri(b,a.length,1)),cg(a,k),a[22]=k}(k,this.componentDef,Ie,w,T);if(k)if(c)Qi(T,k,["ng-version",A0.full]);else{const{attrs:mt,classes:Pe}=function eD(s){const o=[],a=[];let c=1,h=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===h?""!==f&&o.push(f,s[++c]):8===h&&a.push(f);else{if(!ws(h))break;h=f}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);mt&&Qi(T,k,mt),Pe&&Pe.length>0&&Lh(T,k,Pe.join(" "))}if(ee=Bs(te,22),void 0!==a){const mt=ee.projection=[];for(let Pe=0;Pe<this.ngContentSelectors.length;Pe++){const Re=a[Pe];mt.push(null!=Re?Array.from(Re):null)}}He=function RE(s,o,a,c){const h=a[1],f=function TD(s,o,a){const c=Wn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),MD(s,c,o,Zl(s,o,1,null),a),e_(s,c));const h=Ci(o,s,c.directiveStart,c);Ar(h,o);const f=dr(c,o);return f&&Ar(f,o),h}(h,a,o);if(s[8]=a[8]=f,null!==c)for(const w of c)w(f,o);if(o.contentQueries){const w=Wn();o.contentQueries(1,f,w.directiveStart)}const y=Wn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Yi(y.index),vE(a[1],y,0,y.directiveStart,y.directiveEnd,o),EE(o,f)),f}(qe,this.componentDef,Ie,[OE]),ng(te,Ie,null)}finally{ls()}return new xE(this.componentType,He,kl(ee,Ie),Ie,ee)}}class xE extends class b0{}{constructor(o,a,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new TE(h),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const f=this._rootLView;i_(f[1],f,h,o,a),DD(f,this._tNode.index)}}get injector(){return new Lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function OE(){const s=Wn();ru(Oe()[1],s)}function fg(s){let o=function Gh(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;o;){let h;if(Lr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ce(903,!1);h=o.\u0275dir}if(h){if(a){c.push(h);const y=s;y.inputs=pg(s.inputs),y.declaredInputs=pg(s.declaredInputs),y.outputs=pg(s.outputs);const w=h.hostBindings;w&&kE(s,w);const b=h.viewQuery,T=h.contentQueries;if(b&&PE(s,b),T&&LD(s,T),pe(s.inputs,h.inputs),pe(s.declaredInputs,h.declaredInputs),pe(s.outputs,h.outputs),Lr(h)&&h.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(s),w===fg&&(a=!1)}}o=Object.getPrototypeOf(o)}!function NE(s){let o=0,a=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Ia(h.hostAttrs,a=Ia(a,h.hostAttrs))}}(c)}function pg(s){return s===yr?{}:s===Dt?[]:s}function PE(s,o){const a=s.viewQuery;s.viewQuery=a?(c,h)=>{o(c,h),a(c,h)}:o}function LD(s,o){const a=s.contentQueries;s.contentQueries=a?(c,h,f)=>{o(c,h,f),a(c,h,f)}:o}function kE(s,o){const a=s.hostBindings;s.hostBindings=a?(c,h)=>{o(c,h),a(c,h)}:o}let Jl=null;function Iu(){if(!Jl){const s=At.Symbol;if(s&&s.iterator)Jl=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Jl=c)}}}return Jl}function Xl(s){return!!mg(s)&&(Array.isArray(s)||!(s instanceof Map)&&Iu()in s)}function mg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ro(s,o,a){return s[o]=a}function Xn(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function bu(s,o,a,c){const h=Xn(s,o,a);return Xn(s,o+1,c)||h}function Rc(s,o,a,c){const h=Oe();return Xn(h,ya(),o)&&(qt(),Qo(Sn(),h,s,o,a,c)),Rc}function Va(s,o,a,c,h,f){const w=bu(s,function bi(){return Mt.lFrame.bindingIndex}(),a,h);return Ki(2),w?o+ve(a)+c+ve(h)+f:Ut}function Kh(s,o,a,c,h,f,y,w){const b=Oe(),T=qt(),O=s+22,k=T.firstCreatePass?function Zh(s,o,a,c,h,f,y,w,b){const T=o.consts,O=ql(o,s,4,y||null,Qr(T,w));t_(o,a,O,Qr(T,b)),ru(o,O);const k=O.tViews=_E(2,O,c,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,O),k.queries=o.queries.embeddedTView(O)),O}(O,T,b,o,a,c,h,f,y):T.data[O];Sr(k,!1);const W=b[11].createComment("");kh(T,b,W,k),Ar(W,b),cg(b,b[O]=ND(W,b,W,k)),oa(k)&&sg(T,b,k),null!=y&&og(b,k,w)}function Qh(s,o,a){const c=Oe();return Xn(c,ya(),o)&&function Es(s,o,a,c,h,f,y,w){const b=dr(o,a);let O,T=o.inputs;!w&&null!=T&&(O=T[c])?(i_(s,a,O,c,h),Bu(o)&&DD(a,o.index)):3&o.type&&(c=function ug(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,f.setProperty(b,c,h))}(qt(),Sn(),c,s,o,c[11],a,!1),Qh}function yg(s,o,a,c,h){const y=h?"class":"style";i_(s,a,o.inputs[y],y,c)}function Jh(s,o,a,c){const h=Oe(),f=qt(),y=22+s,w=h[11],b=h[y]=zp(w,o,function ec(){return Mt.lFrame.currentNamespace}()),T=f.firstCreatePass?function l_(s,o,a,c,h,f,y){const w=o.consts,T=ql(o,s,2,h,Qr(w,f));return t_(o,a,T,Qr(w,y)),null!==T.attrs&&Jo(T,T.attrs,!1),null!==T.mergedAttrs&&Jo(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(y,f,h,0,o,a,c):f.data[y];Sr(T,!0);const O=T.mergedAttrs;null!==O&&Qi(w,b,O);const k=T.classes;null!==k&&Lh(w,b,k);const W=T.styles;return null!==W&&bc(w,b,W),64!=(64&T.flags)&&kh(f,h,b,T),0===function ha(){return Mt.lFrame.elementDepthCount}()&&Ar(b,h),function al(){Mt.lFrame.elementDepthCount++}(),oa(T)&&(sg(f,h,T),function ig(s,o,a){if(yo(o)){const h=o.directiveEnd;for(let f=o.directiveStart;f<h;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}(f,T,h)),null!==c&&og(h,T),Jh}function Nc(){let s=Wn();nu()?function So(){Mt.lFrame.isParent=!1}():(s=s.parent,Sr(s,!1));const o=s;!function fa(){Mt.lFrame.elementDepthCount--}();const a=qt();return a.firstCreatePass&&(ru(a,s),yo(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function su(s){return 0!=(16&s.flags)}(o)&&yg(a,o,Oe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ou(s){return 0!=(32&s.flags)}(o)&&yg(a,o,Oe(),o.stylesWithoutHost,!1),Nc}function _g(s,o,a,c){return Jh(s,o,a,c),Nc(),_g}function GD(){return Oe()}function d_(s){return!!s&&"function"==typeof s.then}function zD(s){return!!s&&"function"==typeof s.subscribe}const Xh=zD;function Pc(s,o,a,c){const h=Oe(),f=qt(),y=Wn();return function GE(s,o,a,c,h,f,y,w){const b=oa(c),O=s.firstCreatePass&&DE(s),k=o[8],W=no(o);let te=!0;if(3&c.type||w){const ee=dr(c,o),qe=w?w(ee):ee,mt=W.length,Pe=w?Ke=>w(xn(Ke[c.index])):c.index;let Re=null;if(!w&&b&&(Re=function wg(s,o,a,c){const h=s.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===a&&h[f+1]===c){const w=o[7],b=h[f+2];return w.length>b?w[b]:null}"string"==typeof y&&(f+=2)}return null}(s,o,h,c.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=f,Re.__ngLastListenerFn__=f,te=!1;else{f=tf(c,o,k,f,!1);const Ke=a.listen(qe,h,f);W.push(f,Ke),O&&O.push(h,Pe,mt,mt+1)}}else f=tf(c,o,k,f,!1);const Ie=c.outputs;let He;if(te&&null!==Ie&&(He=Ie[h])){const ee=He.length;if(ee)for(let qe=0;qe<ee;qe+=2){const $n=o[He[qe]][He[qe+1]].subscribe(f),We=W.length;W.push(f,$n),O&&O.push(h,c.index,We,-(We+1))}}}(f,h,h[11],y,s,o,0,c),Pc}function Eg(s,o,a,c){try{return!1!==a(c)}catch(h){return SE(s,h),!1}}function tf(s,o,a,c,h){return function f(y){if(y===Function)return c;CE(2&s.flags?nn(s.index,o):o);let b=Eg(o,0,c,y),T=f.__ngNextListenerFn__;for(;T;)b=Eg(o,0,T,y)&&b,T=T.__ngNextListenerFn__;return h&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function zE(s=1){return function ds(s){return(Mt.lFrame.contextLView=function hl(s,o){for(;s>0;)o=o[15],s--;return o}(s,Mt.lFrame.contextLView))[8]}(s)}function id(s,o,a,c,h){const f=s[a+1],y=null===o;let w=c?Yo(f):vu(f),b=!1;for(;0!==w&&(!1===b||y);){const O=s[w+1];m_(s[w],o)&&(b=!0,s[w+1]=c?Zy(O):fE(O)),w=c?Yo(O):vu(O)}b&&(s[a+1]=c?fE(f):Zy(f))}function m_(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Si(s,o)>=0}function E_(s,o){return function oo(s,o,a,c){const h=Oe(),f=qt(),y=Ki(2);f.firstUpdatePass&&function I_(s,o,a,c){const h=s.data;if(null===h[a+1]){const f=h[Dn()],y=function QE(s,o){return o>=s.expandoStartIndex}(s,a);(function T_(s,o){return 0!=(s.flags&(o?16:32))})(f,c)&&null===o&&!y&&(o=!1),o=function b_(s,o,a,c){const h=function Ku(s){const o=Mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(a=rf(a=sd(null,s,o,a,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(a=sd(h,s,o,a,c),null===f){let b=function nS(s,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==vu(c))return s[Yo(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=sd(null,s,o,b[1],c),b=rf(b,o.attrs,c),function JE(s,o,a,c){s[Yo(a?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else f=function rS(s,o,a){let c;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)c=rf(c,s[f].hostAttrs,a);return rf(c,o.attrs,a)}(s,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),a}(h,f,o,c),function hR(s,o,a,c,h,f){let y=f?o.classBindings:o.styleBindings,w=Yo(y),b=vu(y);s[c]=a;let O,T=!1;if(Array.isArray(a)){const k=a;O=k[1],(null===O||Si(k,O)>0)&&(T=!0)}else O=a;if(h)if(0!==b){const W=Yo(s[w+1]);s[c+1]=qy(W,w),0!==W&&(s[W+1]=to(s[W+1],c)),s[w+1]=function zM(s,o){return 131071&s|o<<17}(s[w+1],c)}else s[c+1]=qy(w,0),0!==w&&(s[w+1]=to(s[w+1],c)),w=c;else s[c+1]=qy(b,0),0===w?w=c:s[b+1]=to(s[b+1],c),b=c;T&&(s[c+1]=fE(s[c+1])),id(s,O,c,!0),id(s,O,c,!1),function YD(s,o,a,c,h){const f=h?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&Si(f,o)>=0&&(a[c+1]=Zy(a[c+1]))}(o,O,s,c,f),y=qy(w,b),f?o.classBindings=y:o.styleBindings=y}(h,f,o,a,y,c)}}(f,s,y,c),o!==Ut&&Xn(h,y,o)&&function S_(s,o,a,c,h,f,y,w){if(!(3&o.type))return;const b=s.data,T=b[w+1];od(function Wy(s){return 1==(1&s)}(T)?eI(b,o,a,h,vu(T),y):void 0)||(od(f)||function hE(s){return 2==(2&s)}(T)&&(f=eI(b,null,a,h,w,y)),function X0(s,o,a,c,h){if(o)h?s.addClass(a,c):s.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Zo.DashCase;null==h?s.removeStyle(a,c,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=Zo.Important),s.setStyle(a,c,h,f))}}(c,y,di(Dn(),a),h,f))}(f,f.data[Dn()],h,h[11],s,h[y+1]=function iS(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ue(ys(s)))),s}(o,a),c,y)}(s,o,null,!0),E_}function sd(s,o,a,c,h){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=o[w],c=rf(c,f.hostAttrs,h),f!==s);)w++;return null!==s&&(a.directiveStylingLast=w),c}function rf(s,o,a){const c=a?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),rt(s,y,!!a||o[++f]))}return void 0===s?null:s}function eI(s,o,a,c,h,f){const y=null===o;let w;for(;h>0;){const b=s[h],T=Array.isArray(b),O=T?b[1]:b,k=null===O;let W=a[h+1];W===Ut&&(W=k?Dt:void 0);let te=k?Ta(W,c):O===c?W:void 0;if(T&&!od(te)&&(te=Ta(b,c)),od(te)&&(w=te,y))return w;const Ie=s[h+1];h=y?Yo(Ie):vu(Ie)}if(null!==o){let b=f?o.residualClasses:o.residualStyles;null!=b&&(w=Ta(b,c))}return w}function od(s){return void 0!==s}function tI(s,o=""){const a=Oe(),c=qt(),h=s+22,f=c.firstCreatePass?ql(c,h,1,o,null):c.data[h],y=a[h]=function xy(s,o){return s.createText(o)}(a[11],o);kh(c,a,y,f),Sr(f,!1)}function sf(s){return Dg("",s,""),sf}function Dg(s,o,a){const c=Oe(),h=function Cu(s,o,a,c){return Xn(s,ya(),a)?o+ve(a)+c:Ut}(c,s,o,a);return h!==Ut&&Fa(c,Dn(),h),Dg}function A_(s,o,a,c,h){const f=Oe(),y=Va(f,s,o,a,c,h);return y!==Ut&&Fa(f,Dn(),y),A_}const ad=void 0;var ES=["en",[["a","p"],["AM","PM"],ad],[["AM","PM"],ad,ad],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ad,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ad,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ad,"{1} 'at' {0}",ad],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yR(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let ud={};function k_(s){const o=function Ht(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Cn(o);if(a)return a;const c=o.split("-")[0];if(a=Cn(c),a)return a;if("en"===c)return ES;throw new Ce(701,!1)}function Lc(s){return k_(s)[St.PluralCase]}function Cn(s){return s in ud||(ud[s]=At.ng&&At.ng.common&&At.ng.common.locales&&At.ng.common.locales[s]),ud[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const co="en-US";let F_=co;function Z_(s,o,a,c,h){if(s=J(s),Array.isArray(s))for(let f=0;f<s.length;f++)Z_(s[f],o,a,c,h);else{const f=qt(),y=Oe();let w=_s(s)?s:J(s.provide),b=Rp(s);const T=Wn(),O=1048575&T.providerIndexes,k=T.directiveStart,W=T.providerIndexes>>20;if(_s(s)||!s.multi){const te=new Jr(b,h,_u),Ie=Y_(w,o,h?O:O+W,k);-1===Ie?(Hs(Ji(T,y),f,w),K_(f,s,o.length),o.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(te),y.push(te)):(a[Ie]=te,y[Ie]=te)}else{const te=Y_(w,o,O+W,k),Ie=Y_(w,o,O,O+W),He=te>=0&&a[te],ee=Ie>=0&&a[Ie];if(h&&!ee||!h&&!He){Hs(Ji(T,y),f,w);const qe=function AI(s,o,a,c,h){const f=new Jr(s,a,_u);return f.multi=[],f.index=o,f.componentProviders=0,TI(f,h,c&&!a),f}(h?YS:KS,a.length,h,c,b);!h&&ee&&(a[Ie].providerFactory=qe),K_(f,s,o.length,0),o.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(qe),y.push(qe)}else K_(f,s,te>-1?te:Ie,TI(a[h?Ie:te],b,!h&&c));!h&&c&&ee&&a[Ie].componentProviders++}}}function K_(s,o,a,c){const h=_s(o),f=function E0(s){return!!s.useClass}(o);if(h||f){const b=(f?J(o.useClass):o).prototype.ngOnDestroy;if(b){const T=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const O=T.indexOf(a);-1===O?T.push(a,[c,b]):T[O+1].push(c,b)}else T.push(a,b)}}}function TI(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Y_(s,o,a,c){for(let h=a;h<c;h++)if(o[h]===s)return h;return-1}function KS(s,o,a,c){return gd(this.multi,[])}function YS(s,o,a,c){const h=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Ci(a,a[1],this.providerFactory.index,c);f=w.slice(0,y),gd(h,f);for(let b=y;b<w.length;b++)f.push(w[b])}else f=[],gd(h,f);return f}function gd(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Q_(s,o=[]){return a=>{a.providersResolver=(c,h)=>function ZS(s,o,a){const c=qt();if(c.firstCreatePass){const h=Lr(s);Z_(a,c.data,c.blueprint,h,!0),Z_(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class Tu{}class xI{}function QS(s,o){return new J_(s,o??null)}class J_ extends Tu{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Mr(this);const c=at(o);this._bootstrapComponents=Oa(c.bootstrap),this._r3Injector=Qp(o,a,[{provide:Tu,useValue:this},{provide:wc,useValue:this.componentFactoryResolver}],ue(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class kg extends xI{constructor(o){super(),this.moduleType=o}create(o){return new J_(this.moduleType,o)}}class MI extends Tu{constructor(o,a,c){super(),this.componentFactoryResolver=new Mr(this),this.instance=null;const h=new ly([...o,{provide:Tu,useValue:this},{provide:wc,useValue:this.componentFactoryResolver}],a||Mp(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Fg(s,o,a=null){return new MI(s,o,a).injector}let RI=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=_0(0,a.type),h=c.length>0?Fg([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Xt({token:s,providedIn:"environment",factory:()=>new s(L(Wo))}),s})();function JS(s){s.getStandaloneInjector=o=>o.get(RI).getOrCreateStandaloneInjector(s)}function aT(s,o,a,c){return nv(Oe(),Zn(),s,o,a,c)}function PI(s,o,a,c,h){return rv(Oe(),Zn(),s,o,a,c,h)}function md(s,o){const a=s[o];return a===Ut?void 0:a}function nv(s,o,a,c,h,f){const y=o+a;return Xn(s,y,h)?ro(s,y+1,f?c.call(f,h):c(h)):md(s,y+1)}function rv(s,o,a,c,h,f,y){const w=o+a;return bu(s,w,h,f)?ro(s,w+2,y?c.call(y,h,f):c(h,f)):md(s,w+2)}function sv(s,o,a,c,h,f,y,w,b){const T=o+a;return function io(s,o,a,c,h,f){const y=bu(s,o,a,c);return bu(s,o+2,h,f)||y}(s,T,h,f,y,w)?ro(s,T+4,b?c.call(b,h,f,y,w):c(h,f,y,w)):md(s,T+4)}function av(s,o){const a=qt();let c;const h=s+22;a.firstCreatePass?(c=function uv(s,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(s===c.name)return c}}(o,a.pipeRegistry),a.data[h]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,c.onDestroy)):c=a.data[h];const f=c.factory||(c.factory=lr(c.type)),y=pn(_u);try{const w=ba(!1),b=f();return ba(w),function nd(s,o,a,c){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=c}(a,Oe(),h,b),b}finally{pn(y)}}function pf(s,o,a){const c=s+22,h=Oe(),f=Ii(h,c);return Li(h,c)?nv(h,Zn(),o,f.transform,a,f):f.transform(a)}function $r(s,o,a,c){const h=s+22,f=Oe(),y=Ii(f,h);return Li(f,h)?rv(f,Zn(),o,y.transform,a,c,y):y.transform(a,c)}function Ug(s,o,a,c,h,f){const y=s+22,w=Oe(),b=Ii(w,y);return Li(w,y)?sv(w,Zn(),o,b.transform,a,c,h,f,b):b.transform(a,c,h,f)}function Li(s,o){return s[1].data[o].pure}function Bg(s){return o=>{setTimeout(s,void 0,o)}}const Xo=class lT extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let h=o,f=a||(()=>null),y=c;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),f=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(f=Bg(f),h&&(h=Bg(h)),y&&(y=Bg(y)));const w=super.subscribe({next:h,error:f,complete:y});return o instanceof j.w0&&o.add(w),w}};function dT(){return this._results[Iu()]()}class cv{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Iu(),c=cv.prototype;c[a]||(c[a]=dT)}get changes(){return this._changes||(this._changes=new Xo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=gn(o);(this._changesDetected=!function Br(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],f=o[c];if(a&&(h=a(h),f=a(f)),f!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let mf=(()=>{class s{}return s.__NG_ELEMENT_ID__=pT,s})();const hT=mf,fT=class extends hT{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,h=Jy(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),ng(c,h,o),new Is(h)}};function pT(){return Ua(Wn(),Oe())}function Ua(s,o){return 4&s.type?new fT(o,s,kl(s,o)):null}let jg=(()=>{class s{}return s.__NG_ELEMENT_ID__=FI,s})();function FI(){return ea(Wn(),Oe())}const lv=jg,gT=class extends lv{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return kl(this._hostTNode,this._hostLView)}get injector(){return new Lo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ca(this._hostTNode,this._hostLView);if(oh(o)){const a=hs(o,this._hostLView),c=Kn(o);return new Lo(a[1].data[c+8],a)}return new Lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=dv(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let h,f;"number"==typeof c?h=c:null!=c&&(h=c.index,f=c.injector);const y=o.createEmbeddedView(a||{},f);return this.insert(y,h),y}createComponent(o,a,c,h,f){const y=o&&!function Xi(s){return"function"==typeof s}(o);let w;if(y)w=a;else{const k=a||{};w=k.index,c=k.injector,h=k.projectableNodes,f=k.environmentInjector||k.ngModuleRef}const b=y?o:new Ql(R(o)),T=c||this.parentInjector;if(!f&&null==b.ngModule){const W=(y?T:this.parentInjector).get(Wo,null);W&&(f=W)}const O=b.create(T,h,void 0,f);return this.insert(O.hostView,w),O}insert(o,a){const c=o._lView,h=c[1];if(function Wu(s){return Zr(s[3])}(c)){const O=this.indexOf(o);if(-1!==O)this.detach(O);else{const k=c[3],W=new gT(k,k[6],k[3]);W.detach(W.indexOf(o))}}const f=this._adjustIndex(a),y=this._lContainer;!function $C(s,o,a,c){const h=10+c,f=a.length;c>0&&(a[h-1][4]=o),c<f-10?(o[4]=a[h],zs(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function HC(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(y,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=64}(h,c,y,f);const w=Q0(f,y),b=c[11],T=Wp(b,y[7]);return null!==T&&function $0(s,o,a,c,h,f){c[0]=h,c[6]=o,Ic(s,c,a,1,h,f)}(h,y[6],b,c,T,w),o.attachToViewContainerRef(),zs(hv(y),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=dv(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Ry(this._lContainer,a);c&&(Tn(hv(this._lContainer),a),Ph(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=Ry(this._lContainer,a);return c&&null!=Tn(hv(this._lContainer),a)?new Is(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function dv(s){return s[8]}function hv(s){return s[8]||(s[8]=[])}function ea(s,o){let a;const c=o[s.index];if(Zr(c))a=c;else{let h;if(8&s.type)h=xn(c);else{const f=o[11];h=f.createComment("");const y=dr(s,o);Ko(f,Wp(f,y),h,function K0(s,o){return s.nextSibling(o)}(f,y),!1)}o[s.index]=a=ND(c,o,h,s),cg(o,a)}return new gT(a,s,o)}class yd{constructor(o){this.queryList=o,this.matches=null}clone(){return new yd(this.queryList)}setDirty(){this.queryList.setDirty()}}class _d{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new _d(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==mv(o,a).matches&&this.queries[a].setDirty()}}class vd{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class pv{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(o,h);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new pv(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class yf{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new yf(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(o,a,mT(a,f)),this.matchTNodeWithReadOption(o,a,Sa(a,o,f,!1,!1))}else c===mf?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Sa(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Ec||h===jg||h===mf&&4&a.type)this.addMatch(a.index,-2);else{const f=Sa(a,o,h,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function mT(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function _T(s,o,a,c){return-1===a?function yT(s,o){return 11&s.type?kl(s,o):4&s.type?Ua(s,o):null}(o,s):-2===a?function si(s,o,a){return a===Ec?kl(o,s):a===mf?Ua(o,s):a===jg?ea(o,s):void 0}(s,o,c):Ci(s,s[1],a,o)}function _f(s,o,a,c){const h=o[19].queries[c];if(null===h.matches){const f=s.data,y=a.matches,w=[];for(let b=0;b<y.length;b+=2){const T=y[b];w.push(T<0?null:_T(o,f[T],y[b+1],a.metadata.read))}h.matches=w}return h.matches}function wr(s,o,a,c){const h=s.queries.getByIndex(a),f=h.matches;if(null!==f){const y=_f(s,o,h,a);for(let w=0;w<f.length;w+=2){const b=f[w];if(b>0)c.push(y[w/2]);else{const T=f[w+1],O=o[-b];for(let k=10;k<O.length;k++){const W=O[k];W[17]===W[3]&&wr(W[1],W,T,c)}if(null!==O[9]){const k=O[9];for(let W=0;W<k.length;W++){const te=k[W];wr(te[1],te,T,c)}}}}}return c}function Ba(s){const o=Oe(),a=qt(),c=_a();Yu(c+1);const h=mv(a,c);if(s.dirty&&function qu(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const f=h.crossesNgTemplate?wr(a,o,c,[]):_f(a,o,h,c);s.reset(f,S0),s.notifyOnChanges()}return!0}return!1}function gv(s,o,a,c){const h=qt();if(h.firstCreatePass){const f=Wn();(function VI(s,o,a){null===s.queries&&(s.queries=new pv),s.queries.track(new yf(o,a))})(h,new vd(o,a,c),f.index),function Hg(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}!function Hr(s,o,a){const c=new cv(4==(4&a));CD(s,o,c,c.destroy),null===o[19]&&(o[19]=new _d),o[19].queries.push(new yd(c))}(h,Oe(),a)}function $g(){return function LI(s,o){return s[19].queries[o].queryList}(Oe(),_a())}function mv(s,o){return s.queries.getByIndex(o)}function tm(...s){}const nm=new wn("Application Initializer");let Id=(()=>{class s{constructor(a){this.appInits=a,this.resolve=tm,this.reject=tm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(d_(f))a.push(f);else if(Xh(f)){const y=new Promise((w,b)=>{f.subscribe({complete:w,error:b})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(L(nm,8))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Lv=new wn("AppId",{providedIn:"root",factory:function qI(){return`${im()}${im()}${im()}`}});function im(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vv=new wn("Platform Initializer"),WI=new wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wf=new wn("appBootstrapListener");let bd=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const sm=new wn("LocaleId",{providedIn:"root",factory:()=>re(sm,Je.Optional|Je.SkipSelf)||function xT(){return typeof $localize<"u"&&$localize.locale||co}()}),jc=new wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ef{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let ZI=(()=>{class s{compileModuleSync(a){return new kg(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Oa(at(a).declarations).reduce((y,w)=>{const b=R(w);return b&&y.push(new Ql(b)),y},[]);return new Ef(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const YI=(()=>Promise.resolve(0))();function $c(s){typeof Zone>"u"?YI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Vi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xo(!1),this.onMicrotaskEmpty=new Xo(!1),this.onStable=new Xo(!1),this.onError=new Xo(!1),typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function jv(){let s=At.requestAnimationFrame,o=At.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function QI(s){const o=()=>{!function Cf(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(At,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Hv(s),s.isCheckStableRunning=!0,Cd(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Hv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,f,y,w)=>{try{return om(s),a.invokeTask(h,f,y,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),Df(s)}},onInvoke:(a,c,h,f,y,w,b)=>{try{return om(s),a.invoke(h,f,y,w,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),Df(s)}},onHasTask:(a,c,h,f)=>{a.hasTask(h,f),c===h&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,Hv(s),Cd(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,h,f)=>(a.handleError(h,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vi.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(Vi.isInAngularZone())throw new Ce(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,o,$v,tm,tm);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const $v={};function Cd(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Hv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function om(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Df(s){s._nesting--,Cd(s)}class Gv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xo,this.onMicrotaskEmpty=new Xo,this.onStable=new Xo,this.onError=new Xo}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}const zv=new wn(""),qv=new wn("");let am,JI=(()=>{class s{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,am||(function Sf(s){am=s}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vi.assertNotInAngularZone(),$c(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$c(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(L(Vi),L(XI),L(qv))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})(),XI=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return am?.findTestabilityInTree(this,a,c)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),lo=null;const Dd=new wn("AllowMultipleToken"),$a=new wn("PlatformDestroyListeners");class tb{constructor(o,a){this.name=o,this.token=a}}function Tf(s,o,a=[]){const c=`Platform: ${o}`,h=new wn(c);return(f=[])=>{let y=Gc();if(!y||y.injector.get(Dd,!1)){const w=[...a,...f,{provide:h,useValue:!0}];s?s(w):function PT(s){if(lo&&!lo.get(Dd,!1))throw new Ce(400,!1);lo=s;const o=s.get(Sd);(function ta(s){const o=s.get(Vv,null);o&&o.forEach(a=>a())})(s)}(function Fn(s=[],o){return Na.create({name:o,providers:[{provide:Tp,useValue:"platform"},{provide:$a,useValue:new Set([()=>lo=null])},...s]})}(w,c))}return function nb(s){const o=Gc();if(!o)throw new Ce(401,!1);return o}()}}function Gc(){return lo?.get(Sd)??null}let Sd=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function Kv(s,o){let a;return a="noop"===s?new Gv:("zone.js"===s?void 0:s)||new Vi(o),a}(c?.ngZone,function rb(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Vi,useValue:h}];return h.run(()=>{const y=Na.create({providers:f,parent:this.injector,name:a.moduleType.name}),w=a.create(y),b=w.injector.get(Rh,null);if(!b)throw new Ce(402,!1);return h.runOutsideAngular(()=>{const T=h.onError.subscribe({next:O=>{b.handleError(O)}});w.onDestroy(()=>{cm(this._modules,w),T.unsubscribe()})}),function ib(s,o,a){try{const c=a();return d_(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(b,h,()=>{const T=w.injector.get(Id);return T.runInitializers(),T.donePromise.then(()=>(function uf(s){Vt(s,"Expected localeId to be defined"),"string"==typeof s&&(F_=s.toLowerCase().replace(/_/g,"-"))}(w.injector.get(sm,co)||co),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,c=[]){const h=sb({},c);return function NT(s,o,a){const c=new kg(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(a){const c=a.injector.get(um);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Ce(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get($a,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(L(Na))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function sb(s,o){return Array.isArray(o)?o.reduce(sb,s):{...s,...o}}let um=(()=>{class s{constructor(a,c,h){this._zone=a,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new N.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new N.y(w=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Vi.assertNotInAngularZone(),$c(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Vi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{b.unsubscribe(),T.unsubscribe()}});this.isStable=(0,oe.T)(f,y.pipe((0,ce.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const h=a instanceof fy;if(!this._injector.get(Id).done)throw!h&&Fe(a),new Ce(405,false);let y;y=h?a:this._injector.get(wc).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function eb(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Tu),T=y.create(Na.NULL,[],c||y.selector,w),O=T.location.nativeElement,k=T.injector.get(zv,null);return k?.registerApplication(O),T.onDestroy(()=>{this.detachView(T.hostView),cm(this.components,T),k?.unregisterApplication(O)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Ce(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;cm(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(wf,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>cm(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ce(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(L(Vi),L(Wo),L(Rh))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function cm(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let Yv=!0,Qv=!1;function ob(){return Qv=!0,Yv}function Ad(){if(Qv)throw new Error("Cannot enable prod mode after platform setup.");Yv=!1}let kT=(()=>{class s{}return s.__NG_ELEMENT_ID__=ab,s})();function ab(s){return function ub(s,o,a){if(Bu(s)&&!a){const c=nn(s.index,o);return new Is(c,c)}return 47&s.type?new Is(o[16],o):null}(Wn(),Oe(),16==(16&s))}class ew{constructor(){}supports(o){return Xl(o)}create(o){return new pm(o)}}const hb=(s,o)=>o;class pm{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||hb}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<nw(c,h,f)?a:c,w=nw(y,h,f),b=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{f||(f=[]);const T=w-h,O=b-h;if(T!=O){for(let W=0;W<T;W++){const te=W<f.length?f[W]:f[W]=0,Ie=te+W;O<=Ie&&Ie<T&&(f[W]=te+1)}f[y.previousIndex]=O-T}}w!==b&&o(y,w,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Xl(o))throw new Ce(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)f=o[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),c=!0),a=a._next}else h=0,function gg(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Iu()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,w=>{y=this._trackByFn(h,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,h)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,h)):o=this._addAfter(new fb(a,c),f,h),o}_verifyReinsertion(o,a,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new tw),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tw),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class fb{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ha{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class tw{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new Ha,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nw(s,o,a){const c=s.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class gm{constructor(){}supports(o){return o instanceof Map||mg(o)}create(){return new Mf}}class Mf{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||mg(o)))throw new Ce(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const c=new pb(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class pb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function mm(){return new Md([new ew])}let Md=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||mm()),deps:[[s,new xi,new zt]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new Ce(901,!1)}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:mm}),s})();function Rf(){return new rw([new gm])}let rw=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||Rf()),deps:[[s,new xi,new zt]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new Ce(901,!1)}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:Rf}),s})();const iw=Tf(null,"core",[]);let sw=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(L(um))},s.\u0275mod=Qt({type:s}),s.\u0275inj=kt({}),s})();function mb(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}const ym=!0},3942:(lt,Ae,F)=>{F.d(Ae,{Z:()=>Ce});var d=F(2090),j=F(4859),N=F(9681),oe=F(1877);class ce{constructor(ve,me){this._delegate=ve,this.firebase=me,(0,N._addComponent)(ve,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ve,me=N._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(ve);return!Qe.isInitialized()&&"EXPLICIT"===(null===(Xe=Qe.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:me})}_removeServiceInstance(ve,me=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(me)}_addComponent(ve){(0,N._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,N._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function he(){const it=function ue(it){const ve={},me={__esModule:!0,initializeApp:function Ve(se,le={}){const _e=N.initializeApp(se,le);if((0,d.r3)(ve,_e.name))return ve[_e.name];const Q=new it(_e,me);return ve[_e.name]=Q,Q},app:Qe,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function be(se){const le=se.name,_e=le.replace("-compat","");if(N._registerComponent(se)&&"PUBLIC"===se.type){const Q=(X=Qe())=>{if("function"!=typeof X[_e])throw pe.create("invalid-app-argument",{appName:le});return X[_e]()};void 0!==se.serviceProps&&(0,d.ZB)(Q,se.serviceProps),me[_e]=Q,it.prototype[_e]=function(...X){return this._getService.bind(this,le).apply(this,se.multipleInstances?X:[])}}return"PUBLIC"===se.type?me[_e]:null},removeApp:function Xe(se){delete ve[se]},useAsService:function ze(se,le){return"serverAuth"===le?null:le},modularAPIs:N}};function Qe(se){if(!(0,d.r3)(ve,se=se||N._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:se});return ve[se]}return me.default=me,Object.defineProperty(me,"apps",{get:function Ne(){return Object.keys(ve).map(se=>ve[se])}}),Qe.App=it,me}(ce);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ve(me){(0,d.ZB)(it,me)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),it}(),z=new oe.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ce=G;!function ke(it){(0,N.registerVersion)("@firebase/app-compat","0.1.39",it)}()},9681:(lt,Ae,F)=>{F.r(Ae),F.d(Ae,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>$i,_DEFAULT_ENTRY_NAME:()=>Vt,_addComponent:()=>en,_addOrOverwriteComponent:()=>Xt,_apps:()=>on,_clearComponents:()=>Ei,_components:()=>mn,_getProvider:()=>kt,_registerComponent:()=>$t,_removeServiceInstance:()=>mr,deleteApp:()=>Hi,getApp:()=>Ln,getApps:()=>ci,initializeApp:()=>Cr,onLog:()=>Vn,registerVersion:()=>Gn,setLogLevel:()=>pn});var d=F(5861),j=F(4859),N=F(1877),oe=F(2090),ce=F(8766);class ye{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function pe(et){return"VERSION"===et.getComponent()?.type}(tt)){const wt=tt.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(tt=>tt).join(" ")}}const ue="@firebase/app",G=new N.Yd("@firebase/app"),Vt="[DEFAULT]",Ze={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,mn=new Map;function en(et,Se){try{et.container.addComponent(Se)}catch(tt){G.debug(`Component ${Se.name} failed to register with FirebaseApp ${et.name}`,tt)}}function Xt(et,Se){et.container.addOrOverwriteComponent(Se)}function $t(et){const Se=et.name;if(mn.has(Se))return G.debug(`There were multiple attempts to register component ${Se}.`),!1;mn.set(Se,et);for(const tt of on.values())en(tt,et);return!0}function kt(et,Se){const tt=et.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),et.container.getProvider(Se)}function mr(et,Se,tt=Vt){kt(et,Se).clearInstance(tt)}function Ei(){mn.clear()}const An=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ji{constructor(Se,tt,wt){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw An.create("app-deleted",{appName:this._name})}}const $i="9.14.0";function Cr(et,Se={}){let tt=et;"object"!=typeof Se&&(Se={name:Se});const wt=Object.assign({name:Vt,automaticDataCollectionEnabled:!1},Se),It=wt.name;if("string"!=typeof It||!It)throw An.create("bad-app-name",{appName:String(It)});if(tt||(tt=(0,oe.aH)()),!tt)throw An.create("no-options");const Qt=on.get(It);if(Qt){if((0,oe.vZ)(tt,Qt.options)&&(0,oe.vZ)(wt,Qt.config))return Qt;throw An.create("duplicate-app",{appName:It})}const q=new j.H0(It);for(const Z of mn.values())q.addComponent(Z);const $=new ji(tt,wt,q);return on.set(It,$),$}function Ln(et=Vt){const Se=on.get(et);if(!Se&&et===Vt)return Cr();if(!Se)throw An.create("no-app",{appName:et});return Se}function ci(){return Array.from(on.values())}function Hi(et){return Je.apply(this,arguments)}function Je(){return(Je=(0,d.Z)(function*(et){const Se=et.name;on.has(Se)&&(on.delete(Se),yield Promise.all(et.container.getProviders().map(tt=>tt.delete())),et.isDeleted=!0)})).apply(this,arguments)}function Gn(et,Se,tt){var wt;let It=null!==(wt=Ze[et])&&void 0!==wt?wt:et;tt&&(It+=`-${tt}`);const Qt=It.match(/\s|\//),q=Se.match(/\s|\//);if(Qt||q){const $=[`Unable to register library "${It}" with version "${Se}":`];return Qt&&$.push(`library name "${It}" contains illegal characters (whitespace or "/")`),Qt&&q&&$.push("and"),q&&$.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void G.warn($.join(" "))}$t(new j.wA(`${It}-version`,()=>({library:It,version:Se}),"VERSION"))}function Vn(et,Se){if(null!==et&&"function"!=typeof et)throw An.create("invalid-log-argument");(0,N.Am)(et,Se)}function pn(et){(0,N.Ub)(et)}const yn="firebase-heartbeat-store";let _n=null;function fn(){return _n||(_n=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(et,Se)=>{0===Se&&et.createObjectStore(yn)}}).catch(et=>{throw An.create("idb-open",{originalErrorMessage:et.message})})),_n}function pt(){return(pt=(0,d.Z)(function*(et){var Se;try{return(yield fn()).transaction(yn).objectStore(yn).get(zn(et))}catch(tt){if(tt instanceof oe.ZR)G.warn(tt.message);else{const wt=An.create("idb-get",{originalErrorMessage:null===(Se=tt)||void 0===Se?void 0:Se.message});G.warn(wt.message)}}})).apply(this,arguments)}function At(et,Se){return kr.apply(this,arguments)}function kr(){return(kr=(0,d.Z)(function*(et,Se){var tt;try{const It=(yield fn()).transaction(yn,"readwrite");return yield It.objectStore(yn).put(Se,zn(et)),It.done}catch(wt){if(wt instanceof oe.ZR)G.warn(wt.message);else{const It=An.create("idb-set",{originalErrorMessage:null===(tt=wt)||void 0===tt?void 0:tt.message});G.warn(It.message)}}})).apply(this,arguments)}function zn(et){return`${et.name}!${et.options.appId}`}class Dr{constructor(Se){this.container=Se,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new Zt(tt),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var Se=this;return(0,d.Z)(function*(){const wt=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=Pt();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==It&&!Se._heartbeatsCache.heartbeats.some(Qt=>Qt.date===It))return Se._heartbeatsCache.heartbeats.push({date:It,agent:wt}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(Qt=>{const q=new Date(Qt.date).valueOf();return Date.now()-q<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,d.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const tt=Pt(),{heartbeatsToSend:wt,unsentEntries:It}=function zr(et,Se=1024){const tt=[];let wt=et.slice();for(const It of et){const Qt=tt.find(q=>q.agent===It.agent);if(Qt){if(Qt.dates.push(It.date),nr(tt)>Se){Qt.dates.pop();break}}else if(tt.push({agent:It.agent,dates:[It.date]}),nr(tt)>Se){tt.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:wt}}(Se._heartbeatsCache.heartbeats),Qt=(0,oe.L)(JSON.stringify({version:2,heartbeats:wt}));return Se._heartbeatsCache.lastSentHeartbeatDate=tt,It.length>0?(Se._heartbeatsCache.heartbeats=It,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),Qt})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class Zt{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,d.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function ft(et){return pt.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var tt=this;return(0,d.Z)(function*(){var wt;if(yield tt._canUseIndexedDBPromise){const Qt=yield tt.read();return At(tt.app,{lastSentHeartbeatDate:null!==(wt=Se.lastSentHeartbeatDate)&&void 0!==wt?wt:Qt.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var tt=this;return(0,d.Z)(function*(){var wt;if(yield tt._canUseIndexedDBPromise){const Qt=yield tt.read();return At(tt.app,{lastSentHeartbeatDate:null!==(wt=Se.lastSentHeartbeatDate)&&void 0!==wt?wt:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...Se.heartbeats]})}})()}}function nr(et){return(0,oe.L)(JSON.stringify({version:2,heartbeats:et})).length}!function In(et){$t(new j.wA("platform-logger",Se=>new ye(Se),"PRIVATE")),$t(new j.wA("heartbeat",Se=>new Dr(Se),"PRIVATE")),Gn(ue,"0.8.4",et),Gn(ue,"0.8.4","esm2017"),Gn("fire-js","")}("")},4859:(lt,Ae,F)=>{F.d(Ae,{H0:()=>ue,wA:()=>N});var d=F(5861),j=F(2090);class N{constructor(G,z,J){this.name=G,this.instanceFactory=z,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const oe="[DEFAULT]";class ce{constructor(G,z){this.name=G,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const z=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(z)){const J=new j.BH;if(this.instancesDeferred.set(z,J),this.isInitialized(z)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:z});$e&&J.resolve($e)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(G){var z;const J=this.normalizeInstanceIdentifier(G?.identifier),$e=null!==(z=G?.optional)&&void 0!==z&&z;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(ke){if($e)return null;throw ke}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function pe(he){return"EAGER"===he.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[z,J]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(z);try{const ke=this.getOrInitializeService({instanceIdentifier:$e});J.resolve(ke)}catch{}}}}clearInstance(G=oe){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,d.Z)(function*(){const z=Array.from(G.instances.values());yield Promise.all([...z.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...z.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=oe){return this.instances.has(G)}getOptions(G=oe){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:z={}}=G,J=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:J,options:z});for(const[ke,Ce]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(ke)&&Ce.resolve($e);return $e}onInit(G,z){var J;const $e=this.normalizeInstanceIdentifier(z),ke=null!==(J=this.onInitCallbacks.get($e))&&void 0!==J?J:new Set;ke.add(G),this.onInitCallbacks.set($e,ke);const Ce=this.instances.get($e);return Ce&&G(Ce,$e),()=>{ke.delete(G)}}invokeOnInitCallbacks(G,z){const J=this.onInitCallbacks.get(z);if(J)for(const $e of J)try{$e(G,z)}catch{}}getOrInitializeService({instanceIdentifier:G,options:z={}}){let J=this.instances.get(G);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(he=G,he===oe?void 0:he),options:z}),this.instances.set(G,J),this.instancesOptions.set(G,z),this.invokeOnInitCallbacks(J,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,J)}catch{}var he;return J||null}normalizeInstanceIdentifier(G=oe){return this.component?this.component.multipleInstances?G:oe:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const z=this.getProvider(G.name);if(z.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);z.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const z=new ce(G,this);return this.providers.set(G,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Ae,F)=>{F.d(Ae,{Am:()=>he,Ub:()=>ue,Yd:()=>pe,in:()=>j});const d=[];var j=(()=>{return(G=j||(j={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",j;var G})();const N={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},oe=j.INFO,ce={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ye=(G,z,...J)=>{if(z<G.logLevel)return;const $e=(new Date).toISOString(),ke=ce[z];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[ke](`[${$e}]  ${G.name}:`,...J)};class pe{constructor(z){this.name=z,this._logLevel=oe,this._logHandler=ye,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in j))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?N[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...z),this._logHandler(this,j.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...z),this._logHandler(this,j.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,j.INFO,...z),this._logHandler(this,j.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,j.WARN,...z),this._logHandler(this,j.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...z),this._logHandler(this,j.ERROR,...z)}}function ue(G){d.forEach(z=>{z.setLogLevel(G)})}function he(G,z){for(const J of d){let $e=null;z&&z.level&&($e=N[z.level]),J.userLogHandler=null===G?null:(ke,Ce,...it)=>{const ve=it.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");Ce>=($e??ke.logLevel)&&G({level:j[Ce].toLowerCase(),message:ve,args:it,type:ke.name})}}}},8766:(lt,Ae,F)=>{F.d(Ae,{Lj:()=>Ve,X3:()=>Qe});var d=F(5861);let N,oe;const pe=new WeakMap,ue=new WeakMap,he=new WeakMap,G=new WeakMap,z=new WeakMap;let ke={get(le,_e,Q){if(le instanceof IDBTransaction){if("done"===_e)return ue.get(le);if("objectStoreNames"===_e)return le.objectStoreNames||he.get(le);if("store"===_e)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return me(le[_e])},set:(le,_e,Q)=>(le[_e]=Q,!0),has:(le,_e)=>le instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in le};function ve(le){return"function"==typeof le?function it(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(..._e){return le.apply(Xe(this),_e),me(pe.get(this))}:function(..._e){return me(le.apply(Xe(this),_e))}:function(_e,...Q){const X=le.call(Xe(this),_e,...Q);return he.set(X,_e.sort?_e.sort():[_e]),me(X)}}(le):(le instanceof IDBTransaction&&function $e(le){if(ue.has(le))return;const _e=new Promise((Q,X)=>{const fe=()=>{le.removeEventListener("complete",ae),le.removeEventListener("error",Be),le.removeEventListener("abort",Be)},ae=()=>{Q(),fe()},Be=()=>{X(le.error||new DOMException("AbortError","AbortError")),fe()};le.addEventListener("complete",ae),le.addEventListener("error",Be),le.addEventListener("abort",Be)});ue.set(le,_e)}(le),((le,_e)=>_e.some(Q=>le instanceof Q))(le,function ce(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,ke):le)}function me(le){if(le instanceof IDBRequest)return function J(le){const _e=new Promise((Q,X)=>{const fe=()=>{le.removeEventListener("success",ae),le.removeEventListener("error",Be)},ae=()=>{Q(me(le.result)),fe()},Be=()=>{X(le.error),fe()};le.addEventListener("success",ae),le.addEventListener("error",Be)});return _e.then(Q=>{Q instanceof IDBCursor&&pe.set(Q,le)}).catch(()=>{}),z.set(_e,le),_e}(le);if(G.has(le))return G.get(le);const _e=ve(le);return _e!==le&&(G.set(le,_e),z.set(_e,le)),_e}const Xe=le=>z.get(le);function Qe(le,_e,{blocked:Q,upgrade:X,blocking:fe,terminated:ae}={}){const Be=indexedDB.open(le,_e),je=me(Be);return X&&Be.addEventListener("upgradeneeded",yt=>{X(me(Be.result),yt.oldVersion,yt.newVersion,me(Be.transaction))}),Q&&Be.addEventListener("blocked",()=>Q()),je.then(yt=>{ae&&yt.addEventListener("close",()=>ae()),fe&&yt.addEventListener("versionchange",()=>fe())}).catch(()=>{}),je}function Ve(le,{blocked:_e}={}){const Q=indexedDB.deleteDatabase(le);return _e&&Q.addEventListener("blocked",()=>_e()),me(Q).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],ze=new Map;function se(le,_e){if(!(le instanceof IDBDatabase)||_e in le||"string"!=typeof _e)return;if(ze.get(_e))return ze.get(_e);const Q=_e.replace(/FromIndex$/,""),X=_e!==Q,fe=be.includes(Q);if(!(Q in(X?IDBIndex:IDBObjectStore).prototype)||!fe&&!Ne.includes(Q))return;const ae=function(){var Be=(0,d.Z)(function*(je,...yt){const tn=this.transaction(je,fe?"readwrite":"readonly");let Vt=tn.store;return X&&(Vt=Vt.index(yt.shift())),(yield Promise.all([Vt[Q](...yt),fe&&tn.done]))[0]});return function(yt){return Be.apply(this,arguments)}}();return ze.set(_e,ae),ae}!function Ce(le){ke=le(ke)}(le=>({...le,get:(_e,Q,X)=>se(_e,Q)||le.get(_e,Q,X),has:(_e,Q)=>!!se(_e,Q)||le.has(_e,Q)}))},5861:(lt,Ae,F)=>{function d(N,oe,ce,ye,pe,ue,he){try{var G=N[ue](he),z=G.value}catch(J){return void ce(J)}G.done?oe(z):Promise.resolve(z).then(ye,pe)}function j(N){return function(){var oe=this,ce=arguments;return new Promise(function(ye,pe){var ue=N.apply(oe,ce);function he(z){d(ue,ye,pe,he,G,"next",z)}function G(z){d(ue,ye,pe,he,G,"throw",z)}he(void 0)})}}F.d(Ae,{Z:()=>j})}},lt=>{lt(lt.s=7434)}]);