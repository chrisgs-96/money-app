"use strict";(self.webpackChunkmoney_app=self.webpackChunkmoney_app||[]).push([[179],{2011:(ut,De,P)=>{P.d(De,{Dh:()=>oe,GT:()=>he,cc:()=>Re,hO:()=>Fe,on:()=>B,pX:()=>re,xv:()=>ae});var h=P(4650),ee=P(127),N=P(6351);ut=P.hmd(ut);const ie=["ngOnDestroy"],re=(fe,Xe,ot,Ae={})=>new Proxy(fe,{get:(_e,be)=>ot.runOutsideAngular(()=>{var Be;if(fe[be])return!(null===(Be=Ae?.spy)||void 0===Be)&&Be.get&&Ae.spy.get(be,fe[be]),fe[be];if(ie.indexOf(be)>-1)return()=>{};const je=Xe.toPromise().then(j=>{const pe=j&&j[be];return"function"==typeof pe?pe.bind(j):pe&&pe.then?pe.then(q=>ot.run(()=>q)):ot.run(()=>pe)});return new Proxy(()=>{},{get:(j,pe)=>je[pe],apply:(j,pe,q)=>je.then(J=>{var se;const ne=J&&J(...q);return!(null===(se=Ae?.spy)||void 0===se)&&se.apply&&Ae.spy.apply(be,q,ne),ne})})})}),he=(fe,Xe)=>{Xe.forEach(ot=>{Object.getOwnPropertyNames(ot.prototype||ot).forEach(Ae=>{Object.defineProperty(fe.prototype,Ae,Object.getOwnPropertyDescriptor(ot.prototype||ot,Ae))})})};class ce{constructor(Xe){return Xe}}const oe=new h.OlP("angularfire2.app.options"),ae=new h.OlP("angularfire2.app.name");function B(fe,Xe,ot){const _e="object"==typeof ot&&ot||{};_e.name=_e.name||"string"==typeof ot&&ot||"[DEFAULT]";const Be=ee.Z.apps.filter(je=>je&&je.name===_e.name)[0]||Xe.runOutsideAngular(()=>ee.Z.initializeApp(fe,_e));try{JSON.stringify(fe)!==JSON.stringify(Be.options)&&$("error",`${Be.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(Be)}const $=(fe,...Xe)=>{(0,h.X6Q)()&&typeof console<"u"&&console[fe](...Xe)},Y={provide:ce,useFactory:B,deps:[oe,h.R0b,[new h.FiY,ae]]};let Fe=(()=>{class fe{constructor(ot){ee.Z.registerVersion("angularfire",N.q4.full,"core"),ee.Z.registerVersion("angularfire",N.q4.full,"app-compat"),ee.Z.registerVersion("angular",h.q4F.full,ot.toString())}static initializeApp(ot,Ae){return{ngModule:fe,providers:[{provide:oe,useValue:ot},{provide:ae,useValue:Ae}]}}}return fe.\u0275fac=function(ot){return new(ot||fe)(h.LFG(h.Lbi))},fe.\u0275mod=h.oAB({type:fe}),fe.\u0275inj=h.cJS({providers:[Y]}),fe})();function Re(fe,Xe,ot,Ae,_e){const[,be,Be]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===fe)||[];if(be)return function Ie(fe,Xe){try{return fe.toString()===Xe.toString()}catch{return fe===Xe}}(_e,Be)||(ge("error",`${Xe} was already initialized on the ${ot} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:_e,was:Be})),be;{const je=Ae();return globalThis.\u0275AngularfireInstanceCache.push([fe,je,_e]),je}}const nt=!!ut.hot,ge=(fe,...Xe)=>{(0,h.X6Q)()&&typeof console<"u"&&console[fe](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(ut,De,P)=>{P.d(De,{q4:()=>gf,iC:()=>Ei,fc:()=>il,HU:()=>Ma,vb:()=>ju,JM:()=>mf});var h=P(4650),ee=P(5867),N=P(5861),ie=P(9681),re=P(2090),he=P(4859),ce=P(1877),oe=P(8766);const ae="@firebase/installations",B="0.5.16",Y=`w:${B}`,Fe="FIS_v2",Xe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ot(C){return C instanceof re.ZR&&C.code.includes("request-failed")}function Ae({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function _e(C){return{token:C.token,requestStatus:2,expiresIn:J(C.expiresIn),creationTime:Date.now()}}function be(C,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,N.Z)(function*(C,D){const F=(yield D.json()).error;return Xe.create("request-failed",{requestName:C,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function j(C,{refreshToken:D}){const M=je(C);return M.append("Authorization",function se(C){return`${Fe} ${C}`}(D)),M}function pe(C){return q.apply(this,arguments)}function q(){return(q=(0,N.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function J(C){return Number(C.replace("s","000"))}function ne(C,D){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:M}){const F=Ae(C),K=je(C),X=D.getImmediate({optional:!0});if(X){const Nt=yield X.getHeartbeatsHeader();Nt&&K.append("x-firebase-client",Nt)}const Ue={method:"POST",headers:K,body:JSON.stringify({fid:M,authVersion:Fe,appId:C.appId,sdkVersion:Y})},mt=yield pe(()=>fetch(F,Ue));if(mt.ok){const Nt=yield mt.json();return{fid:Nt.fid||M,registrationStatus:2,refreshToken:Nt.refreshToken,authToken:_e(Nt.authToken)}}throw yield be("Create Installation",mt)})).apply(this,arguments)}function Oe(C){return new Promise(D=>{setTimeout(D,C)})}const Xt=/^[cdef][\w-]{21}$/;function We(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function on(C){return function gt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Xt.test(M)?M:""}catch{return""}}function mn(C){return`${C.appName}!${C.appId}`}const Kt=new Map;function Yt(C,D){const M=mn(C);ln(M,D),function Yi(C,D){const M=function Ar(){return!fi&&"BroadcastChannel"in self&&(fi=new BroadcastChannel("[Firebase] FID Change"),fi.onmessage=C=>{ln(C.data.key,C.data.fid)}),fi}();M&&M.postMessage({key:C,fid:D}),function Hr(){0===Kt.size&&fi&&(fi.close(),fi=null)}()}(M,D)}function ln(C,D){const M=Kt.get(C);if(M)for(const F of M)F(D)}let fi=null;const Qr="firebase-installations-store";let Jr=null;function ra(){return Jr||(Jr=(0,oe.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Qr)}})),Jr}function Ze(C,D){return wr.apply(this,arguments)}function wr(){return(wr=(0,N.Z)(function*(C,D){const M=mn(C),K=(yield ra()).transaction(Qr,"readwrite"),X=K.objectStore(Qr),ye=yield X.get(M);return yield X.put(D,M),yield K.done,(!ye||ye.fid!==D.fid)&&Yt(C,D.fid),D})).apply(this,arguments)}function ms(C){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,N.Z)(function*(C){const D=mn(C),F=(yield ra()).transaction(Qr,"readwrite");yield F.objectStore(Qr).delete(D),yield F.done})).apply(this,arguments)}function Xr(C,D){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,N.Z)(function*(C,D){const M=mn(C),K=(yield ra()).transaction(Qr,"readwrite"),X=K.objectStore(Qr),ye=yield X.get(M),Ue=D(ye);return void 0===Ue?yield X.delete(M):yield X.put(Ue,M),yield K.done,Ue&&(!ye||ye.fid!==Ue.fid)&&Yt(C,Ue.fid),Ue})).apply(this,arguments)}function Rn(C){return Un.apply(this,arguments)}function Un(){return(Un=(0,N.Z)(function*(C){let D;const M=yield Xr(C.appConfig,F=>{const K=hn(F),X=_t(C,K);return D=X.registrationPromise,X.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function hn(C){return xt(C||{fid:We(),registrationStatus:0})}function _t(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Xe.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function ct(C,D){return rn.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:fr(C)}:{installationEntry:D}}function rn(){return(rn=(0,N.Z)(function*(C,D){try{const M=yield ne(C,D);return Ze(C.appConfig,M)}catch(M){throw ot(M)&&409===M.customData.serverCode?yield ms(C.appConfig):yield Ze(C.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function fr(C){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,N.Z)(function*(C){let D=yield Gr(C.appConfig);for(;1===D.registrationStatus;)yield Oe(100),D=yield Gr(C.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield Rn(C);return F||M}return D})).apply(this,arguments)}function Gr(C){return Xr(C,D=>{if(!D)throw Xe.create("installation-not-found");return xt(D)})}function xt(C){return function ys(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function en(C,D){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:D},M){const F=tn(C,M),K=j(C,M),X=D.getImmediate({optional:!0});if(X){const Nt=yield X.getHeartbeatsHeader();Nt&&K.append("x-firebase-client",Nt)}const Ue={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:Y,appId:C.appId}})},mt=yield pe(()=>fetch(F,Ue));if(mt.ok)return _e(yield mt.json());throw yield be("Generate Auth Token",mt)})).apply(this,arguments)}function tn(C,{fid:D}){return`${Ae(C)}/${D}/authTokens:generate`}function Kn(C){return xr.apply(this,arguments)}function xr(){return(xr=(0,N.Z)(function*(C,D=!1){let M;const F=yield Xr(C.appConfig,X=>{if(!Lt(X))throw Xe.create("not-registered");const ye=X.authToken;if(!D&&H(ye))return X;if(1===ye.requestStatus)return M=tt(C,D),X;{if(!navigator.onLine)throw Xe.create("app-offline");const Ue=W(X);return M=bt(C,Ue),Ue}});return M?yield M:F.authToken})).apply(this,arguments)}function tt(C,D){return Te.apply(this,arguments)}function Te(){return(Te=(0,N.Z)(function*(C,D){let M=yield et(C.appConfig);for(;1===M.authToken.requestStatus;)yield Oe(100),M=yield et(C.appConfig);const F=M.authToken;return 0===F.requestStatus?Kn(C,D):F})).apply(this,arguments)}function et(C){return Xr(C,D=>{if(!Lt(D))throw Xe.create("not-registered");return function we(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function bt(C,D){return It.apply(this,arguments)}function It(){return(It=(0,N.Z)(function*(C,D){try{const M=yield en(C,D),F=Object.assign(Object.assign({},D),{authToken:M});return yield Ze(C.appConfig,F),M}catch(M){if(!ot(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ze(C.appConfig,F)}else yield ms(C.appConfig);throw M}})).apply(this,arguments)}function Lt(C){return void 0!==C&&2===C.registrationStatus}function H(C){return 2===C.requestStatus&&!function V(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function W(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function He(){return(He=(0,N.Z)(function*(C){const D=C,{installationEntry:M,registrationPromise:F}=yield Rn(D);return F?F.catch(console.error):Kn(D).catch(console.error),M.fid})).apply(this,arguments)}function Qt(){return(Qt=(0,N.Z)(function*(C,D=!1){const M=C;return yield dn(M),(yield Kn(M,D)).token})).apply(this,arguments)}function dn(C){return qt.apply(this,arguments)}function qt(){return(qt=(0,N.Z)(function*(C){const{registrationPromise:D}=yield Rn(C);D&&(yield D)})).apply(this,arguments)}function _s(C){return Xe.create("missing-app-config-values",{valueName:C})}const So="installations",En=C=>{const D=C.getProvider("app").getImmediate(),M=function yn(C){if(!C||!C.options)throw _s("App Configuration");if(!C.name)throw _s("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!C.options[M])throw _s(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,ie._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},qs=C=>{const D=C.getProvider("app").getImmediate(),M=(0,ie._getProvider)(D,So).getImmediate();return{getId:()=>function Q(C){return He.apply(this,arguments)}(M),getToken:K=>function ht(C){return Qt.apply(this,arguments)}(M,K)}};(function au(){(0,ie._registerComponent)(new he.wA(So,En,"PUBLIC")),(0,ie._registerComponent)(new he.wA("installations-internal",qs,"PRIVATE"))})(),(0,ie.registerVersion)(ae,B),(0,ie.registerVersion)(ae,B,"esm2017");const Pi="@firebase/remote-config",$n=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ad{constructor(D,M,F,K){this.client=D,this.storage=M,this.storageCache=F,this.logger=K}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,K=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${K}.`),K}fetch(D){var M=this;return(0,N.Z)(function*(){const[F,K]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(K&&M.isCachedDataFresh(D.cacheMaxAgeMillis,F))return K;D.eTag=K&&K.eTag;const X=yield M.client.fetch(D),ye=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&ye.push(M.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(ye),X})()}}function Pc(C=navigator){return C.languages&&C.languages[0]||C.language}class kc{constructor(D,M,F,K,X,ye){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=F,this.projectId=K,this.apiKey=X,this.appId=ye}fetch(D){var M=this;return(0,N.Z)(function*(){var F,K,X;const[ye,Ue]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Nt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Dt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},rt={sdk_version:M.sdkVersion,app_instance_id:ye,app_instance_id_token:Ue,app_id:M.appId,language_code:Pc()},Ht={method:"POST",headers:Dt,body:JSON.stringify(rt)},pn=fetch(Nt,Ht),Ii=new Promise(($i,Mt)=>{D.signal.addEventListener(()=>{const Ci=new Error("The operation was aborted.");Ci.name="AbortError",Mt(Ci)})});let bi;try{yield Promise.race([pn,Ii]),bi=yield pn}catch($i){let Mt="fetch-client-network";throw"AbortError"===(null===(F=$i)||void 0===F?void 0:F.name)&&(Mt="fetch-timeout"),$n.create(Mt,{originalErrorMessage:null===(K=$i)||void 0===K?void 0:K.message})}let ji=bi.status;const Rs=bi.headers.get("ETag")||void 0;let $o,ao;if(200===bi.status){let $i;try{$i=yield bi.json()}catch(Mt){throw $n.create("fetch-client-parse",{originalErrorMessage:null===(X=Mt)||void 0===X?void 0:X.message})}$o=$i.entries,ao=$i.state}if("INSTANCE_STATE_UNSPECIFIED"===ao?ji=500:"NO_CHANGE"===ao?ji=304:("NO_TEMPLATE"===ao||"EMPTY_CONFIG"===ao)&&($o={}),304!==ji&&200!==ji)throw $n.create("fetch-status",{httpStatus:ji});return{status:ji,eTag:Rs,config:$o}})()}}class ig{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,N.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:F}){var K=this;return(0,N.Z)(function*(){yield function Qn(C,D){return new Promise((M,F)=>{const K=Math.max(D-Date.now(),0),X=setTimeout(M,K);C.addEventListener(()=>{clearTimeout(X),F($n.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const X=yield K.client.fetch(D);return yield K.storage.deleteThrottleMetadata(),X}catch(X){if(!function ud(C){if(!(C instanceof re.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(X))throw X;const ye={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(ye),K.attemptFetch(D,ye)}})()}}class cu{constructor(D,M,F,K,X){this.app=D,this._client=M,this._storageCache=F,this._storage=K,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Fc(C,D){var M;const F=C.target.error||void 0;return $n.create(D,{originalErrorMessage:F&&(null===(M=F)||void 0===M?void 0:M.message)})}const Is="app_namespace_store";class sf{constructor(D,M,F,K=function ag(){return new Promise((C,D)=>{var M;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=K=>{D(Fc(K,"storage-open"))},F.onsuccess=K=>{C(K.target.result)},F.onupgradeneeded=K=>{0===K.oldVersion&&K.target.result.createObjectStore(Is,{keyPath:"compositeKey"})}}catch(F){D($n.create("storage-open",{originalErrorMessage:null===(M=F)||void 0===M?void 0:M.message}))}})}()){this.appId=D,this.appName=M,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,N.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,X)=>{var ye;const mt=F.transaction([Is],"readonly").objectStore(Is),Nt=M.createCompositeKey(D);try{const Dt=mt.get(Nt);Dt.onerror=rt=>{X(Fc(rt,"storage-get"))},Dt.onsuccess=rt=>{const Ht=rt.target.result;K(Ht?Ht.value:void 0)}}catch(Dt){X($n.create("storage-get",{originalErrorMessage:null===(ye=Dt)||void 0===ye?void 0:ye.message}))}})})()}set(D,M){var F=this;return(0,N.Z)(function*(){const K=yield F.openDbPromise;return new Promise((X,ye)=>{var Ue;const Nt=K.transaction([Is],"readwrite").objectStore(Is),Dt=F.createCompositeKey(D);try{const rt=Nt.put({compositeKey:Dt,value:M});rt.onerror=Ht=>{ye(Fc(Ht,"storage-set"))},rt.onsuccess=()=>{X()}}catch(rt){ye($n.create("storage-set",{originalErrorMessage:null===(Ue=rt)||void 0===Ue?void 0:Ue.message}))}})})()}delete(D){var M=this;return(0,N.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,X)=>{var ye;const mt=F.transaction([Is],"readwrite").objectStore(Is),Nt=M.createCompositeKey(D);try{const Dt=mt.delete(Nt);Dt.onerror=rt=>{X(Fc(rt,"storage-delete"))},Dt.onsuccess=()=>{K()}}catch(Dt){X($n.create("storage-delete",{originalErrorMessage:null===(ye=Dt)||void 0===ye?void 0:ye.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class ld{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const M=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),K=D.storage.getActiveConfig(),X=yield M;X&&(D.lastFetchStatus=X);const ye=yield F;ye&&(D.lastSuccessfulFetchTimestampMillis=ye);const Ue=yield K;Ue&&(D.activeConfig=Ue)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function lu(){return af.apply(this,arguments)}function af(){return(af=(0,N.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function bs(){(0,ie._registerComponent)(new he.wA("remote-config",function C(D,{instanceIdentifier:M}){const F=D.getProvider("app").getImmediate(),K=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $n.create("registration-window");if(!(0,re.hl)())throw $n.create("indexed-db-unavailable");const{projectId:X,apiKey:ye,appId:Ue}=F.options;if(!X)throw $n.create("registration-project-id");if(!ye)throw $n.create("registration-api-key");if(!Ue)throw $n.create("registration-app-id");const mt=new sf(Ue,F.name,M=M||"firebase"),Nt=new ld(mt),Dt=new ce.Yd(Pi);Dt.logLevel=ce.in.ERROR;const rt=new kc(K,ie.SDK_VERSION,M,X,ye,Ue),Ht=new ig(rt,mt),pn=new ad(Ht,mt,Nt,Dt),Ii=new cu(F,pn,Nt,mt,Dt);return function Cn(C){const D=(0,re.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Ii),Ii},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Pi,"0.3.15"),(0,ie.registerVersion)(Pi,"0.3.15","esm2017")}();const ki="/firebase-messaging-sw.js",Ji="/firebase-cloud-messaging-push-scope",Xi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",aa="google.c.a.c_id",du="google.c.a.c_l",Lc="google.c.a.ts",uf="google.c.a.e";var es=(()=>{return(C=es||(es={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",es;var C})();function ei(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qr(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),K=new Uint8Array(F.length);for(let X=0;X<F.length;++X)K[X]=F.charCodeAt(X);return K}const Ao="fcm_token_details_db",ar="fcm_token_object_Store";function cf(C){return lf.apply(this,arguments)}function lf(){return lf=(0,N.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Ao))return null;let D=null;return(yield(0,oe.X3)(Ao,5,{upgrade:(F=(0,N.Z)(function*(K,X,ye,Ue){var mt;if(X<2||!K.objectStoreNames.contains(ar))return;const Nt=Ue.objectStore(ar),Dt=yield Nt.index("fcmSenderId").get(C);if(yield Nt.clear(),Dt)if(2===X){const rt=Dt;if(!rt.auth||!rt.p256dh||!rt.endpoint)return;D={token:rt.fcmToken,createTime:null!==(mt=rt.createTime)&&void 0!==mt?mt:Date.now(),subscriptionOptions:{auth:rt.auth,p256dh:rt.p256dh,endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:"string"==typeof rt.vapidKey?rt.vapidKey:ei(rt.vapidKey)}}}else if(3===X){const rt=Dt;D={token:rt.fcmToken,createTime:rt.createTime,subscriptionOptions:{auth:ei(rt.auth),p256dh:ei(rt.p256dh),endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:ei(rt.vapidKey)}}}else if(4===X){const rt=Dt;D={token:rt.fcmToken,createTime:rt.createTime,subscriptionOptions:{auth:ei(rt.auth),p256dh:ei(rt.p256dh),endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:ei(rt.vapidKey)}}}}),function(X,ye,Ue,mt){return F.apply(this,arguments)})})).close(),yield(0,oe.Lj)(Ao),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),Dn(D)?D:null;var F}),lf.apply(this,arguments)}function Dn(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ti="firebase-messaging-store";let Rr=null;function fu(){return Rr||(Rr=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(ti)}})),Rr}function Zs(C){return ts.apply(this,arguments)}function ts(){return(ts=(0,N.Z)(function*(C){const D=yi(C),F=yield(yield fu()).transaction(ti).objectStore(ti).get(D);if(F)return F;{const K=yield cf(C.appConfig.senderId);if(K)return yield Wt(C,K),K}})).apply(this,arguments)}function Wt(C,D){return pu.apply(this,arguments)}function pu(){return(pu=(0,N.Z)(function*(C,D){const M=yi(C),K=(yield fu()).transaction(ti,"readwrite");return yield K.objectStore(ti).put(D,M),yield K.done,D})).apply(this,arguments)}function Ks(C){return gu.apply(this,arguments)}function gu(){return(gu=(0,N.Z)(function*(C){const D=yi(C),F=(yield fu()).transaction(ti,"readwrite");yield F.objectStore(ti).delete(D),yield F.done})).apply(this,arguments)}function yi({appConfig:C}){return C.appId}const In=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function St(C,D){return yu.apply(this,arguments)}function yu(){return(yu=(0,N.Z)(function*(C,D){var M;const F=yield Uc(C),K=Se(D),X={method:"POST",headers:F,body:JSON.stringify(K)};let ye;try{ye=yield(yield fetch(ns(C.appConfig),X)).json()}catch(Ue){throw In.create("token-subscribe-failed",{errorInfo:null===(M=Ue)||void 0===M?void 0:M.toString()})}if(ye.error)throw In.create("token-subscribe-failed",{errorInfo:ye.error.message});if(!ye.token)throw In.create("token-subscribe-no-token");return ye.token})).apply(this,arguments)}function hf(C,D){return _u.apply(this,arguments)}function _u(){return(_u=(0,N.Z)(function*(C,D){var M;const F=yield Uc(C),K=Se(D.subscriptionOptions),X={method:"PATCH",headers:F,body:JSON.stringify(K)};let ye;try{ye=yield(yield fetch(`${ns(C.appConfig)}/${D.token}`,X)).json()}catch(Ue){throw In.create("token-update-failed",{errorInfo:null===(M=Ue)||void 0===M?void 0:M.toString()})}if(ye.error)throw In.create("token-update-failed",{errorInfo:ye.error.message});if(!ye.token)throw In.create("token-update-no-token");return ye.token})).apply(this,arguments)}function vu(C,D){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,N.Z)(function*(C,D){var M;const K={method:"DELETE",headers:yield Uc(C)};try{const ye=yield(yield fetch(`${ns(C.appConfig)}/${D}`,K)).json();if(ye.error)throw In.create("token-unsubscribe-failed",{errorInfo:ye.error.message})}catch(X){throw In.create("token-unsubscribe-failed",{errorInfo:null===(M=X)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function ns({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Uc(C){return ca.apply(this,arguments)}function ca(){return(ca=(0,N.Z)(function*({appConfig:C,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Se({p256dh:C,auth:D,endpoint:M,vapidKey:F}){const K={web:{endpoint:M,auth:D,p256dh:C}};return F!==Xi&&(K.web.applicationPubKey=F),K}const $t=6048e5;function wu(C){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,N.Z)(function*(C){const D=yield Bc(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:ei(D.getKey("auth")),p256dh:ei(D.getKey("p256dh"))},F=yield Zs(C.firebaseDependencies);if(F){if(pd(F.subscriptionOptions,M))return Date.now()>=F.createTime+$t?xo(C,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield vu(C.firebaseDependencies,F.token)}catch(K){console.warn(K)}return la(C.firebaseDependencies,M)}return la(C.firebaseDependencies,M)})).apply(this,arguments)}function Tn(C){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,N.Z)(function*(C){const D=yield Zs(C.firebaseDependencies);D&&(yield vu(C.firebaseDependencies,D.token),yield Ks(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function xo(C,D){return ni.apply(this,arguments)}function ni(){return(ni=(0,N.Z)(function*(C,D){try{const M=yield hf(C.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield Wt(C.firebaseDependencies,F),M}catch(M){throw yield Tn(C),M}})).apply(this,arguments)}function la(C,D){return da.apply(this,arguments)}function da(){return(da=(0,N.Z)(function*(C,D){const F={token:yield St(C,D),createTime:Date.now(),subscriptionOptions:D};return yield Wt(C,F),F.token})).apply(this,arguments)}function Bc(C,D){return jc.apply(this,arguments)}function jc(){return(jc=(0,N.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qr(D)})})).apply(this,arguments)}function pd(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function ha(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Sn(C,D){if(!D.notification)return;C.notification={};const M=D.notification.title;M&&(C.notification.title=M);const F=D.notification.body;F&&(C.notification.body=F);const K=D.notification.image;K&&(C.notification.image=K);const X=D.notification.icon;X&&(C.notification.icon=X)}(D,C),function Li(C,D){!D.data||(C.data=D.data)}(D,C),function $c(C,D){var M,F,K,X,ye;if(!(D.fcmOptions||null!==(M=D.notification)&&void 0!==M&&M.click_action))return;C.fcmOptions={};const Ue=null!==(K=null===(F=D.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==K?K:null===(X=D.notification)||void 0===X?void 0:X.click_action;Ue&&(C.fcmOptions.link=Ue);const mt=null===(ye=D.fcmOptions)||void 0===ye?void 0:ye.analytics_label;mt&&(C.fcmOptions.analyticsLabel=mt)}(D,C),D}function Ys(C){return"object"==typeof C&&!!C&&aa in C}function rs(C,D){const M=[];for(let F=0;F<C.length;F++)M.push(C.charAt(F)),F<D.length&&M.push(D.charAt(F));return M.join("")}function fa(C){return In.create("missing-app-config-values",{valueName:C})}rs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),rs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cg{constructor(D,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function ug(C){if(!C||!C.options)throw fa("App Configuration Object");if(!C.name)throw fa("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const F of D)if(!M[F])throw fa(F);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:K,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Hc(C){return bu.apply(this,arguments)}function bu(){return(bu=(0,N.Z)(function*(C){var D;try{C.swRegistration=yield navigator.serviceWorker.register(ki,{scope:Ji}),C.swRegistration.update().catch(()=>{})}catch(M){throw In.create("failed-service-worker-registration",{browserErrorMessage:null===(D=M)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function pa(C,D){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,N.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield Hc(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw In.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function ga(C,D){return zc.apply(this,arguments)}function zc(){return(zc=(0,N.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=Xi)})).apply(this,arguments)}function Du(){return(Du=(0,N.Z)(function*(C,D){if(!navigator)throw In.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw In.create("permission-blocked");return yield ga(C,D?.vapidKey),yield pa(C,D?.serviceWorkerRegistration),wu(C)})).apply(this,arguments)}function qc(C,D,M){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,N.Z)(function*(C,D,M){const F=Zc(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[aa],message_name:M[du],message_time:M[Lc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Zc(C){switch(C){case es.NOTIFICATION_CLICKED:return"notification_open";case es.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Qs(){return(Qs=(0,N.Z)(function*(C,D){const M=D.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===es.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(ha(M)):C.onMessageHandler.next(ha(M)));const F=M.data;Ys(F)&&"1"===F[uf]&&(yield qc(C,M.messageType,F))})).apply(this,arguments)}const Js="@firebase/messaging",Jn=C=>{const D=new cg(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function gd(C,D){return Qs.apply(this,arguments)}(D,M)),D},Wr=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:F=>function Cu(C,D){return Du.apply(this,arguments)}(D,F)}};function Kc(){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,N.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _n(){(0,ie._registerComponent)(new he.wA("messaging",Jn,"PUBLIC")),(0,ie._registerComponent)(new he.wA("messaging-internal",Wr,"PRIVATE")),(0,ie.registerVersion)(Js,"0.11.0"),(0,ie.registerVersion)(Js,"0.11.0","esm2017")}();const Ro="analytics",vd="firebase_id",eo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xu="https://www.googletagmanager.com/gtag/js",An=new ce.Yd("@firebase/analytics");function Mu(C){return Promise.all(C.map(D=>D.catch(M=>M)))}function Ru(C,D){const M=document.createElement("script");M.src=`${xu}?l=${C}&id=${D}`,M.async=!0,document.head.appendChild(M)}function ff(C,D,M,F,K,X){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,N.Z)(function*(C,D,M,F,K,X){const ye=F[K];try{if(ye)yield D[ye];else{const mt=(yield Mu(M)).find(Nt=>Nt.measurementId===K);mt&&(yield D[mt.appId])}}catch(Ue){An.error(Ue)}C("config",K,X)})).apply(this,arguments)}function No(C,D,M,F,K){return to.apply(this,arguments)}function to(){return(to=(0,N.Z)(function*(C,D,M,F,K){try{let X=[];if(K&&K.send_to){let ye=K.send_to;Array.isArray(ye)||(ye=[ye]);const Ue=yield Mu(M);for(const mt of ye){const Nt=Ue.find(rt=>rt.measurementId===mt),Dt=Nt&&D[Nt.appId];if(!Dt){X=[];break}X.push(Dt)}}0===X.length&&(X=Object.values(D)),yield Promise.all(X),C("event",F,K||{})}catch(X){An.error(X)}})).apply(this,arguments)}function Ed(C){const D=window.document.getElementsByTagName("script");for(const M of Object.values(D))if(M.src&&M.src.includes(xu)&&M.src.includes(C))return M;return null}const ur=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),va=new class Vi{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function bd(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function wa(C){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,N.Z)(function*(C){var D;const{appId:M,apiKey:F}=C,K={method:"GET",headers:bd(F)},X=eo.replace("{app-id}",M),ye=yield fetch(X,K);if(200!==ye.status&&304!==ye.status){let Ue="";try{const mt=yield ye.json();null!==(D=mt.error)&&void 0!==D&&D.message&&(Ue=mt.error.message)}catch{}throw ur.create("config-fetch-failed",{httpStatus:ye.status,responseMessage:Ue})}return ye.json()})).apply(this,arguments)}function On(C){return _i.apply(this,arguments)}function _i(){return(_i=(0,N.Z)(function*(C,D=va,M){const{appId:F,apiKey:K,measurementId:X}=C.options;if(!F)throw ur.create("no-app-id");if(!K){if(X)return{measurementId:X,appId:F};throw ur.create("no-api-key")}const ye=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new ku;return setTimeout((0,N.Z)(function*(){Ue.abort()}),void 0!==M?M:6e4),Nu({appId:F,apiKey:K,measurementId:X},ye,Ue,D)})).apply(this,arguments)}function Nu(C,D,M){return no.apply(this,arguments)}function no(){return(no=(0,N.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:M},F,K=va){var X,ye;const{appId:Ue,measurementId:mt}=C;try{yield Ea(F,D)}catch(Nt){if(mt)return An.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${null===(X=Nt)||void 0===X?void 0:X.message}]`),{appId:Ue,measurementId:mt};throw Nt}try{const Nt=yield wa(C);return K.deleteThrottleMetadata(Ue),Nt}catch(Nt){const Dt=Nt;if(!Pu(Dt)){if(K.deleteThrottleMetadata(Ue),mt)return An.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${Dt?.message}]`),{appId:Ue,measurementId:mt};throw Nt}const rt=503===Number(null===(ye=Dt?.customData)||void 0===ye?void 0:ye.httpStatus)?(0,re.$s)(M,K.intervalMillis,30):(0,re.$s)(M,K.intervalMillis),Ht={throttleEndTimeMillis:Date.now()+rt,backoffCount:M+1};return K.setThrottleMetadata(Ue,Ht),An.debug(`Calling attemptFetch again in ${rt} millis`),Nu(C,Ht,F,K)}})).apply(this,arguments)}function Ea(C,D){return new Promise((M,F)=>{const K=Math.max(D-Date.now(),0),X=setTimeout(M,K);C.addEventListener(()=>{clearTimeout(X),F(ur.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Pu(C){if(!(C instanceof re.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class ku{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Ts,ba;function Ss(){return(Ss=(0,N.Z)(function*(C,D,M,F,K){if(K&&K.global)C("event",M,F);else{const X=yield D;C("event",M,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function io(C){ba=C}function tl(C){Ts=C}function ss(){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,N.Z)(function*(){var C;if(!(0,re.hl)())return An.warn(ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return An.warn(ur.create("indexeddb-unavailable",{errorInfo:null===(C=D)||void 0===C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function Fo(){return(Fo=(0,N.Z)(function*(C,D,M,F,K,X,ye){var Ue;const mt=On(C);mt.then(pn=>{M[pn.measurementId]=pn.appId,C.options.measurementId&&pn.measurementId!==C.options.measurementId&&An.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${pn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pn=>An.error(pn)),D.push(mt);const Nt=ss().then(pn=>{if(pn)return F.getId()}),[Dt,rt]=yield Promise.all([mt,Nt]);Ed(X)||Ru(X,Dt.measurementId),ba&&(K("consent","default",ba),io(void 0)),K("js",new Date);const Ht=null!==(Ue=ye?.config)&&void 0!==Ue?Ue:{};return Ht.origin="firebase",Ht.update=!0,null!=rt&&(Ht[vd]=rt),K("config",Dt.measurementId,Ht),Ts&&(K("set",Ts),tl(void 0)),Dt.measurementId})).apply(this,arguments)}class Vu{constructor(D){this.app=D}_delete(){return delete Zr[this.app.options.appId],Promise.resolve()}}let Zr={},As=[];const Lo={};let Uo,so,Vo="dataLayer",Ca=!1;function ky(C,D,M){!function lg(){const C=[];if((0,re.ru)()&&C.push("This is a browser extension environment."),(0,re.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((F,K)=>`(${K+1}) ${F}`).join(" "),M=ur.create("invalid-analytics-context",{errorInfo:D});An.warn(M.message)}}();const F=C.options.appId;if(!F)throw ur.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw ur.create("no-api-key");An.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zr[F])throw ur.create("already-exists",{id:F});if(!Ca){!function wd(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(Vo);const{wrappedGtag:X,gtagCore:ye}=function ma(C,D,M,F,K){let X=function(...ye){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(X=window[K]),window[K]=function Ou(C,D,M,F){function X(){return(X=(0,N.Z)(function*(ye,Ue,mt){try{"event"===ye?yield No(C,D,M,Ue,mt):"config"===ye?yield ff(C,D,M,F,Ue,mt):"consent"===ye?C("consent","update",mt):C("set",Ue)}catch(Nt){An.error(Nt)}})).apply(this,arguments)}return function K(ye,Ue,mt){return X.apply(this,arguments)}}(X,C,D,M),{gtagCore:X,wrappedGtag:window[K]}}(Zr,As,Lo,Vo,"gtag");so=X,Uo=ye,Ca=!0}return Zr[F]=function ko(C,D,M,F,K,X,ye){return Fo.apply(this,arguments)}(C,As,Lo,D,Uo,Vo,M),new Vu(C)}function Ly(){return pf.apply(this,arguments)}function pf(){return(pf=(0,N.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const Ye="@firebase/analytics";!function vn(){(0,ie._registerComponent)(new he.wA(Ro,(D,{options:M})=>ky(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ie._registerComponent)(new he.wA("analytics-internal",function C(D){try{const M=D.getProvider(Ro).getImmediate();return{logEvent:(F,K,X)=>function Zt(C,D,M,F){C=(0,re.m9)(C),function Cd(C,D,M,F,K){return Ss.apply(this,arguments)}(so,Zr[C.app.options.appId],D,M,F).catch(K=>An.error(K))}(M,F,K,X)}}catch(M){throw ur.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ie.registerVersion)(Ye,"0.8.4"),(0,ie.registerVersion)(Ye,"0.8.4","esm2017")}();var wi=P(233),Da=P(4986),Nn=P(8505),os=P(5363),Bu=P(9468);const gf=new h.GfV("7.4.1"),Ta="__angularfire_symbol__analyticsIsSupportedValue",oo="__angularfire_symbol__analyticsIsSupported",xs="__angularfire_symbol__remoteConfigIsSupportedValue",Ui="__angularfire_symbol__remoteConfigIsSupported",Ke="__angularfire_symbol__messagingIsSupportedValue",Sa="__angularfire_symbol__messagingIsSupported";function mf(C,D,M){if(D){if(1===D.length)return D[0];const X=D.filter(ye=>ye.app===M);if(1===X.length)return X[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[oo]||(globalThis[oo]=Ly().then(C=>globalThis[Ta]=C).catch(()=>globalThis[Ta]=!1)),globalThis[Sa]||(globalThis[Sa]=Kc().then(C=>globalThis[Ke]=C).catch(()=>globalThis[Ke]=!1)),globalThis[Ui]||(globalThis[Ui]=lu().then(C=>globalThis[xs]=C).catch(()=>globalThis[xs]=!1));const ju=(C,D)=>{const M=D?[D]:(0,ee.C6)(),F=[];return M.forEach(K=>{K.container.getProvider(C).instances.forEach(ye=>{F.includes(ye)||F.push(ye)})}),F};function Bo(){}class Aa{constructor(D,M=wi.N){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,F){const K=this.zone;return this.delegate.schedule(function(ye){K.runGuarded(()=>{D.apply(this,[ye])})},M,F)}}class xa{constructor(D){this.zone=D,this.task=null}call(D,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bo,{},Bo,Bo)),M.pipe((0,Nn.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ma=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Aa(Zone.current)),this.insideAngular=M.run(()=>new Aa(Zone.current,Da.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(h.LFG(h.R0b))},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Or(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function il(C){return C.pipe((0,os.Q)(Or().outsideAngular))}function Ei(C){return Or(),function Bi(C){return function(M){return(M=M.lift(new xa(C.ngZone))).pipe((0,Bu.R)(C.outsideAngular),(0,os.Q)(C.insideAngular))}}(Or())(C)}},2090:(ut,De,P)=>{P.d(De,{$s:()=>et,BH:()=>jt,G6:()=>be,L:()=>oe,LL:()=>Kt,Pz:()=>Xt,Sg:()=>We,UG:()=>Ie,US:()=>he,ZB:()=>$,ZR:()=>mn,aH:()=>gt,b$:()=>fe,eu:()=>je,hl:()=>Be,jU:()=>nt,m9:()=>Lt,ne:()=>Un,pd:()=>Oi,r3:()=>pi,ru:()=>ge,tV:()=>ae,uI:()=>Re,vZ:()=>Ze,w1:()=>ot,xO:()=>Zn,xb:()=>Jr,z$:()=>Fe,zI:()=>j,zd:()=>Xr});const ie=function(H){const V=[];let W=0;for(let we=0;we<H.length;we++){let Q=H.charCodeAt(we);Q<128?V[W++]=Q:Q<2048?(V[W++]=Q>>6|192,V[W++]=63&Q|128):55296==(64512&Q)&&we+1<H.length&&56320==(64512&H.charCodeAt(we+1))?(Q=65536+((1023&Q)<<10)+(1023&H.charCodeAt(++we)),V[W++]=Q>>18|240,V[W++]=Q>>12&63|128,V[W++]=Q>>6&63|128,V[W++]=63&Q|128):(V[W++]=Q>>12|224,V[W++]=Q>>6&63|128,V[W++]=63&Q|128)}return V},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,V){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let Q=0;Q<H.length;Q+=3){const He=H[Q],ht=Q+1<H.length,Qt=ht?H[Q+1]:0,dn=Q+2<H.length,qt=dn?H[Q+2]:0;let Bt=(15&Qt)<<2|qt>>6,sr=63&qt;dn||(sr=64,ht||(Bt=64)),we.push(W[He>>2],W[(3&He)<<4|Qt>>4],W[Bt],W[sr])}return we.join("")},encodeString(H,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(H):this.encodeByteArray(ie(H),V)},decodeString(H,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(H):function(H){const V=[];let W=0,we=0;for(;W<H.length;){const Q=H[W++];if(Q<128)V[we++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const He=H[W++];V[we++]=String.fromCharCode((31&Q)<<6|63&He)}else if(Q>239&&Q<365){const dn=((7&Q)<<18|(63&H[W++])<<12|(63&H[W++])<<6|63&H[W++])-65536;V[we++]=String.fromCharCode(55296+(dn>>10)),V[we++]=String.fromCharCode(56320+(1023&dn))}else{const He=H[W++],ht=H[W++];V[we++]=String.fromCharCode((15&Q)<<12|(63&He)<<6|63&ht)}}return V.join("")}(this.decodeStringToByteArray(H,V))},decodeStringToByteArray(H,V){this.init_();const W=V?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let Q=0;Q<H.length;){const He=W[H.charAt(Q++)],Qt=Q<H.length?W[H.charAt(Q)]:0;++Q;const qt=Q<H.length?W[H.charAt(Q)]:64;++Q;const $e=Q<H.length?W[H.charAt(Q)]:64;if(++Q,null==He||null==Qt||null==qt||null==$e)throw Error();we.push(He<<2|Qt>>4),64!==qt&&(we.push(Qt<<4&240|qt>>2),64!==$e&&we.push(qt<<6&192|$e))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},oe=function(H){return function(H){const V=ie(H);return he.encodeByteArray(V,!0)}(H).replace(/\./g,"")},ae=function(H){try{return he.decodeString(H,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function $(H,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return V}for(const W in V)!V.hasOwnProperty(W)||!Y(W)||(H[W]=$(H[W],V[W]));return H}function Y(H){return"__proto__"!==H}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function nt(){return"object"==typeof self&&self.self===self}function ge(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ot(){const H=Fe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function be(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){return"object"==typeof indexedDB}function je(){return new Promise((H,V)=>{try{let W=!0;const we="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(we);Q.onsuccess=()=>{Q.result.close(),W||self.indexedDB.deleteDatabase(we),H(!0)},Q.onupgradeneeded=()=>{W=!1},Q.onerror=()=>{var He;V((null===(He=Q.error)||void 0===He?void 0:He.message)||"")}}catch(W){V(W)}})}function j(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ne=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=H&&ae(H[1]);return V&&JSON.parse(V)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},gt=()=>{var H;return null===(H=ne())||void 0===H?void 0:H.config},Xt=H=>{var V;return null===(V=ne())||void 0===V?void 0:V[`_${H}`]};class jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,W)=>{this.resolve=V,this.reject=W})}wrapCallback(V){return(W,we)=>{W?this.reject(W):this.resolve(we),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(W):V(W,we))}}}function We(H,V){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=V||"demo-project",Q=H.iat||0,He=H.sub||H.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:Q,exp:Q+3600,auth_time:Q,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},H);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(ht)),""].join(".")}class mn extends Error{constructor(V,W,we){super(W),this.code=V,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}}class Kt{constructor(V,W,we){this.service=V,this.serviceName=W,this.errors=we}create(V,...W){const we=W[0]||{},Q=`${this.service}/${V}`,He=this.errors[V],ht=He?function Yt(H,V){return H.replace(vr,(W,we)=>{const Q=V[we];return null!=Q?String(Q):`<${we}?>`})}(He,we):"Error";return new mn(Q,`${this.serviceName}: ${ht} (${Q}).`,we)}}const vr=/\{\$([^}]+)}/g;function pi(H,V){return Object.prototype.hasOwnProperty.call(H,V)}function Jr(H){for(const V in H)if(Object.prototype.hasOwnProperty.call(H,V))return!1;return!0}function Ze(H,V){if(H===V)return!0;const W=Object.keys(H),we=Object.keys(V);for(const Q of W){if(!we.includes(Q))return!1;const He=H[Q],ht=V[Q];if(wr(He)&&wr(ht)){if(!Ze(He,ht))return!1}else if(He!==ht)return!1}for(const Q of we)if(!W.includes(Q))return!1;return!0}function wr(H){return null!==H&&"object"==typeof H}function Zn(H){const V=[];for(const[W,we]of Object.entries(H))Array.isArray(we)?we.forEach(Q=>{V.push(encodeURIComponent(W)+"="+encodeURIComponent(Q))}):V.push(encodeURIComponent(W)+"="+encodeURIComponent(we));return V.length?"&"+V.join("&"):""}function Xr(H){const V={};return H.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[Q,He]=we.split("=");V[decodeURIComponent(Q)]=decodeURIComponent(He)}}),V}function Oi(H){const V=H.indexOf("?");if(!V)return"";const W=H.indexOf("#",V);return H.substring(V,W>0?W:void 0)}function Un(H,V){const W=new hn(H,V);return W.subscribe.bind(W)}class hn{constructor(V,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{V(this)}).catch(we=>{this.error(we)})}next(V){this.forEachObserver(W=>{W.next(V)})}error(V){this.forEachObserver(W=>{W.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,W,we){let Q;if(void 0===V&&void 0===W&&void 0===we)throw new Error("Missing Observer.");Q=function ct(H,V){if("object"!=typeof H||null===H)return!1;for(const W of V)if(W in H&&"function"==typeof H[W])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:W,complete:we},void 0===Q.next&&(Q.next=rn),void 0===Q.error&&(Q.error=rn),void 0===Q.complete&&(Q.complete=rn);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),He}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,V)}sendOne(V,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{W(this.observers[V])}catch(we){typeof console<"u"&&console.error&&console.error(we)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rn(){}function et(H,V=1e3,W=2){const we=V*Math.pow(W,H),Q=Math.round(.5*we*(Math.random()-.5)*2);return Math.min(144e5,we+Q)}function Lt(H){return H&&H._delegate?H._delegate:H}},3030:(ut,De,P)=>{var h=P(4650);let ee=null;function N(){return ee}const ce=new h.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ae(){return(0,h.LFG)($)}()},providedIn:"platform"}),n})();const B=new h.OlP("Location Initialized");let $=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Y()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Y()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Fe(){return new $((0,h.LFG)(ce))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function nt(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Xe)},providedIn:"root"}),n})();const fe=new h.OlP("appBaseHref");let Xe=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+nt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const l=this.prepareExternalUrl(i+nt(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){const l=this.prepareExternalUrl(i+nt(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe),h.LFG(fe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ot=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let l=this.prepareExternalUrl(i+nt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){let l=this.prepareExternalUrl(i+nt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe),h.LFG(fe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(Be(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nt(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=nt,n.joinWithSlash=Re,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function _e(){return new Ae((0,h.LFG)(ge))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}const je={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var j=(()=>((j=j||{})[j.Decimal=0]="Decimal",j[j.Percent=1]="Percent",j[j.Currency=2]="Currency",j[j.Scientific=3]="Scientific",j))(),q=(()=>((q=q||{})[q.Format=0]="Format",q[q.Standalone=1]="Standalone",q))(),J=(()=>((J=J||{})[J.Narrow=0]="Narrow",J[J.Abbreviated=1]="Abbreviated",J[J.Wide=2]="Wide",J[J.Short=3]="Short",J))(),se=(()=>((se=se||{})[se.Short=0]="Short",se[se.Medium=1]="Medium",se[se.Long=2]="Long",se[se.Full=3]="Full",se))(),ne=(()=>((ne=ne||{})[ne.Decimal=0]="Decimal",ne[ne.Group=1]="Group",ne[ne.List=2]="List",ne[ne.PercentSign=3]="PercentSign",ne[ne.PlusSign=4]="PlusSign",ne[ne.MinusSign=5]="MinusSign",ne[ne.Exponential=6]="Exponential",ne[ne.SuperscriptingExponent=7]="SuperscriptingExponent",ne[ne.PerMille=8]="PerMille",ne[ne.Infinity=9]="Infinity",ne[ne.NaN=10]="NaN",ne[ne.TimeSeparator=11]="TimeSeparator",ne[ne.CurrencyDecimal=12]="CurrencyDecimal",ne[ne.CurrencyGroup=13]="CurrencyGroup",ne))();function Kt(n,e){return Ze((0,h.cg1)(n)[h.wAp.DateFormat],e)}function Yt(n,e){return Ze((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function vr(n,e){return Ze((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function kt(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ne.CurrencyDecimal)return t[h.wAp.NumberSymbols][ne.Decimal];if(e===ne.CurrencyGroup)return t[h.wAp.NumberSymbols][ne.Group]}return r}function pi(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ze(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function wr(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Oi=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Rn={},Un=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var hn=(()=>((hn=hn||{})[hn.Short=0]="Short",hn[hn.ShortGMT=1]="ShortGMT",hn[hn.Long=2]="Long",hn[hn.Extended=3]="Extended",hn))(),_t=(()=>((_t=_t||{})[_t.FullYear=0]="FullYear",_t[_t.Month=1]="Month",_t[_t.Date=2]="Date",_t[_t.Hours=3]="Hours",_t[_t.Minutes=4]="Minutes",_t[_t.Seconds=5]="Seconds",_t[_t.FractionalSeconds=6]="FractionalSeconds",_t[_t.Day=7]="Day",_t))(),ct=(()=>((ct=ct||{})[ct.DayPeriods=0]="DayPeriods",ct[ct.Days=1]="Days",ct[ct.Months=2]="Months",ct[ct.Eras=3]="Eras",ct))();function rn(n,e,t,r){let i=function He(n){if(Qt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,u=1,l=1]=n.split("-").map(m=>+m);return fr(i,u-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Oi))return function ht(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,m=Number(n[5]||0)-r,v=Number(n[6]||0),I=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,l,m,v,I),e}(r)}const e=new Date(n);if(!Qt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Bn(t,e)||e;let m,l=[];for(;e;){if(m=Un.exec(e),!m){l.push(e);break}{l=l.concat(m.slice(1));const T=l.pop();if(!T)break;e=T}}let v=i.getTimezoneOffset();r&&(v=W(r,v),i=function Q(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function we(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(W(e,i)-i))}(i,r,!0));let I="";return l.forEach(T=>{const x=function V(n){if(H[n])return H[n];let e;switch(n){case"G":case"GG":case"GGG":e=tn(ct.Eras,J.Abbreviated);break;case"GGGG":e=tn(ct.Eras,J.Wide);break;case"GGGGG":e=tn(ct.Eras,J.Narrow);break;case"y":e=en(_t.FullYear,1,0,!1,!0);break;case"yy":e=en(_t.FullYear,2,0,!0,!0);break;case"yyy":e=en(_t.FullYear,3,0,!1,!0);break;case"yyyy":e=en(_t.FullYear,4,0,!1,!0);break;case"Y":e=Lt(1);break;case"YY":e=Lt(2,!0);break;case"YYY":e=Lt(3);break;case"YYYY":e=Lt(4);break;case"M":case"L":e=en(_t.Month,1,1);break;case"MM":case"LL":e=en(_t.Month,2,1);break;case"MMM":e=tn(ct.Months,J.Abbreviated);break;case"MMMM":e=tn(ct.Months,J.Wide);break;case"MMMMM":e=tn(ct.Months,J.Narrow);break;case"LLL":e=tn(ct.Months,J.Abbreviated,q.Standalone);break;case"LLLL":e=tn(ct.Months,J.Wide,q.Standalone);break;case"LLLLL":e=tn(ct.Months,J.Narrow,q.Standalone);break;case"w":e=It(1);break;case"ww":e=It(2);break;case"W":e=It(1,!0);break;case"d":e=en(_t.Date,1);break;case"dd":e=en(_t.Date,2);break;case"c":case"cc":e=en(_t.Day,1);break;case"ccc":e=tn(ct.Days,J.Abbreviated,q.Standalone);break;case"cccc":e=tn(ct.Days,J.Wide,q.Standalone);break;case"ccccc":e=tn(ct.Days,J.Narrow,q.Standalone);break;case"cccccc":e=tn(ct.Days,J.Short,q.Standalone);break;case"E":case"EE":case"EEE":e=tn(ct.Days,J.Abbreviated);break;case"EEEE":e=tn(ct.Days,J.Wide);break;case"EEEEE":e=tn(ct.Days,J.Narrow);break;case"EEEEEE":e=tn(ct.Days,J.Short);break;case"a":case"aa":case"aaa":e=tn(ct.DayPeriods,J.Abbreviated);break;case"aaaa":e=tn(ct.DayPeriods,J.Wide);break;case"aaaaa":e=tn(ct.DayPeriods,J.Narrow);break;case"b":case"bb":case"bbb":e=tn(ct.DayPeriods,J.Abbreviated,q.Standalone,!0);break;case"bbbb":e=tn(ct.DayPeriods,J.Wide,q.Standalone,!0);break;case"bbbbb":e=tn(ct.DayPeriods,J.Narrow,q.Standalone,!0);break;case"B":case"BB":case"BBB":e=tn(ct.DayPeriods,J.Abbreviated,q.Format,!0);break;case"BBBB":e=tn(ct.DayPeriods,J.Wide,q.Format,!0);break;case"BBBBB":e=tn(ct.DayPeriods,J.Narrow,q.Format,!0);break;case"h":e=en(_t.Hours,1,-12);break;case"hh":e=en(_t.Hours,2,-12);break;case"H":e=en(_t.Hours,1);break;case"HH":e=en(_t.Hours,2);break;case"m":e=en(_t.Minutes,1);break;case"mm":e=en(_t.Minutes,2);break;case"s":e=en(_t.Seconds,1);break;case"ss":e=en(_t.Seconds,2);break;case"S":e=en(_t.FractionalSeconds,1);break;case"SS":e=en(_t.FractionalSeconds,2);break;case"SSS":e=en(_t.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=xr(hn.Short);break;case"ZZZZZ":e=xr(hn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=xr(hn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=xr(hn.Long);break;default:return null}return H[n]=e,e}(T);I+=x?x(i,t,v):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),I}function fr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Bn(n,e){const t=function Oe(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(Rn[t]=Rn[t]||{},Rn[t][e])return Rn[t][e];let r="";switch(e){case"shortDate":r=Kt(n,se.Short);break;case"mediumDate":r=Kt(n,se.Medium);break;case"longDate":r=Kt(n,se.Long);break;case"fullDate":r=Kt(n,se.Full);break;case"shortTime":r=Yt(n,se.Short);break;case"mediumTime":r=Yt(n,se.Medium);break;case"longTime":r=Yt(n,se.Long);break;case"fullTime":r=Yt(n,se.Full);break;case"short":const i=Bn(n,"shortTime"),u=Bn(n,"shortDate");r=Gr(vr(n,se.Short),[i,u]);break;case"medium":const l=Bn(n,"mediumTime"),m=Bn(n,"mediumDate");r=Gr(vr(n,se.Medium),[l,m]);break;case"long":const v=Bn(n,"longTime"),I=Bn(n,"longDate");r=Gr(vr(n,se.Long),[v,I]);break;case"full":const T=Bn(n,"fullTime"),x=Bn(n,"fullDate");r=Gr(vr(n,se.Full),[T,x])}return r&&(Rn[t][e]=r),r}function Gr(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function xt(n,e,t="-",r,i){let u="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,u=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),u+l}function en(n,e,t=0,r=!1,i=!1){return function(u,l){let m=function Ni(n,e){switch(n){case _t.FullYear:return e.getFullYear();case _t.Month:return e.getMonth();case _t.Date:return e.getDate();case _t.Hours:return e.getHours();case _t.Minutes:return e.getMinutes();case _t.Seconds:return e.getSeconds();case _t.FractionalSeconds:return e.getMilliseconds();case _t.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||m>-t)&&(m+=t),n===_t.Hours)0===m&&-12===t&&(m=12);else if(n===_t.FractionalSeconds)return function ys(n,e){return xt(n,3).substring(0,e)}(m,e);const v=kt(l,ne.MinusSign);return xt(m,e,v,r,i)}}function tn(n,e,t=q.Format,r=!1){return function(i,u){return function Kn(n,e,t,r,i,u){switch(t){case ct.Months:return function jt(n,e,t){const r=(0,h.cg1)(n),u=Ze([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return Ze(u,t)}(e,i,r)[n.getMonth()];case ct.Days:return function Xt(n,e,t){const r=(0,h.cg1)(n),u=Ze([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return Ze(u,t)}(e,i,r)[n.getDay()];case ct.DayPeriods:const l=n.getHours(),m=n.getMinutes();if(u){const I=function Qr(n){const e=(0,h.cg1)(n);return pi(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?wr(r):[wr(r[0]),wr(r[1])])}(e),T=function Jr(n,e,t){const r=(0,h.cg1)(n);pi(r);const u=Ze([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return Ze(u,t)||[]}(e,i,r),x=I.findIndex(L=>{if(Array.isArray(L)){const[U,Z]=L,Ce=l>=U.hours&&m>=U.minutes,Ee=l<Z.hours||l===Z.hours&&m<Z.minutes;if(U.hours<Z.hours){if(Ce&&Ee)return!0}else if(Ce||Ee)return!0}else if(L.hours===l&&L.minutes===m)return!0;return!1});if(-1!==x)return T[x]}return function gt(n,e,t){const r=(0,h.cg1)(n),u=Ze([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return Ze(u,t)}(e,i,r)[l<12?0:1];case ct.Eras:return function We(n,e){return Ze((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,u,n,e,t,r)}}function xr(n){return function(e,t,r){const i=-1*r,u=kt(t,ne.MinusSign),l=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case hn.Short:return(i>=0?"+":"")+xt(l,2,u)+xt(Math.abs(i%60),2,u);case hn.ShortGMT:return"GMT"+(i>=0?"+":"")+xt(l,1,u);case hn.Long:return"GMT"+(i>=0?"+":"")+xt(l,2,u)+":"+xt(Math.abs(i%60),2,u);case hn.Extended:return 0===r?"Z":(i>=0?"+":"")+xt(l,2,u)+":"+xt(Math.abs(i%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function bt(n){return fr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function It(n,e=!1){return function(t,r){let i;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();i=1+Math.floor((l+u)/7)}else{const u=bt(t),l=function et(n){const e=fr(n,0,1).getDay();return fr(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),m=u.getTime()-l.getTime();i=1+Math.round(m/6048e5)}return xt(i,n,kt(r,ne.MinusSign))}}function Lt(n,e=!1){return function(t,r){return xt(bt(t).getFullYear(),n,kt(r,ne.MinusSign),e)}}const H={};function W(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Qt(n){return n instanceof Date&&!isNaN(n.valueOf())}const dn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function _s(n,e,t,r,i){const l=function En(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],u=r[1],l=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],m=l[0],v=l[1]||"";t.posPre=m.substring(0,m.indexOf("#"));for(let T=0;T<v.length;T++){const x=v.charAt(T);"0"===x?t.minFrac=t.maxFrac=T+1:"#"===x?t.maxFrac=T+1:t.posSuf+=x}const I=m.split(",");if(t.gSize=I[1]?I[1].length:0,t.lgSize=I[2]||I[1]?(I[2]||I[1]).length:0,u){const T=i.length-t.posPre.length-t.posSuf.length,x=u.indexOf("#");t.negPre=u.substring(0,x).replace(/'/g,""),t.negSuf=u.slice(x+T).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function ln(n,e){return(0,h.cg1)(n)[h.wAp.NumberFormats][e]}(e,j.Currency),kt(e,ne.MinusSign));return l.minFrac=function Xr(n){let e;const t=je[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),l.maxFrac=l.minFrac,function yn(n,e,t,r,i,u,l=!1){let m="",v=!1;if(isFinite(n)){let I=function au(n){let r,i,u,l,m,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(i<0&&(i=u),i+=+e.slice(u+1),e=e.substring(0,u)):i<0&&(i=e.length),u=0;"0"===e.charAt(u);u++);if(u===(m=e.length))r=[0],i=1;else{for(m--;"0"===e.charAt(m);)m--;for(i-=u,r=[],l=0;u<=m;u++,l++)r[l]=Number(e.charAt(u))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(I=function qs(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(I));let T=e.minInt,x=e.minFrac,L=e.maxFrac;if(u){const yt=u.match(dn);if(null===yt)throw new Error(`${u} is not a valid digit info`);const lt=yt[1],at=yt[3],Tt=yt[5];null!=lt&&(T=jn(lt)),null!=at&&(x=jn(at)),null!=Tt?L=jn(Tt):null!=at&&x>L&&(L=x)}!function Pi(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const u=Math.min(Math.max(e,i),t);let l=u+n.integerLen,m=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let x=l;x<r.length;x++)r[x]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=u+1),r[0]=0;for(let x=1;x<l;x++)r[x]=0}if(m>=5)if(l-1<0){for(let x=0;x>l;x--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,u);i++)r.push(0);let v=0!==u;const I=e+n.integerLen,T=r.reduceRight(function(x,L,U,Z){return Z[U]=(L+=x)<10?L:L-10,v&&(0===Z[U]&&U>=I?Z.pop():v=!1),L>=10?1:0},0);T&&(r.unshift(T),n.integerLen++)}(I,x,L);let U=I.digits,Z=I.integerLen;const Ce=I.exponent;let Ee=[];for(v=U.every(yt=>!yt);Z<T;Z++)U.unshift(0);for(;Z<0;Z++)U.unshift(0);Z>0?Ee=U.splice(Z,U.length):(Ee=U,U=[0]);const Qe=[];for(U.length>=e.lgSize&&Qe.unshift(U.splice(-e.lgSize,U.length).join(""));U.length>e.gSize;)Qe.unshift(U.splice(-e.gSize,U.length).join(""));U.length&&Qe.unshift(U.join("")),m=Qe.join(kt(t,r)),Ee.length&&(m+=kt(t,i)+Ee.join("")),Ce&&(m+=kt(t,ne.Exponential)+"+"+Ce)}else m=kt(t,ne.Infinity);return m=n<0&&!v?e.negPre+m+e.negSuf:e.posPre+m+e.posSuf,m}(n,l,e,ne.CurrencyGroup,ne.CurrencyDecimal,i).replace("\xa4",t).replace("\xa4","").trim()}function jn(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function ia(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}let sn=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class sa{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gi=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new sa(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),Es(m,i)}});for(let i=0,u=r.length;i<u;i++){const m=r.get(i).context;m.index=i,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Es(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Es(n,e){n.context.$implicit=e.item}let Cn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Oc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){or("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){or("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Oc{constructor(){this.$implicit=null,this.ngIf=null}}function or(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let ad=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,u]=t.split("."),l=-1===i.indexOf("-")?void 0:h.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,u?`${r}${u}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.aQg),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();function Qn(n,e){return new h.vHH(2100,!1)}class ud{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class ig{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Qi=new ig,sg=new ud;let cu=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return Qi;if((0,h.F4k)(t))return sg;throw Qn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const ag=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let sf=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,u){if(null==t||""===t||t!=t)return null;try{return rn(t,r,u||this.locale,i??this.defaultTimezone??void 0)}catch(l){throw Qn()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(ag,24))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Fi=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",u,l){if(!function aa(n){return!(null==n||""===n||n!=n)}(t))return null;l=l||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let m=r||this._defaultCurrencyCode;"code"!==i&&(m="symbol"===i||"symbol-narrow"===i?function ms(n,e,t="en"){const r=function Hr(n){return(0,h.cg1)(n)[h.wAp.Currencies]}(t)[n]||je[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(m,"symbol"===i?"wide":"narrow",l):i);try{return _s(function du(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),l,m,r,u)}catch(v){throw Qn()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(h.EJc,16))},n.\u0275pipe=h.Yjl({name:"currency",type:n,pure:!0,standalone:!0}),n})();let ua=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function ar(n){return"server"===n}let hu=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new df((0,h.LFG)(ce),window)}),n})();class df{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Rr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ti(this.window.history)||ti(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ti(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Zs{}class Qs extends class gd extends class he{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new Qs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Tu(){return Js=Js||document.querySelector("base"),Js?Js.getAttribute("href"):null}();return null==t?null:function Wr(n){Jn=Jn||document.createElement("a"),Jn.setAttribute("href",n);const e=Jn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Js=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ia(document.cookie,e)}}let Jn,Js=null;const _n=new h.OlP("TRANSITION_ID"),Yc=[{provide:h.ip1,useFactory:function Kc(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[_n,ce,h.zs3],multi:!0}];let Qc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Su=new h.OlP("EventManagerPlugins");let yd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const l=i[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Su),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Au{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Xs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Mo=(()=>{class n extends Xs{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(_d),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(_d))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function _d(n){N().remove(n)}const Ro={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vd=/%COMP%/g;function Ru(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ru(n,i,t):(i=i.replace(vd,n),t.push(i))}return t}function wd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Oo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new No(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ed(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Id(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ru(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(yd),h.LFG(Mo),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class No{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ro[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ma(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ma(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Ro[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ro[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,wd(r)):this.eventManager.addEventListener(e,t,wd(r))}}function ma(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ed extends No{constructor(e,t,r,i){super(e),this.component=r;const u=Ru(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function An(n){return"_ngcontent-%COMP%".replace(vd,n)}(i+"-"+r.id),this.hostAttr=function Mu(n){return"_nghost-%COMP%".replace(vd,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Id extends No{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ru(i.id,i.styles,[]);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ur=(()=>{class n extends Au{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ya=["alt","control","meta","shift"],_a={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let va=(()=>{class n extends Au{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),ya.forEach(I=>{const T=r.indexOf(I);T>-1&&(r.splice(T,1),l+=I+".")}),l+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=i,v.fullKey=l,v}static matchEventFullKeyCode(t,r){let i=_a[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ya.forEach(l=>{l!==i&&(0,Vi[l])(t)&&(u+=l+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ku=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Nu(){Qs.makeCurrent()},multi:!0},{provide:ce,useFactory:function Ea(){return(0,h.RDi)(document),document},deps:[]}]),Ts=new h.OlP(""),Cd=[{provide:h.rWj,useClass:class md{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,l=!1;const m=function(v){l=l||v,u--,0==u&&r(l)};i.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Ss=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function no(){return new h.qLn},deps:[]},{provide:Su,useClass:ur,multi:!0,deps:[ce,h.R0b,h.Lbi]},{provide:Su,useClass:va,multi:!0,deps:[ce]},{provide:Oo,useClass:Oo,deps:[yd,Mo,h.AFp]},{provide:h.FYo,useExisting:Oo},{provide:Xs,useExisting:Mo},{provide:Mo,useClass:Mo,deps:[ce]},{provide:yd,useClass:yd,deps:[Su,h.R0b]},{provide:Zs,useClass:Qc,deps:[]},[]];let Xc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:_n,useExisting:h.AFp},Yc]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ts,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Ss,...Cd],imports:[ua,h.hGG]}),n})(),is=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Po(){return new is((0,h.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Zt=P(8996),vi=P(7669);function Ye(...n){const e=(0,vi.yG)(n);return(0,Zt.D)(n,e)}var Ir=P(7579);class vn extends Ir.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Da=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Nn=P(9751);const{isArray:os}=Array,{getPrototypeOf:Bu,prototype:gf,keys:Ta}=Object;function oo(n){if(1===n.length){const e=n[0];if(os(e))return{args:e,keys:null};if(function xs(n){return n&&"object"==typeof n&&Bu(n)===gf}(e)){const t=Ta(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ui=P(4671),Ke=P(4004);const{isArray:Sa}=Array;function Td(n){return(0,Ke.U)(e=>function Ms(n,e){return Sa(e)?n(...e):n(e)}(n,e))}function rl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Hn=P(5403),mf=P(9672);function ju(...n){const e=(0,vi.yG)(n),t=(0,vi.jO)(n),{args:r,keys:i}=oo(n);if(0===r.length)return(0,Zt.D)([],e);const u=new Nn.y(function Bo(n,e,t=Ui.y){return r=>{Aa(e,()=>{const{length:i}=n,u=new Array(i);let l=i,m=i;for(let v=0;v<i;v++)Aa(e,()=>{const I=(0,Zt.D)(n[v],e);let T=!1;I.subscribe((0,Hn.x)(r,x=>{u[v]=x,T||(T=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>rl(i,l):Ui.y));return t?u.pipe(Td(t)):u}function Aa(n,e,t){n?(0,mf.f)(t,n,e):e()}var xa=P(8189);function Or(...n){return function Ma(){return(0,xa.J)(1)}()((0,Zt.D)(n,(0,vi.yG)(n)))}var jo=P(8421);function gr(n){return new Nn.y(e=>{(0,jo.Xf)(n()).subscribe(e)})}var il=P(9635),Ra=P(576);function Ei(n,e){const t=(0,Ra.m)(n)?n:()=>n,r=i=>i.error(t());return new Nn.y(e?i=>e.schedule(r,0,i):r)}var Bi=P(515),$u=P(727),Xn=P(4482);function C(){return(0,Xn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Hn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class D extends Nn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Xn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $u.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Hn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$u.w0.EMPTY)}return e}refCount(){return C()(this)}}function M(n,e){return(0,Xn.e)((t,r)=>{let i=null,u=0,l=!1;const m=()=>l&&!i&&r.complete();t.subscribe((0,Hn.x)(r,v=>{i?.unsubscribe();let I=0;const T=u++;(0,jo.Xf)(n(v,T)).subscribe(i=(0,Hn.x)(r,x=>r.next(e?e(v,x,T,I++):x),()=>{i=null,m()}))},()=>{l=!0,m()}))})}function F(n){return n<=0?()=>Bi.E:(0,Xn.e)((e,t)=>{let r=0;e.subscribe((0,Hn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function K(...n){const e=(0,vi.yG)(n);return(0,Xn.e)((t,r)=>{(e?Or(n,t,e):Or(n,t)).subscribe(r)})}function X(n,e){return(0,Xn.e)((t,r)=>{let i=0;t.subscribe((0,Hn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var ye=P(5577);function Ue(n){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mt(n=Nt){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Nt(){return new Da}function Dt(n,e){const t=arguments.length>=2;return r=>r.pipe(n?X((i,u)=>n(i,u,r)):Ui.y,F(1),t?Ue(e):mt(()=>new Da))}function rt(n,e){return(0,Ra.m)(e)?(0,ye.z)(n,e,1):(0,ye.z)(n,1)}var Ht=P(8505);function pn(n){return(0,Xn.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Hn.x)(t,void 0,void 0,l=>{u=(0,jo.Xf)(n(l,pn(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Ii(n,e,t,r,i){return(u,l)=>{let m=t,v=e,I=0;u.subscribe((0,Hn.x)(l,T=>{const x=I++;v=m?n(v,T,x):(m=!0,T),r&&l.next(v)},i&&(()=>{m&&l.next(v),l.complete()})))}}function bi(n,e){return(0,Xn.e)(Ii(n,e,arguments.length>=2,!0))}function ji(n){return n<=0?()=>Bi.E:(0,Xn.e)((e,t)=>{let r=[];e.subscribe((0,Hn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Rs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?X((i,u)=>n(i,u,r)):Ui.y,ji(1),t?Ue(e):mt(()=>new Da))}function $i(n){return(0,Xn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Mt="primary",Ci=Symbol("RouteTitle");class Hu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ho(n){return new Hu(n)}function m0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))i[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Os(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!yf(n[i],e[i]))return!1;return!0}function yf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function fg(n){return Array.prototype.concat.apply([],n)}function pg(n){return n.length>0?n[n.length-1]:null}function er(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Hi(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Zt.D)(Promise.resolve(n)):Ye(n)}const y0={exact:function mg(n,e,t){if(!co(n.segments,e.segments)||!uo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!mg(n.children[r],e.children[r],t))return!1;return!0},subset:Oa},vf={exact:function wf(n,e){return Os(n,e)},subset:function yg(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yf(n[t],e[t]))},ignored:()=>!0};function jy(n,e,t){return y0[t.paths](n.root,e.root,t.matrixParams)&&vf[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Oa(n,e,t){return Sd(n,e,e.segments,t)}function Sd(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!co(i,t)||e.hasChildren()||!uo(i,t,r))}if(n.segments.length===t.length){if(!co(n.segments,t)||!uo(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Oa(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(co(n.segments,i)&&uo(n.segments,i,r)&&n.children[Mt])&&Sd(n.children[Mt],e,u,r)}}function uo(n,e,t){return e.every((r,i)=>vf[t](n[i].parameters,r.parameters))}class Na{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ho(this.queryParams)),this._queryParamMap}toString(){return Md.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,er(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rd(this)}}class Ad{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ho(this.parameters)),this._parameterMap}toString(){return wg(this)}}function co(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ef=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new xd},providedIn:"root"}),n})();class xd{parse(e){const t=new ka(e);return new Na(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Pa(e.root,!0)}`,r=function v0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ol(t)}=${ol(i)}`).join("&"):`${ol(t)}=${ol(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function $y(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Md=new xd;function Rd(n){return n.segments.map(e=>wg(e)).join("/")}function Pa(n,e){if(!n.hasChildren())return Rd(n);if(e){const t=n.children[Mt]?Pa(n.children[Mt],!1):"",r=[];return er(n.children,(i,u)=>{u!==Mt&&r.push(`${u}:${Pa(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function _g(n,e){let t=[];return er(n.children,(r,i)=>{i===Mt&&(t=t.concat(e(r,i)))}),er(n.children,(r,i)=>{i!==Mt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Mt?[Pa(n.children[Mt],!1)]:[`${i}:${Pa(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${Rd(n)}/${t[0]}`:`${Rd(n)}/(${t.join("//")})`}}function vg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ol(n){return vg(n).replace(/%3B/gi,";")}function Gi(n){return vg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Go(n){return decodeURIComponent(n)}function If(n){return Go(n.replace(/\+/g,"%20"))}function wg(n){return`${Gi(n.path)}${function _0(n){return Object.keys(n).map(e=>`;${Gi(e)}=${Gi(n[e])}`).join("")}(n.parameters)}`}const w0=/^[^\/()?;=#]+/;function bf(n){const e=n.match(w0);return e?e[0]:""}const Eg=/^[^=?&#]+/,Hy=/^[^&#]+/;class ka{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new Gt(e,t)),r}parseSegment(){const e=bf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Ad(Go(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=bf(this.remaining);i&&(r=i,this.capture(r))}e[Go(t)]=Go(r)}parseQueryParam(e){const t=function Ig(n){const e=n.match(Eg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function E0(n){const e=n.match(Hy);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=If(t),u=If(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=bf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Mt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Mt]:new Gt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function al(n){return n.segments.length>0?new Gt([],{[Mt]:n}):n}function zi(n){const e={};for(const r of Object.keys(n.children)){const u=zi(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Fa(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}function zo(n){return n instanceof Na}function b0(n,e,t,r,i){if(0===t.length)return ul(e.root,e.root,e.root,r,i);const u=function Cg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Cf(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return er(u.outlets,(v,I)=>{m[I]="string"==typeof v?v.split("/"):v}),[...i,{outlets:m}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===l?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&i.push(m))}),i):[...i,u]},[]);return new Cf(t,e,r)}(t);return u.toRoot()?ul(e.root,e.root,new Gt([],{}),r,i):function l(v){const I=function Df(n,e,t,r){if(n.isAbsolute)return new zu(e.root,!0,0);if(-1===r)return new zu(t,t===e.root,0);return function Tf(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new h.vHH(4005,!1);i=r.segments.length}return new zu(r,!1,i-u)}(t,r+(La(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),T=I.processChildren?ho(I.segmentGroup,I.index,u.commands):cl(I.segmentGroup,I.index,u.commands);return ul(e.root,I.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function La(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function lo(n){return"object"==typeof n&&null!=n&&n.outlets}function ul(n,e,t,r,i){let l,u={};r&&er(r,(v,I)=>{u[I]=Array.isArray(v)?v.map(T=>`${T}`):`${v}`}),l=n===e?t:zy(n,e,t);const m=al(zi(l));return new Na(m,u,i)}function zy(n,e,t){const r={};return er(n.children,(i,u)=>{r[u]=i===e?t:zy(i,e,t)}),new Gt(n.segments,r)}class Cf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&La(r[0]))throw new h.vHH(4003,!1);const i=r.find(lo);if(i&&i!==pg(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cl(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return ho(n,e,t);const r=function qy(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const l=n.segments[i],m=t[r];if(lo(m))break;const v=`${m}`,I=r<t.length-1?t[r+1]:null;if(i>0&&void 0===v)break;if(v&&I&&"object"==typeof I&&void 0===I.outlets){if(!Pd(v,I,l))return u;r+=2}else{if(!Pd(v,{},l))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Gt(n.segments.slice(0,r.pathIndex),{});return u.children[Mt]=new Gt(n.segments.slice(r.pathIndex),n.children),ho(u,0,i)}return r.match&&0===i.length?new Gt(n.segments,{}):r.match&&!n.hasChildren()?Pn(n,e,t):r.match?ho(n,0,i):Pn(n,e,t)}function ho(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const r=function Od(n){return lo(n[0])?n[0].outlets:{[Mt]:n}}(t),i={};return er(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[l]=cl(n.children[l],e,u))}),er(n.children,(u,l)=>{void 0===r[l]&&(i[l]=u)}),new Gt(n.segments,i)}}function Pn(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(lo(u)){const v=Nd(u.outlets);return new Gt(r,v)}if(0===i&&La(t[0])){r.push(new Ad(n.segments[e].path,Tg(t[0]))),i++;continue}const l=lo(u)?u.outlets[Mt]:`${u}`,m=i<t.length-1?t[i+1]:null;l&&m&&La(m)?(r.push(new Ad(l,Tg(m))),i+=2):(r.push(new Ad(l,{})),i++)}return new Gt(r,{})}function Nd(n){const e={};return er(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Pn(new Gt([],{}),0,t))}),e}function Tg(n){const e={};return er(n,(t,r)=>e[r]=`${t}`),e}function Pd(n,e,t){return n==t.path&&Os(e,t.parameters)}class Ns{constructor(e,t){this.id=e,this.url=t}}class kd extends Ns{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Va extends Ns{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fd extends Ns{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Sg extends Ns{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wy extends Ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ld extends Ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class C0 extends Ns{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qu extends Ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sf extends Ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Af{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ag{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xg{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mg{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vd{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ud{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ll{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Bd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=dl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=dl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Nr(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Nr(e,this._root).map(t=>t.value)}}function dl(n,e){if(n===e.value)return e;for(const t of e.children){const r=dl(n,t);if(r)return r}return null}function Nr(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Nr(n,t);if(r.length)return r.unshift(e),r}return[]}class ri{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Di(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Rg extends Bd{constructor(e,t){super(e),this.snapshot=t,fl(this,e)}toString(){return this.snapshot.toString()}}function Wu(n,e){const t=function Zu(n,e){const l=new br([],{},{},"",{},Mt,e,null,n.root,-1,{});return new $d("",new ri(l,[]))}(n,e),r=new vn([new Ad("",{})]),i=new vn({}),u=new vn({}),l=new vn({}),m=new vn(""),v=new Ua(r,i,l,m,u,Mt,e,t.root);return v.snapshot=t.root,new Rg(new ri(v,[]),t)}class Ua{constructor(e,t,r,i,u,l,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,Ke.U)(I=>I[Ci]))??Ye(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ke.U)(e=>Ho(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ke.U)(e=>Ho(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function jd(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class br{constructor(e,t,r,i,u,l,m,v,I,T,x,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.[Ci],this.routeConfig=v,this._urlSegment=I,this._lastPathIndex=T,this._correctedLastPathIndex=L??T,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ho(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ho(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $d extends Bd{constructor(e,t){super(t),this.url=e,fl(this,t)}toString(){return Og(this._root)}}function fl(n,e){e.value._routerState=n,e.children.forEach(t=>fl(n,t))}function Og(n){const e=n.children.length>0?` { ${n.children.map(Og).join(", ")} } `:"";return`${n.value}${e}`}function xf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Os(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Os(e.params,t.params)||n.params.next(t.params),function hg(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Os(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Os(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function pl(n,e){const t=Os(n.params,e.params)&&function sl(n,e){return co(n,e)&&n.every((t,r)=>Os(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||pl(n.parent,e.parent))}function Ba(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Mf(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ba(n,r,i);return Ba(n,r)})}(n,e,t);return new ri(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>Ba(n,m)),l}}const r=function Zy(n){return new Ua(new vn(n.url),new vn(n.params),new vn(n.queryParams),new vn(n.fragment),new vn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ba(n,u));return new ri(r,i)}}const as="ngNavigationCancelingError";function qo(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=zo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Rf(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Rf(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[as]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Hd(n){return Ng(n)&&zo(n.url)}function Ng(n){return n&&n[as]}class Gd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new zd,this.attachRef=null}}let zd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Gd,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qd=!1;let ja=(()=>{class n{constructor(t,r,i,u,l){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=i||Mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,qd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,qd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,qd);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,qd);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new Ky(t,m,i.injector);if(r&&function y(n){return!!n.resolveComponentFactory}(r)){const I=r.resolveComponentFactory(l);this.activated=i.createComponent(I,i.length,v)}else this.activated=i.createComponent(l,{index:i.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(zd),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Ky{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ua?this.route:e===zd?this.childContexts:this.parent.get(e,t)}}let f=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[ja],encapsulation:2}),n})();function g(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pt(n){const e=n.children&&n.children.map(pt),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=f),t}function an(n){return n.outlet||Mt}function ii(n,e){const t=n.filter(r=>an(r)===e);return t.push(...n.filter(r=>an(r)!==e)),t}function $a(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class gl{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),xf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Di(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,i[l],r),delete i[l]}),er(i,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Di(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Di(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Di(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Ud(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Mg(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(xf(i),i===u)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const m=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),xf(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=$a(i.snapshot),v=m?.get(h._Vd)??null;l.attachRef=null,l.route=i,l.resolver=v,l.injector=m,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Pg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Wd{constructor(e,t){this.component=e,this.route=t}}function kg(n,e,t){const r=n._root;return Ha(r,e?e._root:null,t,[r.value])}function Ku(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Ha(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Di(e);return n.children.forEach(l=>{(function Of(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const v=function Nf(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!co(n.url,e.url);case"pathParamsOrQueryParamsChange":return!co(n.url,e.url)||!Os(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pl(n,e)||!Os(n.queryParams,e.queryParams);default:return!pl(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);v?i.canActivateChecks.push(new Pg(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Ha(n,e,u.component?m?m.children:null:t,r,i),v&&m&&m.outlet&&m.outlet.isActivated&&i.canDeactivateChecks.push(new Wd(m.outlet.component,l))}else l&&Wo(e,m,i),i.canActivateChecks.push(new Pg(r)),Ha(n,null,u.component?m?m.children:null:t,r,i)})(l,u[l.value.outlet],t,r.concat([l.value]),i),delete u[l.value.outlet]}),er(u,(l,m)=>Wo(l,t.getContext(m),i)),i}function Wo(n,e,t){const r=Di(n),i=n.value;er(r,(u,l)=>{Wo(u,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Wd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Yu(n){return"function"==typeof n}function Fg(n){return n instanceof Da||"EmptyError"===n?.name}const Lg=Symbol("INITIAL_VALUE");function Zd(){return M(n=>ju(n.map(e=>e.pipe(F(1),K(Lg)))).pipe((0,Ke.U)(e=>{for(const t of e)if(!0!==t){if(t===Lg)return Lg;if(!1===t||t instanceof Na)return t}return!0}),X(e=>e!==Lg),F(1)))}function si(n){return(0,il.z)((0,Ht.b)(e=>{if(zo(e))throw qo(0,e)}),(0,Ke.U)(e=>!0===e))}const Vg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ug(n,e,t,r,i){const u=Pr(n,e,t);return u.matched?function t_(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ye(i.map(l=>{const m=Ku(l,n);return Hi(function fC(n){return n&&Yu(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(Zd(),si()):Ye(!0)}(r=g(e,r),e,t).pipe((0,Ke.U)(l=>!0===l?u:{...Vg})):Ye(u)}function Pr(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Vg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||m0)(t,n,e);if(!i)return{...Vg};const u={};er(i.posParams,(m,v)=>{u[v]=m.path});const l=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Qu(n,e,t,r,i="corrected"){if(t.length>0&&function bC(n,e,t){return t.some(r=>Bg(n,e,r)&&an(r)!==Mt)}(n,t,r)){const l=new Gt(e,function IC(n,e,t,r){const i={};i[Mt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&an(u)!==Mt){const l=new Gt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[an(u)]=l}return i}(n,e,r,new Gt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function x0(n,e,t){return t.some(r=>Bg(n,e,r))}(n,t,r)){const l=new Gt(n.segments,function A0(n,e,t,r,i,u){const l={};for(const m of r)if(Bg(n,t,m)&&!i[an(m)]){const v=new Gt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[an(m)]=v}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new Gt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Bg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function n_(n,e,t,r){return!!(an(n)===r||r!==Mt&&Bg(e,t,n))&&("**"===n.path||Pr(e,n,t).matched)}function M0(n,e,t){return 0===e.length&&!n.children[t]}const kf=!1;class jg{constructor(e){this.segmentGroup=e||null}}class R0{constructor(e){this.urlTree=e}}function Ff(n){return Ei(new jg(n))}function O0(n){return Ei(new R0(n))}class DC{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=Qu(this.urlTree.root,[],[],this.config).segmentGroup,t=new Gt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Mt).pipe((0,Ke.U)(u=>this.createUrlTree(zi(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(pn(u=>{if(u instanceof R0)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof jg?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Mt).pipe((0,Ke.U)(i=>this.createUrlTree(zi(i),e.queryParams,e.fragment))).pipe(pn(i=>{throw i instanceof jg?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,kf)}createUrlTree(e,t,r){const i=al(e);return new Na(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ke.U)(u=>new Gt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Zt.D)(i).pipe(rt(u=>{const l=r.children[u],m=ii(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,Ke.U)(v=>({segment:v,outlet:u})))}),bi((u,l)=>(u[l.outlet]=l.segment,u),{}),Rs())}expandSegment(e,t,r,i,u,l){return(0,Zt.D)(r).pipe(rt(m=>this.expandSegmentAgainstRoute(e,t,r,m,i,u,l).pipe(pn(I=>{if(I instanceof jg)return Ye(null);throw I}))),Dt(m=>!!m),pn((m,v)=>{if(Fg(m))return M0(t,i,u)?Ye(new Gt([],{})):Ff(t);throw m}))}expandSegmentAgainstRoute(e,t,r,i,u,l,m){return n_(i,t,u,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l):Ff(t):Ff(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?O0(u):this.lineralizeSegments(r,u).pipe((0,ye.z)(l=>{const m=new Gt(l,{});return this.expandSegment(e,m,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){const{matched:m,consumedSegments:v,remainingSegments:I,positionalParamSegments:T}=Pr(t,i,u);if(!m)return Ff(t);const x=this.applyRedirectCommands(v,i.redirectTo,T);return i.redirectTo.startsWith("/")?O0(x):this.lineralizeSegments(i,x).pipe((0,ye.z)(L=>this.expandSegment(e,t,r,L.concat(I),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=g(r,e),r.loadChildren?(r._loadedRoutes?Ye({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Ke.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Gt(i,{})))):Ye(new Gt(i,{}))):Ug(t,r,i,e).pipe(M(({matched:l,consumedSegments:m,remainingSegments:v})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,ye.z)(T=>{const x=T.injector??e,L=T.routes,{segmentGroup:U,slicedSegments:Z}=Qu(t,m,v,L),Ce=new Gt(U.segments,U.children);if(0===Z.length&&Ce.hasChildren())return this.expandChildren(x,L,Ce).pipe((0,Ke.U)(lt=>new Gt(m,lt)));if(0===L.length&&0===Z.length)return Ye(new Gt(m,{}));const Ee=an(r)===u;return this.expandSegment(x,Ce,L,Z,Ee?Mt:u,!0).pipe((0,Ke.U)(yt=>new Gt(m.concat(yt.segments),yt.children)))})):Ff(t)))}getChildConfig(e,t,r){return t.children?Ye({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ye({routes:t._loadedRoutes,injector:t._loadedInjector}):function EC(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ye(!0):Ye(i.map(l=>{const m=Ku(l,n);return Hi(function Jy(n){return n&&Yu(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(Zd(),si())}(e,t,r).pipe((0,ye.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ht.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Kd(n){return Ei(Rf(kf,3))}())):Ye({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ye(r);if(i.numberOfChildren>1||!i.children[Mt])return Ei(new h.vHH(4e3,kf));i=i.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Na(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return er(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const m=i.substring(1);r[u]=t[m]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let l={};return er(t.children,(m,v)=>{l[v]=this.createSegmentGroup(e,m,r,i)}),new Gt(u,l)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,kf);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Yx{}class Zo{constructor(e,t,r,i,u,l,m,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=m,this.urlSerializer=v}recognize(){const e=Qu(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Mt).pipe((0,Ke.U)(t=>{if(null===t)return null;const r=new br([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ri(r,t),u=new $d(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=hl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Zt.D)(Object.keys(r.children)).pipe(rt(i=>{const u=r.children[i],l=ii(t,i);return this.processSegmentGroup(e,l,u,i)}),bi((i,u)=>i&&u?(i.push(...u),i):null),function $o(n,e=!1){return(0,Xn.e)((t,r)=>{let i=0;t.subscribe((0,Hn.x)(r,u=>{const l=n(u,i++);(l||e)&&r.next(u),!l&&r.complete()}))})}(i=>null!==i),Ue(null),Rs(),(0,Ke.U)(i=>{if(null===i)return null;const u=o_(i);return function i_(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,Zt.D)(t).pipe(rt(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,u)),Dt(l=>!!l),pn(l=>{if(Fg(l))return M0(r,i,u)?Ye([]):Ye(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!n_(t,r,i,u))return Ye(null);let l;if("**"===t.path){const m=i.length>0?pg(i).parameters:{},v=P0(r)+i.length;l=Ye({snapshot:new br(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$g(t),an(t),t.component??t._loadedComponent??null,t,Yd(r),v,Hg(t),v),consumedSegments:[],remainingSegments:[]})}else l=Ug(r,t,i,e).pipe((0,Ke.U)(({matched:m,consumedSegments:v,remainingSegments:I,parameters:T})=>{if(!m)return null;const x=P0(r)+v.length;return{snapshot:new br(v,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$g(t),an(t),t.component??t._loadedComponent??null,t,Yd(r),x,Hg(t),x),consumedSegments:v,remainingSegments:I}}));return l.pipe(M(m=>{if(null===m)return Ye(null);const{snapshot:v,consumedSegments:I,remainingSegments:T}=m;e=t._injector??e;const x=t._loadedInjector??e,L=function s_(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:Z}=Qu(r,I,T,L.filter(Ee=>void 0===Ee.redirectTo),this.relativeLinkResolution);if(0===Z.length&&U.hasChildren())return this.processChildren(x,L,U).pipe((0,Ke.U)(Ee=>null===Ee?null:[new ri(v,Ee)]));if(0===L.length&&0===Z.length)return Ye([new ri(v,[])]);const Ce=an(t)===u;return this.processSegment(x,L,U,Z,Ce?Mt:u).pipe((0,Ke.U)(Ee=>null===Ee?null:[new ri(v,Ee)]))}))}}function SC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function o_(n){const e=[],t=new Set;for(const r of n){if(!SC(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=o_(r.children);e.push(new ri(r.value,i))}return e.filter(r=>!t.has(r))}function Yd(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function P0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function $g(n){return n.data||{}}function Hg(n){return n.resolve||{}}function Gg(n){return"string"==typeof n.title||null===n.title}function u_(n){return M(e=>{const t=n(e);return t?(0,Zt.D)(t).pipe((0,Ke.U)(()=>e)):Ye(e)})}let V0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Mt);return r}getResolvedTitleForRoute(t){return t.data[Ci]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(U0)},providedIn:"root"}),n})(),U0=(()=>{class n extends V0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(is))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class MC{}class B0 extends class RC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Lf=new h.OlP("",{providedIn:"root",factory:()=>({})}),l_=new h.OlP("ROUTES");let d_=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ye(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Hi(t.loadComponent()).pipe((0,Ht.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),$i(()=>{this.componentLoaders.delete(t)})),i=new D(r,()=>new Ir.x).pipe(C());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ye({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ke.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,I,T=!1;Array.isArray(m)?I=m:(v=m.create(t).injector,I=fg(v.get(l_,[],h.XFs.Self|h.XFs.Optional)));return{routes:I.map(pt),injector:v}}),$i(()=>{this.childrenLoaders.delete(r)})),l=new D(u,()=>new Ir.x).pipe(C());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Hi(t()).pipe((0,ye.z)(r=>r instanceof h.YKP||Array.isArray(r)?Ye(r):(0,Zt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class j0{}class $0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function H0(n){throw n}function G0(n,e,t){return e.parse("/")}const OC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function z0(){const n=(0,h.f3M)(Ef),e=(0,h.f3M)(zd),t=(0,h.f3M)(Ae),r=(0,h.f3M)(h.zs3),i=(0,h.f3M)(h.Sil),u=(0,h.f3M)(l_,{optional:!0})??[],l=(0,h.f3M)(Lf,{optional:!0})??{},m=(0,h.f3M)(U0),v=(0,h.f3M)(V0,{optional:!0}),I=(0,h.f3M)(j0,{optional:!0}),T=(0,h.f3M)(MC,{optional:!0}),x=new kr(null,n,e,t,r,i,fg(u));return I&&(x.urlHandlingStrategy=I),T&&(x.routeReuseStrategy=T),x.titleStrategy=v??m,function qg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,x),x}let kr=(()=>{class n{constructor(t,r,i,u,l,m,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ir.x,this.errorHandler=H0,this.malformedUriErrorHandler=G0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ye(void 0),this.urlHandlingStrategy=new $0,this.routeReuseStrategy=new B0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(d_),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new Ag(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new Af(L)),this.ngModule=l.get(h.h0i),this.console=l.get(h.c2e);const x=l.get(h.R0b);this.isNgZoneEnabled=x instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function gg(){return new Na(new Gt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Wu(this.currentUrlTree,this.rootComponentType),this.transitions=new vn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(X(i=>0!==i.id),(0,Ke.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),M(i=>{let u=!1,l=!1;return Ye(i).pipe((0,Ht.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),M(m=>{const v=this.browserUrlTree.toString(),I=!this.navigated||m.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return h_(m.source)&&(this.browserUrlTree=m.extractedUrl),Ye(m).pipe(M(x=>{const L=this.transitions.getValue();return r.next(new kd(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),L!==this.transitions.getValue()?Bi.E:Promise.resolve(x)}),function TC(n,e,t,r){return M(i=>function Ga(n,e,t,r,i){return new DC(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ke.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ht.b)(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},i.urlAfterRedirects=x.urlAfterRedirects}),function F0(n,e,t,r,i,u){return(0,ye.z)(l=>function Qx(n,e,t,r,i,u,l="emptyOnly",m="legacy"){return new Zo(n,e,t,r,i,l,m,u).recognize().pipe(M(v=>null===v?function N0(n){return new Nn.y(e=>e.error(n))}(new Yx):Ye(v)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,u).pipe((0,Ke.U)(m=>({...l,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ht.b)(x=>{if(i.targetSnapshot=x.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(U,x)}this.browserUrlTree=x.urlAfterRedirects}const L=new Wy(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(L)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:U,source:Z,restoredState:Ce,extras:Ee}=m,Qe=new kd(L,this.serializeUrl(U),Z,Ce);r.next(Qe);const yt=Wu(U,this.rootComponentType).snapshot;return Ye(i={...m,targetSnapshot:yt,urlAfterRedirects:U,extras:{...Ee,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Bi.E}),(0,Ht.b)(m=>{const v=new Ld(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),(0,Ke.U)(m=>i={...m,guards:kg(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function gC(n,e){return(0,ye.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?Ye({...t,guardsResult:!0}):function mC(n,e,t,r){return(0,Zt.D)(n).pipe((0,ye.z)(i=>function wC(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Ye(u.map(m=>{const v=$a(e)??i,I=Ku(m,v);return Hi(function Pf(n){return n&&Yu(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):v.runInContext(()=>I(n,e,t,r))).pipe(Dt())})).pipe(Zd()):Ye(!0)}(i.component,i.route,t,e,r)),Dt(i=>!0!==i,!0))}(l,r,i,n).pipe((0,ye.z)(m=>m&&function T0(n){return"boolean"==typeof n}(m)?function e_(n,e,t,r){return(0,Zt.D)(e).pipe(rt(i=>Or(function _C(n,e){return null!==n&&e&&e(new xg(n)),Ye(!0)}(i.route.parent,r),function yC(n,e){return null!==n&&e&&e(new Vd(n)),Ye(!0)}(i.route,r),function S0(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function Qy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>gr(()=>Ye(l.guards.map(v=>{const I=$a(l.node)??t,T=Ku(v,I);return Hi(function Xy(n){return n&&Yu(n.canActivateChild)}(T)?T.canActivateChild(r,n):I.runInContext(()=>T(r,n))).pipe(Dt())})).pipe(Zd())));return Ye(u).pipe(Zd())}(n,i.path,t),function vC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ye(!0);const i=r.map(u=>gr(()=>{const l=$a(e)??t,m=Ku(u,l);return Hi(function hC(n){return n&&Yu(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Dt())}));return Ye(i).pipe(Zd())}(n,i.route,t))),Dt(i=>!0!==i,!0))}(r,u,n,e):Ye(m)),(0,Ke.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Ht.b)(m=>{if(i.guardsResult=m.guardsResult,zo(m.guardsResult))throw qo(0,m.guardsResult);const v=new C0(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(v)}),X(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),u_(m=>{if(m.guards.canActivateChecks.length)return Ye(m).pipe((0,Ht.b)(v=>{const I=new qu(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}),M(v=>{let I=!1;return Ye(v).pipe(function Jx(n,e){return(0,ye.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ye(t);let u=0;return(0,Zt.D)(i).pipe(rt(l=>function Qd(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!Gg(i)&&(u[Ci]=i.title),function a_(n,e,t,r){const i=function L0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ye({});const u={};return(0,Zt.D)(i).pipe((0,ye.z)(l=>function xC(n,e,t,r){const i=$a(e)??r,u=Ku(n,i);return Hi(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Dt(),(0,Ht.b)(m=>{u[l]=m}))),ji(1),function ao(n){return(0,Ke.U)(()=>n)}(u),pn(l=>Fg(l)?Bi.E:Ei(l)))}(u,n,e,r).pipe((0,Ke.U)(l=>(n._resolvedData=l,n.data=hl(n,t).resolve,i&&Gg(i)&&(n.data[Ci]=i.title),null)))}(l.route,r,n,e)),(0,Ht.b)(()=>u++),ji(1),(0,ye.z)(l=>u===i.length?Ye(t):Bi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ht.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,Ht.b)(v=>{const I=new Sf(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}))}),u_(m=>{const v=I=>{const T=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,Ht.b)(x=>{I.component=x}),(0,Ke.U)(()=>{})));for(const x of I.children)T.push(...v(x));return T};return ju(v(m.targetSnapshot.root)).pipe(Ue(),F(1))}),u_(()=>this.afterPreactivation()),(0,Ke.U)(m=>{const v=function lr(n,e,t){const r=Ba(n,e._root,t?t._root:void 0);return new Rg(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return i={...m,targetRouterState:v}}),(0,Ht.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Ke.U)(r=>(new gl(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Ht.b)({next(){u=!0},complete(){u=!0}}),$i(()=>{u||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),pn(m=>{if(l=!0,Ng(m)){Hd(m)||(this.navigated=!0,this.restoreHistory(i,!0));const v=new Fd(i.id,this.serializeUrl(i.extractedUrl),m.message,m.cancellationCode);if(r.next(v),Hd(m)){const I=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||h_(i.source)};this.scheduleNavigation(I,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const v=new Sg(i.id,this.serializeUrl(i.extractedUrl),m,i.targetSnapshot??void 0);r.next(v);try{i.resolve(this.errorHandler(m))}catch(I){i.reject(I)}}return Bi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(i.state=m)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(pt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:v}=r,I=i||this.routerState.root,T=v?this.currentUrlTree.fragment:l;let x=null;switch(m){case"merge":x={...this.currentUrlTree.queryParams,...u};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),b0(I,this.currentUrlTree,t,x,T??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=zo(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function q0(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...OC}:!1===r?{...eM}:r,zo(t))return jy(this.currentUrlTree,t,i);const u=this.parseUrl(t);return jy(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Va(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,l){if(this.disposed)return Promise.resolve(!1);let m,v,I;l?(m=l.resolve,v=l.reject,I=l.promise):I=new Promise((L,U)=>{m=L,v=U});const T=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:T,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:v,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new Fd(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return z0()},providedIn:"root"}),n})();function h_(n){return"imperative"!==n}let Jd=(()=>{class n{constructor(t,r,i,u,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Ir.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(kr),h.Y36(Ua),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),Wg=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Ir.x,this.subscription=t.events.subscribe(u=>{u instanceof Va&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,l){return!!(0!==t||r||i||u||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(kr),h.Y36(Ua),h.Y36(ge))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),Vf=(()=>{class n{constructor(t,r,i,u,l,m){this.router=t,this.element=r,this.renderer=i,this.cdr=u,this.link=l,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(v=>{v instanceof Va&&this.update()})}ngAfterContentInit(){Ye(this.links.changes,this.linksWithHrefs.changes,Ye(null)).pipe((0,xa.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Zt.D)(t).pipe((0,xa.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Zg(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(kr),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(Jd,8),h.Y36(Wg,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(h.Suo(i,Jd,5),h.Suo(i,Wg,5)),2&t){let u;h.iGM(u=h.CRH())&&(r.links=u),h.iGM(u=h.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[h.TTD]}),n})();class f_{}let p_=(()=>{class n{constructor(t,r,i,u,l){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(X(t=>t instanceof Va),rt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Zt.D)(i).pipe((0,xa.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ye(null);const u=i.pipe((0,ye.z)(l=>null===l?Ye(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Zt.D)([u,l]).pipe((0,xa.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(kr),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(f_),h.LFG(d_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ml=new h.OlP("");let Z0=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof kd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Va&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ll&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ll(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function yl(n,e){return{\u0275kind:n,\u0275providers:e}}function Bf(n){return[{provide:l_,multi:!0,useValue:n}]}function kC(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(kr),i=n.get(g_);1===n.get(m_)&&r.initialNavigation(),n.get(Ps,null,h.XFs.Optional)?.setUpPreloading(),n.get(ml,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const g_=new h.OlP("",{factory:()=>new Ir.x}),m_=new h.OlP("",{providedIn:"root",factory:()=>1});const Ps=new h.OlP("");function VC(n){return yl(0,[{provide:Ps,useExisting:p_},{provide:f_,useExisting:n}])}const Q0=new h.OlP("ROUTER_FORROOT_GUARD"),BC=[Ae,{provide:Ef,useClass:xd},{provide:kr,useFactory:z0},zd,{provide:Ua,useFactory:function K0(n){return n.routerState.root},deps:[kr]},d_];function J0(){return new h.PXZ("Router",kr)}let X0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[BC,[],Bf(t),{provide:Q0,useFactory:eE,deps:[[kr,new h.FiY,new h.tp0]]},{provide:Lf,useValue:r||{}},r?.useHash?{provide:ge,useClass:ot}:{provide:ge,useClass:Xe},{provide:ml,useFactory:()=>{const n=(0,h.f3M)(kr),e=(0,h.f3M)(hu),t=(0,h.f3M)(Lf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Z0(n,e,t)}},r?.preloadingStrategy?VC(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:J0},r?.initialNavigation?tE(r):[],[{provide:y_,useFactory:kC},{provide:h.tb,multi:!0,useExisting:y_}]]}}static forChild(t){return{ngModule:n,providers:[Bf(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Q0,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[f]}),n})();function eE(n){return"guarded"}function tE(n){return["disabled"===n.initialNavigation?yl(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(kr);return()=>{e.setUpLocationChangeListener()}}},{provide:m_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?yl(2,[{provide:m_,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const l=e.get(kr),m=e.get(g_);(function i(u){e.get(kr).events.pipe(X(m=>m instanceof Va||m instanceof Fd||m instanceof Sg),(0,Ke.U)(m=>m instanceof Va||m instanceof Fd&&(0===m.code||1===m.code)&&null),X(m=>null!==m),F(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),l.afterPreactivation=()=>(u(!0),r||m.closed?Ye(void 0):m),l.initialNavigation()}))}}]).\u0275providers:[]]}const y_=new h.OlP("");var kn=P(655),GC=P(6063);class __ extends Ir.x{constructor(e=1/0,t=1/0,r=GC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!i&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const l=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=l;v+=2)m=v;m&&r.splice(0,m+1)}}}let v_=(()=>{class n{constructor(){this.bootstrap$=new __(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function sM(n,e){return n===e}function nE(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const r=e.length;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}const za=new h.OlP("INITIAL_STATE_TOKEN");let zC=(()=>{class n{static set(t){this.value=t}static pop(){const t=this.value;return this.value={},t}}return n.value={},n})();const w_=new h.OlP("Internals.StateContextFactory"),E_=new h.OlP("Internals.StateFactory");function I_(...n){const e=(0,vi.jO)(n),{args:t,keys:r}=oo(n),i=new Nn.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let v=l,I=l;for(let T=0;T<l;T++){let x=!1;(0,jo.Xf)(t[T]).subscribe((0,Hn.x)(u,L=>{x||(x=!0,I--),m[T]=L},()=>v--,void 0,()=>{(!v||!x)&&(I||u.next(r?rl(r,m):m),u.complete())}))}});return e?i.pipe(Td(e)):i}var oM=P(233),aM=P(3099);function Xd(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,aM.B)({connector:()=>new __(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function iE(n,e){return e?t=>t.pipe(iE((r,i)=>(0,jo.Xf)(n(r,i)).pipe((0,Ke.U)((u,l)=>e(r,u,i,l))))):(0,Xn.e)((t,r)=>{let i=0,u=null,l=!1;t.subscribe((0,Hn.x)(r,m=>{u||(u=(0,Hn.x)(r,void 0,()=>{u=null,l&&r.complete()}),(0,jo.Xf)(n(m,i++)).subscribe(u))},()=>{l=!0,!u&&r.complete()}))})}var sE=P(5032);function uM(n){return(0,Xn.e)((e,t)=>{(0,jo.Xf)(n).subscribe((0,Hn.x)(t,()=>t.complete(),sE.Z)),!t.closed&&e.subscribe(t)})}var jf=P(5363);function _l(n,e=Ui.y){return n=n??qC,(0,Xn.e)((t,r)=>{let i,u=!0;t.subscribe((0,Hn.x)(r,l=>{const m=e(l);(u||!n(i,m))&&(u=!1,i=m,r.next(l))}))})}function qC(n,e){return n===e}class fo{constructor(e,t){this._ngZone=e,this._platformId=t}enter(e){return ar(this._platformId)?this.runInsideAngular(e):this.runOutsideAngular(e)}leave(e){return this.runInsideAngular(e)}runInsideAngular(e){return h.R0b.isInAngularZone()?e():this._ngZone.run(e)}runOutsideAngular(e){return h.R0b.isInAngularZone()?this._ngZone.runOutsideAngular(e):e()}}fo.\u0275fac=function(e){return new(e||fo)(h.LFG(h.R0b),h.LFG(h.Lbi))},fo.\u0275prov=h.Yz7({token:fo,factory:fo.\u0275fac,providedIn:"root"}),fo.ngInjectableDef=(0,h.Ez6)({factory:function(){return new fo((0,h.f3M)(h.R0b),(0,h.f3M)(h.Lbi))},token:fo,providedIn:"root"});const Qg=new h.OlP("ROOT_STATE_TOKEN"),XC=new h.OlP("FEATURE_STATE_TOKEN"),b_=new h.OlP("NGXS_PLUGINS"),qa="NGXS_META",eD="NGXS_OPTIONS_META";let vl=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=fo}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class cE{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}}class po{enter(e){return e()}leave(e){return e()}}po.\u0275fac=function(e){return new(e||po)},po.\u0275prov=h.Yz7({token:po,factory:po.\u0275fac,providedIn:"root"}),po.ngInjectableDef=(0,h.Ez6)({factory:function(){return new po},token:po,providedIn:"root"});const D_=new h.OlP("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),T_=new h.OlP("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const n=(0,h.f3M)(h.gxx),e=n.get(D_);return n.get(e||(typeof h.dqk.Zone<"u"?fo:po))}});function eh(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const $f=(n,e,t)=>{n=Object.assign({},n);const r=e.split("."),i=r.length-1;return r.reduce((u,l,m)=>(u[l]=m===i?t:Array.isArray(u[l])?u[l].slice():Object.assign({},u[l]),u&&u[l]),n),n},wl=(n,e)=>e.split(".").reduce((t,r)=>t&&t[r],n),Hf=n=>n&&"object"==typeof n&&!Array.isArray(n),Gf=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(Hf(n)&&Hf(t))for(const r in t)Hf(t[r])?(n[r]||Object.assign(n,{[r]:{}}),Gf(n[r],t[r])):Object.assign(n,{[r]:t[r]});return Gf(n,...e)};function hE(n){if(!n.hasOwnProperty(qa)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,qa,{value:e})}return El(n)}function El(n){return n[qa]}function rD(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function A_(n){const e=n.slice();return t=>e.reduce((r,i)=>r&&r[i],t)}(n):function yM(n){const e=n;let t="store."+e[0],r=0;const i=e.length;let u=t;for(;++r<i;)u=u+" && "+(t=t+"."+e[r]);return new Function("store","return "+u+";")}(n)}function iD(n,e){const t=wl(e.currentAppState,n.path),r=wl(e.newAppState,n.path);return new cE(t,r,!n.isInitialised)}function ec(...n){return function Il(n,e,t=tc){const r=function uD(n){return n.reduce((e,t)=>(e[eh(t)]=!0,e),{})}(n),i=e&&function cD(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(u){return u.pipe(function x_(n,e){return X(t=>{const r=eh(t.action);return n[r]&&(!e||e[t.status])})}(r,i),t())}}(n,["DISPATCHED"])}function tc(){return(0,Ke.U)(n=>n.action)}function th(n){return e=>new Nn.y(t=>e.subscribe({next(r){n.leave(()=>t.next(r))},error(r){n.leave(()=>t.error(r))},complete(){n.leave(()=>t.complete())}}))}let Xg=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(T_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class nh extends Ir.x{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(e){if(this._busyPushingNext)this._itemQueue.unshift(e);else{for(this._busyPushingNext=!0,super.next(e);this._itemQueue.length>0;){const t=this._itemQueue.pop();super.next(t)}this._busyPushingNext=!1}}}let rh=(()=>{class n extends nh{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ih=(()=>{class n extends Nn.y{constructor(t,r){super(i=>{const u=t.pipe(th(r)).subscribe({next:l=>i.next(l),error:l=>i.error(l),complete:()=>i.complete()});i.add(u)})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(rh),h.LFG(Xg))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const em=n=>(...e)=>n.shift()(...e,(...r)=>em(n)(...r));let bl=(()=>{class n extends vn{constructor(){super({})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),tm=(()=>{class n{constructor(t,r){this._parentManager=t,this._pluginHandlers=r,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(r=>r.handle?r.handle.bind(r):r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12),h.LFG(b_,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),nm=(()=>{class n extends Ir.x{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),rm=(()=>{class n{constructor(t,r,i,u,l,m){this._injector=t,this._actions=r,this._actionResults=i,this._pluginManager=u,this._stateStream=l,this._ngxsExecutionStrategy=m}dispatch(t){const r=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t));return r.subscribe({error:i=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(h.qLn),this._errorHandler.handleError(i)}catch{}})}),r.pipe(th(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?Ye(this._stateStream.getValue()):I_(t.map(r=>this.dispatchSingle(r))):this.dispatchSingle(t)}dispatchSingle(t){const r=this._stateStream.getValue();return em([...this._pluginManager.plugins,(u,l)=>{u!==r&&this._stateStream.next(u);const m=this.getActionResultStream(l);return m.subscribe(v=>this._actions.next(v)),this._actions.next({action:l,status:"DISPATCHED"}),this.createDispatchObservable(m)}])(r,t).pipe(Xd())}getActionResultStream(t){return this._actionResults.pipe(X(r=>r.action===t&&"DISPATCHED"!==r.status),F(1),Xd())}createDispatchObservable(t){return t.pipe(iE(r=>{switch(r.status){case"SUCCESSFUL":return Ye(this._stateStream.getValue());case"ERRORED":return Ei(r.error);default:return Bi.E}})).pipe(Xd())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(rh),h.LFG(nm),h.LFG(tm),h.LFG(bl),h.LFG(Xg))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Cl=(()=>{class n{constructor(t,r,i){this._stateStream=t,this._dispatcher=r,this._config=i}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:r=>this._stateStream.next(r),dispatch:r=>this._dispatcher.dispatch(r)}}setStateToTheCurrentWithNew(t){const r=this.getRootStateOperations(),i=r.getState();r.setState(Object.assign({},i,t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(bl),h.LFG(rm),h.LFG(vl))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();let R_=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const r=this._internalStateOperations.getRootStateOperations();function i(v){return wl(v,t.path)}function u(v,I){const T=$f(v,t.path,I),x=t.instance;if(x.ngxsOnChanges){const L=iD(t,{currentAppState:v,newAppState:T});x.ngxsOnChanges(L)}return r.setState(T),T}function l(v,I){return u(v,I(i(v)))}return{getState:()=>i(r.getState()),patchState:v=>l(r.getState(),function lD(n){return e=>{Array.isArray(n)?function uE(){throw new Error("Patching arrays is not supported.")}():"object"!=typeof n&&function QC(){throw new Error("Patching primitives is not supported.")}();const t=Object.assign({},e);for(const r in n)t[r]=n[r];return t}}(v)),setState(v){const I=r.getState();return function m(v){return"function"==typeof v}(v)?l(I,v):u(I,v)},dispatch:v=>r.dispatch(v)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Cl))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();new RegExp("^[a-zA-Z0-9_]+$");let sh=(()=>{class n{constructor(t,r,i,u,l,m,v){this._injector=t,this._config=r,this._parentFactory=i,this._actions=u,this._actionResults=l,this._stateContextFactory=m,this._initialState=v,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=function rE(n,e=sM){let t=null,r=null;function i(){return nE(e,t,arguments)||(r=n.apply(null,arguments)),t=arguments,r}return i.reset=function(){t=null,r=null},i}(()=>{const I=this;function T(L){const U=I.statePaths[L];return U?rD(U.split("."),I._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(L){let U=T(L);return U||((...Z)=>(U||(U=T(L)),U?U(...Z):void 0))},getSelectorOptions:L=>Object.assign({},I._config.selectorOptions,L||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let r={};return r=Array.isArray(t)?t.slice():function IM(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?Object.assign({},t):void 0===t?{}:t,r}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(t){const{newStates:r}=this.addToStatesMap(t);if(!r.length)return[];const i=function _M(n){const e=t=>n.find(i=>i===t)[qa].name;return n.reduce((t,r)=>{const{name:i,children:u}=r[qa];return t[i]=(u||[]).map(e),t},{})}(r),u=function EM(n){const e=[],t={},r=(i,u=[])=>{Array.isArray(u)||(u=[]),u.push(i),t[i]=!0,n[i].forEach(l=>{t[l]||r(l,u.slice(0))}),e.indexOf(i)<0&&e.push(i)};return Object.keys(n).forEach(i=>r(i)),e.reverse()}(i),l=function wM(n,e={}){const t=(r,i)=>{for(const u in r)if(r.hasOwnProperty(u)&&r[u].indexOf(i)>=0){const l=t(r,u);return null!==l?`${l}.${u}`:u}return null};for(const r in n)if(n.hasOwnProperty(r)){const i=t(n,r);e[r]=i?`${i}.${r}`:r}return e}(i),m=function vM(n){return n.reduce((e,t)=>(e[t[qa].name]=t,e),{})}(r),v=[];for(const I of u){const T=m[I],x=l[I],L=T[qa];this.addRuntimeInfoToMeta(L,x);const U={name:I,path:x,isInitialised:!1,actions:L.actions,instance:this._injector.get(T),defaults:n.cloneDefaults(L.defaults)};this.hasBeenMountedAndBootstrapped(I,x)||v.push(U),this.states.push(U)}return v}addAndReturnDefaults(t){const i=this.add(t||[]);return{defaults:i.reduce((l,m)=>$f(l,m.path,m.defaults),{}),states:i}}connectActionHandlers(){if(null!==this._actionsSubscription)return;const t=new Ir.x;this._actionsSubscription=this._actions.pipe(X(r=>"DISPATCHED"===r.status),(0,ye.z)(r=>{t.next(r);const i=r.action;return this.invokeActions(t,i).pipe((0,Ke.U)(()=>({action:i,status:"SUCCESSFUL"})),Ue({action:i,status:"CANCELED"}),pn(u=>Ye({action:i,status:"ERRORED",error:u})))})).subscribe(r=>this._actionResults.next(r))}invokeActions(t,r){const i=eh(r),u=[];for(const l of this.states){const m=l.actions[i];if(m)for(const v of m){const I=this._stateContextFactory.createStateContext(l);try{let T=l.instance[v.fn](I,r);T instanceof Promise&&(T=(0,Zt.D)(T)),T instanceof Nn.y?(T=T.pipe((0,ye.z)(x=>x instanceof Promise?(0,Zt.D)(x):x instanceof Nn.y?x:Ye(x)),Ue({})),v.options.cancelUncompleted&&(T=T.pipe(uM(t.pipe(ec(r)))))):T=Ye({}).pipe(Xd()),u.push(T)}catch(T){u.push(Ei(T))}}}return u.length||u.push(Ye({})),I_(u)}addToStatesMap(t){const r=[],i=this.statesByName;for(const u of t){const l=El(u).name;!i[l]&&(r.push(u),i[l]=u)}return{newStates:r}}addRuntimeInfoToMeta(t,r){this.statePaths[t.name]=r,t.path=r}hasBeenMountedAndBootstrapped(t,r){const i=void 0!==wl(this._initialState,r);return this.statesByName[t]&&i}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(vl),h.LFG(n,12),h.LFG(rh),h.LFG(nm),h.LFG(R_),h.LFG(za,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),sm=(()=>{class n{constructor(t,r,i){this.internalStateOperations=t,this.stateContextFactory=r,this.bootstrapper=i}ngxsBootstrap(t,r){this.internalStateOperations.getRootStateOperations().dispatch(t).pipe(X(()=>!!r),(0,Ht.b)(()=>this.invokeInit(r.states)),(0,ye.z)(()=>this.bootstrapper.appBootstrapped$),X(i=>!!i)).subscribe(()=>this.invokeBootstrap(r.states))}invokeInit(t){for(const r of t){const i=r.instance;if(i.ngxsOnChanges){const m=iD(r,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});i.ngxsOnChanges(m)}i.ngxsOnInit&&i.ngxsOnInit(this.getStateContext(r)),r.isInitialised=!0}}invokeBootstrap(t){for(const r of t){const i=r.instance;i.ngxsAfterBootstrap&&i.ngxsAfterBootstrap(this.getStateContext(r))}}getStateContext(t){return this.stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Cl),h.LFG(R_),h.LFG(v_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();let Fs=(()=>{class n{constructor(t,r,i,u,l,m){this._stateStream=t,this._internalStateOperations=r,this._config=i,this._internalExecutionStrategy=u,this._stateFactory=l,this._selectableStateStream=this._stateStream.pipe((0,jf.Q)(oM.N),th(this._internalExecutionStrategy),Xd({bufferSize:1,refCount:!0})),this.initStateStream(m)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const r=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe((0,Ke.U)(r),pn(i=>{const{suppressErrors:u}=this._config.selectorOptions;return i instanceof TypeError&&u?Ye(void 0):Ei(i)}),_l(),th(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(F(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._selectableStateStream.pipe(th(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return function yE(n){const e=function S_(n){return n.NGXS_SELECTOR_META}(n)||El(n);return e&&e.makeRootSelector||(()=>n)}(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const r=this._stateStream.value;if(!r||0===Object.keys(r).length){const l=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,t):t;this._stateStream.next(l)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(bl),h.LFG(Cl),h.LFG(vl),h.LFG(Xg),h.LFG(sh),h.LFG(za,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),zf=(()=>{class n{constructor(t,r){n.store=t,n.config=r}ngOnDestroy(){n.store=null,n.config=null}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Fs),h.LFG(vl))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n.store=null,n.config=null,n})();class _E{static get type(){return"@@INIT"}}class mD{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}let vE=(()=>{class n{constructor(t,r,i,u,l=[],m){const v=t.addAndReturnDefaults(l);r.setStateToTheCurrentWithNew(v),t.connectActionHandlers(),m.ngxsBootstrap(new _E,v)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(sh),h.LFG(Cl),h.LFG(Fs),h.LFG(zf),h.LFG(Qg,8),h.LFG(sm))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),yD=(()=>{class n{constructor(t,r,i,u=[],l){const m=n.flattenStates(u),v=i.addAndReturnDefaults(m);v.states.length&&(r.setStateToTheCurrentWithNew(v),l.ngxsBootstrap(new mD(v.defaults),v))}static flattenStates(t=[]){return t.reduce((r,i)=>r.concat(i),[])}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Fs),h.LFG(Cl),h.LFG(sh),h.LFG(XC,8),h.LFG(sm))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();class qi{static forRoot(e=[],t={}){return{ngModule:vE,providers:[sh,R_,ih,rh,v_,sm,rm,nm,Cl,Xg,Fs,bl,zf,tm,...e,...qi.ngxsTokenProviders(e,t)]}}static forFeature(e=[]){return{ngModule:yD,providers:[sh,tm,...e,{provide:XC,multi:!0,useValue:e}]}}static ngxsTokenProviders(e,t){return[{provide:D_,useValue:t.executionStrategy},{provide:Qg,useValue:e},{provide:qi.ROOT_OPTIONS,useValue:t},{provide:vl,useFactory:qi.ngxsConfigFactory,deps:[qi.ROOT_OPTIONS]},{provide:h.tb,useFactory:qi.appBootstrapListenerFactory,multi:!0,deps:[v_]},{provide:za,useFactory:qi.getInitialState},{provide:w_,useExisting:R_},{provide:E_,useExisting:sh}]}static ngxsConfigFactory(e){return Gf(new vl,e)}static appBootstrapListenerFactory(e){return()=>e.bootstrap()}static getInitialState(){return zC.pop()}}function go(n,e){return(t,r)=>{const i=hE(t.constructor);Array.isArray(n)||(n=[n]);for(const u of n){const l=u.type;i.actions[l]||(i.actions[l]=[]),i.actions[l].push({fn:r,options:e||{},type:l})}}}function am(n){return r=>{const i=r,u=hE(i),l=Object.getPrototypeOf(i),m=function e(r){return Object.assign({},r[eD]||{},n)}(l);(function t(r){const{meta:i,inheritedStateClass:u,optionsWithInheritance:l}=r,{children:m,defaults:v,name:I}=l,T="string"==typeof I?I:I&&I.getName()||null;u.hasOwnProperty(qa)&&(i.actions=Object.assign({},i.actions,(u[qa]||{}).actions)),i.children=m,i.defaults=v,i.name=T})({meta:u,inheritedStateClass:l,optionsWithInheritance:m}),i[eD]=m}}function nc(n,...e){return function(t,r){const i=r.toString(),u=`__${i}__selector`,l=function vD(n,e,t=[]){return e=e||function wD(n){const e=n.length-1;return 36===n.charCodeAt(e)?n.slice(0,e):n}(n),"string"==typeof e?rD(t.length?[e,...t]:e.split("."),zf.config):e}(i,n,e);Object.defineProperties(t,{[u]:{writable:!0,enumerable:!1,configurable:!0},[i]:{enumerable:!0,configurable:!0,get(){return this[u]||(this[u]=function P_(n){return zf.store||function YC(){throw new Error("You have forgotten to import the NGXS module!")}(),zf.store.select(n)}(l))}}})}}var Ti,n,Dl;qi.\u0275fac=function(e){return new(e||qi)},qi.\u0275mod=h.oAB({type:qi}),qi.\u0275inj=h.cJS({}),qi.ROOT_OPTIONS=new h.OlP("ROOT_OPTIONS"),(n=Ti||(Ti={})).Fetch=(()=>{class i{constructor(){}}return i.type="[Categories] Fetch",i})(),n.Add=(()=>{class i{constructor(l){this.payload=l}}return i.type="[Categories] Add",i})(),n.Remove=(()=>{class i{constructor(l){this.payload=l}}return i.type="[Categories] Remove",i})(),function(n){n.Show=(()=>{class r{constructor(u){this.payload=u}}return r.type="[Modal] Show",r})(),n.Hide=(()=>{class r{constructor(){}}return r.type="[Modal] Hide",r})()}(Dl||(Dl={}));let um=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),oh=(()=>{class n extends um{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const mo=new h.OlP("NgValueAccessor"),bE={provide:mo,useExisting:(0,h.Gpc)(()=>rc),multi:!0},Wa=new h.OlP("CompositionEventMode");let rc=(()=>{class n extends um{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function L_(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Wa,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([bE]),h.qOj]}),n})();function Ls(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function CE(n){return null!=n&&"number"==typeof n.length}const Fr=new h.OlP("NgValidators"),Za=new h.OlP("NgAsyncValidators"),ID=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class lm{static min(e){return ah(e)}static max(e){return function DE(n){return e=>{if(Ls(e.value)||Ls(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function bD(n){return Ls(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function TE(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function CD(n){return Ls(n.value)||ID.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function SE(n){return e=>Ls(e.value)||!CE(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function AE(n){return e=>CE(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function xE(n){if(!n)return qf;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ls(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return NE(e)}static composeAsync(e){return PE(e)}}function ah(n){return e=>{if(Ls(e.value)||Ls(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function qf(n){return null}function dm(n){return null!=n}function ME(n){return(0,h.QGY)(n)?(0,Zt.D)(n):n}function hm(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function RE(n,e){return e.map(t=>t(n))}function OE(n){return n.map(e=>function DD(n){return!n.validate}(e)?e:t=>e.validate(t))}function NE(n){if(!n)return null;const e=n.filter(dm);return 0==e.length?null:function(t){return hm(RE(t,e))}}function V_(n){return null!=n?NE(OE(n)):null}function PE(n){if(!n)return null;const e=n.filter(dm);return 0==e.length?null:function(t){return I_(RE(t,e).map(ME)).pipe((0,Ke.U)(hm))}}function uh(n){return null!=n?PE(OE(n)):null}function ic(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function TD(n){return n._rawValidators}function ch(n){return n._rawAsyncValidators}function U_(n){return n?Array.isArray(n)?n:[n]:[]}function fm(n,e){return Array.isArray(n)?n.includes(e):n===e}function pm(n,e){const t=U_(e);return U_(n).forEach(i=>{fm(t,i)||t.push(i)}),t}function kE(n,e){return U_(e).filter(t=>!fm(n,t))}class yo{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=V_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=uh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Cr extends yo{get formDirective(){return null}get path(){return null}}class Gn extends yo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class sc{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Wf=(()=>{class n extends sc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Gn,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),Tl=(()=>{class n extends sc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Cr,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const Qf="VALID",Jf="INVALID",hh="PENDING",Xf="DISABLED";function ep(n){return(Sl(n)?n.validators:n)||null}function gm(n){return Array.isArray(n)?V_(n):n||null}function H_(n,e){return(Sl(e)?e.asyncValidators:n)||null}function tp(n){return Array.isArray(n)?uh(n):n||null}function Sl(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class ym{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=gm(this._rawValidators),this._composedAsyncValidatorFn=tp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Qf}get invalid(){return this.status===Jf}get pending(){return this.status==hh}get disabled(){return this.status===Xf}get enabled(){return this.status!==Xf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=gm(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=tp(e)}addValidators(e){this.setValidators(pm(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(pm(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kE(e,this._rawAsyncValidators))}hasValidator(e){return fm(this._rawValidators,e)}hasAsyncValidator(e){return fm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Qf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qf||this.status===hh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xf:Qf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hh,this._hasOwnPendingAsyncValidator=!0;const t=ME(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Xf:this.errors?Jf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hh)?hh:this._anyControlsHaveStatus(Jf)?Jf:Qf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sl(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class fh extends ym{constructor(e,t,r){super(ep(t),H_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function BE(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function mm(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function np(n,e){return[...e.path,n]}function Al(n,e){vm(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function $E(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&HE(n,e)})}(n,e),function kD(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function PD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&HE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function jE(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function rp(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ip(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _m(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vm(n,e){const t=TD(n);null!==e.validator?n.setValidators(ic(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ch(n);null!==e.asyncValidator?n.setAsyncValidators(ic(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();_m(e._rawValidators,i),_m(e._rawAsyncValidators,i)}function ip(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=TD(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=ch(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return _m(e._rawValidators,r),_m(e._rawAsyncValidators,r),t}function HE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wm(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Em(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===rc?t=u:function zE(n){return Object.getPrototypeOf(n.constructor)===oh}(u)?r=u:i=u}),i||r||t||null}function mr(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Y_(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const xl=class extends ym{constructor(e=null,t,r){super(ep(t),H_(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Y_(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){mr(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){mr(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Y_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},$D={provide:Gn,useExisting:(0,h.Gpc)(()=>ZE)},J_=(()=>Promise.resolve())();let ZE=(()=>{class n extends Gn{constructor(t,r,i,u,l){super(),this._changeDetectorRef=l,this.control=new xl,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Em(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),wm(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Al(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){J_.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,h.D6c)(r);J_.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?np(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Cr,9),h.Y36(Fr,10),h.Y36(Za,10),h.Y36(mo,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([$D]),h.qOj,h.TTD]}),n})(),X_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const ev={provide:mo,useExisting:(0,h.Gpc)(()=>Vs),multi:!0};let Vs=(()=>{class n extends oh{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([ev]),h.qOj]}),n})(),vo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const nv=new h.OlP("NgModelWithFormControlWarning"),zD={provide:Cr,useExisting:(0,h.Gpc)(()=>gh)};let gh=(()=>{class n extends Cr{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ip(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Al(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){rp(t.control||null,t,!1),function RM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Z_(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(rp(r||null,t),(n=>n instanceof xl)(i)&&(Al(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function z_(n,e){vm(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function q_(n,e){return ip(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vm(this.form,this),this._oldForm&&ip(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Fr,10),h.Y36(Za,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([zD]),h.qOj,h.TTD]}),n})();const JE={provide:Gn,useExisting:(0,h.Gpc)(()=>mh)};let mh=(()=>{class n extends Gn{constructor(t,r,i,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Em(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),wm(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return np(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Cr,13),h.Y36(Fr,10),h.Y36(Za,10),h.Y36(mo,10),h.Y36(nv,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([JE]),h.qOj,h.TTD]}),n})();let Ml=(()=>{class n{constructor(){this._validator=qf}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):qf,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const KD={provide:Fr,useExisting:(0,h.Gpc)(()=>dv),multi:!0};let dv=(()=>{class n extends Ml{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function lv(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>ah(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[h._Bn([KD]),h.qOj]}),n})(),fv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[vo]}),n})(),uI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[fv]}),n})(),cI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nv,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[fv]}),n})();const cT=function(n){return{backgroundColor:n}},_h=function(n){return{fill:n}};let VM=(()=>{class n{constructor(){this.cliked=new h.vpe}getRandomArbitrary(){return 254*Math.random()+1}emitSignal(){this.cliked.next(this.category)}max(t){let r=-1;return t.forEach(i=>{i>r&&(r=i)}),r}ngOnInit(){const t=this.getRandomArbitrary(),r=this.getRandomArbitrary(),i=this.getRandomArbitrary();this.color=`rgb(${t/2.5},${r/2.5},${this.max([t,r,i])})`,this.antiColor=`rgb(${255-t},${255-r},${255-i})`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-category-bubble"]],inputs:{category:"category"},outputs:{cliked:"cliked"},decls:6,vars:7,consts:[[1,"option"],[1,"color",3,"ngStyle","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",3,"ngStyle"],["d","M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"],[1,"text"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1),h.NdJ("click",function(){return r.emitSignal()}),h.O4$(),h.TgZ(2,"svg",2),h._UZ(3,"path",3),h.qZA()(),h.kcU(),h.TgZ(4,"div",4),h._uU(5),h.qZA()()),2&t&&(h.xp6(1),h.Q6J("ngStyle",h.VKq(3,cT,r.color)),h.xp6(1),h.Q6J("ngStyle",h.VKq(5,_h,r.antiColor)),h.xp6(3),h.Oqu(r.category.name))},dependencies:[ad],styles:[".option[_ngcontent-%COMP%]{width:140px;box-shadow:5px 5px 5px #0003;transition-duration:.15s;border-radius:4px;cursor:pointer}.option[_ngcontent-%COMP%]:hover{box-shadow:6px 6px 6px #00000040}.option[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{padding:12px 4px;text-align:center;width:100%;box-sizing:border-box;font-size:14px;border-radius:4px;background-color:#fff;text-overflow:ellipsis;overflow:hidden}.option[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{height:120px;background-color:#fd6d6d;border-radius:4px}.option[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;padding:33px;box-sizing:border-box;opacity:0;cursor:pointer;transition-duration:.15s}.option[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{opacity:1}"]}),n})();function pv(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"app-category-bubble",11),h.NdJ("cliked",function(i){h.CHM(t);const u=h.oxw(2);return h.KtG(u.deleteCategory(i))}),h.qZA()}2&n&&h.Q6J("category",e.$implicit)}function UM(n,e){if(1&n&&(h.TgZ(0,"div",9),h.YNc(1,pv,1,1,"app-category-bubble",10),h.qZA()),2&n){const t=e.ngIf;h.xp6(1),h.Q6J("ngForOf",t)}}class Rl{constructor(e){this.store=e,this.categoryName=""}addCategory(){this.categoryName?(this.store.dispatch(new Ti.Add({name:this.categoryName})),this.categoryName=""):this.store.dispatch(new Dl.Show({message:"Please fill in the name input field"}))}deleteCategory(e){confirm('Are you sure you want to delete the category "'+e.name+'"?')&&this.store.dispatch(new Ti.Remove(e))}ngOnInit(){this.store.dispatch(new Ti.Fetch)}}var Eo,oi;Rl.\u0275fac=function(e){return new(e||Rl)(h.Y36(Fs))},Rl.\u0275cmp=h.Xpm({type:Rl,selectors:[["app-categories-management"]],decls:16,vars:4,consts:[[1,"page-container"],[1,"page"],[1,"page-title"],[1,"input-container-styled","new-category"],[1,"button-and-input-flex"],["placeholder","New Category Name","name","aaa","type","text",1,"styled",3,"ngModel","ngModelChange"],[1,"mt-16",3,"click"],[1,"page-container","mt-24"],["class","categories-flex",4,"ngIf"],[1,"categories-flex"],[3,"category","cliked",4,"ngFor","ngForOf"],[3,"category","cliked"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"span",2),h._uU(4,"Add new category"),h.qZA(),h.TgZ(5,"div",3)(6,"div",4)(7,"input",5),h.NdJ("ngModelChange",function(i){return t.categoryName=i}),h.qZA(),h.TgZ(8,"button",6),h.NdJ("click",function(){return t.addCategory()}),h._uU(9,"Add"),h.qZA()()()()()(),h.TgZ(10,"div",7)(11,"div",1)(12,"span",2),h._uU(13,"Existing Categories"),h.qZA(),h.YNc(14,UM,2,1,"div",8),h.ALo(15,"async"),h.qZA()()),2&e&&(h.xp6(7),h.Q6J("ngModel",t.categoryName),h.xp6(7),h.Q6J("ngIf",h.lcZ(15,2,t.categories$)))},dependencies:[gi,Cn,rc,Wf,ZE,VM,cu],styles:[".categories-flex[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;grid-gap:15px;width:100%;justify-content:center;max-width:678px;margin:16px auto auto}.new-category[_ngcontent-%COMP%]{max-width:498px;margin:16px auto auto}.page[_ngcontent-%COMP%]{width:100%;max-width:498px;margin:auto}.mt-24[_ngcontent-%COMP%]{margin-top:24px}"],changeDetection:0}),(0,kn.gn)([nc(n=>n.categories.categories)],Rl.prototype,"categories$",void 0),function(n){n.Add=(()=>{class i{constructor(l){this.payload=l}}return i.type="[Transactions] Add",i})(),n.Delete=(()=>{class i{constructor(l){this.payload=l}}return i.type="[Transactions] Delete",i})(),n.Fetch=(()=>{class i{constructor(){}}return i.type="[Transactions] Fetch",i})()}(Eo||(Eo={})),function(n){n.Show=(()=>{class r{constructor(){}}return r.type="[Loader] Show",r})(),n.Hide=(()=>{class r{constructor(){}}return r.type="[Loader] Hide",r})()}(oi||(oi={}));const Ct=function(n){return{selected:n}};let dI=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-multi-selection-button"]],inputs:{isSelected:"isSelected",onClick:"onClick",text:"text",value:"value",form:"form"},decls:2,vars:4,consts:[[1,"btn",3,"ngClass","click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.NdJ("click",function(){return r.onClick(r.value)}),h._uU(1),h.qZA()),2&t&&(h.Q6J("ngClass",h.VKq(2,Ct,r.isSelected)),h.xp6(1),h.hij(" ",r.text,"\n"))},dependencies:[sn],styles:[".btn[_ngcontent-%COMP%]{width:100%;padding:4px 16px;background-color:#fff;border:1px solid #59a1d1;box-sizing:border-box;color:#59a1d1;text-align:center;font-size:14px;line-height:19px;transition-duration:.1s;cursor:pointer;min-width:143px;border-radius:8px;max-width:143px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.btn[_ngcontent-%COMP%]:hover:not(.selected){background-color:#59a1d1;color:#fff;opacity:.8}.btn.selected[_ngcontent-%COMP%]{background-color:#59a1d1;color:#fff}@media only screen and (max-width: 500px){.btn[_ngcontent-%COMP%]{font-size:14px;min-width:115px;max-width:115px}}"]}),n})(),lT=(()=>{class n{constructor(){}changeSelection(t){this.form.patchValue({isIncome:t})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-is-income-buttons"]],inputs:{form:"form"},decls:3,vars:8,consts:[[1,"container"],["text","Outcome",3,"isSelected","onClick","value","form"],["text","Income",3,"isSelected","onClick","value","form"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"app-multi-selection-button",1)(2,"app-multi-selection-button",2),h.qZA()),2&t&&(h.xp6(1),h.Q6J("isSelected",!r.form.value.isIncome)("onClick",r.changeSelection)("value",!1)("form",r.form),h.xp6(1),h.Q6J("isSelected",r.form.value.isIncome)("onClick",r.changeSelection)("value",!0)("form",r.form))},dependencies:[dI],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:6px 10px;flex-wrap:wrap}"]}),n})();function dT(n,e){if(1&n&&h._UZ(0,"app-multi-selection-button",2),2&n){const t=e.$implicit,r=h.oxw();h.Q6J("isSelected",r.form.value.category===t.name)("onClick",r.changeValue)("value",t.name)("text",t.name)("form",r.form)}}let vh=(()=>{class n{constructor(){}changeValue(t){this.form.patchValue({category:t})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-categories"]],inputs:{categories:"categories",form:"form"},decls:2,vars:1,consts:[[1,"container"],[3,"isSelected","onClick","value","text","form",4,"ngFor","ngForOf"],[3,"isSelected","onClick","value","text","form"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,dT,1,5,"app-multi-selection-button",1),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngForOf",r.categories))},dependencies:[gi,dI],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:6px 10px;flex-wrap:wrap}"]}),n})();function hT(n,e){1&n&&(h.TgZ(0,"span",15),h._uU(1," This field should not be empty "),h.qZA())}function Cm(n,e){1&n&&(h.TgZ(0,"span",15),h._uU(1," Please enter a positive number"),h.qZA())}function Dm(n,e){if(1&n&&(h.TgZ(0,"div",3)(1,"label",9),h._uU(2,"Category:"),h.qZA(),h._UZ(3,"app-categories",16),h.qZA()),2&n){const t=e.ngIf,r=h.oxw();h.xp6(3),h.Q6J("categories",t)("form",r.newTransactionForm)}}function tr(n,e){1&n&&(h.TgZ(0,"span",15),h._uU(1,"Invalid Date"),h.qZA())}class up{constructor(e){this.store=e,this.newTransactionForm=new fh({name:new xl("",[lm.required]),amount:new xl(null,[lm.required]),category:new xl("Other",[lm.required]),isIncome:new xl(!1),date:new xl(this.convertDateToString(new Date),[lm.required])})}convertDateToString(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}aa(){this.store.dispatch(new oi.Show)}ngOnInit(){this.store.dispatch(new Ti.Fetch)}onSubmit(){"VALID"===this.newTransactionForm.status?this.store.dispatch(new Eo.Add(this.newTransactionForm.value)):this.newTransactionForm.markAllAsTouched()}}up.\u0275fac=function(e){return new(e||up)(h.Y36(Fs))},up.\u0275cmp=h.Xpm({type:up,selectors:[["app-new-transaction"]],decls:27,vars:8,consts:[[1,"page-container"],[3,"formGroup","ngSubmit"],[1,"page-title"],[1,"input-container-styled"],["for","name",1,"styled"],["type","text","formControlName","name","name","name",1,"styled"],["class","styled-error-text",4,"ngIf"],["for","amount",1,"styled"],["min","0","type","text","type","number","formControlName","amount","name","amount",1,"styled"],["for","isIncome",1,"styled"],[3,"form"],["class","input-container-styled",4,"ngIf"],["for","date",1,"styled"],["type","date","formControlName","date","name","date",1,"styled"],[1,"mt-24"],[1,"styled-error-text"],[3,"categories","form"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"form",1),h.NdJ("ngSubmit",function(){return t.onSubmit()}),h.TgZ(2,"span",2),h._uU(3,"Add a new Transaction"),h.qZA(),h.TgZ(4,"div",3)(5,"label",4),h._uU(6,"Name:"),h.qZA(),h._UZ(7,"input",5),h.YNc(8,hT,2,0,"span",6),h.qZA(),h.TgZ(9,"div",3)(10,"label",7),h._uU(11,"Amount:"),h.qZA(),h._UZ(12,"input",8),h.YNc(13,Cm,2,0,"span",6),h.qZA(),h.TgZ(14,"div",3)(15,"label",9),h._uU(16,"Income/Outcome:"),h.qZA(),h._UZ(17,"app-is-income-buttons",10),h.qZA(),h.YNc(18,Dm,4,2,"div",11),h.ALo(19,"async"),h.TgZ(20,"div",3)(21,"label",12),h._uU(22,"Date:"),h.qZA(),h._UZ(23,"input",13),h.YNc(24,tr,2,0,"span",6),h.qZA(),h.TgZ(25,"button",14),h._uU(26,"Submit"),h.qZA()()()),2&e&&(h.xp6(1),h.Q6J("formGroup",t.newTransactionForm),h.xp6(7),h.Q6J("ngIf",t.newTransactionForm.controls.name.touched&&t.newTransactionForm.controls.name.errors),h.xp6(5),h.Q6J("ngIf",t.newTransactionForm.controls.amount.touched&&t.newTransactionForm.controls.amount.errors),h.xp6(4),h.Q6J("form",t.newTransactionForm),h.xp6(1),h.Q6J("ngIf",h.lcZ(19,6,t.categories$)),h.xp6(6),h.Q6J("ngIf",t.newTransactionForm.controls.date.touched&&t.newTransactionForm.controls.date.errors))},dependencies:[Cn,X_,rc,Vs,Wf,Tl,dv,gh,mh,lT,vh,cu],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:100%;max-width:498px;margin:auto;box-sizing:border-box}"]}),(0,kn.gn)([nc(n=>n.categories.categories)],up.prototype,"categories$",void 0);var gv=P(4986),Fn=P(6351);function mv(){return(0,Xn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Hn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var ft,ai=P(2011),yv=(P(1277),P(3942)),me=P(5861),Io=P(9681),wh=P(4859),uc=P(1877),Ot=P(2090),pT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ya={},Eh=Eh||{},Pt=pT||self;function cp(){}function lp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function dp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ol="closure_uid_"+(1e9*Math.random()>>>0),gT=0;function mT(n,e,t){return n.call.apply(n.bind,arguments)}function yT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Kr(n,e,t){return(Kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mT:yT).apply(null,arguments)}function fp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Lr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[i].apply(r,l)}}function cc(){this.s=this.s,this.o=this.o}cc.prototype.s=!1,cc.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function hp(n){Object.prototype.hasOwnProperty.call(n,Ol)&&n[Ol]||(n[Ol]=++gT)}(this)},cc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function _v(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function _T(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(lp(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let l=0;l<u;l++)n[i+l]=r[l]}else n.push(r)}}function Si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Si.prototype.h=function(){this.defaultPrevented=!0};var BM=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Pt.addEventListener("test",cp,e),Pt.removeEventListener("test",cp,e)}catch{}return n}();function vv(n){return/^[\s\xa0]*$/.test(n)}var wv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ih(n,e){return n<e?-1:n>e?1:0}function Tm(){var n=Pt.navigator;return n&&(n=n.userAgent)?n:""}function Jo(n){return-1!=Tm().indexOf(n)}function Sm(n){return Sm[" "](n),n}Sm[" "]=cp;var Am,vT=Jo("Opera"),bh=Jo("Trident")||Jo("MSIE"),pI=Jo("Edge"),Ev=pI||bh,gI=Jo("Gecko")&&!(-1!=Tm().toLowerCase().indexOf("webkit")&&!Jo("Edge"))&&!(Jo("Trident")||Jo("MSIE"))&&!Jo("Edge"),mI=-1!=Tm().toLowerCase().indexOf("webkit")&&!Jo("Edge");function yI(){var n=Pt.document;return n?n.documentMode:void 0}e:{var Nl="",Iv=function(){var n=Tm();return gI?/rv:([^\);]+)(\)|;)/.exec(n):pI?/Edge\/([\d\.]+)/.exec(n):bh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):mI?/WebKit\/(\S+)/.exec(n):vT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(Iv&&(Nl=Iv?Iv[1]:""),bh){var xm=yI();if(null!=xm&&xm>parseFloat(Nl)){Am=String(xm);break e}}Am=Nl}var wT={};var ET=Pt.document&&bh&&(yI()||parseInt(Am,10))||void 0;function Pl(n,e){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(gI){e:{try{Sm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:IT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pl.X.h.call(this)}}Lr(Pl,Si);var IT={2:"touch",3:"pen",4:"mouse"};Pl.prototype.h=function(){Pl.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ch="closure_listenable_"+(1e6*Math.random()|0),vI=0;function bT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++vI,this.ba=this.ea=!1}function Mm(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Dv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Rm(n){const e={};for(const t in n)e[t]=n[t];return e}const wI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<wI.length;u++)t=wI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Om(n){this.src=n,this.g={},this.h=0}function Sv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=fI(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Mm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Av(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}Om.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Av(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new bT(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var xv="closure_lm_"+(1e6*Math.random()|0),Mv={};function EI(n,e,t,r,i){if(r&&r.once)return Rv(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)EI(n,e[u],t,r,i);return null}return t=Fv(t),n&&n[Ch]?n.N(e,t,dp(r)?!!r.capture:!!r,i):II(n,e,t,!1,r,i)}function II(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var l=dp(i)?!!i.capture:!!i,m=Pv(n);if(m||(n[xv]=m=new Om(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function CT(){const e=CI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)BM||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(bI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Rv(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Rv(n,e[u],t,r,i);return null}return t=Fv(t),n&&n[Ch]?n.O(e,t,dp(r)?!!r.capture:!!r,i):II(n,e,t,!0,r,i)}function Ov(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ov(n,e[u],t,r,i);else r=dp(r)?!!r.capture:!!r,t=Fv(t),n&&n[Ch]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Av(u=n.g[e],t,r,i))&&(Mm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Pv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Av(e,t,r,i)),(t=-1<n?e[n]:null)&&Nv(t))}function Nv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Ch])Sv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Pv(e))?(Sv(t,n),0==t.h&&(t.src=null,e[xv]=null)):Mm(n)}}}function bI(n){return n in Mv?Mv[n]:Mv[n]="on"+n}function CI(n,e){if(n.ba)n=!0;else{e=new Pl(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Nv(n),n=t.call(r,e)}return n}function Pv(n){return(n=n[xv])instanceof Om?n:null}var kv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fv(n){return"function"==typeof n?n:(n[kv]||(n[kv]=function(e){return n.handleEvent(e)}),n[kv])}function yr(){cc.call(this),this.i=new Om(this),this.P=this,this.I=null}function Dr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Si(e,n);else if(e instanceof Si)e.target=e.target||n;else{var i=e;Tv(e=new Si(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];i=gp(l,r,!0,e)&&i}if(i=gp(l=e.g=n,r,!0,e)&&i,i=gp(l,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=gp(l=e.g=t[u],r,!1,e)&&i}function gp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,v=l.ha||l.src;l.ea&&Sv(n.i,l),i=!1!==m.call(v,r)&&i}}return i&&!r.defaultPrevented}Lr(yr,cc),yr.prototype[Ch]=!0,yr.prototype.removeEventListener=function(n,e,t,r){Ov(this,n,e,t,r)},yr.prototype.M=function(){if(yr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Mm(t[r]);delete n.g[e],n.h--}}this.I=null},yr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var mp=Pt.JSON.stringify;function DT(){var n=Lv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Pm,Nm=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ST,n=>n.reset());class ST{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function DI(n){Pt.setTimeout(()=>{throw n},0)}function kl(n,e){Pm||function AT(){var n=Pt.Promise.resolve(void 0);Pm=function(){n.then(Vv)}}(),TI||(Pm(),TI=!0),Lv.add(n,e)}var TI=!1,Lv=new class TT{constructor(){this.h=this.g=null}add(e,t){const r=Nm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Vv(){for(var n;n=DT();){try{n.h.call(n.g)}catch(t){DI(t)}var e=Nm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}TI=!1}function km(n,e){yr.call(this),this.h=n||1,this.g=e||Pt,this.j=Kr(this.lb,this),this.l=Date.now()}function yp(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Uv(n,e,t){if("function"==typeof n)t&&(n=Kr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Kr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pt.setTimeout(n,e||0)}function Bv(n){n.g=Uv(()=>{n.g=null,n.i&&(n.i=!1,Bv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Lr(km,yr),(ft=km.prototype).ca=!1,ft.R=null,ft.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Dr(this,"tick"),this.ca&&(yp(this),this.start()))}},ft.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){km.X.M.call(this),yp(this),delete this.g};class jv extends cc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Bv(this)}M(){super.M(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dh(n){cc.call(this),this.h=n,this.g={}}Lr(Dh,cc);var $v=[];function Hv(n,e,t,r){Array.isArray(t)||(t&&($v[0]=t.toString()),t=$v);for(var i=0;i<t.length;i++){var u=EI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Gv(n){Dv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Nv(e)},n),n.g={}}function Fm(){this.g=!0}function Th(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function jM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<i.length;l++)i[l]=""}}}return mp(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Dh.prototype.M=function(){Dh.X.M.call(this),Gv(this)},Dh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fm.prototype.Aa=function(){this.g=!1},Fm.prototype.info=function(){};var lc={},AI=null;function Lm(){return AI=AI||new yr}function RT(n){Si.call(this,lc.Pa,n)}function Vm(n){const e=Lm();Dr(e,new RT(e))}function xI(n,e){Si.call(this,lc.STAT_EVENT,n),this.stat=e}function Ai(n){const e=Lm();Dr(e,new xI(e,n))}function zv(n,e){Si.call(this,lc.Qa,n),this.size=e}function Sh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){n()},e)}lc.Pa="serverreachability",Lr(RT,Si),lc.STAT_EVENT="statevent",Lr(xI,Si),lc.Qa="timingevent",Lr(zv,Si);var _p={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},MI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function qv(){}function OI(){}qv.prototype.h=null;var Fl,vp={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Wv(){Si.call(this,"d")}function Zv(){Si.call(this,"c")}function wp(){}function Ah(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Dh(this),this.O=NI,this.T=new km(n=Ev?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Kv}function Kv(){this.i=null,this.g="",this.h=!1}Lr(Wv,Si),Lr(Zv,Si),Lr(wp,qv),wp.prototype.g=function(){return new XMLHttpRequest},wp.prototype.i=function(){return{}},Fl=new wp;var NI=45e3,Um={},Ep={};function Yv(n,e,t){n.K=1,n.v=bp(js(e)),n.s=t,n.P=!0,OT(n,null)}function OT(n,e){n.F=Date.now(),xh(n),n.A=js(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),jI(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Kv,n.g=yw(n.l,t?e:null,!n.s),0<n.N&&(n.L=new jv(Kr(n.La,n,n.g),n.N)),Hv(n.S,n.g,"readystatechange",n.ib),e=n.H?Rm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Vm(),function xT(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),v=0;v<m.length;v++){var I=m[v].split("=");if(1<I.length){var T=I[0];I=I[1];var x=T.split("_");l=2<=x.length&&"type"==x[1]?l+(T+"=")+I+"&":l+(T+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Qv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Jv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=NT(n,t),i==Ep){4==e&&(n.o=4,Ai(14),r=!1),Th(n.j,n.m,null,"[Incomplete Response]");break}if(i==Um){n.o=4,Ai(15),Th(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Th(n.j,n.m,i,null),Bs(n,i)}Qv(n)&&i!=Ep&&i!=Um&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ai(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Wm(e),e.K=!0,Ai(11))):(Th(n.j,n.m,t,"[Invalid Chunked Response]"),Qa(n),Ip(n))}function NT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ep:(t=Number(e.substring(t,r)),isNaN(t)?Um:(r+=1)+t>e.length?Ep:(e=e.substr(r,t),n.C=r+t,e))}function xh(n){n.V=Date.now()+n.O,PI(n,n.O)}function PI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sh(Kr(n.gb,n),e)}function dc(n){n.B&&(Pt.clearTimeout(n.B),n.B=null)}function Ip(n){0==n.l.G||n.I||gw(n.l,n)}function Qa(n){dc(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,yp(n.T),Gv(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Bs(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ow(t.h,n)))if(!n.J&&ow(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;xp(t),Sp(t)}qm(t),Ai(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Sh(Kr(t.cb,t),6e3));if(1>=sw(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else $l(t,11)}else if((n.J||t.g==n)&&xp(t),!vv(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let I=i[e];if(t.T=I[0],I=I[1],2==t.G)if("c"==I[0]){t.I=I[1],t.ka=I[2];const T=I[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const x=I[4];null!=x&&(t.Ca=x,t.j.info("SVER="+t.Ca));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.J=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const Z=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var u=r.h;u.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(jm(u,u.h),u.h=null))}if(r.D){const Ce=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;Ce&&(r.za=Ce,xn(r.F,r.D,Ce))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=JI(r,r.H?r.ka:null,r.V),l.J){aw(r.h,l);var m=l,v=r.J;v&&m.setTimeout(v),m.B&&(dc(m),xh(m)),r.g=l}else KI(r);0<t.i.length&&pw(t)}else"stop"!=I[0]&&"close"!=I[0]||$l(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?$l(t,7):fw(t):"noop"!=I[0]&&t.l&&t.l.wa(I),t.A=0)}Vm()}catch{}}function Mh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(lp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Xv(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(lp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function PT(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(lp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(ft=Ah.prototype).setTimeout=function(n){this.O=n},ft.ib=function(n){n=n.target;const e=this.L;e&&3==bo(n)?e.l():this.La(n)},ft.La=function(n){try{if(n==this.g)e:{const T=bo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>T)&&(3!=T||Ev||this.g&&(this.h.h||this.g.fa()||$T(this.g)))){this.I||4!=T||7==e||Vm(),dc(this);var t=this.g.aa();this.Y=t;t:if(Qv(this)){var r=$T(this.g);n="";var i=r.length,u=4==bo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Qa(this),Ip(this);var l="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function MT(n,e,t,r,i,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vv(m)){var I=m;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Ai(12),Qa(this),Ip(this);break e}Th(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bs(this,t)}this.P?(Jv(this,T,l),Ev&&this.i&&3==T&&(Hv(this.S,this.T,"tick",this.hb),this.T.start())):(Th(this.j,this.m,l,null),Bs(this,l)),4==T&&Qa(this),this.i&&!this.I&&(4==T?gw(this.l,this):(this.i=!1,xh(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ai(12)):(this.o=0,Ai(13)),Qa(this),Ip(this)}}}catch{}},ft.hb=function(){if(this.g){var n=bo(this.g),e=this.g.fa();this.C<e.length&&(dc(this),Jv(this,n,e),this.i&&4!=n&&xh(this))}},ft.cancel=function(){this.I=!0,Qa(this)},ft.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function SI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Vm(),Ai(17)),Qa(this),this.o=2,Ip(this)):PI(this,this.V-n)};var kI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ll(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ll){this.h=void 0!==e?e:n.h,Vl(this,n.j),this.s=n.s,this.g=n.g,Bm(this,n.m),this.l=n.l,e=n.i;var t=new Bl;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),FI(this,t),this.o=n.o}else n&&(t=String(n).match(kI))?(this.h=!!e,Vl(this,t[1]||"",!0),this.s=Ul(t[2]||""),this.g=Ul(t[3]||"",!0),Bm(this,t[4]),this.l=Ul(t[5]||"",!0),FI(this,t[6]||"",!0),this.o=Ul(t[7]||"")):(this.h=!!e,this.i=new Bl(null,this.h))}function js(n){return new Ll(n)}function Vl(n,e,t){n.j=t?Ul(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Bm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function FI(n,e,t){e instanceof Bl?(n.i=e,function $I(n,e){e&&!n.j&&(Xo(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(UI(this,r),jI(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Rh(e,tw)),n.i=new Bl(e,n.h))}function xn(n,e,t){n.i.set(e,t)}function bp(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ul(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Rh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,FT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function FT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ll.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Rh(e,LI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Rh(e,LI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Rh(t,"/"==t.charAt(0)?ew:$M,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Rh(t,VI)),n.join("")};var LI=/[#\/\?@]/g,$M=/[#\?:]/g,ew=/[#\?]/g,tw=/[#\?@]/g,VI=/#/g;function Bl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xo(n){n.g||(n.g=new Map,n.h=0,n.i&&function kT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function UI(n,e){Xo(n),e=Oh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function BI(n,e){return Xo(n),e=Oh(n,e),n.g.has(e)}function jI(n,e,t){UI(n,e),0<t.length&&(n.i=null,n.g.set(Oh(n,e),_v(t)),n.h+=t.length)}function Oh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rw(n){this.l=n||LT,n=Pt.PerformanceNavigationTiming?0<(n=Pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ga&&Pt.g.Ga()&&Pt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=Bl.prototype).add=function(n,e){Xo(this),this.i=null,n=Oh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){Xo(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ft.oa=function(){Xo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},ft.W=function(n){Xo(this);let e=[];if("string"==typeof n)BI(this,n)&&(e=e.concat(this.g.get(Oh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ft.set=function(n,e){return Xo(this),this.i=null,BI(this,n=Oh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=u;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var LT=10;function iw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sw(n){return n.h?1:n.g?n.g.size:0}function ow(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function jm(n,e){n.g?n.g.add(e):n.h=e}function aw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function HI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return _v(n.i)}function $m(){}function VT(){this.g=new $m}function xi(n,e,t){const r=t||"";try{Mh(n,function(i,u){let l=i;dp(i)&&(l=mp(i)),e.push(r+u+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Hm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Cp(n){this.l=n.ac||null,this.j=n.jb||!1}function uw(n,e){yr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=GI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rw.prototype.cancel=function(){if(this.i=HI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},$m.prototype.stringify=function(n){return Pt.JSON.stringify(n,void 0)},$m.prototype.parse=function(n){return Pt.JSON.parse(n,void 0)},Lr(Cp,qv),Cp.prototype.g=function(){return new uw(this.l,this.j)},Cp.prototype.i=function(n){return function(){return n}}({}),Lr(uw,yr);var GI=0;function cw(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Ph(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ja(n)}function Ja(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=uw.prototype).open=function(n,e){if(this.readyState!=GI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ja(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Pt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ph(this)),this.readyState=GI},ft.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Pt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cw(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ft.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ph(this):Ja(this),3==this.readyState&&cw(this)}},ft.Va=function(n){this.g&&(this.response=this.responseText=n,Ph(this))},ft.Ua=function(n){this.g&&(this.response=n,Ph(this))},ft.ga=function(){this.g&&Ph(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(uw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var UT=Pt.JSON.parse;function Ln(n){yr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zI,this.K=this.L=!1}Lr(Ln,yr);var zI="",qI=/^https?$/i,BT=["POST","PUT"];function WI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Gm(n),Dp(n)}function Gm(n){n.D||(n.D=!0,Dr(n,"complete"),Dr(n,"error"))}function lw(n){if(n.h&&typeof Eh<"u"&&(!n.C[1]||4!=bo(n)||2!=n.aa()))if(n.v&&4==bo(n))Uv(n.Ha,0,n);else if(Dr(n,"readystatechange"),4==bo(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var i=String(n.H).match(kI)[1]||null;if(!i&&Pt.self&&Pt.self.location){var u=Pt.self.location.protocol;i=u.substr(0,u.length-1)}r=!qI.test(i?i.toLowerCase():"")}t=r}if(t)Dr(n,"complete"),Dr(n,"success");else{n.m=6;try{var l=2<bo(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Gm(n)}}finally{Dp(n)}}}function Dp(n,e){if(n.g){Tp(n);const t=n.g,r=n.C[0]?cp:null;n.g=null,n.C=null,e||Dr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Tp(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Pt.clearTimeout(n.A),n.A=null)}function bo(n){return n.g?n.g.readyState:0}function $T(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function dw(n){let e="";return Dv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function hw(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=dw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function kh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function jl(n){this.Ca=0,this.i=[],this.j=new Fm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=kh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=kh("baseRetryDelayMs",5e3,n),this.bb=kh("retryDelaySeedMs",1e4,n),this.$a=kh("forwardChannelMaxRetries",2,n),this.ta=kh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new rw(n&&n.concurrentRequestLimit),this.Fa=new VT,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function fw(n){if(zm(n),3==n.G){var e=n.U++,t=js(n.F);xn(t,"SID",n.I),xn(t,"RID",e),xn(t,"TYPE","terminate"),Ap(n,t),(e=new Ah(n,n.j,e,void 0)).K=2,e.v=bp(js(t)),t=!1,Pt.navigator&&Pt.navigator.sendBeacon&&(t=Pt.navigator.sendBeacon(e.v.toString(),"")),!t&&Pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=yw(e.l,null),e.g.da(e.v)),e.F=Date.now(),xh(e)}mw(n)}function Sp(n){n.g&&(Wm(n),n.g.cancel(),n.g=null)}function zm(n){Sp(n),n.u&&(Pt.clearTimeout(n.u),n.u=null),xp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Pt.clearTimeout(n.m),n.m=null)}function pw(n){iw(n.h)||n.m||(n.m=!0,kl(n.Ja,n),n.C=0)}function GT(n,e){var t;t=e?e.m:n.U++;const r=js(n.F);xn(r,"SID",n.I),xn(r,"RID",t),xn(r,"AID",n.T),Ap(n,r),n.o&&n.s&&hw(r,n.o,n.s),t=new Ah(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=ZI(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),jm(n.h,t),Yv(t,r,e)}function Ap(n,e){n.ia&&Dv(n.ia,function(t,r){xn(e,r,t)}),n.l&&Mh({},function(t,r){xn(e,r,t)})}function ZI(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Kr(n.l.Ra,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=i[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let I=i[v].h;const T=i[v].g;if(I-=u,0>I)u=Math.max(0,i[v].h-100),m=!1;else try{xi(T,l,"req"+I+"_")}catch{r&&r(T)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function KI(n){n.g||n.u||(n.Z=1,kl(n.Ia,n),n.A=0)}function qm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Sh(Kr(n.Ia,n),QI(n,n.A)),n.A++,0))}function Wm(n){null!=n.B&&(Pt.clearTimeout(n.B),n.B=null)}function YI(n){n.g=new Ah(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=js(n.sa);xn(e,"RID","rpc"),xn(e,"SID",n.I),xn(e,"CI",n.L?"0":"1"),xn(e,"AID",n.T),xn(e,"TYPE","xmlhttp"),Ap(n,e),n.o&&n.s&&hw(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=bp(js(e)),t.s=null,t.P=!0,OT(t,n)}function xp(n){null!=n.v&&(Pt.clearTimeout(n.v),n.v=null)}function gw(n,e){var t=null;if(n.g==e){xp(n),Wm(n),n.g=null;var r=2}else{if(!ow(n.h,e))return;t=e.D,aw(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Dr(r=Lm(),new zv(r,t)),pw(n)}else KI(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function HT(n,e){return!(sw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Sh(Kr(n.Ja,n,e),QI(n,n.C)),n.C++,0)))}(n,e)||2==r&&qm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:$l(n,5);break;case 4:$l(n,10);break;case 3:$l(n,6);break;default:$l(n,2)}}function QI(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function $l(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Kr(n.kb,n);t||(t=new Ll("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||Vl(t,"https"),bp(t)),function Nh(n,e){const t=new Fm;if(Pt.Image){const r=new Image;r.onload=fp(Hm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=fp(Hm,t,r,"TestLoadImage: error",!1,e),r.onabort=fp(Hm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=fp(Hm,t,r,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ai(2);n.G=0,n.l&&n.l.va(e),mw(n),zm(n)}function mw(n){if(n.G=0,n.la=[],n.l){const e=HI(n.h);(0!=e.length||0!=n.i.length)&&(_T(n.la,e),_T(n.la,n.i),n.h.i.length=0,_v(n.i),n.i.length=0),n.l.ua()}}function JI(n,e,t){var r=t instanceof Ll?js(t):new Ll(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Bm(r,r.m);else{var i=Pt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Ll(null,void 0);r&&Vl(u,r),e&&(u.g=e),i&&Bm(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&xn(r,t,e),xn(r,"VER",n.ma),Ap(n,r),r}function yw(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ln(t&&n.Da&&!n.ra?new Cp({jb:!0}):n.ra)).Ka(n.H),e}function _w(){}function Mp(){if(bh&&!(10<=Number(ET)))throw Error("Environmental error: no available transport.")}function Wi(n,e){yr.call(this),this.g=new jl(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!vv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Rp(this)}function XI(n){Wv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function eb(){Zv.call(this),this.status=1}function Rp(n){this.g=n}(ft=Ln.prototype).Ka=function(n){this.L=n},ft.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Fl.g(),this.C=function RI(n){return n.h||(n.h=n.i())}(this.u?this.u:Fl),this.g.onreadystatechange=Kr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void WI(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Pt.FormData&&n instanceof Pt.FormData,!(0<=fI(BT,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Tp(this),0<this.B&&((this.K=function jT(n){return bh&&function _I(){return function pp(n){var e=wT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=wv(String(Am)).split("."),t=wv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",u=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=Ih(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||Ih(0==i[2].length,0==u[2].length)||Ih(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kr(this.qa,this)):this.A=Uv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){WI(this,u)}},ft.qa=function(){typeof Eh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dr(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Dr(this,"complete"),Dr(this,"abort"),Dp(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dp(this,!0)),Ln.X.M.call(this)},ft.Ha=function(){this.s||(this.F||this.v||this.l?lw(this):this.fb())},ft.fb=function(){lw(this)},ft.aa=function(){try{return 2<bo(this)?this.g.status:-1}catch{return-1}},ft.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),UT(e)}},ft.Ea=function(){return this.m},ft.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=jl.prototype).ma=8,ft.G=1,ft.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Ah(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Rm(u),Tv(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ZI(this,i,e),xn(t=js(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),Ap(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(dw(u)))+"&"+e:this.o&&hw(t,this.o,u)),jm(this.h,i),this.Ya&&xn(t,"TYPE","init"),this.O?(xn(t,"$req",e),xn(t,"SID","null"),i.Z=!0,Yv(i,t,null)):Yv(i,t,e),this.G=2}}else 3==this.G&&(n?GT(this,n):0==this.i.length||iw(this.h)||GT(this))},ft.Ia=function(){if(this.u=null,YI(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Sh(Kr(this.eb,this),n)}},ft.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ai(10),Sp(this),YI(this))},ft.cb=function(){null!=this.v&&(this.v=null,Sp(this),qm(this),Ai(19))},ft.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ai(2)):(this.j.info("Failed to ping google.com"),Ai(1))},(ft=_w.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Ra=function(){},Mp.prototype.g=function(n,e){return new Wi(n,e)},Lr(Wi,yr),Wi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ai(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=JI(n,null,n.V),pw(n)},Wi.prototype.close=function(){fw(this.g)},Wi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=mp(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&pw(e)},Wi.prototype.M=function(){this.g.l=null,delete this.j,fw(this.g),delete this.g,Wi.X.M.call(this)},Lr(XI,Wv),Lr(eb,Zv),Lr(Rp,_w),Rp.prototype.xa=function(){Dr(this.g,"a")},Rp.prototype.wa=function(n){Dr(this.g,new XI(n))},Rp.prototype.va=function(n){Dr(this.g,new eb)},Rp.prototype.ua=function(){Dr(this.g,"b")},Mp.prototype.createWebChannel=Mp.prototype.g,Wi.prototype.send=Wi.prototype.u,Wi.prototype.open=Wi.prototype.m,Wi.prototype.close=Wi.prototype.close,_p.NO_ERROR=0,_p.TIMEOUT=8,_p.HTTP_ERROR=6,MI.COMPLETE="complete",OI.EventType=vp,vp.OPEN="a",vp.CLOSE="b",vp.ERROR="c",vp.MESSAGE="d",yr.prototype.listen=yr.prototype.N,Ln.prototype.listenOnce=Ln.prototype.O,Ln.prototype.getLastError=Ln.prototype.Oa,Ln.prototype.getLastErrorCode=Ln.prototype.Ea,Ln.prototype.getStatus=Ln.prototype.aa,Ln.prototype.getResponseJson=Ln.prototype.Sa,Ln.prototype.getResponseText=Ln.prototype.fa,Ln.prototype.send=Ln.prototype.da,Ln.prototype.setWithCredentials=Ln.prototype.Ka;var tb=Ya.createWebChannelTransport=function(){return new Mp},HM=Ya.getStatEventTarget=function(){return Lm()},nb=Ya.ErrorCode=_p,GM=Ya.EventType=MI,zM=Ya.Event=lc,zT=Ya.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},qM=Ya.FetchXmlHttpFactory=Cp,vw=Ya.WebChannel=OI,WM=Ya.XhrIo=Ln;const Op="@firebase/firestore";class Yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yr.UNAUTHENTICATED=new Yr(null),Yr.GOOGLE_CREDENTIALS=new Yr("google-credentials-uid"),Yr.FIRST_PARTY=new Yr("first-party-uid"),Yr.MOCK_USER=new Yr("mock-user");let Hl="9.14.0";const Co=new uc.Yd("@firebase/firestore");function Zm(){return Co.logLevel}function Ne(n,...e){if(Co.logLevel<=uc.in.DEBUG){const t=e.map(ww);Co.debug(`Firestore (${Hl}): ${n}`,...t)}}function zn(n,...e){if(Co.logLevel<=uc.in.ERROR){const t=e.map(ww);Co.error(`Firestore (${Hl}): ${n}`,...t)}}function hc(n,...e){if(Co.logLevel<=uc.in.WARN){const t=e.map(ww);Co.warn(`Firestore (${Hl}): ${n}`,...t)}}function ww(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: `+n;throw zn(e),new Error(e)}function Rt(n,e){n||it()}function qe(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Ot.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yr.UNAUTHENTICATED))}shutdown(){}}class YM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class WT{constructor(e){this.t=e,this.currentUser=Yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=I=>this.i!==i?(i=this.i,t(I)):Promise.resolve();let l=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Tr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const I=l;e.enqueueRetryable((0,me.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},v=I=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(I=>v(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?v(I):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Tr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new qT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new Yr(e)}}class ZT{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Yr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Rt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class KT{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new ZT(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class YT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QT{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.A=t.token,new YT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ib(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class XT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ib(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Et(n,e){return n<e?-1:n>e?1:0}function Fh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Km(n){return n+"\0"}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dt(e)}static min(){return new dt(new Vn(0,0))}static max(){return new dt(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Np{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Np.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Np?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),l=t.get(i);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Np{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const eS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends Np{construct(e,t,r){return new nr(e,t,r)}static isValidIdentifier(e){return eS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new xe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const m=e[i];if("\\"===m){if(i+1===e.length)throw new xe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[i+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new xe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,i+=2}else"`"===m?(l=!l,i++):"."!==m||l?(r+=m,i++):(u(),i++)}if(u(),l)throw new xe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nr(t)}static emptyPath(){return new nr([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Jt.fromString(e))}static fromName(e){return new Ge(Jt.fromString(e).popFirst(5))}static empty(){return new Ge(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Jt(e.slice()))}}class Pp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ym(n){return n.fields.find(e=>2===e.kind)}function Gl(n){return n.fields.filter(e=>2!==e.kind)}Pp.UNKNOWN_ID=-1;class kp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Lh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Lh(0,_r.min())}}function ob(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=dt.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new _r(i,Ge.empty(),e)}function Qm(n){return new _r(n.readTime,n.key,-1)}class _r{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _r(dt.min(),Ge.empty(),-1)}static max(){return new _r(dt.max(),Ge.empty(),-1)}}function Jm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Et(n.largestBatchId,e.largestBatchId))}const Xm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ea{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function fc(n){return ab.apply(this,arguments)}function ab(){return ab=(0,me.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==Xm)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),ab.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,u=0,l=!1;e.forEach(m=>{++i,m.next(()=>{++u,l&&u===i&&t()},v=>r(v))}),l=!0,u===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const u=e.length,l=new Array(u);let m=0;for(let v=0;v<u;v++){const I=v;t(e[I]).next(T=>{l[I]=T,++m,m===u&&r(l)},T=>i(T))}})}static doWhile(e,t){return new ue((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class ey{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Tr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Vh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=cb(r.target.error);this.P.reject(new Vh(e,i))}}static open(e,t,r,i){try{return new ey(t,e.transaction(i,r))}catch(u){throw new Vh(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ub(t)}}class Do{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Do.D((0,Ot.z$)())&&zn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),ql(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ot.hl)())return!1;if(Do.N())return!0;const e=(0,Ot.z$)(),t=Do.D(e),r=0<t&&t<10,i=Do.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{i(new Vh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;i("VersionError"===m.name?new xe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Vh(e,m))},u.onupgradeneeded=l=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,me.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const v=ey.open(u.db,e,l?"readonly":"readwrite",r),I=i(v).next(T=>(v.V(),T)).catch(T=>(v.abort(T),ue.reject(T))).toPromise();return I.catch(()=>{}),yield v.v,I}catch(v){const I=v,T="FirebaseError"!==I.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",I.message,"Retrying:",T),u.close(),!T)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class nS{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ql(this.U.delete())}}class Vh extends xe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zl(n){return"IndexedDbTransactionError"===n.name}class ub{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ql(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),ql(this.store.add(e))}get(e){return ql(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),ql(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),ql(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(l,m)=>{u.push(m)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ue((u,l)=>{i.onerror=m=>{l(m.target.error)},i.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,l,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=u=>{const l=cb(u.target.error);i(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}H(e,t){const r=[];return new ue((i,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void i();const v=new nS(m),I=t(m.primaryKey,m.value,v);if(I instanceof ue){const T=I.catch(x=>(v.done(),ue.reject(x)));r.push(T)}v.isDone?i():null===v.G?m.continue():m.continue(v.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ql(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=cb(r.target.error);t(i)}})}let Ew=!1;function cb(n){const e=Do.D((0,Ot.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ew||(Ew=!0,setTimeout(()=>{throw r},0)),r}}return n}class Iw{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){zl(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield fc(r)}yield t.nt(6e4)}))}}class lb{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return ue.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ne("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(m=>{i-=m,r.add(l)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,u)).next(m=>(Ne("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const l=Qm(u);Jm(l,r)>0&&(r=l)}),new _r(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Mi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function bw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Cw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Mi.at=-1;class Mn{constructor(e,t){this.comparator=e,this.root=t||Vr.EMPTY}insert(e,t){return new Mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wl(this.root,e,this.comparator,!0)}}class Wl{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vr{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Vr.RED,this.left=i??Vr.EMPTY,this.right=u??Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Vr(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Vr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1,Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Vr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wn{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dw(this.data.getIterator())}getIteratorFrom(e){return new Dw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class Dw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zl(n){return n.hasNext()?n.getNext():void 0}class us{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new us([])}unionWith(e){let t=new wn(nr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new us(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ur(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const QM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xa(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=QM.exec(n);if(Rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rr(n.seconds),nanos:rr(n.nanos)}}function rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Kl(n){return"string"==typeof n?Ur.fromBase64String(n):Ur.fromUint8Array(n)}function Tw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function iS(n){const e=n.mapValue.fields.__previous_value__;return Tw(e)?iS(e):e}function ty(n){const e=Xa(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class JM{constructor(e,t,r,i,u,l,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class Yl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yl&&e.projectId===this.projectId&&e.database===this.database}}function ny(n){return null==n}function Fp(n){return 0===n&&1/n==-1/0}function Lp(n){return"number"==typeof n&&Number.isInteger(n)&&!Fp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const gc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ry={nullValue:"NULL_VALUE"};function mc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tw(n)?4:db(n)?9007199254740991:10:it()}function ui(n,e){if(n===e)return!0;const t=mc(n);if(t!==mc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ty(n).isEqual(ty(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Xa(r.timestampValue),l=Xa(i.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Kl(n.bytesValue).isEqual(Kl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return rr(r.geoPointValue.latitude)===rr(i.geoPointValue.latitude)&&rr(r.geoPointValue.longitude)===rr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return rr(r.integerValue)===rr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=rr(r.doubleValue),l=rr(i.doubleValue);return u===l?Fp(u)===Fp(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Fh(n.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:return function(r,i){const u=r.mapValue.fields||{},l=i.mapValue.fields||{};if(bw(u)!==bw(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!ui(u[m],l[m])))return!1;return!0}(n,e);default:return it()}var i}function Uh(n,e){return void 0!==(n.values||[]).find(t=>ui(t,e))}function ta(n,e){if(n===e)return 0;const t=mc(n),r=mc(e);if(t!==r)return Et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Et(n.booleanValue,e.booleanValue);case 2:return function(i,u){const l=rr(i.integerValue||i.doubleValue),m=rr(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return iy(n.timestampValue,e.timestampValue);case 4:return iy(ty(n),ty(e));case 5:return Et(n.stringValue,e.stringValue);case 6:return function(i,u){const l=Kl(i),m=Kl(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const l=i.split("/"),m=u.split("/");for(let v=0;v<l.length&&v<m.length;v++){const I=Et(l[v],m[v]);if(0!==I)return I}return Et(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const l=Et(rr(i.latitude),rr(u.latitude));return 0!==l?l:Et(rr(i.longitude),rr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const l=i.values||[],m=u.values||[];for(let v=0;v<l.length&&v<m.length;++v){const I=ta(l[v],m[v]);if(I)return I}return Et(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===gc.mapValue&&u===gc.mapValue)return 0;if(i===gc.mapValue)return 1;if(u===gc.mapValue)return-1;const l=i.fields||{},m=Object.keys(l),v=u.fields||{},I=Object.keys(v);m.sort(),I.sort();for(let T=0;T<m.length&&T<I.length;++T){const x=Et(m[T],I[T]);if(0!==x)return x;const L=ta(l[m[T]],v[I[T]]);if(0!==L)return L}return Et(m.length,I.length)}(n.mapValue,e.mapValue);default:throw it()}}function iy(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Et(n,e);const t=Xa(n),r=Xa(e),i=Et(t.seconds,r.seconds);return 0!==i?i:Et(t.nanos,r.nanos)}function Bh(n){return Vp(n)}function Vp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Xa(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Kl(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const l of r.values||[])u?u=!1:i+=",",i+=Vp(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of i)l?l=!1:u+=",",u+=`${m}:${Vp(r.fields[m])}`;return u+"}"}(n.mapValue):it();var e}function eu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jh(n){return!!n&&"integerValue"in n}function sy(n){return!!n&&"arrayValue"in n}function sS(n){return!!n&&"nullValue"in n}function oS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sw(n){return!!n&&"mapValue"in n}function $h(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$h(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$h(n.arrayValue.values[t]);return e}return Object.assign({},n)}function db(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function aS(n){return"nullValue"in n?ry:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?eu(Yl.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function uS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?eu(Yl.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?gc:it()}function hb(n,e){const t=ta(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Aw(n,e){const t=ta(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Br{constructor(e){this.value=e}static empty(){return new Br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$h(t)}setAll(e){let t=nr.emptyPath(),r={},i=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,i),r={},i=[],t=m.popLast()}l?r[m.lastSegment()]=$h(l):i.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Sw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pc(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Br($h(this.value))}}function xw(n){const e=[];return pc(n.fields,(t,r)=>{const i=new nr([t]);if(Sw(r)){const u=xw(r.mapValue).fields;if(0===u.length)e.push(i);else for(const l of u)e.push(i.child(l))}else e.push(i)}),new us(e)}class bn{constructor(e,t,r,i,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=l}static newInvalidDocument(e){return new bn(e,0,dt.min(),dt.min(),Br.empty(),0)}static newFoundDocument(e,t,r){return new bn(e,1,t,dt.min(),r,0)}static newNoDocument(e,t){return new bn(e,2,t,dt.min(),Br.empty(),0)}static newUnknownDocument(e,t){return new bn(e,3,t,dt.min(),Br.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cS{constructor(e,t=null,r=[],i=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=l,this.endAt=m,this.ht=null}}function Mw(n,e=null,t=[],r=[],i=null,u=null,l=null){return new cS(n,e,t,r,i,u,l)}function tu(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Bh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),ny(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bh(r)).join(",")),e.ht=t}return e.ht}function Hh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!iR(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ui(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gS(n.startAt,e.startAt)&&gS(n.endAt,e.endAt)}function Gh(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function oy(n,e){return n.filters.filter(t=>t instanceof ci&&t.field.isEqual(e))}function fb(n,e,t){let r=ry,i=!0;for(const u of oy(n,e)){let l=ry,m=!0;switch(u.op){case"<":case"<=":l=aS(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=ry}hb({value:r,inclusive:i},{value:l,inclusive:m})<0&&(r=l,i=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];hb({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function lS(n,e,t){let r=gc,i=!0;for(const u of oy(n,e)){let l=gc,m=!0;switch(u.op){case">=":case">":l=uS(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=gc}Aw({value:r,inclusive:i},{value:l,inclusive:m})>0&&(r=l,i=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];Aw({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class ci extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new dS(e,t,r):"array-contains"===t?new eR(e,r):"in"===t?new tR(e,r):"not-in"===t?new nR(e,r):"array-contains-any"===t?new rR(e,r):new ci(e,t,r)}static lt(e,t,r){return"in"===t?new hS(e,r):new fS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ta(t,this.value)):null!==t&&mc(this.value)===mc(t)&&this.ft(ta(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class dS extends ci{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.ft(t)}}class hS extends ci{constructor(e,t){super(e,"in",t),this.keys=pb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fS extends ci{constructor(e,t){super(e,"not-in",t),this.keys=pb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class eR extends ci{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sy(t)&&Uh(t.arrayValue,this.value)}}class tR extends ci{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Uh(this.value.arrayValue,t)}}class nR extends ci{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Uh(this.value.arrayValue,t)}}class rR extends ci{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uh(this.value.arrayValue,r))}}class yc{constructor(e,t){this.position=e,this.inclusive=t}}class Up{constructor(e,t="asc"){this.field=e,this.dir=t}}function iR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function pS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],l=n.position[i];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(l.referenceValue),t.key):ta(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function gS(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ui(n.position[t],e.position[t]))return!1;return!0}class _c{constructor(e,t=null,r=[],i=[],u=null,l="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=v,this._t=null,this.wt=null}}function mS(n,e,t,r,i,u,l,m){return new _c(n,e,t,r,i,u,l,m)}function s(n){return new _c(n)}function o(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function a(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function c(n){for(const e of n.filters)if(e.dt())return e.field;return null}function d(n){return null!==n.collectionGroup}function p(n){const e=qe(n);if(null===e._t){e._t=[];const t=c(e),r=a(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Up(t)),e._t.push(new Up(nr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Up(nr.keyField(),u))}}}return e._t}function _(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=Mw(e.path,e.collectionGroup,p(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of p(e))t.push(new Up(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new yc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new yc(e.startAt.position,e.startAt.inclusive):null;e.wt=Mw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function E(n,e,t){return new _c(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function b(n,e){return Hh(_(n),_(e))&&n.limitType===e.limitType}function S(n){return`${tu(_(n))}|lt:${n.limitType}`}function R(n){return`Query(target=${function XM(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Bh(r.value)}`;var r}).join(", ")}]`),ny(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Bh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Bh(t)).join(",")),`Target(${e})`}(_(n))}; limitType=${n.limitType})`}function k(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,l){const m=pS(i,u,l);return i.inclusive?m<=0:m<0}(t.startAt,p(t),r)||t.endAt&&!function(i,u,l){const m=pS(i,u,l);return i.inclusive?m>=0:m>0}(t.endAt,p(t),r)));var t,r}function G(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function te(n){return(e,t)=>{let r=!1;for(const i of p(n)){const u=ve(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function ve(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,u,l){const m=u.data.field(i),v=l.data.field(i);return null!==m&&null!==v?ta(m,v):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function ke(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fp(e)?"-0":e}}function ze(n){return{integerValue:""+n}}function st(n,e){return Lp(e)?ze(e):ke(n,e)}class vt{constructor(){this._=void 0}}function Me(n,e,t){return n instanceof gn?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof cs?ay(n,e):n instanceof nu?uy(n,e):function(r,i){const u=un(r,i),l=cy(u)+cy(r.yt);return jh(u)&&jh(r.yt)?ze(l):ke(r.It,l)}(n,e)}function At(n,e,t){return n instanceof cs?ay(n,e):n instanceof nu?uy(n,e):t}function un(n,e){return n instanceof vc?jh(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class gn extends vt{}class cs extends vt{constructor(e){super(),this.elements=e}}function ay(n,e){const t=ly(e);for(const r of n.elements)t.some(i=>ui(i,r))||t.push(r);return{arrayValue:{values:t}}}class nu extends vt{constructor(e){super(),this.elements=e}}function uy(n,e){let t=ly(e);for(const r of n.elements)t=t.filter(i=>!ui(i,r));return{arrayValue:{values:t}}}class vc extends vt{constructor(e,t){super(),this.It=e,this.yt=t}}function cy(n){return rr(n.integerValue||n.doubleValue)}function ly(n){return sy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ql{constructor(e,t){this.field=e,this.transform=t}}class Ow{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class mb{}function sR(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new hy(n.key,ir.none()):new dy(n.key,n.data,ir.none());{const t=n.data,r=Br.empty();let i=new wn(nr.comparator);for(let u of e.fields)if(!i.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),i=i.add(u)}return new Jl(n.key,r,new us(i.toArray()),ir.none())}}function Ck(n,e,t){n instanceof dy?function(r,i,u){const l=r.value.clone(),m=uR(r.fieldTransforms,i,u.transformResults);l.setAll(m),i.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Jl?function(r,i,u){if(!gb(r.precondition,i))return void i.convertToUnknownDocument(u.version);const l=uR(r.fieldTransforms,i,u.transformResults),m=i.data;m.setAll(aR(r)),m.setAll(l),i.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Nw(n,e,t,r){return n instanceof dy?function(i,u,l,m){if(!gb(i.precondition,u))return l;const v=i.value.clone(),I=cR(i.fieldTransforms,m,u);return v.setAll(I),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Jl?function(i,u,l,m){if(!gb(i.precondition,u))return l;const v=cR(i.fieldTransforms,m,u),I=u.data;return I.setAll(aR(i)),I.setAll(v),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,gb(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Dk(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=un(r.transform,i||null);null!=u&&(null===t&&(t=Br.empty()),t.set(r.field,u))}return t||null}function oR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Fh(t,r,(i,u)=>function Rw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof cs&&r instanceof cs||t instanceof nu&&r instanceof nu?Fh(t.elements,r.elements,ui):t instanceof vc&&r instanceof vc?ui(t.yt,r.yt):t instanceof gn&&r instanceof gn);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class dy extends mb{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Jl extends mb{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function aR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function uR(n,e,t){const r=new Map;Rt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],l=u.transform,m=e.data.field(u.field);r.set(u.field,At(l,m,t[i]))}return r}function cR(n,e,t){const r=new Map;for(const i of n){const u=i.transform,l=t.data.field(i.field);r.set(i.field,Me(u,l,e))}return r}class hy extends mb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yS extends mb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tk{constructor(e){this.count=e}}var jr,cn;function lR(n){switch(n){default:return it();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function dR(n){if(void 0===n)return zn("GRPC error has no .code"),de.UNKNOWN;switch(n){case jr.OK:return de.OK;case jr.CANCELLED:return de.CANCELLED;case jr.UNKNOWN:return de.UNKNOWN;case jr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case jr.INTERNAL:return de.INTERNAL;case jr.UNAVAILABLE:return de.UNAVAILABLE;case jr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case jr.NOT_FOUND:return de.NOT_FOUND;case jr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case jr.ABORTED:return de.ABORTED;case jr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case jr.DATA_LOSS:return de.DATA_LOSS;default:return it()}}(cn=jr||(jr={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class zh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pc(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return Cw(this.inner)}size(){return this.innerSize}}const Sk=new Mn(Ge.comparator);function $s(){return Sk}const hR=new Mn(Ge.comparator);function Pw(...n){let e=hR;for(const t of n)e=e.insert(t.key,t);return e}function fR(n){let e=hR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wc(){return kw()}function pR(){return kw()}function kw(){return new zh(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ak=new Mn(Ge.comparator),xk=new wn(Ge.comparator);function zt(...n){let e=xk;for(const t of n)e=e.add(t);return e}const Mk=new wn(Et);function yb(){return Mk}class Fw{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Lw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Fw(dt.min(),i,yb(),$s(),zt())}}class Lw{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Lw(r,t,zt(),zt(),zt())}}class _b{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class gR{constructor(e,t){this.targetId=e,this.At=t}}class mR{constructor(e,t,r=Ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class yR{constructor(){this.Rt=0,this.bt=vR(),this.Pt=Ur.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=zt(),t=zt(),r=zt();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new Lw(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=vR()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Rk{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=$s(),this.qt=_R(),this.Kt=new wn(Et)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(Gh(u))if(0===r){const l=new Ge(u.path);this.jt(t,l,bn.newNoDocument(l,dt.min()))}else Rt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,l)=>{const m=this.Xt(l);if(m){if(u.current&&Gh(m.target)){const v=new Ge(m.target.path);null!==this.Ut.get(v)||this.ee(l,v)||this.jt(l,v,bn.newNoDocument(v,e))}u.Dt&&(t.set(l,u.xt()),u.Nt())}});let r=zt();this.qt.forEach((u,l)=>{let m=!0;l.forEachWhile(v=>{const I=this.Xt(v);return!I||2===I.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const i=new Fw(e,t,this.Kt,this.Ut,r);return this.Ut=$s(),this.qt=_R(),this.Kt=new wn(Et),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new yR,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new wn(Et),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new yR),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function _R(){return new Mn(Ge.comparator)}function vR(){return new Mn(Ge.comparator)}const Ok={asc:"ASCENDING",desc:"DESCENDING"},Nk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Pk{constructor(e,t){this.databaseId=e,this.gt=t}}function Vw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wR(n,e){return n.gt?e.toBase64():e.toUint8Array()}function kk(n,e){return Vw(n,e.toTimestamp())}function li(n){return Rt(!!n),dt.fromTimestamp(function(e){const t=Xa(e);return new Vn(t.seconds,t.nanos)}(n))}function _S(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ER(n){const e=Jt.fromString(n);return Rt(xR(e)),e}function Uw(n,e){return _S(n.databaseId,e.path)}function Ec(n,e){const t=ER(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(bR(t))}function vS(n,e){return _S(n.databaseId,e)}function IR(n){const e=ER(n);return 4===e.length?Jt.emptyPath():bR(e)}function Bw(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bR(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function CR(n,e,t){return{name:Uw(n,e),fields:t.value.mapValue.fields}}function DR(n,e,t){const r=Ec(n,e.name),i=li(e.updateTime),u=new Br({mapValue:{fields:e.fields}}),l=bn.newFoundDocument(r,i,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function jw(n,e){let t;if(e instanceof dy)t={update:CR(n,e.key,e.value)};else if(e instanceof hy)t={delete:Uw(n,e.key)};else if(e instanceof Jl)t={update:CR(n,e.key,e.data),updateMask:Gk(e.fieldMask)};else{if(!(e instanceof yS))return it();t={verify:Uw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const l=u.transform;if(l instanceof gn)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof cs)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof nu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof vc)return{fieldPath:u.field.canonicalString(),increment:l.yt};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:kk(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function wS(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ir.updateTime(li(i.updateTime)):void 0!==i.exists?ir.exists(i.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,l){let m=null;"setToServerValue"in l?(Rt("REQUEST_TIME"===l.setToServerValue),m=new gn):"appendMissingElements"in l?m=new cs(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new nu(l.removeAllFromArray.values||[]):"increment"in l?m=new vc(u,l.increment):it();const v=nr.fromServerFormat(l.fieldPath);return new Ql(v,m)}(n,i)):[];var i;if(e.update){const i=Ec(n,e.update.name),u=new Br({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new us((e.updateMask.fieldPaths||[]).map(I=>nr.fromServerFormat(I)));return new Jl(i,u,l,t,r)}return new dy(i,u,t,r)}if(e.delete){const i=Ec(n,e.delete);return new hy(i,t)}if(e.verify){const i=Ec(n,e.verify);return new yS(i,t)}return it()}function TR(n,e){return{documents:[vS(n,e.path)]}}function ES(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=vS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=vS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(v){if(0===v.length)return;const I=v.map(T=>function(x){if("=="===x.op){if(oS(x.value))return{unaryFilter:{field:fy(x.field),op:"IS_NAN"}};if(sS(x.value))return{unaryFilter:{field:fy(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(oS(x.value))return{unaryFilter:{field:fy(x.field),op:"IS_NOT_NAN"}};if(sS(x.value))return{unaryFilter:{field:fy(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fy(x.field),op:jk(x.op),value:x.value}}}(T));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(v){if(0!==v.length)return v.map(I=>{return{field:fy((T=I).field),direction:Bk(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(I=e.limit,n.gt||ny(I)?I:{value:I});var I,m,v;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function SR(n){let e=IR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Rt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=AR(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new Up(py((x=T).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let m=null;t.limit&&(m=function(T){let x;return x="object"==typeof T?T.value:T,ny(x)?null:x}(t.limit));let v=null;var T;t.startAt&&(v=new yc((T=t.startAt).values||[],!!T.before));let I=null;return t.endAt&&(I=function(T){return new yc(T.values||[],!T.before)}(t.endAt)),mS(e,i,l,u,m,"F",v,I)}function AR(n){return n?void 0!==n.unaryFilter?[Hk(n)]:void 0!==n.fieldFilter?[$k(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>AR(e)).reduce((e,t)=>e.concat(t)):it():[]}function Bk(n){return Ok[n]}function jk(n){return Nk[n]}function fy(n){return{fieldPath:n.canonicalString()}}function py(n){return nr.fromServerFormat(n.fieldPath)}function $k(n){return ci.create(py(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function Hk(n){switch(n.unaryFilter.op){case"IS_NAN":const e=py(n.unaryFilter.field);return ci.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=py(n.unaryFilter.field);return ci.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=py(n.unaryFilter.field);return ci.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=py(n.unaryFilter.field);return ci.create(i,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function Gk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xR(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ls(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=MR(e)),e=zk(n.get(t),e);return MR(e)}function zk(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function MR(n){return n+"\x01\x01"}function Ic(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&it(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let v;0===i.length?v=m:(i+=m,v=i,i=""),r.push(v);break;case"\x10":i+=n.substring(u,l),i+="\0";break;case"\x11":i+=n.substring(u,l+1);break;default:it()}u=l+2}return new Jt(r)}const RR=["userId","batchId"];function vb(n,e){return[n,ls(e)]}function OR(n,e,t){return[n,ls(e),t]}const qk={},Wk=["prefixPath","collectionGroup","readTime","documentId"],Zk=["prefixPath","collectionGroup","documentId"],Kk=["collectionGroup","readTime","prefixPath","documentId"],Yk=["canonicalId","targetId"],Qk=["targetId","path"],Jk=["path","targetId"],Xk=["collectionId","parent"],e1=["indexId","uid"],t1=["uid","sequenceNumber"],n1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],r1=["indexId","uid","orderedDocumentKey"],i1=["userId","collectionPath","documentId"],s1=["userId","collectionPath","largestBatchId"],o1=["userId","collectionGroup","largestBatchId"],NR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],a1=[...NR,"documentOverlays"],PR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kR=PR,u1=[...kR,"indexConfiguration","indexState","indexEntries"];class IS extends ea{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function di(n,e){const t=qe(n);return Do.M(t.ie,e)}class bS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&Ck(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Nw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Nw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=pR();return this.mutations.forEach(i=>{const u=e.get(i.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(i.key)?null:m;const v=sR(l,m);null!==v&&r.set(i.key,v),l.isValidDocument()||l.convertToNoDocument(dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zt())}isEqual(e){return this.batchId===e.batchId&&Fh(this.mutations,e.mutations,(t,r)=>oR(t,r))&&Fh(this.baseMutations,e.baseMutations,(t,r)=>oR(t,r))}}class CS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Rt(e.mutations.length===r.length);let i=Ak;const u=e.mutations;for(let l=0;l<u.length;l++)i=i.insert(u[l].key,r[l].version);return new CS(e,t,r,i)}}class DS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qh{constructor(e,t,r,i,u=dt.min(),l=dt.min(),m=Ur.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new qh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new qh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new qh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class FR{constructor(e){this.re=e}}function LR(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Uw(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Vw(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bp(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Bp(e.version)}}var i,u;return r}function wb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jp(n){const e=new Vn(n.seconds,n.nanoseconds);return dt.fromTimestamp(e)}function $p(n,e){const t=(e.baseMutations||[]).map(u=>wS(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>wS(n.re,u)),i=Vn.fromMillis(e.localWriteTimeMs);return new bS(e.batchId,i,t,r)}function $w(n){const e=jp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jp(n.lastLimboFreeSnapshotVersion):dt.min();let r;var i;return void 0!==n.query.documents?(Rt(1===(i=n.query).documents.length),r=_(s(IR(i.documents[0])))):r=_(SR(n.query)),new qh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ur.fromBase64String(n.resumeToken))}function VR(n,e){const t=Bp(e.snapshotVersion),r=Bp(e.lastLimboFreeSnapshotVersion);let i;i=Gh(e.target)?TR(n.re,e.target):ES(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:tu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function TS(n){const e=SR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?E(e,e.limit,"L"):e}function SS(n,e){return new DS(e.largestBatchId,wS(n.re,e.overlayMutation))}function UR(n,e){const t=e.path.lastSegment();return[n,ls(e.path.popLast()),t]}function BR(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Bp(r.readTime),documentKey:ls(r.documentKey.path),largestBatchId:r.largestBatchId}}class l1{getBundleMetadata(e,t){return jR(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:jp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return jR(e).put({bundleId:(r=t).id,createTime:Bp(li(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return $R(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:TS(i.bundledQuery),readTime:jp(i.readTime)};var i})}saveNamedQuery(e,t){return $R(e).put({name:(r=t).name,readTime:Bp(li(r.readTime)),bundledQuery:r.bundledQuery});var r}}function jR(n){return di(n,"bundles")}function $R(n){return di(n,"namedQueries")}class Eb{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Eb(e,t.uid||"")}getOverlay(e,t){return Hw(e).get(UR(this.userId,t)).next(r=>r?SS(this.It,r):null)}getOverlays(e,t){const r=wc();return ue.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,l)=>{const m=new DS(t,l);i.push(this.ue(e,m))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(ls(l.getCollectionPath())));const u=[];return i.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Hw(e).Y("collectionPathOverlayIndex",m))}),ue.waitFor(u)}getOverlaysForCollection(e,t,r){const i=wc(),u=ls(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Hw(e).W("collectionPathOverlayIndex",l).next(m=>{for(const v of m){const I=SS(this.It,v);i.set(I.getKey(),I)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=wc();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Hw(e).Z({index:"collectionGroupOverlayIndex",range:m},(v,I,T)=>{const x=SS(this.It,I);u.size()<i||x.largestBatchId===l?(u.set(x.getKey(),x),l=x.largestBatchId):T.done()}).next(()=>u)}ue(e,t){return Hw(e).put(function(r,i,u){const[l,m,v]=UR(i,u.mutation.key);return{userId:i,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:jw(r.re,u.mutation)}}(this.It,this.userId,t))}}function Hw(n){return di(n,"documentOverlays")}class Hp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(rr(e.integerValue));else if("doubleValue"in e){const r=rr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Fp(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Kl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?db(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):it()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ge.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function d1(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function HR(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=d1(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Hp.Te=new Hp;class h1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=HR(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=HR(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class f1{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class p1{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Gw{constructor(){this.Be=new h1,this.Le=new f1(this.Be),this.Ue=new p1(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Gp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gp(this.indexId,this.documentKey,this.arrayValue,r)}}function zp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=GR(n.arrayValue,e.arrayValue),0!==t?t:(t=GR(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function GR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class g1{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Ym(e);if(void 0!==t&&!this.ze(t))return!1;const r=Gl(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[u++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class m1{constructor(){this.Ye=new AS}addToCollectionParentIndex(e,t){return this.Ye.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(_r.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class AS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wn(Jt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wn(Jt.comparator)).toArray()}}const Ib=new Uint8Array(0);class y1{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new AS,this.Ze=new zh(r=>tu(r),(r,i)=>Hh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:ls(i)};return zR(e).put(u)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Km(t),""],!1,!0);return zR(e).W(i).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Ic(l.parent))}return r})}addFieldIndex(e,t){const r=bb(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete i.indexId;const u=r.add(i);if(t.indexState){const l=qw(e);return u.next(m=>{l.put(BR(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=bb(e),i=qw(e),u=zw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=zw(e);let i=!0;const u=new Map;return ue.forEach(this.tn(t),l=>this.en(e,l).next(m=>{i&&(i=!!m),u.set(l,m)})).next(()=>{if(i){let l=zt();const m=[];return ue.forEach(u,(v,I)=>{var T;Ne("IndexedDbIndexManager",`Using index ${T=v,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(lt=>`${lt.fieldPath}:${lt.kind}`).join(",")}`} to execute ${tu(t)}`);const x=function(lt,at){const Tt=Ym(at);if(void 0===Tt)return null;for(const Ft of oy(lt,Tt.fieldPath))switch(Ft.op){case"array-contains-any":return Ft.value.arrayValue.values||[];case"array-contains":return[Ft.value]}return null}(I,v),L=function(lt,at){const Tt=new Map;for(const Ft of Gl(at))for(const hr of oy(lt,Ft.fieldPath))switch(hr.op){case"==":case"in":Tt.set(Ft.fieldPath.canonicalString(),hr.value);break;case"not-in":case"!=":return Tt.set(Ft.fieldPath.canonicalString(),hr.value),Array.from(Tt.values())}return null}(I,v),U=function(lt,at){const Tt=[];let Ft=!0;for(const hr of Gl(at)){const ou=0===hr.kind?fb(lt,hr.fieldPath,lt.startAt):lS(lt,hr.fieldPath,lt.startAt);Tt.push(ou.value),Ft&&(Ft=ou.inclusive)}return new yc(Tt,Ft)}(I,v),Z=function(lt,at){const Tt=[];let Ft=!0;for(const hr of Gl(at)){const ou=0===hr.kind?lS(lt,hr.fieldPath,lt.endAt):fb(lt,hr.fieldPath,lt.endAt);Tt.push(ou.value),Ft&&(Ft=ou.inclusive)}return new yc(Tt,Ft)}(I,v),Ce=this.nn(v,I,U),Ee=this.nn(v,I,Z),Qe=this.sn(v,I,L),yt=this.rn(v.indexId,x,Ce,U.inclusive,Ee,Z.inclusive,Qe);return ue.forEach(yt,lt=>r.J(lt,t.limit).next(at=>{at.forEach(Tt=>{const Ft=Ge.fromSegments(Tt.documentKey);l.has(Ft)||(l=l.add(Ft),m.push(Ft))})}))}).next(()=>m)}return ue.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,l,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),I=v/(null!=t?t.length:1),T=[];for(let x=0;x<v;++x){const L=t?this.on(t[x/I]):Ib,U=this.un(e,L,r[x%I],i),Z=this.cn(e,L,u[x%I],l),Ce=m.map(Ee=>this.un(e,L,Ee,!0));T.push(...this.createRange(U,Z,Ce))}return T}un(e,t,r,i){const u=new Gp(e,Ge.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new Gp(e,Ge.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new g1(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let l=null;for(const m of u)r.We(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;return ue.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(l){let m=new wn(nr.comparator),v=!1;for(const I of l.filters){const T=I;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?v=!0:m=m.add(T.field))}for(const I of l.orderBy)I.field.isKeyField()||(m=m.add(I.field));return m.size+(v?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Gw;for(const i of Gl(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const l=r.qe(i.kind);Hp.Te.ce(u,l)}return r.$e()}on(e){const t=new Gw;return Hp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Gw;return Hp.Te.ce(eu(this.databaseId,t),r.qe(function(i){const u=Gl(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Gw);let u=0;for(const l of Gl(e)){const m=r[u++];for(const v of i)if(this.ln(t,l.fieldPath)&&sy(m))i=this.fn(i,l,m);else{const I=v.qe(l.kind);Hp.Te.ce(m,I)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of i){const v=new Gw;v.seed(m.$e()),Hp.Te.ce(l,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof ci&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=bb(e),i=qw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return ue.forEach(u,m=>i.get([m.indexId,this.uid]).next(v=>{l.push(function(I,T){const x=T?new Lh(T.sequenceNumber,new _r(jp(T.readTime),new Ge(Ic(T.documentKey)),T.largestBatchId)):Lh.empty(),L=I.fields.map(([U,Z])=>new kp(nr.fromServerFormat(U),Z));return new Pp(I.indexId,I.collectionGroup,L,x)}(m,v))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Et(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=bb(e),u=qw(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ue.forEach(m,v=>u.put(BR(v.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,u)=>{const l=r.get(i.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(m=>(r.set(i.collectionGroup,m),ue.forEach(m,v=>this.wn(e,i,v).next(I=>{const T=this.mn(u,v);return I.isEqual(T)?ue.resolve():this.gn(e,u,v,I,T)}))))})}yn(e,t,r,i){return zw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return zw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=zw(e);let u=new wn(zp);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,m)=>{u=u.add(new Gp(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new wn(zp);const i=this.an(t,e);if(null==i)return r;const u=Ym(t);if(null!=u){const l=e.data.field(u.fieldPath);if(sy(l))for(const m of l.arrayValue.values||[])r=r.add(new Gp(t.indexId,e.key,this.on(m),i))}else r=r.add(new Gp(t.indexId,e.key,Ib,i));return r}gn(e,t,r,i,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,v,I,T,x){const L=m.getIterator(),U=v.getIterator();let Z=Zl(L),Ce=Zl(U);for(;Z||Ce;){let Ee=!1,Qe=!1;if(Z&&Ce){const yt=I(Z,Ce);yt<0?Qe=!0:yt>0&&(Ee=!0)}else null!=Z?Qe=!0:Ee=!0;Ee?(T(Ce),Ce=Zl(U)):Qe?(x(Z),Z=Zl(L)):(Z=Zl(L),Ce=Zl(U))}}(i,u,zp,m=>{l.push(this.yn(e,t,r,m))},m=>{l.push(this.pn(e,t,r,m))}),ue.waitFor(l)}_n(e){let t=1;return qw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>zp(l,m)).filter((l,m,v)=>!m||0!==zp(l,v[m-1]));const i=[];i.push(e);for(const l of r){const m=zp(l,e),v=zp(l,t);if(0===m)i[0]=e.Ke();else if(m>0&&v<0)i.push(l),i.push(l.Ke());else if(v>0)break}i.push(t);const u=[];for(let l=0;l<i.length;l+=2)u.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Ib,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Ib,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qR)}getMinOffset(e,t){return ue.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||it())).next(qR)}}function zR(n){return di(n,"collectionParents")}function zw(n){return di(n,"indexEntries")}function bb(n){return di(n,"indexConfiguration")}function qw(n){return di(n,"indexState")}function qR(n){Rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Jm(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new _r(e.readTime,e.documentKey,t)}const WR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Hs(e,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ZR(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const v=r.Z({range:l},(T,x,L)=>(m++,L.delete()));u.push(v.next(()=>{Rt(1===m)}));const I=[];for(const T of t.mutations){const x=OR(e,T.key.path,t.batchId);u.push(i.delete(x)),I.push(T.key)}return ue.waitFor(u).next(()=>I)}function Cb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Hs.DEFAULT_COLLECTION_PERCENTILE=10,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hs.DEFAULT=new Hs(41943040,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hs.DISABLED=new Hs(-1,0,0);class Db{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Db(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wh(e).Z({index:"userMutationsIndex",range:r},(i,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=gy(e),l=Wh(e);return l.add({}).next(m=>{Rt("number"==typeof m);const v=new bS(m,t,r,i),I=function(L,U,Z){const Ce=Z.baseMutations.map(Qe=>jw(L.re,Qe)),Ee=Z.mutations.map(Qe=>jw(L.re,Qe));return{userId:U,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:Ce,mutations:Ee}}(this.It,this.userId,v),T=[];let x=new wn((L,U)=>Et(L.canonicalString(),U.canonicalString()));for(const L of i){const U=OR(this.userId,L.key.path,m);x=x.add(L.key.path.popLast()),T.push(l.put(I)),T.push(u.put(U,qk))}return x.forEach(L=>{T.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[m]=v.keys()}),ue.waitFor(T).next(()=>v)})}lookupMutationBatch(e,t){return Wh(e).get(t).next(r=>r?(Rt(r.userId===this.userId),$p(this.It,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Wh(e).Z({index:"userMutationsIndex",range:i},(l,m,v)=>{m.userId===this.userId&&(Rt(m.batchId>=r),u=$p(this.It,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Wh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wh(e).W("userMutationsIndex",t).next(r=>r.map(i=>$p(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vb(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return gy(e).Z({range:i},(l,m,v)=>{const[I,T,x]=l,L=Ic(T);if(I===this.userId&&t.path.isEqual(L))return Wh(e).get(x).next(U=>{if(!U)throw it();Rt(U.userId===this.userId),u.push($p(this.It,U))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Et);const i=[];return t.forEach(u=>{const l=vb(this.userId,u.path),m=IDBKeyRange.lowerBound(l),v=gy(e).Z({range:m},(I,T,x)=>{const[L,U,Z]=I,Ce=Ic(U);L===this.userId&&u.path.isEqual(Ce)?r=r.add(Z):x.done()});i.push(v)}),ue.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=vb(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new wn(Et);return gy(e).Z({range:l},(v,I,T)=>{const[x,L,U]=v,Z=Ic(L);x===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(m=m.add(U)):T.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Wh(e).get(u).next(l=>{if(null===l)throw it();Rt(l.userId===this.userId),r.push($p(this.It,l))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ZR(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return gy(e).Z({range:r},(u,l,m)=>{if(u[0]===this.userId){const v=Ic(u[1]);i.push(v)}else m.done()}).next(()=>{Rt(0===i.length)})})}containsKey(e,t){return KR(e,this.userId,t)}Rn(e){return YR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function KR(n,e,t){const r=vb(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return gy(n).Z({range:u,X:!0},(m,v,I)=>{const[T,x,L]=m;T===e&&x===i&&(l=!0),I.done()}).next(()=>l)}function Wh(n){return di(n,"mutations")}function gy(n){return di(n,"documentMutations")}function YR(n){return di(n,"mutationQueues")}class qp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new qp(0)}static vn(){return new qp(-1)}}class _1{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new qp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>dt.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>my(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return my(e).Z((l,m)=>{const v=$w(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(i++,u.push(this.removeTargetData(e,v)))}).next(()=>ue.waitFor(u)).next(()=>i)}forEachTarget(e,t){return my(e).Z((r,i)=>{const u=$w(i);t(u)})}Vn(e){return QR(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}Sn(e,t){return QR(e).put("targetGlobalKey",t)}Dn(e,t){return my(e).put(VR(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=tu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return my(e).Z({range:i,index:"queryTargetsIndex"},(l,m,v)=>{const I=$w(m);Hh(t,I.target)&&(u=I,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Zh(e);return t.forEach(l=>{const m=ls(l.path);i.push(u.put({targetId:r,path:m})),i.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=Zh(e);return ue.forEach(t,u=>{const l=ls(u.path);return ue.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Zh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Zh(e);let u=zt();return i.Z({range:r,X:!0},(l,m,v)=>{const I=Ic(l[1]),T=new Ge(I);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=ls(t.path),i=IDBKeyRange.bound([r],[Km(r)],!1,!0);let u=0;return Zh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,m],v,I)=>{0!==l&&(u++,I.done())}).next(()=>u>0)}se(e,t){return my(e).get(t).next(r=>r?$w(r):null)}}function my(n){return di(n,"targets")}function QR(n){return di(n,"targetGlobal")}function Zh(n){return di(n,"targetDocuments")}function JR([n,e],[t,r]){const i=Et(n,t);return 0===i?Et(e,r):i}class v1{constructor(e){this.xn=e,this.buffer=new wn(JR),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();JR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class w1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){zl(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield fc(r)}yield t.Fn(3e5)}))}}class E1{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Mi.at);const r=new v1(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(WR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WR):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,l,m,v,I;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,l=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,m=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(I=Date.now(),Zm()<=uc.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${x} documents in `+(I-v)+`ms\nTotal Duration: ${I-T}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:x})))}}class I1{constructor(e,t){this.db=e,this.garbageCollector=new E1(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Tb(e,r)}removeReference(e,t,r){return Tb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Tb(e,t)}Gn(e,t){return function(r,i){let u=!1;return YR(r).tt(l=>KR(r,l,i).next(m=>(m&&(u=!0),ue.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(l,m)=>{if(m<=t){const v=this.Gn(e,l).next(I=>{if(!I)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,dt.min()),Zh(e).delete([0,ls(l.path)])))});i.push(v)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Tb(e,t)}Kn(e,t){const r=Zh(e);let i,u=Mi.at;return r.Z({index:"documentTargetsIndex"},([l,m],{path:v,sequenceNumber:I})=>{0===l?(u!==Mi.at&&t(new Ge(Ic(i)),u),u=I,i=v):u=Mi.at}).next(()=>{u!==Mi.at&&t(new Ge(Ic(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tb(n,e){return Zh(n).put((r=n.currentSequenceNumber,{targetId:0,path:ls(e.path),sequenceNumber:r}));var r}class XR{constructor(){this.changes=new zh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class b1{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wp(e).put(r)}removeEntry(e,t,r){return Wp(e).delete(function(i,u){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],wb(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=bn.newInvalidDocument(t);return Wp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ww(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:bn.newInvalidDocument(t)};return Wp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ww(t))},(i,u)=>{r={document:this.jn(t,u),size:Cb(u)}}).next(()=>r)}getEntries(e,t){let r=$s();return this.zn(e,t,(i,u)=>{const l=this.jn(i,u);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=$s(),i=new Mn(Ge.comparator);return this.zn(e,t,(u,l)=>{const m=this.jn(u,l);r=r.insert(u,m),i=i.insert(u,Cb(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let i=new wn(rO);t.forEach(v=>i=i.add(v));const u=IDBKeyRange.bound(Ww(i.first()),Ww(i.last())),l=i.getIterator();let m=l.getNext();return Wp(e).Z({index:"documentKeyIndex",range:u},(v,I,T)=>{const x=Ge.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;m&&rO(m,x)<0;)r(m,null),m=l.getNext();m&&m.isEqual(x)&&(r(m,I),m=l.hasNext()?l.getNext():null),m?T.j(Ww(m)):T.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),wb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wp(e).W(IDBKeyRange.bound(i,u,!0)).next(l=>{let m=$s();for(const v of l){const I=this.jn(Ge.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);m=m.insert(I.key,I)}return m})}getAllFromCollectionGroup(e,t,r,i){let u=$s();const l=nO(t,r),m=nO(t,_r.max());return Wp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(v,I,T)=>{const x=this.jn(Ge.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(x.key,x),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new C1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tO(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}Qn(e,t){return tO(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function c1(n,e){let t;if(e.document)t=DR(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=jp(e.noDocument.readTime);t=bn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Ge.fromSegments(e.unknownDocument.path),i=jp(e.unknownDocument.version);t=bn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Vn(r[0],r[1]);return dt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(dt.min()))return r}return bn.newInvalidDocument(e)}}function eO(n){return new b1(n)}class C1 extends XR{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new zh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new wn((u,l)=>Et(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const v=LR(this.Yn.It,l);i=i.add(u.path.popLast()),r+=Cb(v)-m.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=LR(this.Yn.It,l.convertToNoDocument(dt.min()));t.push(this.Yn.addEntry(e,u,v))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function tO(n){return di(n,"remoteDocumentGlobal")}function Wp(n){return di(n,"remoteDocumentsV14")}function Ww(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nO(n,e){const t=e.documentKey.path.toArray();return[n,wb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Et(t[u],r[u]),i)return i;return i=Et(t.length,r.length),i||(i=Et(t[t.length-2],r[r.length-2]),i||Et(t[t.length-1],r[r.length-1]))}class D1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Nw(r.mutation,i,us.empty(),Vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=zt()){const i=wc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let l=Pw();return u.forEach((m,v)=>{l=l.insert(m,v.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=wc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,zt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,i){let u=$s();const l=kw(),m=kw();return t.forEach((v,I)=>{const T=r.get(I.key);i.has(I.key)&&(void 0===T||T.mutation instanceof Jl)?u=u.insert(I.key,I):void 0!==T&&(l.set(I.key,T.mutation.getFieldMask()),Nw(T.mutation,I,T.mutation.getFieldMask(),Vn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((I,T)=>l.set(I,T)),t.forEach((I,T)=>{var x;return m.set(I,new D1(T,null!==(x=l.get(I))&&void 0!==x?x:null))}),m))}recalculateAndSaveOverlays(e,t){const r=kw();let i=new Mn((l,m)=>l-m),u=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(v=>{const I=t.get(v);if(null===I)return;let T=r.get(v)||us.empty();T=m.applyToLocalView(I,T),r.set(v,T);const x=(i.get(m.batchId)||zt()).add(v);i=i.insert(m.batchId,x)})}).next(()=>{const l=[],m=i.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),I=v.key,T=v.value,x=pR();T.forEach(L=>{if(!u.has(L)){const U=sR(t.get(L),r.get(L));null!==U&&x.set(L,U),u=u.add(L)}}),l.push(this.documentOverlayCache.saveOverlays(e,I,x))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):d(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const l=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ue.resolve(wc());let m=-1,v=u;return l.next(I=>ue.forEach(I,(T,x)=>(m<x.largestBatchId&&(m=x.largestBatchId),u.get(T)?ue.resolve():this.getBaseDocument(e,T,x).next(L=>{v=v.insert(T,L)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,v,I,zt())).next(T=>({batchId:m,changes:fR(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let i=Pw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Pw();return this.indexManager.getCollectionParents(e,i).next(l=>ue.forEach(l,m=>{const v=(I=t,T=m.child(i),new _c(T,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,T;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(I=>{I.forEach((T,x)=>{u=u.insert(T,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,v)=>{const I=v.getKey();null===i.get(I)&&(i=i.insert(I,bn.newInvalidDocument(I)))});let l=Pw();return i.forEach((m,v)=>{const I=u.get(m);void 0!==I&&Nw(I.mutation,v,us.empty(),Vn.now()),k(t,v)&&(l=l.insert(m,v))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ue.resolve(bn.newInvalidDocument(t))}}class T1{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:li(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:TS(r.bundledQuery),readTime:li(r.readTime)}),ue.resolve();var r}}class S1{constructor(){this.overlays=new Mn(Ge.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=wc();return ue.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=wc(),u=t.length+1,l=new Ge(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const v=m.getNext().value,I=v.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&v.largestBatchId>r&&i.set(v.getKey(),v)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new Mn((I,T)=>I-T);const l=this.overlays.getIterator();for(;l.hasNext();){const I=l.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let T=u.get(I.largestBatchId);null===T&&(T=wc(),u=u.insert(I.largestBatchId,T)),T.set(I.getKey(),I)}}const m=wc(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((I,T)=>m.set(I,T)),!(m.size()>=i)););return ue.resolve(m)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new DS(t,r));let u=this.es.get(t);void 0===u&&(u=zt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class xS{constructor(){this.ns=new wn(hi.ss),this.rs=new wn(hi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new hi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new hi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new Jt([])),r=new hi(t,e),i=new hi(t,e+1),u=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new Jt([])),r=new hi(t,e),i=new hi(t,e+1);let u=zt();return this.rs.forEachInRange([r,i],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new hi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||Et(e._s,t._s)}static os(e,t){return Et(e._s,t._s)||Ge.comparator(e.key,t.key)}}class A1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new wn(hi.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const l=new bS(u,t,r,i);this.mutationQueue.push(l);for(const m of i)this.gs=this.gs.add(new hi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hi(t,0),i=new hi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],l=>{const m=this.ys(l._s);u.push(m)}),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Et);return t.forEach(i=>{const u=new hi(i,0),l=new hi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],m=>{r=r.add(m._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const l=new hi(new Ge(u),0);let m=new wn(Et);return this.gs.forEachWhile(v=>{const I=v.key.path;return!!r.isPrefixOf(I)&&(I.length===i&&(m=m.add(v._s)),!0)},l),ue.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Rt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,i=>{const u=new hi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new hi(t,0),i=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class x1{constructor(e){this.Es=e,this.docs=new Mn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():bn.newInvalidDocument(t))}getEntries(e,t){let r=$s();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():bn.newInvalidDocument(i))}),ue.resolve(r)}getAllFromCollection(e,t,r){let i=$s();const u=new Ge(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:m,value:{document:v}}=l.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Jm(Qm(v),r)<=0||(i=i.insert(v.key,v.mutableCopy()))}return ue.resolve(i)}getAllFromCollectionGroup(e,t,r,i){it()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new M1(this)}getSize(e){return ue.resolve(this.size)}}class M1 extends XR{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class R1{constructor(e){this.persistence=e,this.Rs=new zh(t=>tu(t),Hh),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new xS,this.targetCount=0,this.vs=qp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new qp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)}),ue.waitFor(u).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(l=>{u.push(i.markPotentiallyOrphaned(e,l))}),ue.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class sO{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Mi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new R1(this),this.indexManager=new m1,this.remoteDocumentCache=new x1(r=>this.referenceDelegate.xs(r)),this.It=new FR(t),this.Ns=new T1(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new S1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new A1(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const i=new O1(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Os(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class O1 extends ea{constructor(e){super(),this.currentSequenceNumber=e}}class Sb{constructor(e){this.persistence=e,this.Fs=new xS,this.$s=null}static Bs(e){return new Sb(e)}get Ls(){if(this.$s)return this.$s;throw it()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const i=Ge.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,dt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class N1{constructor(e){this.It=e}$(e,t,r,i){const u=new ey("createOrUpgrade",t);var m;r<1&&i>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RR,{unique:!0}),m.createObjectStore("documentMutations"),oO(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),oO(e)),l=l.next(()=>function(m){const v=m.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",I)}(u))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(m,v){return v.store("mutations").W().next(I=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RR,{unique:!0});const T=v.store("mutations"),x=I.map(L=>T.put(L));return ue.waitFor(x)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(u))),r<6&&i>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(u))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&i>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(u))),r<11&&i>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:i1});v.createIndex("collectionPathOverlayIndex",s1,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",o1,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:Wk});v.createIndex("documentKeyIndex",Zk),v.createIndex("collectionGroupIndex",Kk)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&i>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:e1}).createIndex("sequenceNumberIndex",t1,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:n1}).createIndex("documentKeyIndex",r1,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Cb(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ue.forEach(i,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(m=>ue.forEach(m,v=>{Rt(v.userId===u.userId);const I=$p(this.It,v);return ZR(e,u.userId,I).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((l,m)=>{const v=new Jt(l),I=[0,ls(v)];u.push(t.get(I).next(T=>T?ue.resolve():t.put({targetId:0,path:ls(v),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Xk});const r=t.store("collectionParents"),i=new AS,u=l=>{if(i.add(l)){const m=l.lastSegment(),v=l.popLast();return r.put({collectionId:m,parent:ls(v)})}};return t.store("remoteDocuments").Z({X:!0},(l,m)=>{const v=new Jt(l);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,m,v],I)=>{const T=Ic(m);return u(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=$w(i),l=VR(this.It,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,l)=>{const m=t.store("remoteDocumentsV14"),v=(I=l,I.document?new Ge(Jt.fromString(I.document.name).popFirst(5)):I.noDocument?Ge.fromSegments(I.noDocument.path):I.unknownDocument?Ge.fromSegments(I.unknownDocument.path):it()).path.toArray();var I;const T={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(m.put(T))}).next(()=>ue.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=eO(this.It),u=new sO(Sb.Bs,this.It.re);return r.W().next(l=>{const m=new Map;return l.forEach(v=>{var I;let T=null!==(I=m.get(v.userId))&&void 0!==I?I:zt();$p(this.It,v).keys().forEach(x=>T=T.add(x)),m.set(v.userId,T)}),ue.forEach(m,(v,I)=>{const T=new Yr(I),x=Eb.oe(this.It,T),L=u.getIndexManager(T),U=Db.oe(T,this.It,L,u.referenceDelegate);return new iO(i,U,x,L).recalculateAndSaveOverlaysForDocumentKeys(new IS(t,Mi.at),v).next()})})}}function oO(n){n.createObjectStore("targetDocuments",{keyPath:Qk}).createIndex("documentTargetsIndex",Jk,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Yk,{unique:!0}),n.createObjectStore("targetGlobal")}const MS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class RS{constructor(e,t,r,i,u,l,m,v,I,T,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=m,this.Js=I,this.Ys=T,this.Xs=x,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!RS.C())throw new xe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new I1(this,i),this.ii=t+"main",this.It=new FR(v),this.ri=new Do(this.ii,this.Xs,new N1(this.It)),this.Cs=new _1(this.referenceDelegate,this.It),this.remoteDocumentCache=eO(this.It),this.Ns=new l1,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&zn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,MS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Mi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ab(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(zl(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Zw(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return Ab(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=di(r,"clientMetadata");return i.W().next(u=>{const l=e.Ii(u,18e5),m=u.filter(v=>-1===l.indexOf(v));return ue.forEach(m,v=>i.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):Zw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,MS);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ab(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,m=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new IS(t,Mi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Ab(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Db.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new y1(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Eb.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?u1:14===l?kR:13===l?PR:12===l?a1:11===l?NR:void it();var l;let m;return this.ri.runTransaction(e,i,u,v=>(m=new IS(v,this.Ss?this.Ss.next():Mi.at),"readwrite-primary"===t?this.fi(m).next(I=>!!I||this.di(m)).next(I=>{if(!I)throw zn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new xe(de.FAILED_PRECONDITION,Xm);return r(m)}).next(I=>this.wi(m).next(()=>I)):this.Vi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Vi(e){return Zw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(de.FAILED_PRECONDITION,MS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zw(e).put("owner",t)}static C(){return Do.C()}_i(e){const t=Zw(e);return t.get("owner").next(r=>this.mi(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(zn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ot.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){zn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zw(n){return di(n,"owner")}function Ab(n){return di(n,"clientMetadata")}function OS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class NS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=zt(),i=zt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new NS(e,t.fromCache,r,i)}}class aO{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Oi(e,t,i,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(o(t))return ue.resolve(null);let r=_(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=E(t,null,"F"),r=_(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=zt(...u);return this.Ni.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const I=this.Fi(t,m);return this.$i(t,I,l,v.readTime)?this.ki(e,E(t,null,"F")):this.Bi(e,I,t,v)}))})))}Oi(e,t,r,i){return o(t)||i.isEqual(dt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,i)?this.Mi(e,t):(Zm()<=uc.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),R(t)),this.Bi(e,l,t,ob(i,-1)))})}Fi(e,t){let r=new wn(te(e));return t.forEach((i,u)=>{k(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Mi(e,t){return Zm()<=uc.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",R(t)),this.Ni.getDocumentsMatchingQuery(e,t,_r.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class P1{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Mn(Et),this.qi=new zh(u=>tu(u),Hh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iO(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function uO(n,e,t,r){return new P1(n,e,t,r)}function cO(n,e){return PS.apply(this,arguments)}function PS(){return PS=(0,me.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let v=zt();for(const I of i){l.push(I.batchId);for(const T of I.mutations)v=v.add(T.key)}for(const I of u){m.push(I.batchId);for(const T of I.mutations)v=v.add(T.key)}return t.localDocuments.getDocuments(r,v).next(I=>({ji:I,removedBatchIds:l,addedBatchIds:m}))})})}),PS.apply(this,arguments)}function k1(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,m,v,I){const T=v.batch,x=T.keys();let L=ue.resolve();return x.forEach(U=>{L=L.next(()=>I.getEntry(m,U)).next(Z=>{const Ce=v.docVersions.get(U);Rt(null!==Ce),Z.version.compareTo(Ce)<0&&(T.applyToRemoteDocument(Z,v),Z.isValidDocument()&&(Z.setReadTime(v.commitVersion),I.addEntry(Z)))})}),L.next(()=>l.mutationQueue.removeMutationBatch(m,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=zt();for(let v=0;v<l.mutationResults.length;++v)l.mutationResults[v].transformResults.length>0&&(m=m.add(l.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function lO(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function F1(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const m=[];e.targetChanges.forEach((T,x)=>{const L=i.get(x);if(!L)return;m.push(t.Cs.removeMatchingKeys(u,T.removedDocuments,x).next(()=>t.Cs.addMatchingKeys(u,T.addedDocuments,x)));let U=L.withSequenceNumber(u.currentSequenceNumber);var Z,Ce,Ee;e.targetMismatches.has(x)?U=U.withResumeToken(Ur.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,r)),i=i.insert(x,U),Ce=U,Ee=T,(0===(Z=L).resumeToken.approximateByteSize()||Ce.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,U))});let v=$s(),I=zt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(dO(u,l,e.documentUpdates).next(T=>{v=T.Wi,I=T.zi})),!r.isEqual(dt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(u).next(x=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(T)}return ue.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,I)).next(()=>v)}).then(u=>(t.Ui=i,u))}function dO(n,e,t){let r=zt(),i=zt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=$s();return t.forEach((m,v)=>{const I=u.get(m);v.isFoundDocument()!==I.isFoundDocument()&&(i=i.add(m)),v.isNoDocument()&&v.version.isEqual(dt.min())?(e.removeEntry(m,v.readTime),l=l.insert(m,v)):!I.isValidDocument()||v.version.compareTo(I.version)>0||0===v.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(v),l=l.insert(m,v)):Ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",I.version," Watch version:",v.version)}),{Wi:l,zi:i}})}function L1(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yy(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,ue.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new qh(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function _y(n,e,t){return kS.apply(this,arguments)}function kS(){return kS=(0,me.Z)(function*(n,e,t){const r=qe(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!zl(l))throw l;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),kS.apply(this,arguments)}function xb(n,e,t){const r=qe(n);let i=dt.min(),u=zt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,v,I){const T=qe(m),x=T.qi.get(I);return void 0!==x?ue.resolve(T.Ui.get(x)):T.Cs.getTargetData(v,I)}(r,l,_(e)).next(m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,m.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:dt.min(),t?u:zt())).next(m=>(pO(r,G(e),m),{documents:m,Hi:u})))}function hO(n,e){const t=qe(n),r=qe(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(l=>l?l.target:null))}function fO(n,e){const t=qe(n),r=t.Ki.get(e)||dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,ob(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(pO(t,e,i),i))}function pO(n,e,t){let r=n.Ki.get(e)||dt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function FS(){return FS=(0,me.Z)(function*(n,e,t,r){const i=qe(n);let u=zt(),l=$s();for(const I of t){const T=e.Ji(I.metadata.name);I.document&&(u=u.add(T));const x=e.Yi(I);x.setReadTime(e.Xi(I.metadata.readTime)),l=l.insert(T,x)}const m=i.Gi.newChangeBuffer({trackRemovals:!0}),v=yield yy(i,(I=r,_(s(Jt.fromString(`__bundle__/docs/${I}`)))));var I;return i.persistence.runTransaction("Apply bundle documents","readwrite",I=>dO(I,m,l).next(T=>(m.apply(I),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(I,v.targetId).next(()=>i.Cs.addMatchingKeys(I,u,v.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(I,T.Wi,T.zi)).next(()=>T.Wi)))}),FS.apply(this,arguments)}function U1(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,me.Z)(function*(n,e,t=zt()){const r=yield yy(n,_(TS(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const l=li(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Ur.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(m.targetId,m),i.Cs.updateTargetData(u,m).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),LS.apply(this,arguments)}function gO(n,e){return`firestore_clients_${n}_${e}`}function mO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function VS(n,e){return`firestore_targets_${n}_${e}`}class Mb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(u=new xe(i.error.code,i.error.message))),l?new Mb(e,t,i.state,u):(zn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new xe(r.error.code,r.error.message))),u?new Kw(e,r.state,i):(zn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=yb();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=Lp(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return i?new Rb(e,u):(zn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class US{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new US(t.clientId,t.onlineState):(zn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class BS{constructor(){this.activeTargetIds=yb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jS{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Mn(Et),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=gO(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new BS),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(gO(e.persistenceKey,i));if(u){const l=Rb.Zi(i,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(VS(this.persistenceKey,e));if(r){const i=Kw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(VS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void zn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let l=Mi.at;if(null!=u)try{const m=JSON.parse(u);Rt("number"==typeof m),l=m}catch(m){zn("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);i!==Mi.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Mb(this.currentUser,e,t,r),u=mO(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=mO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=VS(this.persistenceKey,e),u=new Kw(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Rb.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Mb.Zi(new Yr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Kw.Zi(i,t)}yr(e){return US.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),l=[],m=[];return u.forEach(v=>{i.has(v)||l.push(v)}),i.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Br(l,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=yb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class yO{constructor(){this.Lr=new BS,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new BS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class B1{qr(e){}shutdown(){}}class _O{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const j1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $1{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class H1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,u){const l=this.ho(e,t);Ne("RestConnection","Sending: ",l,r);const m={};return this.lo(m,i,u),this.fo(e,l,m,r).then(v=>(Ne("RestConnection","Received: ",v),v),v=>{throw hc("RestConnection",`${e} failed with error: `,v,"url: ",l,"request:",r),v})}_o(e,t,r,i,u,l){return this.ao(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.oo}/v1/${t}:${j1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,l)=>{const m=new WM;m.setWithCredentials(!0),m.listenOnce(GM.COMPLETE,()=>{var I;try{switch(m.getLastErrorCode()){case nb.NO_ERROR:const T=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(T)),u(T);break;case nb.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),l(new xe(de.DEADLINE_EXCEEDED,"Request time out"));break;case nb.HTTP_ERROR:const x=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){let L=m.getResponseJson();Array.isArray(L)&&(L=L[0]);const U=null===(I=L)||void 0===I?void 0:I.error;if(U&&U.status&&U.message){const Z=function(Ce){const Ee=Ce.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(Ee)>=0?Ee:de.UNKNOWN}(U.status);l(new xe(Z,U.message))}else l(new xe(de.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new xe(de.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(i);m.send(t,"POST",v,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=tb(),l=HM(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new qM({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=i.join("");Ne("Connection","Creating WebChannel: "+v,m);const I=u.createWebChannel(v,m);let T=!1,x=!1;const L=new $1({Hr:Z=>{x?Ne("Connection","Not sending because WebChannel is closed:",Z):(T||(Ne("Connection","Opening WebChannel transport."),I.open(),T=!0),Ne("Connection","WebChannel sending:",Z),I.send(Z))},Jr:()=>I.close()}),U=(Z,Ce,Ee)=>{Z.listen(Ce,Qe=>{try{Ee(Qe)}catch(yt){setTimeout(()=>{throw yt},0)}})};return U(I,vw.EventType.OPEN,()=>{x||Ne("Connection","WebChannel transport opened.")}),U(I,vw.EventType.CLOSE,()=>{x||(x=!0,Ne("Connection","WebChannel transport closed"),L.io())}),U(I,vw.EventType.ERROR,Z=>{x||(x=!0,hc("Connection","WebChannel transport errored:",Z),L.io(new xe(de.UNAVAILABLE,"The operation could not be completed")))}),U(I,vw.EventType.MESSAGE,Z=>{var Ce;if(!x){const Ee=Z.data[0];Rt(!!Ee);const Qe=Ee,yt=Qe.error||(null===(Ce=Qe[0])||void 0===Ce?void 0:Ce.error);if(yt){Ne("Connection","WebChannel received error:",yt);const lt=yt.status;let at=function(Ft){const hr=jr[Ft];if(void 0!==hr)return dR(hr)}(lt),Tt=yt.message;void 0===at&&(at=de.INTERNAL,Tt="Unknown error status: "+lt+" with message "+yt.message),x=!0,L.io(new xe(at,Tt)),I.close()}else Ne("Connection","WebChannel received:",Ee),L.ro(Ee)}}),U(l,zM.STAT_EVENT,Z=>{Z.stat===zT.PROXY?Ne("Connection","Detected buffering proxy"):Z.stat===zT.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function vO(){return typeof window<"u"?window:null}function Ob(){return typeof document<"u"?document:null}function Yw(n){return new Pk(n,!0)}class $S{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class wO{constructor(e,t,r,i,u,l,m,v){this.Hs=e,this.vo=r,this.Vo=i,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new $S(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(zn(t.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new xe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class G1 extends wO{constructor(e,t,r,i,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Lk(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:it(),i=e.targetChange.targetIds||[],u=function(v,I){return v.gt?(Rt(void 0===I||"string"==typeof I),Ur.fromBase64String(I||"")):(Rt(void 0===I||I instanceof Uint8Array),Ur.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(v){const I=void 0===v.code?de.UNKNOWN:dR(v.code);return new xe(I,v.message||"")}(l);t=new mR(r,i,u,m||null)}else if("documentChange"in e){const r=e.documentChange,i=Ec(n,r.document.name),u=li(r.document.updateTime),l=new Br({mapValue:{fields:r.document.fields}}),m=bn.newFoundDocument(i,u,l);t=new _b(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=Ec(n,r.document),u=r.readTime?li(r.readTime):dt.min(),l=bn.newNoDocument(i,u);t=new _b([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ec(n,r.document);t=new _b([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new Tk(r.count||0);t=new gR(r.targetId,u)}}var v;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return dt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?dt.min():u.readTime?li(u.readTime):dt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Bw(this.It),t.addTarget=function(i,u){let l;const m=u.target;return l=Gh(m)?{documents:TR(i,m)}:{query:ES(i,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=wR(i,u.resumeToken):u.snapshotVersion.compareTo(dt.min())>0&&(l.readTime=Vw(i,u.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function Uk(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Bw(this.It),t.removeTarget=e,this.Bo(t)}}class z1 extends wO{constructor(e,t,r,i,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Vk(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,i){let u=li(r.updateTime?r.updateTime:i);return u.isEqual(dt.min())&&(u=li(i)),new Ow(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=li(e.commitTime);return this.listener.Zo(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Bw(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>jw(this.It,r))};this.Bo(t)}}class q1 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.ao(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(de.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(de.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class Z1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(zn(t),this.ou=!1):Ne("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class K1{constructor(e,t,r,i,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,me.Z)(function*(){var v;Xl(l)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,me.Z)(function*(I){const T=qe(I);T._u.add(4),yield vy(T),T.gu.set("Unknown"),T._u.delete(4),yield Qw(T)}),function(I){return v.apply(this,arguments)})(l))}))}),this.gu=new Z1(r,i)}}function Qw(n){return GS.apply(this,arguments)}function GS(){return GS=(0,me.Z)(function*(n){if(Xl(n))for(const e of n.wu)yield e(!0)}),GS.apply(this,arguments)}function vy(n){return zS.apply(this,arguments)}function zS(){return zS=(0,me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),zS.apply(this,arguments)}function Nb(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),ZS(t)?WS(t):Ey(t).ko()&&qS(t,e))}function Jw(n,e){const t=qe(n),r=Ey(t);t.du.delete(e),r.ko()&&EO(t,e),0===t.du.size&&(r.ko()?r.Fo():Xl(t)&&t.gu.set("Unknown"))}function qS(n,e){n.yu.Mt(e.targetId),Ey(n).zo(e)}function EO(n,e){n.yu.Mt(e),Ey(n).Ho(e)}function WS(n){n.yu=new Rk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Ey(n).start(),n.gu.uu()}function ZS(n){return Xl(n)&&!Ey(n).No()&&n.du.size>0}function Xl(n){return 0===qe(n)._u.size}function IO(n){n.yu=void 0}function Y1(n){return KS.apply(this,arguments)}function KS(){return KS=(0,me.Z)(function*(n){n.du.forEach((e,t)=>{qS(n,e)})}),KS.apply(this,arguments)}function Q1(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,me.Z)(function*(n,e){IO(n),ZS(n)?(n.gu.hu(e),WS(n)):n.gu.set("Unknown")}),YS.apply(this,arguments)}function J1(n,e,t){return QS.apply(this,arguments)}function QS(){return QS=(0,me.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof mR&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,u){const l=u.cause;for(const m of u.targetIds)i.du.has(m)&&(yield i.remoteSyncer.rejectListen(m,l),i.du.delete(m),i.yu.removeTarget(m))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Pb(n,r)}else if(e instanceof _b?n.yu.Gt(e):e instanceof gR?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(dt.min()))try{const r=yield lO(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const l=i.yu.te(u);return l.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const I=i.du.get(v);I&&i.du.set(v,I.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const v=i.du.get(m);if(!v)return;i.du.set(m,v.withResumeToken(Ur.EMPTY_BYTE_STRING,v.snapshotVersion)),EO(i,m);const I=new qh(v.target,m,1,v.sequenceNumber);qS(i,I)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield Pb(n,r)}var r}),QS.apply(this,arguments)}function Pb(n,e,t){return JS.apply(this,arguments)}function JS(){return JS=(0,me.Z)(function*(n,e,t){if(!zl(e))throw e;n._u.add(1),yield vy(n),n.gu.set("Offline"),t||(t=()=>lO(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Qw(n)}))}),JS.apply(this,arguments)}function bO(n,e){return e().catch(t=>Pb(n,t,e))}function wy(n){return XS.apply(this,arguments)}function XS(){return XS=(0,me.Z)(function*(n){const e=qe(n),t=Kh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;X1(e);)try{const i=yield L1(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,eF(e,i)}catch(i){yield Pb(e,i)}CO(e)&&DO(e)}),XS.apply(this,arguments)}function X1(n){return Xl(n)&&n.fu.length<10}function eF(n,e){n.fu.push(e);const t=Kh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function CO(n){return Xl(n)&&!Kh(n).No()&&n.fu.length>0}function DO(n){Kh(n).start()}function tF(n){return eA.apply(this,arguments)}function eA(){return eA=(0,me.Z)(function*(n){Kh(n).eu()}),eA.apply(this,arguments)}function nF(n){return tA.apply(this,arguments)}function tA(){return tA=(0,me.Z)(function*(n){const e=Kh(n);for(const t of n.fu)e.Xo(t.mutations)}),tA.apply(this,arguments)}function rF(n,e,t){return nA.apply(this,arguments)}function nA(){return nA=(0,me.Z)(function*(n,e,t){const r=n.fu.shift(),i=CS.from(r,e,t);yield bO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield wy(n)}),nA.apply(this,arguments)}function iF(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,me.Z)(function*(n,e){var t;e&&Kh(n).Yo&&(yield(t=(0,me.Z)(function*(r,i){if(lR(u=i.code)&&u!==de.ABORTED){const l=r.fu.shift();Kh(r).Mo(),yield bO(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield wy(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),CO(n)&&DO(n)}),rA.apply(this,arguments)}function TO(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,me.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Xl(t);t._u.add(3),yield vy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Qw(t)}),iA.apply(this,arguments)}function sA(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,me.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield Qw(t)):e||(t._u.add(2),yield vy(t),t.gu.set("Unknown"))}),oA.apply(this,arguments)}function Ey(n){return n.pu||(n.pu=function(e,t,r){const i=qe(e);return i.su(),new G1(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:Y1.bind(null,n),Zr:Q1.bind(null,n),Wo:J1.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.pu.Mo(),ZS(n)?WS(n):n.gu.set("Unknown")):(yield n.pu.stop(),IO(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Kh(n){return n.Iu||(n.Iu=function(e,t,r){const i=qe(e);return i.su(),new z1(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:tF.bind(null,n),Zr:iF.bind(null,n),tu:nF.bind(null,n),Zo:rF.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Mo(),yield wy(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class aA{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,u){const l=Date.now()+r,m=new aA(e,t,l,i,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iy(n,e){if(zn("AsyncQueue",`${e}: ${n}`),zl(n))return new xe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class by{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Pw(),this.sortedSet=new Mn(this.comparator)}static emptySet(e){return new by(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof by)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new by;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class SO{constructor(){this.Tu=new Mn(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):it():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Cy{constructor(e,t,r,i,u,l,m,v,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,i,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Cy(e,t,by.emptySet(t),l,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&b(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class sF{constructor(){this.Au=void 0,this.listeners=[]}}class oF{constructor(){this.queries=new zh(e=>S(e),b),this.onlineState="Unknown",this.Ru=new Set}}function uA(n,e){return cA.apply(this,arguments)}function cA(){return cA=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new sF),i)try{u.Au=yield t.onListen(r)}catch(l){const m=Iy(l,`Initialization of query '${R(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&hA(t)}),cA.apply(this,arguments)}function lA(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),dA.apply(this,arguments)}function aF(n,e){const t=qe(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const m of l.listeners)m.Pu(i)&&(r=!0);l.Au=i}}r&&hA(t)}function uF(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function hA(n){n.Ru.forEach(e=>{e.next()})}class fA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Cy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Cy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class cF{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class AO{constructor(e){this.It=e}Ji(e){return Ec(this.It,e)}Yi(e){return e.metadata.exists?DR(this.It,e.document,!1):bn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return li(e)}}class lF{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xO(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Jt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new AO(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const m=(t.get(l)||zt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function V1(n,e,t,r){return FS.apply(this,arguments)}(e.localStore,new AO(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield U1(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function xO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class MO{constructor(e){this.key=e}}class RO{constructor(e){this.key=e}}class OO{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=zt(),this.mutatedKeys=zt(),this.Gu=te(e),this.Qu=new by(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new SO,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=i,m=!1;const v="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,I="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,x)=>{const L=i.get(T),U=k(this.query,x)?x:null,Z=!!L&&this.mutatedKeys.has(L.key),Ce=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Ee=!1;L&&U?L.data.isEqual(U.data)?Z!==Ce&&(r.track({type:3,doc:U}),Ee=!0):this.Hu(L,U)||(r.track({type:2,doc:U}),Ee=!0,(v&&this.Gu(U,v)>0||I&&this.Gu(U,I)<0)&&(m=!0)):!L&&U?(r.track({type:0,doc:U}),Ee=!0):L&&!U&&(r.track({type:1,doc:L}),Ee=!0,(v||I)&&(m=!0)),Ee&&(U?(l=l.add(U),u=Ce?u.add(T):u.delete(T)):(l=l.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Qu:l,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((I,T)=>function(x,L){const U=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return U(x)-U(L)}(I.type,T.type)||this.Gu(I.doc,T.doc)),this.Ju(r);const l=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,v=m!==this.qu;return this.qu=m,0!==u.length||v?{snapshot:new Cy(this.query,e.Qu,i,u,e.mutatedKeys,0===m,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new SO,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=zt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new RO(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new MO(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=zt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Cy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class dF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class hF{constructor(e){this.key=e,this.nc=!1}}class fF{constructor(e,t,r,i,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new zh(m=>S(m),b),this.rc=new Map,this.oc=new Set,this.uc=new Mn(Ge.comparator),this.cc=new Map,this.ac=new xS,this.hc={},this.lc=new Map,this.fc=qp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function pF(n,e){return pA.apply(this,arguments)}function pA(){return pA=(0,me.Z)(function*(n,e){const t=LA(n);let r,i;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ec();else{const l=yield yy(t.localStore,_(e));t.isPrimaryClient&&Nb(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield gA(t,e,r,"current"===m,l.resumeToken)}return i}),pA.apply(this,arguments)}function gA(n,e,t,r,i){return mA.apply(this,arguments)}function mA(){return mA=(0,me.Z)(function*(n,e,t,r,i){n._c=(x,L,U)=>{return(Z=(0,me.Z)(function*(Ce,Ee,Qe,yt){let lt=Ee.view.Wu(Qe);lt.$i&&(lt=yield xb(Ce.localStore,Ee.query,!1).then(({documents:Ft})=>Ee.view.Wu(Ft,lt)));const at=yt&&yt.targetChanges.get(Ee.targetId),Tt=Ee.view.applyChanges(lt,Ce.isPrimaryClient,at);return TA(Ce,Ee.targetId,Tt.Xu),Tt.snapshot}),function(Ce,Ee,Qe,yt){return Z.apply(this,arguments)})(n,x,L,U);var Z};const u=yield xb(n.localStore,e,!0),l=new OO(e,u.Hi),m=l.Wu(u.documents),v=Lw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),I=l.applyChanges(m,n.isPrimaryClient,v);TA(n,t,I.Xu);const T=new dF(e,t,l);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),I.snapshot}),mA.apply(this,arguments)}function gF(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,me.Z)(function*(n,e){const t=qe(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(u=>!b(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield _y(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Jw(t.remoteStore,r.targetId),Dy(t,r.targetId)}).catch(fc))):(Dy(t,r.targetId),yield _y(t.localStore,r.targetId,!0))}),yA.apply(this,arguments)}function _A(){return _A=(0,me.Z)(function*(n,e,t){const r=VA(n);try{const i=yield function(u,l){const m=qe(u),v=Vn.now(),I=l.reduce((L,U)=>L.add(U.key),zt());let T,x;return m.persistence.runTransaction("Locally write mutations","readwrite",L=>{let U=$s(),Z=zt();return m.Gi.getEntries(L,I).next(Ce=>{U=Ce,U.forEach((Ee,Qe)=>{Qe.isValidDocument()||(Z=Z.add(Ee))})}).next(()=>m.localDocuments.getOverlayedDocuments(L,U)).next(Ce=>{T=Ce;const Ee=[];for(const Qe of l){const yt=Dk(Qe,T.get(Qe.key).overlayedDocument);null!=yt&&Ee.push(new Jl(Qe.key,yt,xw(yt.value.mapValue),ir.exists(!0)))}return m.mutationQueue.addMutationBatch(L,v,Ee,l)}).next(Ce=>{x=Ce;const Ee=Ce.applyToLocalDocumentSet(T,Z);return m.documentOverlayCache.saveOverlays(L,Ce.batchId,Ee)})}).then(()=>({batchId:x.batchId,changes:fR(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,l,m){let v=u.hc[u.currentUser.toKey()];v||(v=new Mn(Et)),v=v.insert(l,m),u.hc[u.currentUser.toKey()]=v}(r,i.batchId,t),yield ed(r,i.changes),yield wy(r.remoteStore)}catch(i){const u=Iy(i,"Failed to persist write");t.reject(u)}}),_A.apply(this,arguments)}function NO(n,e){return vA.apply(this,arguments)}function vA(){return vA=(0,me.Z)(function*(n,e){const t=qe(n);try{const r=yield F1(t.localStore,e);e.targetChanges.forEach((i,u)=>{const l=t.cc.get(u);l&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Rt(l.nc):i.removedDocuments.size>0&&(Rt(l.nc),l.nc=!1))}),yield ed(t,r,e)}catch(r){yield fc(r)}}),vA.apply(this,arguments)}function PO(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((u,l)=>{const m=l.view.bu(e);m.snapshot&&i.push(m.snapshot)}),function(u,l){const m=qe(u);m.onlineState=l;let v=!1;m.queries.forEach((I,T)=>{for(const x of T.listeners)x.bu(l)&&(v=!0)}),v&&hA(m)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function yF(n,e,t){return wA.apply(this,arguments)}function wA(){return wA=(0,me.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),u=i&&i.key;if(u){let l=new Mn(Ge.comparator);l=l.insert(u,bn.newNoDocument(u,dt.min()));const m=zt().add(u),v=new Fw(dt.min(),new Map,new wn(Et),l,m);yield NO(r,v),r.uc=r.uc.remove(u),r.cc.delete(e),SA(r)}else yield _y(r.localStore,e,!1).then(()=>Dy(r,e,t)).catch(fc)}),wA.apply(this,arguments)}function _F(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,me.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield k1(t.localStore,e);DA(t,r,null),CA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ed(t,i)}catch(i){yield fc(i)}}),EA.apply(this,arguments)}function vF(n,e,t){return IA.apply(this,arguments)}function IA(){return IA=(0,me.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(u,l){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return m.mutationQueue.lookupMutationBatch(v,l).next(T=>(Rt(null!==T),I=T.keys(),m.mutationQueue.removeMutationBatch(v,T))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,I,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,I)).next(()=>m.localDocuments.getDocuments(v,I))})}(r.localStore,e);DA(r,e,t),CA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ed(r,i)}catch(i){yield fc(i)}}),IA.apply(this,arguments)}function bA(){return bA=(0,me.Z)(function*(n,e){const t=qe(n);Xl(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=qe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Iy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),bA.apply(this,arguments)}function CA(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function DA(n,e,t){const r=qe(n);let i=r.hc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Dy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||kO(n,r)})}function kO(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Jw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),SA(n))}function TA(n,e,t){for(const r of t)r instanceof MO?(n.ac.addReference(r.key,e),EF(n,r)):r instanceof RO?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||kO(n,r.key)):it()}function EF(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.oc.add(r),SA(n))}function SA(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ge(Jt.fromString(e)),r=n.fc.next();n.cc.set(r,new hF(t)),n.uc=n.uc.insert(t,r),Nb(n.remoteStore,new qh(_(s(t.path)),r,2,Mi.at))}}function ed(n,e,t){return AA.apply(this,arguments)}function AA(){return AA=(0,me.Z)(function*(n,e,t){const r=qe(n),i=[],u=[],l=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,v)=>{l.push(r._c(v,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,I?.fromCache?"not-current":"current"),I){i.push(I);const T=NS.Ci(v.targetId,I);u.push(T)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(m=(0,me.Z)(function*(v,I){const T=qe(v);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ue.forEach(I,L=>ue.forEach(L.Si,U=>T.persistence.referenceDelegate.addReference(x,L.targetId,U)).next(()=>ue.forEach(L.Di,U=>T.persistence.referenceDelegate.removeReference(x,L.targetId,U)))))}catch(x){if(!zl(x))throw x;Ne("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const L=x.targetId;if(!x.fromCache){const U=T.Ui.get(L),Ce=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);T.Ui=T.Ui.insert(L,Ce)}}}),function(v,I){return m.apply(this,arguments)})(r.localStore,u))}),AA.apply(this,arguments)}function IF(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,me.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield cO(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(m=>{m.reject(new xe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ed(t,r.ji)}var i}),xA.apply(this,arguments)}function bF(n,e){const t=qe(n),r=t.cc.get(e);if(r&&r.nc)return zt().add(r.key);{let i=zt();const u=t.rc.get(e);if(!u)return i;for(const l of u){const m=t.ic.get(l);i=i.unionWith(m.view.ju)}return i}}function CF(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,me.Z)(function*(n,e){const t=qe(n),r=yield xb(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&TA(t,e.targetId,i.Xu),i}),MA.apply(this,arguments)}function DF(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,me.Z)(function*(n,e){const t=qe(n);return fO(t.localStore,e).then(r=>ed(t,r))}),RA.apply(this,arguments)}function TF(n,e,t,r){return OA.apply(this,arguments)}function OA(){return OA=(0,me.Z)(function*(n,e,t,r){const i=qe(n),u=yield function(l,m){const v=qe(l),I=qe(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",T=>I.Tn(T,m).next(x=>x?v.localDocuments.getDocuments(T,x):ue.resolve(null)))}(i.localStore,e);var m;null!==u?("pending"===t?yield wy(i.remoteStore):"acknowledged"===t||"rejected"===t?(DA(i,e,r||null),CA(i,e),m=e,qe(qe(i.localStore).mutationQueue).An(m)):it(),yield ed(i,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),OA.apply(this,arguments)}function NA(){return NA=(0,me.Z)(function*(n,e){const t=qe(n);if(LA(t),VA(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield FO(t,r.toArray());t.dc=!0,yield sA(t.remoteStore,!0);for(const u of i)Nb(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Dy(t,l),_y(t.localStore,l,!0))),Jw(t.remoteStore,l)}),yield i,yield FO(t,r),function(u){const l=qe(u);l.cc.forEach((m,v)=>{Jw(l.remoteStore,v)}),l.ac.fs(),l.cc=new Map,l.uc=new Mn(Ge.comparator)}(t),t.dc=!1,yield sA(t.remoteStore,!1)}}),NA.apply(this,arguments)}function FO(n,e,t){return PA.apply(this,arguments)}function PA(){return PA=(0,me.Z)(function*(n,e,t){const r=qe(n),i=[],u=[];for(const l of e){let m;const v=r.rc.get(l);if(v&&0!==v.length){m=yield yy(r.localStore,_(v[0]));for(const I of v){const T=r.ic.get(I),x=yield CF(r,T);x.snapshot&&u.push(x.snapshot)}}else{const I=yield hO(r.localStore,l);m=yield yy(r.localStore,I),yield gA(r,LO(I),l,!1,m.resumeToken)}i.push(m)}return r.sc.Wo(u),i}),PA.apply(this,arguments)}function LO(n){return mS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function AF(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function xF(n,e,t,r){return kA.apply(this,arguments)}function kA(){return kA=(0,me.Z)(function*(n,e,t,r){const i=qe(n);if(i.dc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=i.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield fO(i.localStore,G(u[0])),m=Fw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ur.EMPTY_BYTE_STRING);yield ed(i,l,m);break}case"rejected":yield _y(i.localStore,e,!0),Dy(i,e,r);break;default:it()}}),kA.apply(this,arguments)}function MF(n,e,t){return FA.apply(this,arguments)}function FA(){return FA=(0,me.Z)(function*(n,e,t){const r=LA(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Ne("SyncEngine","Adding an already active target "+i);continue}const u=yield hO(r.localStore,i),l=yield yy(r.localStore,u);yield gA(r,LO(u),l.targetId,!1,l.resumeToken),Nb(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield _y(r.localStore,i,!1).then(()=>{Jw(r.remoteStore,i),Dy(r,i)}).catch(fc))}}),FA.apply(this,arguments)}function LA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yF.bind(null,e),e.sc.Wo=aF.bind(null,e.eventManager),e.sc.wc=uF.bind(null,e.eventManager),e}function VA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_F.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vF.bind(null,e),e}class VO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.It=Yw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return uO(this.persistence,new aO,e.initialUser,this.It)}yc(e){return new sO(Sb.Bs,this.It)}gc(e){return new yO}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class UO extends VO{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield VA(r.Ac.syncEngine),yield wy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return uO(this.persistence,new aO,e.initialUser,this.It)}Tc(e,t){return new w1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new lb(t,this.persistence);return new Iw(e.asyncQueue,r)}yc(e){const t=OS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Hs.withCacheSize(this.cacheSizeBytes):Hs.DEFAULT;return new RS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vO(),Ob(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new yO}}class OF extends UO{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof jS&&(r.sharedClientState.syncEngine={Fr:TF.bind(null,i),$r:xF.bind(null,i),Br:MF.bind(null,i),vi:AF.bind(null,i),Mr:DF.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,me.Z)(function*(l){yield function SF(n,e){return NA.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=vO();if(!jS.C(t))throw new xe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=OS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class UA{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>PO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=IF.bind(null,r.syncEngine),yield sA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new oF}createDatastore(e){const t=Yw(e.databaseInfo.databaseId),r=new H1(e.databaseInfo);return new q1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=m=>PO(this.syncEngine,m,0),l=_O.C()?new _O:new B1,new K1(t,r,i,u,l);var t,r,i,u,l}createSyncEngine(e,t){return function(r,i,u,l,m,v,I){const T=new fF(r,i,u,l,m,v);return I&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=qe(t);Ne("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield vy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function BA(n,e,t){if(!t)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BO(n,e,t,r){if(!0===e&&!0===r)throw new xe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jO(n){if(!Ge.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $O(n){if(Ge.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kb(n);throw new xe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function HO(n,e){if(e<=0)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const GO=new Map;class zO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,BO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new KM;switch(t.type){case"gapi":return new KT(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=GO.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),GO.delete(e),t.terminate())}(this),Promise.resolve()}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class Zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zi(this.firestore,e,this._query)}}class bc extends Zi{constructor(e,t,r){super(e,t,s(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Ge(e))}withConverter(e){return new bc(this.firestore,e,this._path)}}function WO(n,e,...t){if(n=(0,Ot.m9)(n),BA("collection","path",e),n instanceof Xw){const r=Jt.fromString(e,...t);return $O(r),new bc(n,null,r)}{if(!(n instanceof qn||n instanceof bc))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return $O(r),new bc(n.firestore,null,r)}}function Fb(n,e,...t){if(n=(0,Ot.m9)(n),1===arguments.length&&(e=XT.R()),BA("doc","path",e),n instanceof Xw){const r=Jt.fromString(e,...t);return jO(r),new qn(n,null,new Ge(r))}{if(!(n instanceof qn||n instanceof bc))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return jO(r),new qn(n.firestore,n instanceof bc?n.converter:null,new Ge(r))}}function ZO(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),(n instanceof qn||n instanceof bc)&&(e instanceof qn||e instanceof bc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function jA(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),n instanceof Zi&&e instanceof Zi&&n.firestore===e.firestore&&b(n._query,e._query)&&n.converter===e.converter}function KO(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Lb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class PF{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Tr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(i);return new cF(JSON.parse(u),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class LF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(u,l){const m=qe(u),v=Bw(m.It)+"/documents",I={documents:l.map(U=>Uw(m.It,U))},T=yield m._o("BatchGetDocuments",v,I,l.length),x=new Map;T.forEach(U=>{const Z=function Fk(n,e){return"found"in e?function(t,r){Rt(!!r.found);const i=Ec(t,r.found.name),u=li(r.found.updateTime),l=new Br({mapValue:{fields:r.found.fields}});return bn.newFoundDocument(i,u,l)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const i=Ec(t,r.missing),u=li(r.readTime);return bn.newNoDocument(i,u)}(n,e):it()}(m.It,U);x.set(Z.key.toString(),Z)});const L=[];return l.forEach(U=>{const Z=x.get(U.toString());Rt(!!Z),L.push(Z)}),L}),function(u,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new hy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ge.fromPath(i);e.mutations.push(new yS(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(i,u){const l=qe(i),m=Bw(l.It)+"/documents",v={writes:u.map(I=>jw(l.It,I))};yield l.ao("Commit",m,v)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(dt.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(dt.min()))throw new xe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class VF{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.kc=r.maxAttempts,this.xo=new $S(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,me.Z)(function*(){const t=new LF(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Fc(u)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!ny(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!lR(t)}return!1}}class UF{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Yr.UNAUTHENTICATED,this.clientId=XT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,me.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ne("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Iy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function YO(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(u){r.isEqual(u)||(yield cO(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),$A.apply(this,arguments)}function QO(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield GA(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>TO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>TO(e.remoteStore,u)),n.onlineComponents=e}),HA.apply(this,arguments)}function GA(n){return zA.apply(this,arguments)}function zA(){return zA=(0,me.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield YO(n,new VO)),n.offlineComponents}),zA.apply(this,arguments)}function Vb(n){return qA.apply(this,arguments)}function qA(){return qA=(0,me.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield QO(n,new UA)),n.onlineComponents}),qA.apply(this,arguments)}function JO(n){return GA(n).then(e=>e.persistence)}function Ub(n){return GA(n).then(e=>e.localStore)}function WA(n){return Vb(n).then(e=>e.remoteStore)}function ZA(n){return Vb(n).then(e=>e.syncEngine)}function Ty(n){return KA.apply(this,arguments)}function KA(){return KA=(0,me.Z)(function*(n){const e=yield Vb(n),t=e.eventManager;return t.onListen=pF.bind(null,e.syncEngine),t.onUnlisten=gF.bind(null,e.syncEngine),t}),KA.apply(this,arguments)}function eN(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,l,m,v){const I=new Lb({next:x=>{u.enqueueAndForget(()=>lA(i,T));const L=x.docs.has(l);!L&&x.fromCache?v.reject(new xe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&x.fromCache&&m&&"server"===m.source?v.reject(new xe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),T=new fA(s(l.path),I,{includeMetadataChanges:!0,Nu:!0});return uA(i,T)}(yield Ty(n),n.asyncQueue,e,t,r)})),r.promise}function tN(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,l,m,v){const I=new Lb({next:x=>{u.enqueueAndForget(()=>lA(i,T)),x.fromCache&&"server"===m.source?v.reject(new xe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(x)},error:x=>v.reject(x)}),T=new fA(l,I,{includeMetadataChanges:!0,Nu:!0});return uA(i,T)}(yield Ty(n),n.asyncQueue,e,t,r)})),r.promise}class WF{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new $S(this,"async_queue_retry"),this.Wc=()=>{const t=Ob();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Ob();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Ob();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Tr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!zl(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,zn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=aA.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(i),i}zc(){this.Kc&&it()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function YA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class ZF{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends Xw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new WF,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||nN(this),this._firestoreClient.terminate()}}function Sr(n){return n._firestoreClient||nN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function nN(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new JM(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new UF(n._authCredentials,n._appCheckCredentials,n._queue,r)}function rN(n,e,t){const r=new Tr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield YO(n,t),yield QO(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(l=u).name?l.code===de.FAILED_PRECONDITION||l.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;hc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function iN(n){if(n._initialized||n._terminated)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Cc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cc(Ur.fromBase64String(e))}catch(t){throw new xe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cc(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class td{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zp{constructor(e){this._methodName=e}}class Bb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}}const iL=/^__.*__$/;class sL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Jl(e,this.data,this.fieldMask,t,this.fieldTransforms):new dy(e,this.data,t,this.fieldTransforms)}}class sN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class jb{constructor(e,t,r,i,u,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new jb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Gb(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(oN(this.sa)&&iL.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class oL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Yw(e)}da(e,t,r,i=!1){return new jb({sa:e,methodName:t,fa:r,path:nr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Kp(n){const e=n._freezeSettings(),t=Yw(n._databaseId);return new oL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $b(n,e,t,r,i,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,i);ex("Data must be an object, but it was:",l,r);const m=cN(r,l);let v,I;if(u.merge)v=new us(l.fieldMask),I=l.fieldTransforms;else if(u.mergeFields){const T=[];for(const x of u.mergeFields){const L=tx(e,x,t);if(!l.contains(L))throw new xe(de.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);dN(T,L)||T.push(L)}v=new us(T),I=l.fieldTransforms.filter(x=>v.covers(x.field))}else v=null,I=l.fieldTransforms;return new sL(new Br(m),v,I)}class e0 extends Zp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof e0}}function aN(n,e,t){return new jb({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class QA extends Zp{_toFieldTransform(e){return new Ql(e.path,new gn)}isEqual(e){return e instanceof QA}}class aL extends Zp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=aN(this,e,!0),r=this._a.map(u=>Yp(u,t)),i=new cs(r);return new Ql(e.path,i)}isEqual(e){return this===e}}class uL extends Zp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=aN(this,e,!0),r=this._a.map(u=>Yp(u,t)),i=new nu(r);return new Ql(e.path,i)}isEqual(e){return this===e}}class cL extends Zp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new vc(e.It,st(e.It,this.wa));return new Ql(e.path,t)}isEqual(e){return this===e}}function JA(n,e,t,r){const i=n.da(1,e,t);ex("Data must be an object, but it was:",i,r);const u=[],l=Br.empty();pc(r,(v,I)=>{const T=Hb(e,v,t);I=(0,Ot.m9)(I);const x=i.ca(T);if(I instanceof e0)u.push(T);else{const L=Yp(I,x);null!=L&&(u.push(T),l.set(T,L))}});const m=new us(u);return new sN(l,m,i.fieldTransforms)}function XA(n,e,t,r,i,u){const l=n.da(1,e,t),m=[tx(e,r,t)],v=[i];if(u.length%2!=0)throw new xe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)m.push(tx(e,u[L])),v.push(u[L+1]);const I=[],T=Br.empty();for(let L=m.length-1;L>=0;--L)if(!dN(I,m[L])){const U=m[L];let Z=v[L];Z=(0,Ot.m9)(Z);const Ce=l.ca(U);if(Z instanceof e0)I.push(U);else{const Ee=Yp(Z,Ce);null!=Ee&&(I.push(U),T.set(U,Ee))}}const x=new us(I);return new sN(T,x,l.fieldTransforms)}function uN(n,e,t,r=!1){return Yp(t,n.da(r?4:3,e))}function Yp(n,e){if(lN(n=(0,Ot.m9)(n)))return ex("Unsupported field value:",e,n),cN(n,e);if(n instanceof Zp)return function(t,r){if(!oN(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const l of t){let m=Yp(l,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),i.push(m),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Ot.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return st(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Vn.fromDate(t);return{timestampValue:Vw(r.It,i)}}if(t instanceof Vn){const i=new Vn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vw(r.It,i)}}if(t instanceof Bb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Cc)return{bytesValue:wR(r.It,t._byteString)};if(t instanceof qn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:_S(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${kb(t)}`)}(n,e)}function cN(n,e){const t={};return Cw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pc(n,(r,i)=>{const u=Yp(i,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function lN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof Bb||n instanceof Cc||n instanceof qn||n instanceof Zp)}function ex(n,e,t){if(!lN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=kb(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function tx(n,e,t){if((e=(0,Ot.m9)(e))instanceof td)return e._internalPath;if("string"==typeof e)return Hb(n,e);throw Gb("Field path arguments must be of type string or ",n,!1,void 0,t)}const lL=new RegExp("[~\\*/\\[\\]]");function Hb(n,e,t){if(e.search(lL)>=0)throw Gb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new td(...e.split("."))._internalPath}catch{throw Gb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gb(n,e,t,r,i){const u=r&&!r.isEmpty(),l=void 0!==i;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||l)&&(v+=" (found",u&&(v+=` in field ${r}`),l&&(v+=` in document ${i}`),v+=")"),new xe(de.INVALID_ARGUMENT,m+n+v)}function dN(n,e){return n.some(t=>t.isEqual(e))}class t0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dL extends t0{data(){return super.data()}}function zb(n,e){return"string"==typeof e?Hb(n,e):e instanceof td?e._internalPath:e._delegate._internalPath}function hN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n0{}function Yh(n,...e){for(const t of e)n=t._apply(n);return n}class hL extends n0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Kp(e.firestore),r=function(i,u,l,m,v,I,T){let x;if(v.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){_N(T,I);const U=[];for(const Z of T)U.push(yN(m,i,Z));x={arrayValue:{values:U}}}else x=yN(m,i,T)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||_N(T,I),x=uN(l,"where",T,"in"===I||"not-in"===I);const L=ci.create(v,I,x);return function(U,Z){if(Z.dt()){const Ee=c(U);if(null!==Ee&&!Ee.isEqual(Z.field))throw new xe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ee.toString()}' and '${Z.field.toString()}'`);const Qe=a(U);null!==Qe&&vN(0,Z.field,Qe)}const Ce=function(Ee,Qe){for(const yt of Ee.filters)if(Qe.indexOf(yt.op)>=0)return yt.op;return null}(U,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==Ce)throw new xe(de.INVALID_ARGUMENT,Ce===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${Ce.toString()}' filters.`)}(i,L),L}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Zi(e.firestore,e.converter,function(i,u){const l=i.filters.concat([u]);return new _c(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class pL extends n0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Up(i,u);return function(m,v){if(null===a(m)){const I=c(m);null!==I&&vN(0,I,v.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Zi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new _c(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class fN extends n0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Zi(e.firestore,e.converter,E(e._query,this.Ia,this.Ta))}}class pN extends n0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=mN(e,this.type,this.Ea,this.Aa);return new Zi(e.firestore,e.converter,(i=t,new _c((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class gN extends n0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=mN(e,this.type,this.Ea,this.Aa);return new Zi(e.firestore,e.converter,(i=t,new _c((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function mN(n,e,t,r){if(t[0]=(0,Ot.m9)(t[0]),t[0]instanceof t0)return function(i,u,l,m,v){if(!m)throw new xe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const I=[];for(const T of p(i))if(T.field.isKeyField())I.push(eu(u,m.key));else{const x=m.data.field(T.field);if(Tw(x))throw new xe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const L=T.field.canonicalString();throw new xe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(x)}return new yc(I,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Kp(n.firestore);return function(u,l,m,v,I,T){const x=u.explicitOrderBy;if(I.length>x.length)throw new xe(de.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let U=0;U<I.length;U++){const Z=I[U];if(x[U].field.isKeyField()){if("string"!=typeof Z)throw new xe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Z}`);if(!d(u)&&-1!==Z.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Z}' contains a slash.`);const Ce=u.path.child(Jt.fromString(Z));if(!Ge.isDocumentKey(Ce))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Ce}' is not because it contains an odd number of segments.`);const Ee=new Ge(Ce);L.push(eu(l,Ee))}else{const Ce=uN(m,v,Z);L.push(Ce)}}return new yc(L,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function yN(n,e,t){if("string"==typeof(t=(0,Ot.m9)(t))){if(""===t)throw new xe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d(e)&&-1!==t.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ge.isDocumentKey(r))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eu(n,new Ge(r))}if(t instanceof qn)return eu(n,t._key);throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kb(t)}.`)}function _N(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vN(n,e,t){if(!t.isEqual(e))throw new xe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class nx{convertValue(e,t="none"){switch(mc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return pc(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Bb(rr(e.latitude),rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=iS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ty(e));default:return null}}convertTimestamp(e){const t=Xa(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);Rt(xR(r));const i=new Yl(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return i.isEqual(t)||zn(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function qb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class IL extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class Qp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nd extends t0{constructor(e,t,r,i,u,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new r0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class r0 extends nd{data(e={}){return super.data(e)}}class Qh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new r0(this._firestore,this._userDataWriter,r.key,r,new Qp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new r0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Qp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const m=new r0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Qp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,I=-1;return 0!==l.type&&(v=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),I=u.indexOf(l.doc.key)),{type:bL(l.type),doc:m,oldIndex:v,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function bL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function wN(n,e){return n instanceof nd&&e instanceof nd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Qh&&e instanceof Qh&&n._firestore===e._firestore&&jA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Jh extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function EN(n,e,t){n=nn(n,qn);const r=nn(n.firestore,Wn),i=qb(n.converter,e,t);return Sy(r,[$b(Kp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ir.none())])}function IN(n,e,t,...r){n=nn(n,qn);const i=nn(n.firestore,Wn),u=Kp(i);let l;return l="string"==typeof(e=(0,Ot.m9)(e))||e instanceof td?XA(u,"updateDoc",n._key,e,t,r):JA(u,"updateDoc",n._key,e),Sy(i,[l.toMutation(n._key,ir.exists(!0))])}function bN(n,...e){var t,r,i;n=(0,Ot.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||YA(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(YA(e[l])){const x=e[l];e[l]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[l+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[l+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let v,I,T;if(n instanceof qn)I=nn(n.firestore,Wn),T=s(n._key.path),v={next:x=>{e[l]&&e[l](rx(I,n,x))},error:e[l+1],complete:e[l+2]};else{const x=nn(n,Zi);I=nn(x.firestore,Wn),T=x._query;const L=new Jh(I);v={next:U=>{e[l]&&e[l](new Qh(I,L,x,U))},error:e[l+1],complete:e[l+2]},hN(n._query)}return function(x,L,U,Z){const Ce=new Lb(Z),Ee=new fA(L,Ce,U);return x.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return uA(yield Ty(x),Ee)})),()=>{Ce.bc(),x.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return lA(yield Ty(x),Ee)}))}}(Sr(I),T,m,v)}function Sy(n,e){return function(t,r){const i=new Tr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function mF(n,e,t){return _A.apply(this,arguments)}(yield ZA(t),r,i)})),i.promise}(Sr(n),e)}function rx(n,e,t){const r=t.docs.get(e._key),i=new Jh(n);return new nd(n,i,e._key,r,new Qp(t.hasPendingWrites,t.fromCache),e.converter)}const NL={maxAttempts:5};class CN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kp(e)}set(e,t,r){this._verifyNotCommitted();const i=Xh(e,this._firestore),u=qb(i.converter,t,r),l=$b(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Xh(e,this._firestore);let l;return l="string"==typeof(t=(0,Ot.m9)(t))||t instanceof td?XA(this._dataReader,"WriteBatch.update",u._key,t,r,i):JA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xh(e,this._firestore);return this._mutations=this._mutations.concat(new hy(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xh(n,e){if((n=(0,Ot.m9)(n)).firestore!==e)throw new xe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class PL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kp(e)}get(e){const t=Xh(e,this._firestore),r=new IL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const u=i[0];if(u.isFoundDocument())return new t0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new t0(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=Xh(e,this._firestore),u=qb(i.converter,t,r),l=$b(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const u=Xh(e,this._firestore);let l;return l="string"==typeof(t=(0,Ot.m9)(t))||t instanceof td?XA(this._dataReader,"Transaction.update",u._key,t,r,i):JA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Xh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xh(e,this._firestore),r=new Jh(this._firestore);return super.get(e).then(i=>new nd(this._firestore,r,t._key,i._document,new Qp(!1,!1),t.converter))}}function ix(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function TN(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function SN(){if(!function rS(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Hl=Io.SDK_VERSION,(0,Io._registerComponent)(new wh.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),l=new Wn(new WT(t.getProvider("auth-internal")),new QT(t.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yl(m.options.projectId,v)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Io.registerVersion)(Op,"3.7.3",n),(0,Io.registerVersion)(Op,"3.7.3","esm2017")}();class s0{constructor(e){this._delegate=e}static fromBase64String(e){return SN(),new s0(Cc.fromBase64String(e))}static fromUint8Array(e){return TN(),new s0(Cc.fromUint8Array(e))}toBase64(){return SN(),this._delegate.toBase64()}toUint8Array(){return TN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sx(n){return function HL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class GL{enableIndexedDbPersistence(e,t){return function YF(n,e){iN(n=nn(n,Wn));const t=Sr(n),r=n._freezeSettings(),i=new UA;return rN(t,i,new UO(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function QF(n){iN(n=nn(n,Wn));const e=Sr(n),t=n._freezeSettings(),r=new UA;return rN(e,r,new OF(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function JF(n){if(n._initialized&&!n._terminated)throw new xe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Do.C())return Promise.resolve();const i=r+"main";yield Do.delete(i)}),function(r){return t.apply(this,arguments)})(OS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class AN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&hc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function qO(n,e,t,r={}){var i;const u=(n=nn(n,Xw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&hc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Yr.MOCK_USER;else{l=(0,Ot.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new xe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Yr(v)}n._authCredentials=new YM(new qT(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function eL(n){return function BF(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield JO(n),t=yield WA(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i._u.delete(0),Qw(i)}(t)}))}(Sr(n=nn(n,Wn)))}(this._delegate)}disableNetwork(){return function tL(n){return function jF(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield JO(n),t=yield WA(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const u=qe(i);u._u.add(0),yield vy(u),u.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Sr(n=nn(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,BO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function XF(n){return function(e){const t=new Tr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function wF(n,e){return bA.apply(this,arguments)}(yield ZA(e),t)})),t.promise}(Sr(n=nn(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function OL(n,e){return function GF(n,e){const t=new Lb(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Ty(n),i=t,qe(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Ty(n),i=t,void qe(r).Ru.delete(i);var r,i}))}}(Sr(n=nn(n,Wn)),YA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ay(this,WO(this._delegate,e))}catch(t){throw ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new na(this,Fb(this._delegate,e))}catch(t){throw ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hs(this,function NF(n,e){if(n=nn(n,Xw),BA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zi(n,null,(t=e,new _c(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function kL(n,e,t){n=nn(n,Wn);const r=Object.assign(Object.assign({},NL),t);return function(i){if(i.maxAttempts<1)throw new xe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,l){const m=new Tr;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const v=yield function XO(n){return Vb(n).then(e=>e.datastore)}(i);new VF(i.asyncQueue,v,l,u,m).run()})),m.promise}(Sr(n),i=>e(new PL(n,i)),r)}(this._delegate,t=>e(new xN(this,t)))}batch(){return Sr(this._delegate),new MN(new CN(this._delegate,e=>Sy(this._delegate,e)))}loadBundle(e){return function nL(n,e){const t=Sr(n=nn(n,Wn)),r=new ZF;return function zF(n,e,t,r){const i=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,I){if(v instanceof Uint8Array)return KO(v,I);if(v instanceof ArrayBuffer)return KO(new Uint8Array(v),I);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new PF(v,l);var v}(t,Yw(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function RF(n,e,t){const r=qe(n);var i;(i=(0,me.Z)(function*(u,l,m){try{const v=yield l.getMetadata();if(yield function(L,U){const Z=qe(L),Ce=li(U.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Ee=>Z.Ns.getBundleMetadata(Ee,U.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(Ce)>=0)}(u.localStore,v))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(L=v).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);m._updateProgress(xO(v));const I=new lF(v,u.localStore,l.It);let T=yield l.mc();for(;T;){const L=yield I.Fu(T);L&&m._updateProgress(L),T=yield l.mc()}const x=yield I.complete();return yield ed(u,x.Lu,void 0),yield function(L,U){const Z=qe(L);return Z.persistence.runTransaction("Save bundle","readwrite",Ce=>Z.Ns.saveBundleMetadata(Ce,U))}(u.localStore,v),m._completeWith(x.progress),Promise.resolve(x.Bu)}catch(v){return hc("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var L}),function(u,l,m){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ZA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function rL(n,e){return function qF(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield Ub(n),e)}))}(Sr(n=nn(n,Wn)),e).then(t=>t?new Zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new hs(this,t):null)}}class Wb extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new s0(new Cc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return na.forKey(t,this.firestore,null)}}class xN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Wb(e)}get(e){const t=Xp(e);return this._delegate.get(t).then(r=>new o0(this._firestore,new nd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Xp(e);return r?(ix("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Xp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Xp(e);return this._delegate.delete(t),this}}class MN{constructor(e){this._delegate=e}set(e,t,r){const i=Xp(e);return r?(ix("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Xp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Xp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Jp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new r0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new a0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Jp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Jp(e,new Wb(e),t),i.set(t,u)),u}}Jp.INSTANCES=new WeakMap;class na{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new na(t,new qn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new na(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ay(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ay(this.firestore,WO(this._delegate,e))}catch(t){throw ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ot.m9)(e))instanceof qn&&ZO(this._delegate,e)}set(e,t){t=ix("DocumentReference.set",t);try{return t?EN(this._delegate,e,t):EN(this._delegate,e)}catch(r){throw ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?IN(this._delegate,e):IN(this._delegate,e,t,...r)}catch(i){throw ds(i,"updateDoc()","DocumentReference.update()")}}delete(){return function ML(n){return Sy(nn(n.firestore,Wn),[new hy(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=RN(e),r=ON(e,i=>new o0(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return bN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function DL(n){n=nn(n,qn);const e=nn(n.firestore,Wn),t=Sr(e),r=new Jh(e);return function $F(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,l){try{const m=yield function(v,I){const T=qe(v);return T.persistence.runTransaction("read document","readonly",x=>T.localDocuments.getDocument(x,I))}(i,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new xe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Iy(m,`Failed to get document '${u} from cache`);l.reject(v)}}),function(i,u,l){return r.apply(this,arguments)})(yield Ub(n),e,t);var r})),t.promise}(t,n._key).then(i=>new nd(e,r,n._key,i,new Qp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function TL(n){n=nn(n,qn);const e=nn(n.firestore,Wn);return eN(Sr(e),n._key,{source:"server"}).then(t=>rx(e,n,t))}(this._delegate):function CL(n){n=nn(n,qn);const e=nn(n.firestore,Wn);return eN(Sr(e),n._key).then(t=>rx(e,n,t))}(this._delegate),t.then(r=>new o0(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new na(this.firestore,this._delegate.withConverter(e?Jp.getInstance(this.firestore,e):null))}}function ds(n,e,t){return n.message=n.message.replace(e,t),n}function RN(n){for(const e of n)if("object"==typeof e&&!sx(e))return e;return{}}function ON(n,e){var t,r;let i;return i=sx(n[0])?n[0]:sx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class o0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new na(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wN(this._delegate,e._delegate)}}class a0 extends o0{data(e){const t=this._delegate.data(e);return function ZM(n,e){n||it()}(void 0!==t),t}}class hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wb(e)}where(e,t,r){try{return new hs(this.firestore,Yh(this._delegate,function fL(n,e,t){const r=e,i=zb("where",n);return new hL(i,r,t)}(e,t,r)))}catch(i){throw ds(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new hs(this.firestore,Yh(this._delegate,function gL(n,e="asc"){const t=e,r=zb("orderBy",n);return new pL(r,t)}(e,t)))}catch(r){throw ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hs(this.firestore,Yh(this._delegate,function mL(n){return HO("limit",n),new fN("limit",n,"F")}(e)))}catch(t){throw ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new hs(this.firestore,Yh(this._delegate,function yL(n){return HO("limitToLast",n),new fN("limitToLast",n,"L")}(e)))}catch(t){throw ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hs(this.firestore,Yh(this._delegate,function _L(...n){return new pN("startAt",n,!0)}(...e)))}catch(t){throw ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hs(this.firestore,Yh(this._delegate,function vL(...n){return new pN("startAfter",n,!1)}(...e)))}catch(t){throw ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hs(this.firestore,Yh(this._delegate,function wL(...n){return new gN("endBefore",n,!1)}(...e)))}catch(t){throw ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hs(this.firestore,Yh(this._delegate,function EL(...n){return new gN("endAt",n,!0)}(...e)))}catch(t){throw ds(t,"endAt()","Query.endAt()")}}isEqual(e){return jA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function AL(n){n=nn(n,Zi);const e=nn(n.firestore,Wn),t=Sr(e),r=new Jh(e);return function HF(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,l){try{const m=yield xb(i,u,!0),v=new OO(u,m.Hi),I=v.Wu(m.documents),T=v.applyChanges(I,!1);l.resolve(T.snapshot)}catch(m){const v=Iy(m,`Failed to execute query '${u} against cache`);l.reject(v)}}),function(i,u,l){return r.apply(this,arguments)})(yield Ub(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Qh(e,r,n,i))}(this._delegate):"server"===e?.source?function xL(n){n=nn(n,Zi);const e=nn(n.firestore,Wn),t=Sr(e),r=new Jh(e);return tN(t,n._query,{source:"server"}).then(i=>new Qh(e,r,n,i))}(this._delegate):function SL(n){n=nn(n,Zi);const e=nn(n.firestore,Wn),t=Sr(e),r=new Jh(e);return hN(n._query),tN(t,n._query).then(i=>new Qh(e,r,n,i))}(this._delegate),t.then(r=>new ox(this.firestore,new Qh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=RN(e),r=ON(e,i=>new ox(this.firestore,new Qh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return bN(this._delegate,t,r)}withConverter(e){return new hs(this.firestore,this._delegate.withConverter(e?Jp.getInstance(this.firestore,e):null))}}class qL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new a0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ox{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new a0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new a0(this._firestore,r))})}isEqual(e){return wN(this._delegate,e._delegate)}}class Ay extends hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new na(this.firestore,e):null}doc(e){try{return new na(this.firestore,void 0===e?Fb(this._delegate):Fb(this._delegate,e))}catch(t){throw ds(t,"doc()","CollectionReference.doc()")}}add(e){return function RL(n,e){const t=nn(n.firestore,Wn),r=Fb(n),i=qb(n.converter,e);return Sy(t,[$b(Kp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new na(this.firestore,t))}isEqual(e){return ZO(this._delegate,e._delegate)}withConverter(e){return new Ay(this.firestore,this._delegate.withConverter(e?Jp.getInstance(this.firestore,e):null))}}function Xp(n){return nn(n,qn)}class ax{constructor(...e){this._delegate=new td(...e)}static documentId(){return new ax(nr.keyField().canonicalString())}isEqual(e){return(e=(0,Ot.m9)(e))instanceof td&&this._delegate._internalPath.isEqual(e._internalPath)}}class eg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function LL(){return new QA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new eg(e)}static delete(){const e=function FL(){return new e0("deleteField")}();return e._methodName="FieldValue.delete",new eg(e)}static arrayUnion(...e){const t=function VL(...n){return new aL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new eg(t)}static arrayRemove(...e){const t=function UL(...n){return new uL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new eg(t)}static increment(e){const t=function BL(n){return new cL("increment",n)}(e);return t._methodName="FieldValue.increment",new eg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const WL={Firestore:AN,GeoPoint:Bb,Timestamp:Vn,Blob:s0,Transaction:xN,WriteBatch:MN,DocumentReference:na,DocumentSnapshot:o0,Query:hs,QueryDocumentSnapshot:a0,QuerySnapshot:ox,CollectionReference:Ay,FieldPath:ax,FieldValue:eg,setLogLevel:function zL(n){!function rb(n){Co.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function KL(n){(function ZL(n,e){n.INTERNAL.registerComponent(new wh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},WL)))})(n,(e,t)=>new AN(e,t,new GL)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(yv.Z);var YL=P(6451);function NN(n,e){return(0,Ra.m)(e)?M(()=>n,e):M(()=>n)}var ux=P(9468);P(5867);const lx=new Map,kN={activated:!1,tokenObservers:[]},tV={initialized:!1,enabled:!1};function Ri(n){return lx.get(n)||Object.assign({},kN)}function Kb(){return tV}class aV{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new Ot.BH,yield function uV(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ot.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fs=new Ot.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function LN(n){if(!Ri(n).activated)throw fs.create("use-before-activation",{appName:n.name})}function fx(n,e){return px.apply(this,arguments)}function px(){return px=(0,me.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const U=yield l.getHeartbeatsHeader();U&&(u["X-Firebase-Client"]=U)}const m={method:"POST",body:JSON.stringify(e),headers:u};let v,I;try{v=yield fetch(n,m)}catch(U){throw fs.create("fetch-network-error",{originalErrorMessage:null===(r=U)||void 0===r?void 0:r.message})}if(200!==v.status)throw fs.create("fetch-status-error",{httpStatus:v.status});try{I=yield v.json()}catch(U){throw fs.create("fetch-parse-error",{originalErrorMessage:null===(i=U)||void 0===i?void 0:i.message})}const T=I.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw fs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${I.ttl}`});const x=1e3*Number(T[1]),L=Date.now();return{token:I.token,expireTimeMillis:L+x,issuedAtTimeMillis:L}}),px.apply(this,arguments)}function hV(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const u0="firebase-app-check-store";let Jb=null;function UN(){return Jb||(Jb=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(fs.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(u0,{keyPath:"compositeKey"})}}catch(r){e(fs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Jb)}function gx(){return gx=(0,me.Z)(function*(n,e){const r=(yield UN()).transaction(u0,"readwrite"),u=r.objectStore(u0).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=v=>{l()},r.onerror=v=>{var I;m(fs.create("storage-set",{originalErrorMessage:null===(I=v.target.error)||void 0===I?void 0:I.message}))}})}),gx.apply(this,arguments)}const c0=new uc.Yd("@firebase/app-check");function _x(n,e){return(0,Ot.hl)()?function mV(n,e){return function BN(n,e){return gx.apply(this,arguments)}(function $N(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{c0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function HN(){return Kb().enabled}function GN(){return wx.apply(this,arguments)}function wx(){return wx=(0,me.Z)(function*(){const n=Kb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),wx.apply(this,arguments)}const IV={error:"UNKNOWN_ERROR"};function bV(n){return Ot.US.encodeString(JSON.stringify(n),!1)}function Xb(n){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,me.Z)(function*(n,e=!1){const t=n.app;LN(t);const r=Ri(t);let u,i=r.token;if(i&&!xy(i)&&(r.token=void 0,i=void 0),!i){const v=yield r.cachedTokenPromise;v&&(xy(v)?i=v:yield _x(t,void 0))}if(!e&&i&&xy(i))return{token:i.token};let m,l=!1;if(HN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=fx(hV(t,yield GN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const v=yield r.exchangeTokenPromise;return yield _x(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Ri(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?c0.warn(v.message):c0.error(v),u=v}return i?u?m=xy(i)?{token:i.token,internalError:u}:WN(u):(m={token:i.token},r.token=i,yield _x(t,i)):m=WN(u),l&&qN(t,m),m}),Ex.apply(this,arguments)}function bx(n,e){const t=Ri(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function zN(n){const{app:e}=n,t=Ri(e);let r=t.tokenRefresher;r||(r=function CV(n){const{app:e}=n;return new aV((0,me.Z)(function*(){let r;if(r=Ri(e).token?yield Xb(n,!0):yield Xb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ri(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qN(n,e){const t=Ri(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function xy(n){return n.expireTimeMillis-Date.now()>0}function WN(n){return{token:bV(IV),error:n}}class DV{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ri(this.app);for(const t of e)bx(this.app,t.next);return Promise.resolve()}}const tP="app-check-internal";!function UV(){(0,Io._registerComponent)(new wh.wA("app-check",n=>function TV(n,e){return new DV(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tP).initialize()})),(0,Io._registerComponent)(new wh.wA(tP,n=>function SV(n){return{getToken:e=>Xb(n,e),addTokenListener:e=>function Ix(n,e,t,r){const{app:i}=n,u=Ri(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&xy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),zN(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>zN(n))}(n,"INTERNAL",e),removeTokenListener:e=>bx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Io.registerVersion)("@firebase/app-check","0.5.17")}();class tC{constructor(){return(0,Fn.vb)("app-check")}}typeof window<"u"&&window;var rP=P(127);const iP=new h.OlP("angularfire2.auth.use-emulator"),sP=new h.OlP("angularfire2.auth.settings"),oP=new h.OlP("angularfire2.auth.tenant-id"),aP=new h.OlP("angularfire2.auth.langugage-code"),uP=new h.OlP("angularfire2.auth.use-device-language"),cP=new h.OlP("angularfire.auth.persistence"),lP=(n,e,t,r,i,u,l,m)=>(0,ai.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=i,u&&v.useDeviceLanguage(),l)for(const[I,T]of Object.entries(l))v.settings[I]=T;return m&&v.setPersistence(m),v},[t,r,i,u,l,m]);let dP=(()=>{class n{constructor(t,r,i,u,l,m,v,I,T,x,L,U){const Z=new Ir.x,Ce=Ye(void 0).pipe((0,jf.Q)(l.outsideAngular),M(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,1277)))),(0,Ke.U)(()=>(0,ai.on)(t,u,r)),(0,Ke.U)(Ee=>lP(Ee,u,m,I,T,x,v,L)),Xd({bufferSize:1,refCount:!1}));if(ar(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ye(null);else{Ce.pipe(Dt()).subscribe();const Qe=Ce.pipe(M(at=>at.getRedirectResult().then(Tt=>Tt,()=>null)),Fn.iC,Xd({bufferSize:1,refCount:!1})),yt=Ce.pipe(M(at=>new Nn.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>at.onAuthStateChanged(Ft=>Tt.next(Ft),Ft=>Tt.error(Ft),()=>Tt.complete()))})))),lt=Ce.pipe(M(at=>new Nn.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>at.onIdTokenChanged(Ft=>Tt.next(Ft),Ft=>Tt.error(Ft),()=>Tt.complete()))}))));this.authState=Qe.pipe(NN(yt),(0,ux.R)(l.outsideAngular),(0,jf.Q)(l.insideAngular)),this.user=Qe.pipe(NN(lt),(0,ux.R)(l.outsideAngular),(0,jf.Q)(l.insideAngular)),this.idToken=this.user.pipe(M(at=>at?(0,Zt.D)(at.getIdToken()):Ye(null))),this.idTokenResult=this.user.pipe(M(at=>at?(0,Zt.D)(at.getIdTokenResult()):Ye(null))),this.credential=(0,YL.T)(Qe,Z,this.authState.pipe(X(at=>!at))).pipe((0,Ke.U)(at=>at?.user?at:null),(0,ux.R)(l.outsideAngular),(0,jf.Q)(l.insideAngular))}return(0,ai.pX)(this,Ce,u,{spy:{apply:(Ee,Qe,yt)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&yt.then(lt=>Z.next(lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ai.Dh),h.LFG(ai.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Fn.HU),h.LFG(iP,8),h.LFG(sP,8),h.LFG(oP,8),h.LFG(aP,8),h.LFG(uP,8),h.LFG(cP,8),h.LFG(tC,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function hP(n,e){return function zV(n,e=gv.z){return new Nn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Ax(n,e){return hP(n,e).pipe((0,Ke.U)(t=>({payload:t,type:"query"})))}function nC(n,e){return Ax(n,e).pipe(K(void 0),mv(),(0,Ke.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const v=i.find(T=>T.doc.ref.isEqual(l.ref)),I=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(l.metadata)||!v&&I&&JSON.stringify(I.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function fP(n,e,t){return nC(n,t).pipe(bi((r,i)=>function WV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function ZV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return xx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return xx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),_l(),(0,Ke.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function xx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function pP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class gP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=nC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ke.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(K(void 0),mv(),X(([r,i])=>i.length>0||!r),(0,Ke.U)(([r,i])=>i),Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pP(e);return fP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return Ax(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Fn.iC)}get(e){return(0,Zt.D)(this.query.get(e)).pipe(Fn.iC)}add(e){return this.ref.add(e)}doc(e){return new mP(this.ref.doc(e),this.afs)}}class mP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=vP(r,t);return new gP(i,u,this.afs)}snapshotChanges(){return function qV(n,e){return hP(n,e).pipe(K(void 0),mv(),(0,Ke.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ke.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Zt.D)(this.ref.get(e)).pipe(Fn.iC)}}class KV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?nC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),X(t=>t.length>0),Fn.iC):nC(this.query,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pP(e);return fP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return Ax(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Fn.iC)}get(e){return(0,Zt.D)(this.query.get(e)).pipe(Fn.iC)}}const yP=new h.OlP("angularfire2.enableFirestorePersistence"),_P=new h.OlP("angularfire2.firestore.persistenceSettings"),YV=new h.OlP("angularfire2.firestore.settings"),QV=new h.OlP("angularfire2.firestore.use-emulator");function vP(n,e=(t=>t)){return{query:e(n),ref:n}}let My=(()=>{class n{constructor(t,r,i,u,l,m,v,I,T,x,L,U,Z,Ce,Ee,Qe,yt){this.schedulers=v;const lt=(0,ai.on)(t,m,r),at=T;x&&lP(lt,m,L,Z,Ce,Ee,U,Qe),[this.firestore,this.persistenceEnabled$]=(0,ai.cc)(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const Tt=m.runOutsideAngular(()=>lt.firestore());if(u&&Tt.settings(u),at&&Tt.useEmulator(...at),i&&!ar(l)){const Ft=()=>{try{return(0,Zt.D)(Tt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(hr){return typeof console<"u"&&console.warn(hr),Ye(!1)}};return[Tt,m.runOutsideAngular(Ft)]}return[Tt,Ye(!1)]},[u,at,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=vP(i,r),m=this.schedulers.ngZone.run(()=>u);return new gP(m,l,this)}collectionGroup(t,r){const i=r||(l=>l),u=this.firestore.collectionGroup(t);return new KV(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new mP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ai.Dh),h.LFG(ai.xv,8),h.LFG(yP,8),h.LFG(YV,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Fn.HU),h.LFG(_P,8),h.LFG(QV,8),h.LFG(dP,8),h.LFG(iP,8),h.LFG(sP,8),h.LFG(oP,8),h.LFG(aP,8),h.LFG(uP,8),h.LFG(cP,8),h.LFG(tC,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),JV=(()=>{class n{constructor(){rP.Z.registerVersion("angularfire",Fn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:yP,useValue:!0},{provide:_P,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[My]}),n})();const XV=function(n){return{"no-border":n}},eU=function(n,e){return{income:n,outcome:e}};let tU=(()=>{class n{constructor(t){this.store=t}deleteTransaction(){confirm('Are you sure you want to delete the transaction with description "'+this.transaction.name+'"?')&&this.store.dispatch(new Eo.Delete(this.transaction))}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Fs))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-transaction"]],inputs:{transaction:"transaction",isLast:"isLast"},decls:22,vars:19,consts:[[1,"container",3,"ngClass"],[1,"date-category"],[1,"hidden-header"],[1,"val"],[1,"description"],[1,"amount",3,"ngClass"],[1,"delete","hide",3,"click"],[1,"grid-placeholder"],[1,"delete-transaction-text",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"span",2),h._uU(3,"Date/Category: "),h.qZA(),h.TgZ(4,"span",3),h._uU(5),h.ALo(6,"date"),h.qZA()(),h.TgZ(7,"div",4)(8,"span",2),h._uU(9,"Name: "),h.qZA(),h.TgZ(10,"span",3),h._uU(11),h.qZA()(),h.TgZ(12,"div",5)(13,"span",2),h._uU(14,"Amount "),h.qZA(),h.TgZ(15,"span",3),h._uU(16),h.ALo(17,"currency"),h.qZA()(),h.TgZ(18,"div",6),h.NdJ("click",function(){return r.deleteTransaction()}),h.qZA(),h._UZ(19,"div",7),h.TgZ(20,"button",8),h.NdJ("click",function(){return r.deleteTransaction()}),h._uU(21," Delete "),h.qZA()()),2&t&&(h.Q6J("ngClass",h.VKq(14,XV,r.isLast)),h.xp6(5),h.AsE("",h.xi3(6,6,r.transaction.date,"dd/MM/yyyy")," (",r.transaction.category,")"),h.xp6(6),h.Oqu(r.transaction.name),h.xp6(1),h.Q6J("ngClass",h.WLB(16,eU,r.transaction.isIncome,!r.transaction.isIncome)),h.xp6(4),h.Oqu(h.gM2(17,9,r.transaction.amount,"EUR","symbol","1.2-2")))},dependencies:[sn,Fi,sf],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:27% calc(58% - 72px) 15% 24px;gap:8px 16px;align-items:center;font-size:14px;line-height:19px;margin-top:4px}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:19px}.container[_ngcontent-%COMP%]   span.val[_ngcontent-%COMP%]{width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;display:inline-block}.container[_ngcontent-%COMP%]   .date-category[_ngcontent-%COMP%]{text-align:left;opacity:.7}.container[_ngcontent-%COMP%]   .date-category[_ngcontent-%COMP%]   span.val[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%}.container[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{cursor:pointer;width:16px;height:16px;background-image:url(delete.fa3dbab8bbf726c0.svg);background-size:contain;background-position:center;background-repeat:no-repeat}.container[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]:hover{opacity:.6}.hidden-header[_ngcontent-%COMP%]{display:none}.income[_ngcontent-%COMP%]{color:#06cd06}.outcome[_ngcontent-%COMP%]{color:#fd6d6d}.delete-transaction-text[_ngcontent-%COMP%], .grid-placeholder[_ngcontent-%COMP%]{display:none}@media only screen and (max-width: 500px){div.grid-placeholder[_ngcontent-%COMP%]{display:none}.hidden-header[_ngcontent-%COMP%]{display:inline-block;font-weight:700;margin-right:4px}.hide[_ngcontent-%COMP%]{display:none}.delete-transaction-text[_ngcontent-%COMP%], .grid-placeholder[_ngcontent-%COMP%]{display:inline-block}.category[_ngcontent-%COMP%]{opacity:1!important}.container[_ngcontent-%COMP%]{grid-template-columns:calc(50% - 8px) calc(50% - 8px);grid-gap:0px 4px;border-bottom:1px solid #59a1d1}.container.no-border[_ngcontent-%COMP%]{border-bottom:0px}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:unset}}@media only screen and (max-width: 420px){div.container[_ngcontent-%COMP%]{grid-template-columns:100%!important;padding-bottom:16px}}"]}),n})();function nU(n,e){if(1&n&&h._UZ(0,"app-transaction",6),2&n){const t=e.$implicit,r=e.index,i=h.oxw();h.Q6J("isLast",r===i.transactions.transactions.length-1)("transaction",t)}}let rU=(()=>{class n{constructor(){}returnMonthName(t){var r=["January","February","March","April","May","June","July","August","September","October","November","December"];return window.innerWidth>=350?r[t]:r[t].substring(0,3)}ngOnInit(){console.log(this.transactions)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-transactions-group"]],inputs:{transactions:"transactions"},decls:12,vars:15,consts:[[1,"page-container","extended"],[1,"transactions-group"],[1,"page-title","special"],[1,"green","ml-16"],[1,"red","ml-16"],[3,"isLast","transaction",4,"ngFor","ngForOf"],[3,"isLast","transaction"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),h._uU(4),h.qZA(),h.TgZ(5,"span",3),h._uU(6),h.ALo(7,"currency"),h.qZA(),h.TgZ(8,"span",4),h._uU(9),h.ALo(10,"currency"),h.qZA()(),h.YNc(11,nU,1,2,"app-transaction",5),h.qZA()()),2&t&&(h.xp6(4),h.AsE("",r.returnMonthName(r.transactions.month)," ",r.transactions.year," "),h.xp6(2),h.hij("+ ",h.gM2(7,5,r.transactions.totalIncome,"EUR","symbol","1.2-2"),""),h.xp6(3),h.hij("- ",h.gM2(10,10,r.transactions.totalOutcome,"EUR","symbol","1.2-2"),""),h.xp6(2),h.Q6J("ngForOf",r.transactions.transactions))},dependencies:[gi,tU,Fi],styles:[".transactions-group[_ngcontent-%COMP%]{max-width:678px;margin:auto;box-sizing:border-box;font-size:24px;line-height:29px}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:20px;line-height:29px;align-items:center;margin:auto auto 16px;gap:24px}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .min-width[_ngcontent-%COMP%]{min-width:160px}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .v-flex[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center;width:max-content;margin:auto;text-align:left;width:100%}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .v-flex[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#000;font-size:20px;line-height:29px}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .income[_ngcontent-%COMP%]{color:#06cd06}.transactions-group[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .outcome[_ngcontent-%COMP%]{color:#fd6d6d}"]}),n})();function iU(n,e){if(1&n&&h._UZ(0,"app-transactions-group",3),2&n){const t=e.$implicit,r=h.oxw(2);h.Q6J("transactions",r.groupedTransactions.transactions[t])}}function sU(n,e){if(1&n&&(h.TgZ(0,"div",1),h.YNc(1,iU,1,1,"app-transactions-group",2),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngForOf",null==t.groupedTransactions?null:t.groupedTransactions.dateOrder)}}class ef{constructor(e,t){this.store=e,this.db=t,this.transactions=[],this.transactions$.subscribe(r=>this.transactions=r),this.groupedTransactions$.subscribe(r=>this.groupedTransactions=r)}log(){console.log(this.groupedTransactions)}fetchTransactions(){this.store.dispatch(new Eo.Fetch)}ngOnInit(){console.log("ngondestroy on components to unsubscribe"),this.fetchTransactions()}}function oU(n,e){if(1&n&&(h.TgZ(0,"div")(1,"span",5),h._uU(2),h.qZA(),h.TgZ(3,"span"),h._uU(4),h.ALo(5,"currency"),h.qZA()()),2&n){const t=e.$implicit,r=h.oxw().$implicit,i=h.oxw();h.xp6(2),h.hij("",t.name,": "),h.xp6(2),h.hij(" ",h.gM2(5,2,(null==i.transactionsGrouped||null==i.transactionsGrouped.transactions||null==i.transactionsGrouped.transactions[r]||null==i.transactionsGrouped.transactions[r].summary?null:i.transactionsGrouped.transactions[r].summary[t.name])||0,"EUR","symbol","1.2-2"),"")}}function aU(n,e){if(1&n&&(h.TgZ(0,"div",1)(1,"span",2),h._uU(2),h.qZA(),h.TgZ(3,"div",3),h.YNc(4,oU,6,7,"div",4),h.qZA()()),2&n){const t=e.$implicit,r=h.oxw();h.xp6(2),h.Oqu(r.parseDate(t)),h.xp6(2),h.Q6J("ngForOf",r.categories)}}ef.\u0275fac=function(e){return new(e||ef)(h.Y36(Fs),h.Y36(My))},ef.\u0275cmp=h.Xpm({type:ef,selectors:[["app-transactions-page"]],decls:1,vars:1,consts:[["class","transactions-list",4,"ngIf"],[1,"transactions-list"],[3,"transactions",4,"ngFor","ngForOf"],[3,"transactions"]],template:function(e,t){1&e&&h.YNc(0,sU,2,1,"div",0),2&e&&h.Q6J("ngIf",t.transactions)},dependencies:[gi,Cn,rU],styles:[".transactions-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:100%;grid-gap:24px;width:100%;padding-bottom:24px}"]}),(0,kn.gn)([nc(n=>n.transactions.transactionsRaw)],ef.prototype,"transactions$",void 0),(0,kn.gn)([nc(n=>n.transactions.transactionsGrouped)],ef.prototype,"groupedTransactions$",void 0);class tg{constructor(e){this.store=e,this.transactionsGrouped$.subscribe(t=>{this.transactionsGrouped=t,console.log(t)}),this.categories$.subscribe(t=>{this.categories=t,console.log(t)})}parseDate(e){const t=e.split("/");return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(t[0])]} ${t[1]}`}ngOnInit(){this.store.dispatch(new Eo.Fetch),this.store.dispatch(new Ti.Fetch)}}tg.\u0275fac=function(e){return new(e||tg)(h.Y36(Fs))},tg.\u0275cmp=h.Xpm({type:tg,selectors:[["app-transactions-summary"]],decls:1,vars:1,consts:[["class","page-container mt-24",4,"ngFor","ngForOf"],[1,"page-container","mt-24"],[1,"page-title","special"],[1,"grid"],[4,"ngFor","ngForOf"],[1,"bold"]],template:function(e,t){1&e&&h.YNc(0,aU,5,2,"div",0),2&e&&h.Q6J("ngForOf",t.transactionsGrouped.dateOrder)},dependencies:[gi,Fi],styles:[".mt-24[_ngcontent-%COMP%]{margin-top:24px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:calc(33% - 6px) calc(33% - 6px) calc(33% - 6px);width:100%;margin:auto;font-size:14px;line-height:19px;grid-gap:4px 9px}.grid[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;display:block}.page-title.special[_ngcontent-%COMP%]{margin-bottom:8px}@media only screen and (max-width: 380px){div.grid[_ngcontent-%COMP%]{grid-template-columns:calc(50% - 9px) calc(50% - 9px)}}"]}),(0,kn.gn)([nc(n=>n.transactions.transactionsGrouped)],tg.prototype,"transactionsGrouped$",void 0),(0,kn.gn)([nc(n=>n.categories.categories)],tg.prototype,"categories$",void 0);const uU=[{path:"",component:up},{path:"history",component:ef},{path:"categories",component:Rl},{path:"summary",component:tg},{path:"*",component:ef}];let cU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[X0.forRoot(uU),X0]}),n})();const lU=function(){return{exact:!0}};let dU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-header"]],decls:12,vars:2,consts:[[1,"navbar"],[1,"navbar_title"],[1,"navigation_menu"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/history","routerLinkActive","active"],["routerLink","/summary","routerLinkActive","active"],["routerLink","/categories","routerLinkActive","active"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"span",1),h._uU(2,"Costs Logger"),h.qZA(),h.TgZ(3,"div",2)(4,"span",3),h._uU(5,"Add"),h.qZA(),h.TgZ(6,"span",4),h._uU(7,"Transactions"),h.qZA(),h.TgZ(8,"span",5),h._uU(9,"Summary"),h.qZA(),h.TgZ(10,"span",6),h._uU(11,"Categories"),h.qZA()()()),2&t&&(h.xp6(4),h.Q6J("routerLinkActiveOptions",h.DdM(1,lU)))},dependencies:[Jd,Vf],styles:[".navbar[_ngcontent-%COMP%]{padding:0 48px;margin-bottom:48px;width:100%;display:flex;gap:8px;align-items:center;background-color:#fff;box-sizing:border-box}.navbar_title[_ngcontent-%COMP%]{font-size:26px;line-height:36px;font-weight:700;display:block;white-space:nowrap;width:150px;color:#59a1d1}.navbar[_ngcontent-%COMP%]   .navigation_menu[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;margin-right:158px}.navbar[_ngcontent-%COMP%]   .navigation_menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;padding:18px 24px;cursor:pointer;color:#59a1d1}.navbar[_ngcontent-%COMP%]   .navigation_menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .navigation_menu[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{background-color:#59a1d1;color:#fff}.navbar[_ngcontent-%COMP%]   .navigation_menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{opacity:.8}@media only screen and (max-width: 822px){span.navbar_title[_ngcontent-%COMP%]{display:none}div.navbar[_ngcontent-%COMP%]{padding:0!important}div.navbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:8px 16px!important}div.navigation_menu[_ngcontent-%COMP%]{margin-right:0!important}}@media only screen and (max-width: 500px){div.navigation_menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px!important;line-height:19px!important;padding:8px!important}}"]}),n})();function hU(n,e){1&n&&(h.TgZ(0,"div",1)(1,"div",2),h._UZ(2,"div")(3,"div")(4,"div")(5,"div"),h.qZA()())}class Ry{constructor(){this.isVisible$.subscribe(e=>this.isVisible=e)}ngOnInit(){}}function fU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",1)(1,"div",2),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.hide())}),h.qZA(),h.TgZ(2,"div",3)(3,"span",4),h._uU(4),h.qZA(),h.TgZ(5,"button",5),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.hide())}),h._uU(6,"Okay"),h.qZA()()()}if(2&n){const t=h.oxw();h.xp6(4),h.Oqu(t.message||"An error occured")}}Ry.\u0275fac=function(e){return new(e||Ry)},Ry.\u0275cmp=h.Xpm({type:Ry,selectors:[["app-loader"]],decls:1,vars:1,consts:[["class","loaderContainer",4,"ngIf"],[1,"loaderContainer"],[1,"lds-ring"]],template:function(e,t){1&e&&h.YNc(0,hU,6,0,"div",0),2&e&&h.Q6J("ngIf",t.isVisible)},dependencies:[Cn],styles:[".loaderContainer[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#00000080;position:fixed;z-index:100;top:0;left:0}.lds-ring[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid #59a1d1;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#59a1d1 transparent transparent transparent}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.45s}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.3s}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.15s}@keyframes lds-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),(0,kn.gn)([nc(n=>n.loader.isVisible)],Ry.prototype,"isVisible$",void 0);class ng{constructor(e){this.store=e,this.isVisible$.subscribe(t=>this.isVisible=t),this.message$.subscribe(t=>this.message=t)}hide1(){console.log("aa")}hide(){this.store.dispatch(new Dl.Hide)}ngOnInit(){}}ng.\u0275fac=function(e){return new(e||ng)(h.Y36(Fs))},ng.\u0275cmp=h.Xpm({type:ng,selectors:[["app-modal"]],decls:1,vars:1,consts:[["class","modal-background",4,"ngIf"],[1,"modal-background"],[1,"clickable-overlay",3,"click"],[1,"modal-box"],[1,"text-content"],[3,"click"]],template:function(e,t){1&e&&h.YNc(0,fU,7,1,"div",0),2&e&&h.Q6J("ngIf",t.isVisible)},dependencies:[Cn],styles:[".modal-background[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#00000080;position:fixed;top:0;left:0;z-index:998}.clickable-overlay[_ngcontent-%COMP%]{width:100%;height:100%;opacity:0;position:fixed;top:0;left:0;z-index:999}.modal-box[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;border-radius:8px;padding:8px 24px 16px;text-align:center;min-width:250px;z-index:1000}.text-content[_ngcontent-%COMP%]{font-size:16px;line-height:22px;display:block;margin-bottom:24px}"]}),(0,kn.gn)([nc(n=>n.modal.isVisible)],ng.prototype,"isVisible$",void 0),(0,kn.gn)([nc(n=>n.modal.message)],ng.prototype,"message$",void 0);let pU=(()=>{class n{constructor(){this.title="money-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,template:function(t,r){1&t&&h._UZ(0,"app-loader")(1,"app-modal")(2,"app-header")(3,"router-outlet")},dependencies:[ja,dU,Ry,ng]}),n})(),ru=class{constructor(e,t){this.db=e,this.store=t,this.sortFunc=(r,i)=>new Date(i.date).getTime()-new Date(r.date).getTime(),this.safeAdd=(r,i)=>{let u="string"==typeof r?parseFloat(r):r,l="string"==typeof i?parseFloat(i):i;return parseFloat((u+l).toFixed(2))}}generateUniqSerial(){return console.log("generateUniqSerial and showModal in utils.js"),"xxxx-xxxx-xxx-xxxx".replace(/[x]/g,e=>Math.floor(16*Math.random()).toString(16))}showModal(e){this.store.dispatch(new Dl.Show({message:e}))}addTransaction(e,t){this.store.dispatch(new oi.Show),this.db.collection("transactions").add({...t.payload,id:this.generateUniqSerial()}).catch(()=>this.showModal("There was an error with adding the transaction")).finally(()=>{this.store.dispatch(new oi.Hide)})}deleteTransaction(e,t){this.store.dispatch(new oi.Show);let r=this.db.collection("transactions",i=>i.where("id","==",t.payload.id)).get().subscribe(i=>{i.forEach(u=>{u.ref.delete().catch(()=>this.showModal("Could not delete the entry"))}),this.store.dispatch(new oi.Hide),this.store.dispatch(new Eo.Fetch),r.unsubscribe()})}fetchTransactions(e){this.store.dispatch(new oi.Show),console.log('remove "any" types');const t=e.getState();let r,i=this.db.collection("transactions").valueChanges().subscribe(u=>{r=u;let l=this.groupTransactions(r);l=this.calculateTransactionsSummary(l),e.setState({...t,transactionsRaw:r,transactionsGrouped:l}),this.store.dispatch(new oi.Hide),i.unsubscribe()})}groupTransactions(e){let t=e.sort((i,u)=>this.sortFunc(i,u)),r={transactions:[],dateOrder:[]};return t.forEach(i=>{const u=new Date(i.date);let l=u.getMonth()+"/"+u.getFullYear();r.transactions[l]?(r.transactions[l].summary[i.category]||(r.transactions[l].summary[i.category]=0),r.transactions[l].summary[i.category]=this.safeAdd(r.transactions[l].summary[i.category],i.amount*(i.isIncome?1:-1)),i.isIncome?r.transactions[l].totalIncome=this.safeAdd(r.transactions[l].totalIncome,i.amount):r.transactions[l].totalOutcome=this.safeAdd(r.transactions[l].totalOutcome,i.amount),r.transactions[l].transactions.push(i)):(r.dateOrder.push(l),r.transactions[l]={transactions:[i],month:u.getMonth(),year:u.getFullYear(),totalIncome:i.isIncome?i.amount:0,totalOutcome:i.isIncome?0:i.amount,summary:{[i.category]:i.isIncome?i.amount:-1*i.amount}})}),r}calculateTransactionsSummary(e){return Object.keys(e.transactions).forEach(r=>{e.transactions[r].summary={},e.transactions[r].transactions.forEach(i=>{e.transactions[r].summary[i?.category]||(e.transactions[r].summary[i.category]=0),e.transactions[r].summary[i.category]=this.safeAdd(i.amount*(i.isIncome?1:-1),e.transactions[r].summary[i.category])})}),e}};ru.\u0275fac=function(e){return new(e||ru)(h.LFG(My),h.LFG(Fs))},ru.\u0275prov=h.Yz7({token:ru,factory:ru.\u0275fac}),(0,kn.gn)([go(Eo.Add)],ru.prototype,"addTransaction",null),(0,kn.gn)([go(Eo.Delete)],ru.prototype,"deleteTransaction",null),(0,kn.gn)([go(Eo.Fetch)],ru.prototype,"fetchTransactions",null),ru=(0,kn.gn)([am({name:"transactions",defaults:{transactionsRaw:[],transactionsGrouped:{transactions:{},dateOrder:[]}}})],ru);class wP{}class EP{}class rd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof rd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new rd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof rd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(m=>-1===u.indexOf(m)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class gU{encodeKey(e){return IP(e)}encodeValue(e){return IP(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const yU=/%(\d[a-f0-9])/gi,_U={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function IP(n){return encodeURIComponent(n).replace(yU,(e,t)=>_U[t]??e)}function rC(n){return`${n}`}class tf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new gU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function mU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[l,m]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],v=t.get(l)||[];v.push(m),t.set(l,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(rC):[rC(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new tf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(rC(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(rC(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class vU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function bP(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function CP(n){return typeof Blob<"u"&&n instanceof Blob}function DP(n){return typeof FormData<"u"&&n instanceof FormData}class l0{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function wU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new rd),this.context||(this.context=new vU),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+l}}else this.params=new tf,this.urlWithParams=t}serializeBody(){return null===this.body?null:bP(this.body)||CP(this.body)||DP(this.body)||function EU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof tf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||DP(this.body)?null:CP(this.body)?this.body.type||null:bP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof tf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,I=e.params||this.params;const T=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((x,L)=>x.set(L,e.setHeaders[L]),v)),e.setParams&&(I=Object.keys(e.setParams).reduce((x,L)=>x.set(L,e.setParams[L]),I)),new l0(t,r,u,{params:I,headers:v,context:T,reportProgress:m,responseType:i,withCredentials:l})}}var $r=(()=>(($r=$r||{})[$r.Sent=0]="Sent",$r[$r.UploadProgress=1]="UploadProgress",$r[$r.ResponseHeader=2]="ResponseHeader",$r[$r.DownloadProgress=3]="DownloadProgress",$r[$r.Response=4]="Response",$r[$r.User=5]="User",$r))();class Mx{constructor(e,t=200,r="OK"){this.headers=e.headers||new rd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Rx extends Mx{constructor(e={}){super(e),this.type=$r.ResponseHeader}clone(e={}){return new Rx({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class iC extends Mx{constructor(e={}){super(e),this.type=$r.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new iC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class TP extends Mx{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ox(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let IU=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof l0)u=t;else{let v,I;v=i.headers instanceof rd?i.headers:new rd(i.headers),i.params&&(I=i.params instanceof tf?i.params:new tf({fromObject:i.params})),u=new l0(t,r,void 0!==i.body?i.body:null,{headers:v,context:i.context,params:I,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=Ye(u).pipe(rt(v=>this.handler.handle(v)));if(t instanceof l0||"events"===i.observe)return l;const m=l.pipe(X(v=>v instanceof iC));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,Ke.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return m.pipe((0,Ke.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return m.pipe((0,Ke.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return m.pipe((0,Ke.U)(v=>v.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new tf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Ox(i,r))}post(t,r,i={}){return this.request("POST",t,Ox(i,r))}put(t,r,i={}){return this.request("PUT",t,Ox(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(wP))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class SP{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const AP=new h.OlP("HTTP_INTERCEPTORS");let bU=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const CU=/^\)\]\}',?\n/;let xP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Nn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((U,Z)=>i.setRequestHeader(U,Z.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const U=t.detectContentTypeHeader();null!==U&&i.setRequestHeader("Content-Type",U)}if(t.responseType){const U=t.responseType.toLowerCase();i.responseType="json"!==U?U:"text"}const u=t.serializeBody();let l=null;const m=()=>{if(null!==l)return l;const U=i.statusText||"OK",Z=new rd(i.getAllResponseHeaders()),Ce=function DU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new Rx({headers:Z,status:i.status,statusText:U,url:Ce}),l},v=()=>{let{headers:U,status:Z,statusText:Ce,url:Ee}=m(),Qe=null;204!==Z&&(Qe=typeof i.response>"u"?i.responseText:i.response),0===Z&&(Z=Qe?200:0);let yt=Z>=200&&Z<300;if("json"===t.responseType&&"string"==typeof Qe){const lt=Qe;Qe=Qe.replace(CU,"");try{Qe=""!==Qe?JSON.parse(Qe):null}catch(at){Qe=lt,yt&&(yt=!1,Qe={error:at,text:Qe})}}yt?(r.next(new iC({body:Qe,headers:U,status:Z,statusText:Ce,url:Ee||void 0})),r.complete()):r.error(new TP({error:Qe,headers:U,status:Z,statusText:Ce,url:Ee||void 0}))},I=U=>{const{url:Z}=m(),Ce=new TP({error:U,status:i.status||0,statusText:i.statusText||"Unknown Error",url:Z||void 0});r.error(Ce)};let T=!1;const x=U=>{T||(r.next(m()),T=!0);let Z={type:$r.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(Z.total=U.total),"text"===t.responseType&&!!i.responseText&&(Z.partialText=i.responseText),r.next(Z)},L=U=>{let Z={type:$r.UploadProgress,loaded:U.loaded};U.lengthComputable&&(Z.total=U.total),r.next(Z)};return i.addEventListener("load",v),i.addEventListener("error",I),i.addEventListener("timeout",I),i.addEventListener("abort",I),t.reportProgress&&(i.addEventListener("progress",x),null!==u&&i.upload&&i.upload.addEventListener("progress",L)),i.send(u),r.next({type:$r.Sent}),()=>{i.removeEventListener("error",I),i.removeEventListener("abort",I),i.removeEventListener("load",v),i.removeEventListener("timeout",I),t.reportProgress&&(i.removeEventListener("progress",x),null!==u&&i.upload&&i.upload.removeEventListener("progress",L)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Zs))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Nx=new h.OlP("XSRF_COOKIE_NAME"),Px=new h.OlP("XSRF_HEADER_NAME");class MP{}let TU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ia(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce),h.LFG(h.Lbi),h.LFG(Nx))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),kx=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(MP),h.LFG(Px))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),SU=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(AP,[]);this.chain=r.reduceRight((i,u)=>new SP(i,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(EP),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),AU=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:kx,useClass:bU}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Nx,useValue:t.cookieName}:[],t.headerName?{provide:Px,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[kx,{provide:AP,useExisting:kx,multi:!0},{provide:MP,useClass:TU},{provide:Nx,useValue:"XSRF-TOKEN"},{provide:Px,useValue:"X-XSRF-TOKEN"}]}),n})(),xU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[IU,{provide:wP,useClass:SU},xP,{provide:EP,useExisting:xP}],imports:[AU.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const RP_firebaseConfig={apiKey:"AIzaSyCXqTYXh9oxtsvBkNupeCdn8pYLcsVOf0U",authDomain:"money-manager-764a8.firebaseapp.com",databaseURL:"https://money-manager-764a8-default-rtdb.europe-west1.firebasedatabase.app",projectId:"money-manager-764a8",storageBucket:"money-manager-764a8.appspot.com",messagingSenderId:"728138341088",appId:"1:728138341088:web:81dcd6b958c84784f40e85"},OP="firebasestorage.googleapis.com",NP="storageBucket";class dr extends Ot.ZR{constructor(e,t,r=0){super(Fx(e),`Firebase Storage: ${t} (${Fx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Fx(n){return"storage/"+n}function Lx(){return new dr("unknown","An unknown error occurred, please check the error payload for server response.")}function PP(){return new dr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function kP(){return new dr("canceled","User canceled the upload/download.")}function FP(){return new dr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Oy(n){return new dr("invalid-argument",n)}function LP(){return new dr("app-deleted","The Firebase app was deleted.")}function VP(n){return new dr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function d0(n,e){return new dr("invalid-format","String does not match format '"+n+"': "+e)}function h0(n){throw new dr("internal-error","Internal error: "+n)}class Ki{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ki.makeFromUrl(e,t)}catch{return new Ki(e,"")}if(""===r.path)return r;throw function BU(n){return new dr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+i+"(/(.*))?$","i");function I(at){at.path_=decodeURIComponent(at.path)}const x=t.replace(/[.]/g,"\\."),lt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(at){"/"===at.path.charAt(at.path.length-1)&&(at.path_=at.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:I},{regex:new RegExp(`^https?://${t===OP?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:I}];for(let at=0;at<lt.length;at++){const Tt=lt[at],Ft=Tt.regex.exec(e);if(Ft){let ou=Ft[Tt.indices.path];ou||(ou=""),r=new Ki(Ft[Tt.indices.bucket],ou),Tt.postModify(r);break}}if(null==r)throw function UU(n){return new dr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class zU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sC(n){return"string"==typeof n||n instanceof String}function UP(n){return Vx()&&n instanceof Blob}function Vx(){return typeof Blob<"u"&&!(0,Ot.UG)()}function Ux(n,e,t,r){if(r<e)throw Oy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Oy(`Invalid value for '${n}'. Expected ${t} or less.`)}function id(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function BP(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var nf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(nf||(nf={})),nf))();function jP(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||i||u}class QU{constructor(e,t,r,i,u,l,m,v,I,T,x,L=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=m,this.errorCallback_=v,this.timeout_=I,this.progressCallback_=T,this.connectionFactory_=x,this.retry=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,Z)=>{this.resolve_=U,this.reject_=Z,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,l=this.reject_,m=i.connection;if(i.wasSuccessCode)try{const v=this.callback_(m,m.getResponse());!function ZU(n){return void 0!==n}(v)?u():u(v)}catch(v){l(v)}else if(null!==m){const v=Lx();v.serverResponse=m.getErrorText(),l(this.errorCallback_?this.errorCallback_(m,v):v)}else l(i.canceled?this.appDelete_?LP():kP():PP())};this.canceled_?t(0,new oC(!1,null,!0)):this.backoffId_=function qU(n,e,t){let r=1,i=null,u=null,l=!1,m=0;function v(){return 2===m}let I=!1;function T(...Ee){I||(I=!0,e.apply(null,Ee))}function x(Ee){i=setTimeout(()=>{i=null,n(U,v())},Ee)}function L(){u&&clearTimeout(u)}function U(Ee,...Qe){if(I)return void L();if(Ee)return L(),void T.call(null,Ee,...Qe);if(v()||l)return L(),void T.call(null,Ee,...Qe);let lt;r<64&&(r*=2),1===m?(m=2,lt=0):lt=1e3*(r+Math.random()),x(lt)}let Z=!1;function Ce(Ee){Z||(Z=!0,L(),!I&&(null!==i?(Ee||(m=2),clearTimeout(i),x(0)):Ee||(m=1)))}return x(0),u=setTimeout(()=>{l=!0,Ce(!0)},t),Ce}((r,i)=>{if(i)return void r(!1,new oC(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const m=u.getErrorCode()===nf.NO_ERROR,v=u.getStatus();if((!m||jP(v,this.additionalRetryCodes_))&&this.retry){const T=u.getErrorCode()===nf.ABORT;return void r(!1,new oC(!1,null,T))}const I=-1!==this.successCodes_.indexOf(v);r(!0,new oC(I,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function WU(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class oC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function i2(...n){const e=function r2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Vx())return new Blob(n);throw new dr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const To={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bx{constructor(e,t){this.data=e,this.contentType=t||null}}function jx(n,e){switch(n){case To.RAW:return new Bx($P(e));case To.BASE64:case To.BASE64URL:return new Bx(HP(n,e));case To.DATA_URL:return new Bx(function u2(n){const e=new GP(n);return e.base64?HP(To.BASE64,e.rest):function a2(n){let e;try{e=decodeURIComponent(n)}catch{throw d0(To.DATA_URL,"Malformed data URL.")}return $P(e)}(e.rest)}(e),function c2(n){return new GP(n).contentType}(e))}throw Lx()}function $P(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function HP(n,e){switch(n){case To.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw d0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case To.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw d0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function o2(n){if(typeof atob>"u")throw function GU(n){return new dr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:d0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class GP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw d0(To.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function l2(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Dc{constructor(e,t){let r=0,i="";UP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(UP(this.data_)){const i=function s2(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Dc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Dc(r,!0)}}static getBlob(...e){if(Vx()){const t=e.map(r=>r instanceof Dc?r.data_:r);return new Dc(i2.apply(null,t))}{const t=e.map(l=>sC(l)?jx(To.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let m=0;m<l.length;m++)i[u++]=l[m]}),new Dc(i,!0)}}uploadData(){return this.data_}}function $x(n){let e;try{e=JSON.parse(n)}catch{return null}return function YU(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function zP(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function f2(n,e){return e}class ps{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||f2}}let aC=null;function f0(){if(aC)return aC;const n=[];n.push(new ps("bucket")),n.push(new ps("generation")),n.push(new ps("metageneration")),n.push(new ps("name","fullPath",!0));const t=new ps("name");t.xform=function e(u,l){return function p2(n){return!sC(n)||n.length<2?n:zP(n)}(l)},n.push(t);const i=new ps("size");return i.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(i),n.push(new ps("timeCreated")),n.push(new ps("updated")),n.push(new ps("md5Hash",null,!0)),n.push(new ps("cacheControl",null,!0)),n.push(new ps("contentDisposition",null,!0)),n.push(new ps("contentEncoding",null,!0)),n.push(new ps("contentLanguage",null,!0)),n.push(new ps("contentType",null,!0)),n.push(new ps("metadata","customMetadata",!0)),aC=n,aC}function qP(n,e,t){const r=$x(e);return null===r?null:function m2(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function g2(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Ki(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function Hx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const WP="prefixes";class Tc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Sc(n){if(!n)throw Lx()}function uC(n,e){return function t(r,i){const u=qP(n,i,e);return Sc(null!==u),u}}function Ny(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function LU(){return new dr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function FU(){return new dr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function kU(n){return new dr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function VU(n){return new dr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function p0(n){const e=Ny(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function PU(n){return new dr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function KP(n,e,t){const i=id(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Tc(i,"GET",uC(n,t),l);return m.errorHandler=p0(e),m}function I2(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const m=id(e.bucketOnlyServerUrl(),n.host,n._protocol),I=n.maxOperationRetryTime,T=new Tc(m,"GET",function w2(n,e){return function t(r,i){const u=function v2(n,e,t){const r=$x(t);return null===r?null:function _2(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[WP])for(const i of t[WP]){const u=i.replace(/\/$/,""),l=n._makeStorageReference(new Ki(e,u));r.prefixes.push(l)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new Ki(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return Sc(null!==u),u}}(n,e.bucket),I);return T.urlParams=u,T.errorHandler=Ny(e),T}function QP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function T2(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class cC{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Gx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Sc(!1)}return Sc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const M2={STATE_CHANGED:"state_changed"},gs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zx(n){switch(n){case"running":case"pausing":case"canceling":return gs.RUNNING;case"paused":return gs.PAUSED;case"success":return gs.SUCCESS;case"canceled":return gs.CANCELED;default:return gs.ERROR}}class R2{constructor(e,t,r){if(function KU(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Py(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class N2 extends class O2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=nf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=nf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw h0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw h0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw h0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw h0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw h0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function iu(){return new N2}class tk{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=f0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(jP(i.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=PP()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function S2(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),l=QP(e,r,i),m={name:l.fullPath},v=id(u,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},x=Hx(l,t),Z=new Tc(v,"POST",function U(Ce){let Ee;Gx(Ce);try{Ee=Ce.getResponseHeader("X-Goog-Upload-URL")}catch{Sc(!1)}return Sc(sC(Ee)),Ee},n.maxUploadRetryTime);return Z.urlParams=m,Z.headers=T,Z.body=x,Z.errorHandler=Ny(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,iu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function A2(n,e,t,r){const v=new Tc(t,"POST",function u(I){const T=Gx(I,["active","final"]);let x=null;try{x=I.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Sc(!1)}x||Sc(!1);const L=Number(x);return Sc(!isNaN(L)),new cC(L,r.size(),"final"===T)},n.maxUploadRetryTime);return v.headers={"X-Goog-Upload-Command":"query"},v.errorHandler=Ny(e),v}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,iu,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new cC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let l;try{l=function x2(n,e,t,r,i,u,l,m){const v=new cC(0,0);if(l?(v.current=l.current,v.total=l.total):(v.current=0,v.total=r.size()),r.size()!==v.total)throw function $U(){return new dr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const I=v.total-v.current;let T=I;i>0&&(T=Math.min(T,i));const x=v.current;let U="";U=0===T?"finalize":I===T?"upload, finalize":"upload";const Z={"X-Goog-Upload-Command":U,"X-Goog-Upload-Offset":`${v.current}`},Ce=r.slice(x,x+T);if(null===Ce)throw FP();const lt=new Tc(t,"POST",function Ee(at,Tt){const Ft=Gx(at,["active","final"]),hr=v.current+T,ou=r.size();let Zx;return Zx="final"===Ft?uC(e,u)(at,Tt):null,new cC(hr,ou,"final"===Ft,Zx)},e.maxUploadRetryTime);return lt.headers=Z,lt.body=Ce.uploadData(),lt.progressCallback=m||null,lt.errorHandler=Ny(n),lt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(v){return this._error=v,void this._transition("error")}const m=this._ref.storage._makeRequest(l,iu,i,u,!1);this._request=m,m.getPromise().then(v=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(v.current),v.finalized?(this._metadata=v.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=KP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,iu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function JP(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},v=function m(){let lt="";for(let at=0;at<2;at++)lt+=Math.random().toString().slice(2);return lt}();l["Content-Type"]="multipart/related; boundary="+v;const I=QP(e,r,i),T=Hx(I,t),U=Dc.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+v+"\r\nContent-Type: "+I.contentType+"\r\n\r\n",r,"\r\n--"+v+"--");if(null===U)throw FP();const Z={name:I.fullPath},Ce=id(u,n.host,n._protocol),Qe=n.maxUploadRetryTime,yt=new Tc(Ce,"POST",uC(n,t),Qe);return yt.urlParams=Z,yt.headers=l,yt.body=U.uploadData(),yt.errorHandler=Ny(e),yt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,iu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=kP(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=zx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new R2(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(zx(this._state)){case gs.SUCCESS:Py(this._resolve.bind(null,this.snapshot))();break;case gs.CANCELED:case gs.ERROR:Py(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(zx(this._state)){case gs.RUNNING:case gs.PAUSED:e.next&&Py(e.next.bind(e,this.snapshot))();break;case gs.SUCCESS:e.complete&&Py(e.complete.bind(e))();break;default:e.error&&Py(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class rg{constructor(e,t){this._service=e,this._location=t instanceof Ki?t:Ki.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new rg(e,t)}get root(){const e=new Ki(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zP(this._location.path)}get storage(){return this._service}get parent(){const e=function d2(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ki(this._location.bucket,e);return new rg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw VP(e)}}function rk(n,e,t){return qx.apply(this,arguments)}function qx(){return qx=(0,me.Z)(function*(n,e,t){const i=yield ik(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield rk(n,e,i.nextPageToken))}),qx.apply(this,arguments)}function ik(n,e){null!=e&&"number"==typeof e.maxResults&&Ux("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=I2(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,iu)}function z2(n){n._throwIfRoot("getDownloadURL");const e=function b2(n,e,t){const i=id(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Tc(i,"GET",function E2(n,e){return function t(r,i){const u=qP(n,i,e);return Sc(null!==u),function y2(n,e,t,r){const i=$x(e);if(null===i||!sC(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(I=>{const x=n.fullPath;return id("/b/"+l(n.bucket)+"/o/"+l(x),t,r)+BP({alt:"media",token:I})})[0]}(u,i,n.host,n._protocol)}}(n,t),l);return m.errorHandler=p0(e),m}(n.storage,n._location,f0());return n.storage.makeRequestWithTokens(e,iu).then(t=>{if(null===t)throw function HU(){return new dr("no-download-url","The given file does not have any download URLs.")}();return t})}function sk(n,e){const t=function h2(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ki(n._location.bucket,t);return new rg(n.storage,r)}function ok(n,e){if(n instanceof Wx){const t=n;if(null==t._bucket)throw function jU(){return new dr("no-default-bucket","No default bucket found. Did you set the '"+NP+"' property when initializing the app?")}();const r=new rg(t,t._bucket);return null!=e?ok(r,e):r}return void 0!==e?sk(n,e):n}function K2(n,e){if(e&&function W2(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Wx)return function Z2(n,e){return new rg(n,e)}(n,e);throw Oy("To use ref(service, url), the first argument must be a Storage instance.")}return ok(n,e)}function ak(n,e){const t=e?.[NP];return null==t?null:Ki.makeFromBucketSpec(t,n)}class Wx{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=OP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ki.makeFromBucketSpec(i,this._host):ak(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ki.makeFromBucketSpec(this._url,e):ak(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ux("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ux("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rg(this,e)}_makeRequest(e,t,r,i,u=!0){if(this._deleted)return new zU(LP());{const l=function n2(n,e,t,r,i,u,l=!0){const m=BP(n.urlParams),v=n.url+m,I=Object.assign({},n.headers);return function e2(n,e){e&&(n["X-Firebase-GMPID"]=e)}(I,e),function JU(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(I,t),function XU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(I,u),function t2(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(I,r),new QU(v,n.method,I,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,u);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const uk="@firebase/storage";function dk(n,e){return K2(n=(0,Ot.m9)(n),e)}function sB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Wx(t,r,i,e,Io.SDK_VERSION)}!function oB(){(0,Io._registerComponent)(new wh.wA("storage",sB,"PUBLIC").setMultipleInstances(!0)),(0,Io.registerVersion)(uk,"0.9.14",""),(0,Io.registerVersion)(uk,"0.9.14","esm2017")}();class lC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class fk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new lC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new lC(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?l=>t(new lC(l,this,this._ref)):{next:t.next?l=>t.next(new lC(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class pk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new sd(e,this._service))}get items(){return this._delegate.items.map(e=>new sd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class sd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function iB(n,e){return sk(n,e)}(this._delegate,e);return new sd(t,this.storage)}get root(){return new sd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new sd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new fk(function Q2(n,e,t){return function B2(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new tk(n,new Dc(e),t)}(n=(0,Ot.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=To.RAW,r){this._throwIfRoot("putString");const i=jx(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new fk(new tk(this._delegate,new Dc(i.data,!0),u),this)}listAll(){return function tB(n){return function $2(n){const e={prefixes:[],items:[]};return rk(n,e).then(()=>e)}(n=(0,Ot.m9)(n))}(this._delegate).then(e=>new pk(e,this.storage))}list(e){return function eB(n,e){return ik(n=(0,Ot.m9)(n),e)}(this._delegate,e||void 0).then(t=>new pk(t,this.storage))}getMetadata(){return function J2(n){return function H2(n){n._throwIfRoot("getMetadata");const e=KP(n.storage,n._location,f0());return n.storage.makeRequestWithTokens(e,iu)}(n=(0,Ot.m9)(n))}(this._delegate)}updateMetadata(e){return function X2(n,e){return function G2(n,e){n._throwIfRoot("updateMetadata");const t=function C2(n,e,t,r){const u=id(e.fullServerUrl(),n.host,n._protocol),m=Hx(t,r),I=n.maxOperationRetryTime,T=new Tc(u,"PATCH",uC(n,r),I);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=m,T.errorHandler=p0(e),T}(n.storage,n._location,e,f0());return n.storage.makeRequestWithTokens(t,iu)}(n=(0,Ot.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function nB(n){return z2(n=(0,Ot.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function rB(n){return function q2(n){n._throwIfRoot("deleteObject");const e=function D2(n,e){const r=id(e.fullServerUrl(),n.host,n._protocol),m=new Tc(r,"DELETE",function l(v,I){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=p0(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,iu)}(n=(0,Ot.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw VP(e)}}class gk{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(mk(e))throw Oy("ref() expected a child path but got a URL, use refFromURL instead.");return new sd(dk(this._delegate,e),this)}refFromURL(e){if(!mk(e))throw Oy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ki.makeFromUrl(e,this._delegate.host)}catch{throw Oy("refFromUrl() expected a valid full URL but got an invalid one.")}return new sd(dk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function hk(n,e,t,r={}){!function Y2(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Ot.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function mk(n){return/^[A-Za-z]+:\/\//.test(n)}function lB(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new gk(t,r)}function yk(n){const e=function hB(n){return new Nn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function MU(n,e=gv.z){return(0,Xn.e)((t,r)=>{let i=null,u=null,l=null;const m=()=>{if(i){i.unsubscribe(),i=null;const I=u;u=null,r.next(I)}};function v(){const I=l+n,T=e.now();if(T<I)return i=this.schedule(void 0,I-T),void r.add(i);m()}t.subscribe((0,Hn.x)(r,I=>{u=I,l=e.now(),i||(i=e.schedule(v,n),r.add(i))},()=>{m(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ke.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function dC(n){return{getDownloadURL:()=>Ye(void 0).pipe(Fn.fc,M(()=>n.getDownloadURL()),Fn.iC),getMetadata:()=>Ye(void 0).pipe(Fn.fc,M(()=>n.getMetadata()),Fn.iC),delete:()=>(0,Zt.D)(n.delete()),child:e=>dC(n.child(e)),updateMetadata:e=>(0,Zt.D)(n.updateMetadata(e)),put:(e,t)=>yk(n.put(e,t)),putString:(e,t,r)=>yk(n.putString(e,t,r)),list:e=>(0,Zt.D)(n.list(e)),listAll:()=>(0,Zt.D)(n.listAll())}}!function dB(n){const e={TaskState:gs,TaskEvent:M2,StringFormat:To,Storage:gk,Reference:sd};n.INTERNAL.registerComponent(new wh.wA("storage-compat",lB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(yv.Z);const fB=new h.OlP("angularfire2.storageBucket"),pB=new h.OlP("angularfire2.storage.maxUploadRetryTime"),gB=new h.OlP("angularfire2.storage.maxOperationRetryTime"),mB=new h.OlP("angularfire2.storage.use-emulator");let yB=(()=>{class n{constructor(t,r,i,u,l,m,v,I,T,x){const L=(0,ai.on)(t,l,r);this.storage=(0,ai.cc)(`${L.name}.storage.${i}`,"AngularFireStorage",L.name,()=>{const U=l.runOutsideAngular(()=>L.storage(i||void 0)),Z=T;return Z&&U.useEmulator(...Z),v&&U.setMaxUploadRetryTime(v),I&&U.setMaxOperationRetryTime(I),U},[v,I])}ref(t){return dC(this.storage.ref(t))}refFromURL(t){return dC(this.storage.refFromURL(t))}upload(t,r,i){return dC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ai.Dh),h.LFG(ai.xv,8),h.LFG(fB,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Fn.HU),h.LFG(pB,8),h.LFG(gB,8),h.LFG(mB,8),h.LFG(tC,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),vB=(()=>{class n{constructor(){rP.Z.registerVersion("angularfire",Fn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[yB],imports:[_B]}),n})(),su=class{constructor(e,t){this.db=e,this.store=t}generateUniqSerial(){return console.log("generateUniqSerial and showModal in utils.js"),"xxxx-xxxx-xxx-xxxx".replace(/[x]/g,e=>Math.floor(16*Math.random()).toString(16))}showModal(e){this.store.dispatch(new Dl.Show({message:e}))}addCategory(e,t){this.store.dispatch(new oi.Show),e.getState(),this.db.collection("categories").add({...t.payload,id:this.generateUniqSerial()}).catch(()=>this.showModal("There was an error with adding the category "+t.payload.name)).finally(()=>{this.store.dispatch(new oi.Hide),this.store.dispatch(new Ti.Fetch)})}removeCategory(e,t){this.store.dispatch(new oi.Show);let r=this.db.collection("categories",i=>i.where("id","==",t.payload.id)).get().subscribe(i=>{i.forEach(u=>{u.ref.delete().catch(()=>this.showModal("Problem with deleting category "+t.payload.name))}),r.unsubscribe(),this.store.dispatch(new oi.Hide),this.store.dispatch(new Ti.Fetch)})}fetchCategories(e){this.store.dispatch(new oi.Show);const t=e.getState();let r=this.db.collection("categories").valueChanges().subscribe(i=>{e.setState({...t,categories:i}),this.store.dispatch(new oi.Hide),r.unsubscribe()})}};su.\u0275fac=function(e){return new(e||su)(h.LFG(My),h.LFG(Fs))},su.\u0275prov=h.Yz7({token:su,factory:su.\u0275fac}),(0,kn.gn)([go(Ti.Add)],su.prototype,"addCategory",null),(0,kn.gn)([go(Ti.Remove)],su.prototype,"removeCategory",null),(0,kn.gn)([go(Ti.Fetch)],su.prototype,"fetchCategories",null),su=(0,kn.gn)([am({name:"categories",defaults:{categories:[]}})],su);let Ac=class{constructor(e){this.db=e}showLoader(e){const t=e.getState();e.setState({...t,isVisible:!0})}hideLoader(e){const t=e.getState();e.setState({...t,isVisible:!1})}};Ac.\u0275fac=function(e){return new(e||Ac)(h.LFG(My))},Ac.\u0275prov=h.Yz7({token:Ac,factory:Ac.\u0275fac}),(0,kn.gn)([go(oi.Show)],Ac.prototype,"showLoader",null),(0,kn.gn)([go(oi.Hide)],Ac.prototype,"hideLoader",null),Ac=(0,kn.gn)([am({name:"loader",defaults:{isVisible:!1}})],Ac);let xc=class{constructor(e){this.db=e}showModal(e,t){const r=e.getState();e.setState({...r,isVisible:!0,message:t.payload.message})}hideModal(e){const t=e.getState();e.setState({...t,isVisible:!1,message:""})}};xc.\u0275fac=function(e){return new(e||xc)(h.LFG(My))},xc.\u0275prov=h.Yz7({token:xc,factory:xc.\u0275fac}),(0,kn.gn)([go(Dl.Show)],xc.prototype,"showModal",null),(0,kn.gn)([go(Dl.Hide)],xc.prototype,"hideModal",null),xc=(0,kn.gn)([am({name:"modal",defaults:{isVisible:!1,message:""}})],xc);let wB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[pU]}),n.\u0275inj=h.cJS({imports:[Xc,cU,qi.forRoot([ru,su,Ac,xc]),cI,xU,uI,ai.hO.initializeApp(RP_firebaseConfig,"money-manager"),JV,vB]}),n})();(0,h.G48)(),ku().bootstrapModule(wB).catch(n=>console.error(n))},5867:(ut,De,P)=>{P.d(De,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=P(9681);(0,h.registerVersion)("firebase","9.14.0","app")},127:(ut,De,P)=>{P.d(De,{Z:()=>h.Z});var h=P(3942);h.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(ut,De,P)=>{P.r(De);var h=P(5861),ee=P(3942),N=P(2090),ie=P(9681),re=P(1877),he=P(655),ce=P(4859);const Ie=function Fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new re.Yd("@firebase/auth");function ot(y,...f){Xe.logLevel<=re.in.ERROR&&Xe.error(`Auth (${ie.SDK_VERSION}): ${y}`,...f)}function Ae(y,...f){throw je(y,...f)}function _e(y,...f){return je(y,...f)}function be(y,f,g){const w=Object.assign(Object.assign({},nt()),{[f]:g});return new N.LL("auth","Firebase",w).create(f,{appName:y.name})}function Be(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Ae(y,"argument-error"),be(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...f){if("string"!=typeof y){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return ge.create(y,...f)}function j(y,f,...g){if(!y)throw je(f,...g)}function pe(y){const f="INTERNAL ASSERTION FAILED: "+y;throw ot(f),new Error(f)}function q(y,f){y||pe(f)}const J=new Map;function se(y){q(y instanceof Function,"Expected a class definition");let f=J.get(y);return f?(q(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,J.set(y,f),f)}function Oe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function gt(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class on{constructor(f,g){this.shortDelay=f,this.longDelay=g,q(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function jt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gt()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(y,f){q(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Kt{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vr=new on(3e4,6e4);function kt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function ln(y,f,g,w){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,h.Z)(function*(y,f,g,w,A={}){return fi(y,A,(0,h.Z)(function*(){let O={},z={};w&&("GET"===f?z=w:O={body:JSON.stringify(w)});const le=(0,N.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),Kt.fetch()(pi(y,y.config.apiHost,g,le),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function fi(y,f,g){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(y,f,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Yt),f);try{const A=new Qr(y),O=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const z=yield O.json();if("needConfirmation"in z)throw Jr(y,"account-exists-with-different-credential",z);if(O.ok&&!("errorMessage"in z))return z;{const le=O.ok?z.errorMessage:z.error.message,[Le,Je]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Jr(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Le)throw Jr(y,"email-already-in-use",z);if("USER_DISABLED"===Le)throw Jr(y,"user-disabled",z);const wt=w[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw be(y,wt,Je);Ae(y,wt)}}catch(A){if(A instanceof N.ZR)throw A;Ae(y,"network-request-failed")}})).apply(this,arguments)}function Hr(y,f,g,w){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,h.Z)(function*(y,f,g,w,A={}){const O=yield ln(y,f,g,w,A);return"mfaPendingCredential"in O&&Ae(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function pi(y,f,g,w){const A=`${f}${g}?${w}`;return y.config.emulator?mn(y.config,A):`${y.config.apiScheme}://${A}`}class Qr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jr(y,f,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=_e(y,f,w);return A.customData._tokenResponse=g,A}function Ze(){return(Ze=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function wr(y,f){return ms.apply(this,arguments)}function ms(){return(ms=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Zn(y,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Oi(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function hn(){return(hn=(0,h.Z)(function*(y,f=!1){const g=(0,N.m9)(y),w=yield g.getIdToken(f),A=ct(w);j(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,z=O?.sign_in_provider;return{claims:A,token:w,authTime:Oi(_t(A.auth_time)),issuedAtTime:Oi(_t(A.iat)),expirationTime:Oi(_t(A.exp)),signInProvider:z||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function _t(y){return 1e3*Number(y)}function ct(y){var f;const[g,w,A]=y.split(".");if(void 0===g||void 0===w||void 0===A)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,N.tV)(w);return O?JSON.parse(O):(ot("Failed to decode base64 JWT payload"),null)}catch(O){return ot("Caught error parsing JWT payload as JSON",null===(f=O)||void 0===f?void 0:f.toString()),null}}function fr(y,f){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,h.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof N.ZR&&Gr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Gr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class xt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,h.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(g=w)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class ys{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oi(this.lastLoginAt),this.creationTime=Oi(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function en(y){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,h.Z)(function*(y){var f;const g=y.auth,w=yield y.getIdToken(),A=yield fr(y,Zn(g,{idToken:w}));j(A?.users.length,g,"internal-error");const O=A.users[0];y._notifyReloadListener(O);const z=null!==(f=O.providerUserInfo)&&void 0!==f&&f.length?tt(O.providerUserInfo):[],le=xr(y.providerData,z),wt=!!y.isAnonymous&&!(y.email&&O.passwordHash||le?.length),pt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:le,metadata:new ys(O.createdAt,O.lastLoginAt),isAnonymous:wt};Object.assign(y,pt)})).apply(this,arguments)}function Kn(){return(Kn=(0,h.Z)(function*(y){const f=(0,N.m9)(y);yield en(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function xr(y,f){return[...y.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function tt(y){return y.map(f=>{var{providerId:g}=f,w=(0,he._T)(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function et(){return(et=(0,h.Z)(function*(y,f){const g=yield fi(y,{},(0,h.Z)(function*(){const w=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:O}=y.config,z=pi(y,A,"/v1/token",`key=${O}`),le=yield y._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",Kt.fetch()(z,{method:"POST",headers:le,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){j(f.idToken,"internal-error"),j(typeof f.idToken<"u","internal-error"),j(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function rn(y){const f=ct(y);return j(f,"internal-error"),j(typeof f.exp<"u","internal-error"),j(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,h.Z)(function*(){return j(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,h.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:z}=yield function Te(y,f){return et.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(A,O,Number(z))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:A,expirationTime:O}=g,z=new bt;return w&&(j("string"==typeof w,"internal-error",{appName:f}),z.refreshToken=w),A&&(j("string"==typeof A,"internal-error",{appName:f}),z.accessToken=A),O&&(j("number"==typeof O,"internal-error",{appName:f}),z.expirationTime=O),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new bt,this.toJSON())}_performRefresh(){return pe("not implemented")}}function It(y,f){j("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class Lt{constructor(f){var{uid:g,auth:w,stsTokenManager:A}=f,O=(0,he._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new ys(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const w=yield fr(g,g.stsTokenManager.getToken(g.auth,f));return j(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function Un(y){return hn.apply(this,arguments)}(this,f)}reload(){return function tn(y){return Kn.apply(this,arguments)}(this)}_assign(f){this!==f&&(j(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Lt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,h.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield en(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield fr(f,function ra(y,f){return Ze.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,A,O,z,le,Le,Je,wt;const pt=null!==(w=g.displayName)&&void 0!==w?w:void 0,an=null!==(A=g.email)&&void 0!==A?A:void 0,ii=null!==(O=g.phoneNumber)&&void 0!==O?O:void 0,$a=null!==(z=g.photoURL)&&void 0!==z?z:void 0,Yy=null!==(le=g.tenantId)&&void 0!==le?le:void 0,gl=null!==(Le=g._redirectEventId)&&void 0!==Le?Le:void 0,Pg=null!==(Je=g.createdAt)&&void 0!==Je?Je:void 0,Wd=null!==(wt=g.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:kg,emailVerified:Qy,isAnonymous:Ku,providerData:Ha,stsTokenManager:Of}=g;j(kg&&Of,f,"internal-error");const Nf=bt.fromJSON(this.name,Of);j("string"==typeof kg,f,"internal-error"),It(pt,f.name),It(an,f.name),j("boolean"==typeof Qy,f,"internal-error"),j("boolean"==typeof Ku,f,"internal-error"),It(ii,f.name),It($a,f.name),It(Yy,f.name),It(gl,f.name),It(Pg,f.name),It(Wd,f.name);const Wo=new Lt({uid:kg,auth:f,email:an,emailVerified:Qy,displayName:pt,isAnonymous:Ku,photoURL:$a,phoneNumber:ii,tenantId:Yy,stsTokenManager:Nf,createdAt:Pg,lastLoginAt:Wd});return Ha&&Array.isArray(Ha)&&(Wo.providerData=Ha.map(Yu=>Object.assign({},Yu))),gl&&(Wo._redirectEventId=gl),Wo}static _fromIdTokenResponse(f,g,w=!1){return(0,h.Z)(function*(){const A=new bt;A.updateFromServerResponse(g);const O=new Lt({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield en(O),O})()}}const V=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,h.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,h.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,h.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function W(y,f,g){return`firebase:${y}:${f}:${g}`}class we{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:A,name:O}=this.auth;this.fullUserKey=W(this.userKey,A.apiKey,O),this.fullPersistenceKey=W("persistence",A.apiKey,O),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Lt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,h.Z)(function*(){if(!g.length)return new we(se(V),f,w);const A=(yield Promise.all(g.map(function(){var Je=(0,h.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let O=A[0]||se(V);const z=W(w,f.config.apiKey,f.name);let le=null;for(const Je of g)try{const wt=yield Je._get(z);if(wt){const pt=Lt._fromJSON(f,wt);Je!==O&&(le=pt),O=Je;break}}catch{}const Le=A.filter(Je=>Je._shouldAllowMigration);return O._shouldAllowMigration&&Le.length?(O=Le[0],le&&(yield O._set(z,le.toJSON())),yield Promise.all(g.map(function(){var Je=(0,h.Z)(function*(wt){if(wt!==O)try{yield wt._remove(z)}catch{}});return function(wt){return Je.apply(this,arguments)}}())),new we(O,f,w)):new we(O,f,w)})()}}function Q(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(dn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(He(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ve(f))return"Blackberry";if($e(f))return"Webos";if(ht(f))return"Safari";if((f.includes("chrome/")||Qt(f))&&!f.includes("edge/"))return"Chrome";if(qt(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function He(y=(0,N.z$)()){return/firefox\//i.test(y)}function ht(y=(0,N.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Qt(y=(0,N.z$)()){return/crios\//i.test(y)}function dn(y=(0,N.z$)()){return/iemobile/i.test(y)}function qt(y=(0,N.z$)()){return/android/i.test(y)}function Ve(y=(0,N.z$)()){return/blackberry/i.test(y)}function $e(y=(0,N.z$)()){return/webos/i.test(y)}function Bt(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function zs(y=(0,N.z$)()){return Bt(y)||qt(y)||$e(y)||Ve(y)||/windows phone/i.test(y)||dn(y)}function _s(y,f=[]){let g;switch(y){case"Browser":g=Q((0,N.z$)());break;case"Worker":g=`${Q((0,N.z$)())}-${y}`;break;default:g=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ie.SDK_VERSION}/${w}`}class So{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const w=O=>new Promise((z,le)=>{try{z(f(O))}catch(Le){le(Le)}});w.onAbort=g,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){var w;if(g.auth.currentUser===f)return;const A=[];try{for(const O of g.queue)yield O(f),O.onAbort&&A.push(O.onAbort)}catch(O){A.reverse();for(const z of A)try{z()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=O)||void 0===w?void 0:w.message})}})()}}class Vt{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qs(this),this.idTokenSubscription=new qs(this),this.beforeStateQueue=new So(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=se(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var A,O;if(!w._deleted&&(w.persistenceManager=yield we.create(w,f),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var w;const A=yield g.assertedPersistence.getCurrentUser();let O=A,z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const le=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Le=O?._redirectEventId,Je=yield g.tryRedirectSignIn(f);(!le||le===Le)&&Je?.user&&(O=Je.user,z=!0)}if(!O)return g.directlySetCurrentUser(null);if(!O._redirectEventId){if(z)try{yield g.beforeStateQueue.runMiddleware(O)}catch(le){O=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(le))}return O?g.reloadAndSetCurrentUserOrClear(O):g.directlySetCurrentUser(null)}return j(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===O._redirectEventId?g.directlySetCurrentUser(O):g.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){var w;try{yield en(f)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const w=f?(0,N.m9)(f):null;return w&&j(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f,g=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return f&&j(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(se(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,h.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&se(f)||g._popupRedirectResolver;j(w,g,"argument-error"),g.redirectPersistenceManager=yield we.create(g,[se(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,A){if(this._deleted)return()=>{};const O="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(z,this,"internal-error"),z.then(()=>O(this.currentUser)),"function"==typeof g?f.addObserver(g,w,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=_s(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function En(y){return(0,N.m9)(y)}class qs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(g=>this.observer=g)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function vs(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class pr{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return pe("not implemented")}_getIdTokenResponse(f){return pe("not implemented")}_linkToIdToken(f,g){return pe("not implemented")}_getReauthenticationResolver(f){return pe("not implemented")}}function $n(y,f){return ia.apply(this,arguments)}function ia(){return(ia=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:resetPassword",kt(y,f))})).apply(this,arguments)}function sn(y,f){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Rc(y,f){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",kt(y,f))})).apply(this,arguments)}function gi(){return(gi=(0,h.Z)(function*(y,f){return Hr(y,"POST","/v1/accounts:signInWithPassword",kt(y,f))})).apply(this,arguments)}function Es(y,f){return mi.apply(this,arguments)}function mi(){return(mi=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:sendOobCode",kt(y,f))})).apply(this,arguments)}function Cn(y,f){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,h.Z)(function*(y,f){return Es(y,f)})).apply(this,arguments)}function or(y,f){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,h.Z)(function*(y,f){return Es(y,f)})).apply(this,arguments)}function uu(y,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,h.Z)(function*(y,f){return Es(y,f)})).apply(this,arguments)}function Nc(y,f){return Er.apply(this,arguments)}function Er(){return(Er=(0,h.Z)(function*(y,f){return Es(y,f)})).apply(this,arguments)}function od(){return(od=(0,h.Z)(function*(y,f){return Hr(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,f))})).apply(this,arguments)}function Pc(){return(Pc=(0,h.Z)(function*(y,f){return Hr(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,f))})).apply(this,arguments)}class kc extends pr{constructor(f,g,w,A=null){super("password",w),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new kc(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new kc(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){switch(g.signInMethod){case"password":return function sa(y,f){return gi.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function rf(y,f){return od.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Ae(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return sn(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function ad(y,f){return Pc.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:Ae(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Qn(y,f){return ud.apply(this,arguments)}function ud(){return(ud=(0,h.Z)(function*(y,f){return Hr(y,"POST","/v1/accounts:signInWithIdp",kt(y,f))})).apply(this,arguments)}class Qi extends pr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Qi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Ae("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=g,O=(0,he._T)(g,["providerId","signInMethod"]);if(!w||!A)return null;const z=new Qi(w,A);return z.idToken=O.idToken||void 0,z.accessToken=O.accessToken||void 0,z.secret=O.secret,z.nonce=O.nonce,z.pendingToken=O.pendingToken||null,z}_getIdTokenResponse(f){return Qn(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Qn(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Qn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,N.xO)(g)}return f}}function sg(y,f){return cu.apply(this,arguments)}function cu(){return(cu=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:sendVerificationCode",kt(y,f))})).apply(this,arguments)}function Is(){return(Is=(0,h.Z)(function*(y,f){return Hr(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,f))})).apply(this,arguments)}function cd(){return(cd=(0,h.Z)(function*(y,f){const g=yield Hr(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,f));if(g.temporaryProof)throw Jr(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const ag={USER_NOT_FOUND:"user-not-found"};function ld(){return(ld=(0,h.Z)(function*(y,f){return Hr(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ag)})).apply(this,arguments)}class bs extends pr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new bs({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new bs({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Fc(y,f){return Is.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function og(y,f){return cd.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function sf(y,f){return ld.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:O}=f;return w||g||A||O?new bs({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:O}):null}}class lu{constructor(f){var g,w,A,O,z,le;const Le=(0,N.zd)((0,N.pd)(f)),Je=null!==(g=Le.apiKey)&&void 0!==g?g:null,wt=null!==(w=Le.oobCode)&&void 0!==w?w:null,pt=function dd(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);j(Je&&wt&&pt,"argument-error"),this.apiKey=Je,this.operation=pt,this.code=wt,this.continueUrl=null!==(O=Le.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(z=Le.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(le=Le.tenantId)&&void 0!==le?le:null}static parseLink(f){const g=function hd(y){const f=(0,N.zd)((0,N.pd)(y)).link,g=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,w=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(w?(0,N.zd)((0,N.pd)(w)).link:null)||w||g||f||y}(f);try{return new lu(g)}catch{return null}}}let ki=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return kc._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=lu.parseLink(w);return j(A,"argument-error"),kc._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ji{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Xi extends Ji{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Fi extends Xi{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return j("providerId"in g&&"signInMethod"in g,"argument-error"),Qi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return j(f.idToken||f.accessToken,"argument-error"),Qi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Fi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Fi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:O,nonce:z,providerId:le}=f;if(!w&&!A&&!g&&!O||!le)return null;try{return new Fi(le)._credential({idToken:g,accessToken:w,nonce:z,pendingToken:O})}catch{return null}}}let aa=(()=>{class y extends Xi{constructor(){super("facebook.com")}static credential(g){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),du=(()=>{class y extends Xi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return y.credential(w,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Lc=(()=>{class y extends Xi{constructor(){super("github.com")}static credential(g){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ua extends pr{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Qn(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Qn(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Qn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:O}=g;return w&&A&&O&&w===A?new ua(w,O):null}static _create(f,g){return new ua(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ei extends Ji{constructor(f){j(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ei.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ei.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=ua.fromJSON(f);return j(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return ua._create(w,g)}catch{return null}}}let qr=(()=>{class y extends Xi{constructor(){super("twitter.com")}static credential(g,w){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return y.credential(w,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ao(y,f){return fd.apply(this,arguments)}function fd(){return(fd=(0,h.Z)(function*(y,f){return Hr(y,"POST","/v1/accounts:signUp",kt(y,f))})).apply(this,arguments)}class ar{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,A=!1){return(0,h.Z)(function*(){const O=yield Lt._fromIdTokenResponse(f,w,A),z=cf(w);return new ar({user:O,providerId:z,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=cf(w);return new ar({user:f,providerId:A,_tokenResponse:w,operationType:g})})()}}function cf(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Dn(){return(Dn=(0,h.Z)(function*(y){var f;const g=En(y);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new ar({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Ao(g,{returnSecureToken:!0}),A=yield ar._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class hu extends N.ZR{constructor(f,g,w,A){var O;super(g.code,g.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,hu.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,A){return new hu(f,g,w,A)}}function df(y,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?hu._fromErrorAndOperation(y,O,f,w):O})}function ti(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function fu(){return(fu=(0,h.Z)(function*(y,f){const g=(0,N.m9)(y);yield Wt(!0,g,f);const{providerUserInfo:w}=yield wr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=ti(w||[]);return g.providerData=g.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Zs(y,f){return ts.apply(this,arguments)}function ts(){return(ts=(0,h.Z)(function*(y,f,g=!1){const w=yield fr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ar._forOperation(y,"link",w)})).apply(this,arguments)}function Wt(y,f,g){return pu.apply(this,arguments)}function pu(){return(pu=(0,h.Z)(function*(y,f,g){yield en(f);const A=!1===y?"provider-already-linked":"no-such-provider";j(ti(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function Ks(y,f){return gu.apply(this,arguments)}function gu(){return(gu=(0,h.Z)(function*(y,f,g=!1){var w;const{auth:A}=y,O="reauthenticate";try{const z=yield fr(y,df(A,O,f,y),g);j(z.idToken,A,"internal-error");const le=ct(z.idToken);j(le,A,"internal-error");const{sub:Le}=le;return j(y.uid===Le,A,"user-mismatch"),ar._forOperation(y,O,z)}catch(z){throw"auth/user-not-found"===(null===(w=z)||void 0===w?void 0:w.code)&&Ae(A,"user-mismatch"),z}})).apply(this,arguments)}function yi(y,f){return mu.apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(y,f,g=!1){const w="signIn",A=yield df(y,w,f),O=yield ar._fromIdTokenResponse(y,w,A);return g||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function In(y,f){return St.apply(this,arguments)}function St(){return(St=(0,h.Z)(function*(y,f){return yi(En(y),f)})).apply(this,arguments)}function yu(y,f){return hf.apply(this,arguments)}function hf(){return(hf=(0,h.Z)(function*(y,f){const g=(0,N.m9)(y);return yield Wt(!1,g,f.providerId),Zs(g,f)})).apply(this,arguments)}function _u(y,f){return vu.apply(this,arguments)}function vu(){return(vu=(0,h.Z)(function*(y,f){return Ks((0,N.m9)(y),f)})).apply(this,arguments)}function Vc(y,f){return ns.apply(this,arguments)}function ns(){return(ns=(0,h.Z)(function*(y,f){return Hr(y,"POST","/v1/accounts:signInWithCustomToken",kt(y,f))})).apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(y,f){const g=En(y),w=yield Vc(g,{token:f,returnSecureToken:!0}),A=yield ar._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Se{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?$t._fromServerResponse(f,g):Ae(f,"internal-error")}}class $t extends Se{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new $t(g)}}function wu(y,f,g){var w;j((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),j(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(j(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(j(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Tn(){return(Tn=(0,h.Z)(function*(y,f,g){const w=(0,N.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&wu(w,A,g),yield or(w,A)})).apply(this,arguments)}function xo(){return(xo=(0,h.Z)(function*(y,f,g){yield $n((0,N.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function la(){return(la=(0,h.Z)(function*(y,f){yield Rc((0,N.m9)(y),{oobCode:f})})).apply(this,arguments)}function da(y,f){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,h.Z)(function*(y,f){const g=(0,N.m9)(y),w=yield $n(g,{oobCode:f}),A=w.requestType;switch(j(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(w.mfaInfo,g,"internal-error");default:j(w.email,g,"internal-error")}let O=null;return w.mfaInfo&&(O=Se._fromServerResponse(En(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function pd(){return(pd=(0,h.Z)(function*(y,f){const{data:g}=yield da((0,N.m9)(y),f);return g.email})).apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(y,f,g){const w=En(y),A=yield Ao(w,{returnSecureToken:!0,email:f,password:g}),O=yield ar._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(y,f,g){const w=(0,N.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};j(g.handleCodeInApp,w,"argument-error"),g&&wu(w,A,g),yield uu(w,A)})).apply(this,arguments)}function fa(){return(fa=(0,h.Z)(function*(y,f,g){const w=(0,N.m9)(y),A=ki.credentialWithLink(f,g||Oe());return j(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),In(w,A)})).apply(this,arguments)}function cg(y,f){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:createAuthUri",kt(y,f))})).apply(this,arguments)}function pa(){return(pa=(0,h.Z)(function*(y,f){const w={identifier:f,continueUri:gt()?Oe():"http://localhost"},{signinMethods:A}=yield cg((0,N.m9)(y),w);return A||[]})).apply(this,arguments)}function ga(){return(ga=(0,h.Z)(function*(y,f){const g=(0,N.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&wu(g.auth,A,f);const{email:O}=yield Cn(g.auth,A);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function Cu(){return(Cu=(0,h.Z)(function*(y,f,g){const w=(0,N.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&wu(w.auth,O,g);const{email:z}=yield Nc(w.auth,O);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Du(y,f){return qc.apply(this,arguments)}function qc(){return(qc=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Zc(){return(Zc=(0,h.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,N.m9)(y),O={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},z=yield fr(w,Du(w.auth,O));w.displayName=z.displayName||null,w.photoURL=z.photoUrl||null;const le=w.providerData.find(({providerId:Le})=>"password"===Le);le&&(le.displayName=w.displayName,le.photoURL=w.photoURL),yield w._updateTokensIfNecessary(z)})).apply(this,arguments)}function Js(y,f,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,h.Z)(function*(y,f,g){const{auth:w}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(O.email=f),g&&(O.password=g);const z=yield fr(y,sn(w,O));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Wr{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class _n extends Wr{constructor(f,g,w,A){super(f,g,w),this.username=A}}class Kc extends Wr{constructor(f,g){super(f,"facebook.com",g)}}class Yc extends _n{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class md extends Wr{constructor(f,g){super(f,"google.com",g)}}class Qc extends _n{constructor(f,g,w){super(f,"twitter.com",g,w)}}function Su(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Jn(y){var f,g;if(!y)return null;const{providerId:w}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const z=null===(g=null===(f=ct(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new Wr(O,"anonymous"!==z&&"custom"!==z?z:null)}if(!w)return null;switch(w){case"facebook.com":return new Kc(O,A);case"github.com":return new Yc(O,A);case"google.com":return new md(O,A);case"twitter.com":return new Qc(O,A,y.screenName||null);case"custom":case"anonymous":return new Wr(O,null);default:return new Wr(O,w,A)}}(g)}class eo{constructor(f,g,w){this.type=f,this.credential=g,this.auth=w}static _fromIdtoken(f,g){return new eo("enroll",f,g)}static _fromMfaPendingCredential(f){return new eo("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return eo._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return eo._fromIdtoken(f.multiFactorSession.idToken)}return null}}class xu{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=En(f),A=g.customData._serverResponse,O=(A.mfaInfo||[]).map(le=>Se._fromServerResponse(w,le));j(A.mfaPendingCredential,w,"internal-error");const z=eo._fromMfaPendingCredential(A.mfaPendingCredential);return new xu(z,O,function(){var le=(0,h.Z)(function*(Le){const Je=yield Le._process(w,z);delete A.mfaInfo,delete A.mfaPendingCredential;const wt=Object.assign(Object.assign({},A),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(g.operationType){case"signIn":const pt=yield ar._fromIdTokenResponse(w,g.operationType,wt);return yield w._updateCurrentUser(pt.user),pt;case"reauthenticate":return j(g.user,w,"internal-error"),ar._forOperation(g.user,g.operationType,wt);default:Ae(w,"internal-error")}});return function(Le){return le.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}function Mu(y,f){return ln(y,"POST","/v2/accounts/mfaEnrollment:start",kt(y,f))}class ff{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Se._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new ff(f)}getSession(){var f=this;return(0,h.Z)(function*(){return eo._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var w=this;return(0,h.Z)(function*(){const A=f,O=yield w.getSession(),z=yield fr(w.user,A._process(w.user.auth,O,g));return yield w.user._updateTokensIfNecessary(z),w.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){var w;const A="string"==typeof f?f:f.uid,O=yield g.user.getIdToken(),z=yield fr(g.user,function wd(y,f){return ln(y,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(y,f))}(g.user.auth,{idToken:O,mfaEnrollmentId:A}));g.enrolledFactors=g.enrolledFactors.filter(({uid:le})=>le!==A),yield g.user._updateTokensIfNecessary(z);try{yield g.user.reload()}catch(le){if("auth/user-token-expired"!==(null===(w=le)||void 0===w?void 0:w.code))throw le}})()}}const Oo=new WeakMap,to="__sak";class Ou{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(to,"1"),this.storage.removeItem(to),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const ya=(()=>{class y extends Ou{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ma(){const y=(0,N.z$)();return ht(y)||Bt(y)}()&&function yn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=zs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),O=this.localCache[w];A!==O&&g(w,O,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((le,Le,Je)=>{this.notifyListeners(le,Je)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(A);if(g.newValue!==le)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const O=()=>{const le=this.storage.getItem(A);!w&&this.localCache[A]===le||this.notifyListeners(A,le)},z=this.storage.getItem(A);!function Yn(){return(0,N.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?O():setTimeout(O,10)}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const O of Array.from(A))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,O=this;return(0,h.Z)(function*(){yield A().call(O,g,w),O.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,h.Z)(function*(){const O=yield w().call(A,g);return A.localCache[g]=JSON.stringify(O),O})()}_remove(g){var w=()=>super._remove,A=this;return(0,h.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),Vi=(()=>{class y extends Ou{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let bd=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(O=>O.isListeningto(g));if(w)return w;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,h.Z)(function*(){const A=g,{eventId:O,eventType:z,data:le}=A.data,Le=w.handlersMap[z];if(!Le?.size)return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:z});const Je=Array.from(Le).map(function(){var pt=(0,h.Z)(function*(an){return an(A.origin,le)});return function(an){return pt.apply(this,arguments)}}()),wt=yield function va(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Je);A.ports[0].postMessage({status:"done",eventId:O,eventType:z,response:wt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function wa(y="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return y+g}class Jc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var A=this;return(0,h.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let z,le;return new Promise((Le,Je)=>{const wt=wa("",20);O.port1.start();const pt=setTimeout(()=>{Je(new Error("unsupported_event"))},w);le={messageChannel:O,onMessage(an){const ii=an;if(ii.data.eventId===wt)switch(ii.data.status){case"ack":clearTimeout(pt),z=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Le(ii.data.response);break;default:clearTimeout(pt),clearTimeout(z),Je(new Error("invalid_response"))}}},A.handlers.add(le),O.port1.addEventListener("message",le.onMessage),A.target.postMessage({eventType:f,eventId:wt,data:g},[O.port2])}).finally(()=>{le&&A.removeMessageHandler(le)})})()}}function On(){return window}function Nu(){return typeof On().WorkerGlobalScope<"u"&&"function"==typeof On().importScripts}function Ea(){return(Ea=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ts="firebaseLocalStorageDb",Ss="firebaseLocalStorage",Xc="fbase_key";class ro{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ia(y,f){return y.transaction([Ss],f?"readwrite":"readonly").objectStore(Ss)}function Po(){const y=indexedDB.open(Ts,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Ss,{keyPath:Xc})}catch(A){g(A)}}),y.addEventListener("success",(0,h.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Ss)?f(w):(w.close(),yield function Dd(){const y=indexedDB.deleteDatabase(Ts);return new ro(y).toPromise()}(),f(yield Po()))}))})}function is(y,f,g){return el.apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(y,f,g){const w=Ia(y,!0).put({[Xc]:f,value:g});return new ro(w).toPromise()})).apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(y,f){const g=Ia(y,!1).get(f),w=yield new ro(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function io(y,f){const g=Ia(y,!0).delete(f);return new ro(g).toPromise()}const ko=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield Po()),g.db})()}_withRetries(g){var w=this;return(0,h.Z)(function*(){let A=0;for(;;)try{const O=yield w._openDb();return yield g(O)}catch(O){if(A++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return Nu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=bd._getInstance(function ku(){return Nu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(A,O){return{keyProcessed:(yield g._poll()).includes(O.key)}});return function(A,O){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function no(){return Ea.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Jc(g.activeServiceWorker);const O=yield g.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Pu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Po();return yield is(g,to,"1"),yield io(g,to),!0}catch{}return!1})()}_withPendingWrite(g){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,h.Z)(function*(){return A._withPendingWrite((0,h.Z)(function*(){return yield A._withRetries(O=>is(O,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,h.Z)(function*(){const A=yield w._withRetries(O=>function Fu(y,f){return ba.apply(this,arguments)}(O,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(A=>io(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const w=yield g._withRetries(z=>{const le=Ia(z,!1).getAll();return new ro(le).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:z,value:le}of w)O.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(le)&&(g.notifyListeners(z,le),A.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!O.has(z)&&(g.notifyListeners(z,null),A.push(z));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const O of Array.from(A))O(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Fo(y,f){return ln(y,"POST","/v2/accounts/mfaSignIn:start",kt(y,f))}function As(){return(As=(0,h.Z)(function*(y){return(yield ln(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vo(y){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=A=>{const O=_e("internal-error");O.customData=A,g(O)},w.type="text/javascript",w.charset="UTF-8",function Lo(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function Uu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ca=1e12;class fn{constructor(f){this.auth=f,this.counter=Ca,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new lg(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||Ca;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ca))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var w;return null===(w=g._widgets.get(f||Ca))||void 0===w||w.execute(),""})()}}class lg{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;j(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ky(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const dg=Uu("rcb"),Fy=new on(3e4,6e4);class pf{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=On().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return j(function g0(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(On().grecaptcha):new Promise((w,A)=>{const O=On().setTimeout(()=>{A(_e(f,"network-request-failed"))},Fy.get());On()[dg]=()=>{On().clearTimeout(O),delete On()[dg];const le=On().grecaptcha;if(!le)return void A(_e(f,"internal-error"));const Le=le.render;le.render=(Je,wt)=>{const pt=Le(Je,wt);return this.counter++,pt},this.hostLanguage=g,w(le)},Vo(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:dg,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(O),A(_e(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=On().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nl{load(f){return(0,h.Z)(function*(){return new fn(f)})()}clearedOneInstance(){}}const Vy="recaptcha",Uy={theme:"light",type:"image"};class cr{constructor(f,g=Object.assign({},Uy),w){this.parameters=g,this.type=Vy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(w),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;j(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nl:new pf,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(O=>{const z=le=>{!le||(f.tokenChangeListeners.delete(z),O(le))};f.tokenChangeListeners.add(z),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=On()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){j(gt()&&!Nu(),f.auth,"internal-error"),yield function Zt(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Zr(y){return As.apply(this,arguments)}(f.auth);j(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vi{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=bs._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Ir(){return(Ir=(0,h.Z)(function*(y,f,g){const w=En(y),A=yield os(w,f,(0,N.m9)(g));return new vi(A,O=>In(w,O))})).apply(this,arguments)}function wi(){return(wi=(0,h.Z)(function*(y,f,g){const w=(0,N.m9)(y);yield Wt(!1,w,"phone");const A=yield os(w.auth,f,(0,N.m9)(g));return new vi(A,O=>yu(w,O))})).apply(this,arguments)}function Nn(){return(Nn=(0,h.Z)(function*(y,f,g){const w=(0,N.m9)(y),A=yield os(w.auth,f,(0,N.m9)(g));return new vi(A,O=>_u(w,O))})).apply(this,arguments)}function os(y,f,g){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,h.Z)(function*(y,f,g){var w;const A=yield g.verify();try{let O;if(j("string"==typeof A,y,"argument-error"),j(g.type===Vy,y,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const z=O.session;if("phoneNumber"in O)return j("enroll"===z.type,y,"internal-error"),(yield Mu(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{j("signin"===z.type,y,"internal-error");const le=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return j(le,y,"missing-multi-factor-info"),(yield Fo(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield sg(y,{phoneNumber:O.phoneNumber,recaptchaToken:A});return z}}finally{g._reset()}})).apply(this,arguments)}function Ta(){return(Ta=(0,h.Z)(function*(y,f){yield Zs((0,N.m9)(y),f)})).apply(this,arguments)}let oo=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=En(g)}verifyPhoneNumber(g,w){return os(this.auth,g,(0,N.m9)(w))}static credential(g,w){return bs._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?bs._fromTokenResponse(w,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function xs(y,f){return f?se(f):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ui extends pr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Qn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Qn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Qn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Ke(y){return yi(y.auth,new Ui(y),y.bypassAuthState)}function Sa(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),Ks(g,new Ui(y),y.bypassAuthState)}function Ms(y){return Td.apply(this,arguments)}function Td(){return(Td=(0,h.Z)(function*(y){const{auth:f,user:g}=y;return j(g,f,"internal-error"),Zs(g,new Ui(y),y.bypassAuthState)})).apply(this,arguments)}class rl{constructor(f,g,w,A,O=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:O,tenantId:z,error:le,type:Le}=f;if(le)return void g.reject(le);const Je={auth:g.auth,requestUri:w,sessionId:A,tenantId:z||void 0,postBody:O||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Le)(Je))}catch(wt){g.reject(wt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Ke;case"linkViaPopup":case"linkViaRedirect":return Ms;case"reauthViaPopup":case"reauthViaRedirect":return Sa;default:Ae(this.auth,"internal-error")}}resolve(f){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hn=new on(2e3,1e4);function ju(){return(ju=(0,h.Z)(function*(y,f,g){const w=En(y);Be(y,f,Ji);const A=xs(w,g);return new Or(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function Aa(){return(Aa=(0,h.Z)(function*(y,f,g){const w=(0,N.m9)(y);Be(w.auth,f,Ji);const A=xs(w.auth,g);return new Or(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function Ma(){return(Ma=(0,h.Z)(function*(y,f,g){const w=(0,N.m9)(y);Be(w.auth,f,Ji);const A=xs(w.auth,g);return new Or(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let Or=(()=>{class y extends rl{constructor(g,w,A,O,z){super(g,w,O,z),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const w=yield g.execute();return j(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,h.Z)(function*(){q(1===g.filter.length,"Popup operations only handle one event");const w=wa();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(_e(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Hn.get())};g()}}return y.currentPopupAction=null,y})();const gr=new Map;class il extends rl{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let w=gr.get(g.auth._key());if(!w){try{const O=(yield function Ra(y,f){return Ei.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(O)}catch(A){w=()=>Promise.reject(A)}gr.set(g.auth._key(),w)}return g.bypassAuthState||gr.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Ei(){return(Ei=(0,h.Z)(function*(y,f){const g=M(f),w=D(y);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(g));return yield w._remove(g),A})).apply(this,arguments)}function Bi(y,f){return $u.apply(this,arguments)}function $u(){return($u=(0,h.Z)(function*(y,f){return D(y)._set(M(f),"true")})).apply(this,arguments)}function C(y,f){gr.set(y._key(),f)}function D(y){return se(y._redirectPersistence)}function M(y){return W("pendingRedirect",y.config.apiKey,y.name)}function X(){return(X=(0,h.Z)(function*(y,f,g){const w=En(y);Be(y,f,Ji);const A=xs(w,g);return yield Bi(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function mt(){return(mt=(0,h.Z)(function*(y,f,g){const w=(0,N.m9)(y);Be(w.auth,f,Ji);const A=xs(w.auth,g);yield Bi(A,w.auth);const O=yield ji(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function rt(){return(rt=(0,h.Z)(function*(y,f,g){const w=(0,N.m9)(y);Be(w.auth,f,Ji);const A=xs(w.auth,g);yield Wt(!1,w,f.providerId),yield Bi(A,w.auth);const O=yield ji(w);return A._openRedirect(w.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function pn(){return(pn=(0,h.Z)(function*(y,f){return yield En(y)._initializationPromise,Ii(y,f,!1)})).apply(this,arguments)}function Ii(y,f){return bi.apply(this,arguments)}function bi(){return(bi=(0,h.Z)(function*(y,f,g=!1){const w=En(y),A=xs(w,f),z=yield new il(w,A,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield w._persistUserIfCurrent(z.user),yield w._setRedirectUser(null,f)),z})).apply(this,arguments)}function ji(y){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,h.Z)(function*(y){const f=wa(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class ao{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Ci(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mt(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!Mt(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(_e(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($i(f))}saveEventToCache(f){this.cachedEventUids.add($i(f)),this.lastProcessedEventTime=Date.now()}}function $i(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Mt({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function Hu(y){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,h.Z)(function*(y,f={}){return ln(y,"GET","/v1/projects",f)})).apply(this,arguments)}const m0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hg=/^https?/;function yf(){return(yf=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Hu(y);for(const g of f)try{if(fg(g))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function fg(y){const f=Oe(),{protocol:g,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===w}if(!hg.test(g))return!1;if(m0.test(y))return w===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const pg=new on(3e4,6e4);function By(){const y=On().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Hi=null;function _f(y){return Hi=Hi||function er(y){return new Promise((f,g)=>{var w,A,O;function z(){By(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{By(),g(_e(y,"network-request-failed"))},timeout:pg.get()})}if(null!==(A=null===(w=On().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(O=On().gapi)||void 0===O||!O.load){const le=Uu("iframefcb");return On()[le]=()=>{gapi.load?z():g(_e(y,"network-request-failed"))},Vo(`https://apis.google.com/js/api.js?onload=${le}`).catch(Le=>g(Le))}z()}}).catch(f=>{throw Hi=null,f})}(y),Hi}const gg=new on(5e3,15e3),jy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mg(y){const f=y.config;j(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?mn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:ie.SDK_VERSION},A=wf.get(y.config.apiHost);A&&(w.eid=A);const O=y._getFrameworks();return O.length&&(w.fw=O.join(",")),`${g}?${(0,N.xO)(w).slice(1)}`}function Oa(){return Oa=(0,h.Z)(function*(y){const f=yield _f(y),g=On().gapi;return j(g,y,"internal-error"),f.open({where:document.body,url:mg(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jy,dontclear:!0},w=>new Promise(function(){var A=(0,h.Z)(function*(O,z){yield w.restyle({setHideOnLeave:!1});const le=_e(y,"network-request-failed"),Le=On().setTimeout(()=>{z(le)},gg.get());function Je(){On().clearTimeout(Le),O(w)}w.ping(Je).then(Je,()=>{z(le)})});return function(O,z){return A.apply(this,arguments)}}()))}),Oa.apply(this,arguments)}const Sd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sl{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Md(y,f,g,w,A,O){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:ie.SDK_VERSION,eventId:A};if(f instanceof Ji){f.setDefaultLanguage(y.languageCode),z.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Je]of Object.entries(O||{}))z[Le]=Je}if(f instanceof Xi){const Le=f.getScopes().filter(Je=>""!==Je);Le.length>0&&(z.scopes=Le.join(","))}y.tenantId&&(z.tid=y.tenantId);const le=z;for(const Le of Object.keys(le))void 0===le[Le]&&delete le[Le];return`${function Rd({config:y}){return y.emulator?mn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(le).slice(1)}`}const Pa="webStorageSupport";class Gi extends class $y{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Gi(f)}_finalizeEnroll(f,g,w){return function Ru(y,f){return ln(y,"POST","/v2/accounts/mfaEnrollment:finalize",kt(y,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Vu(y,f){return ln(y,"POST","/v2/accounts/mfaSignIn:finalize",kt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Go=(()=>{class y{constructor(){}static assertion(g){return Gi._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var If="@firebase/auth",wg="0.20.11";class _0{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var A;f((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ka(){return window}function Fa(){return(Fa=(0,h.Z)(function*(y,f,g){var w;const{BuildInfo:A}=ka();q(f.sessionId,"AuthEvent did not contain a session ID");const O=yield La(f.sessionId),z={};return Bt()?z.ibi=A.packageName:qt()?z.apn=A.packageName:Ae(y,"operation-not-supported-in-this-environment"),A.displayName&&(z.appDisplayName=A.displayName),z.sessionId=O,Md(y,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,z)})).apply(this,arguments)}function Gu(){return(Gu=(0,h.Z)(function*(y){const{BuildInfo:f}=ka(),g={};Bt()?g.iosBundleId=f.packageName:qt()?g.androidPackageName=f.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield Hu(y,g)})).apply(this,arguments)}function bg(){return(bg=(0,h.Z)(function*(y,f,g){const{cordova:w}=ka();let A=()=>{};try{yield new Promise((O,z)=>{let le=null;function Le(){var pt;O();const an=null===(pt=w.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof an&&an(),"function"==typeof g?.close&&g.close()}function Je(){le||(le=window.setTimeout(()=>{z(_e(y,"redirect-cancelled-by-user"))},2e3))}function wt(){"visible"===document?.visibilityState&&Je()}f.addPassiveListener(Le),document.addEventListener("resume",Je,!1),qt()&&document.addEventListener("visibilitychange",wt,!1),A=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",wt,!1),le&&window.clearTimeout(le)}})}finally{A()}})).apply(this,arguments)}function La(y){return lo.apply(this,arguments)}function lo(){return(lo=(0,h.Z)(function*(y){const f=ul(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ul(y){if(q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}(0,N.Pz)("authIdTokenMaxAge"),function w0(y){(0,ie._registerComponent)(new ce.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:O,authDomain:z}=w.options;return((le,Le)=>{j(O&&!O.includes(":"),"invalid-api-key",{appName:le.name}),j(!z?.includes(":"),"argument-error",{appName:le.name});const Je={apiKey:O,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_s(y)},wt=new Vt(le,Le,Je);return function Pe(y,f){const g=f?.persistence||[],w=(Array.isArray(g)?g:[g]).map(se);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,f?.popupRedirectResolver)}(wt,g),wt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ce.wA("auth-internal",f=>{const g=En(f.getProvider("auth").getImmediate());return new _0(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(If,wg,function v0(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ie.registerVersion)(If,wg,"esm2017")}("Browser");class Cf extends ao{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function Dg(y){return Df.apply(this,arguments)}function Df(){return(Df=(0,h.Z)(function*(y){const f=yield cl()._get(ho(y));return f&&(yield cl()._remove(ho(y))),f})).apply(this,arguments)}function Od(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function cl(){return se(ya)}function ho(y){return W("authEvent",y.config.apiKey,y.name)}function Nd(y){if(!y?.includes("?"))return{};const[f,...g]=y.split("?");return(0,N.zd)(g.join("?"))}function kd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Ld(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function qu(y=(0,N.z$)()){return!("file:"!==Ld()&&"ionic:"!==Ld()&&"capacitor:"!==Ld()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mg(){try{const y=self.localStorage,f=wa();if(y)return y.setItem(f,"1"),y.removeItem(f),!function xg(y=(0,N.z$)()){return function Af(){return(0,N.w1)()&&11===document?.documentMode}()||function Ag(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch{return Vd()&&(0,N.hl)()}return!1}function Vd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ud(){return(function C0(){return"http:"===Ld()||"https:"===Ld()}()||(0,N.ru)()||qu())&&!function Sf(){return(0,N.b$)()||(0,N.UG)()}()&&Mg()&&!Vd()}function ll(){return qu()&&typeof document<"u"}function Bd(){return(Bd=(0,h.Z)(function*(){return!!ll()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Nr={LOCAL:"local",NONE:"none",SESSION:"session"},ri=j,Di="persistence";function Wu(y){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,h.Z)(function*(y){yield y._initializationPromise;const f=hl(),g=W(Di,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function hl(){var y;try{return(null===(y=function dl(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const jd=j;class br{constructor(){this.browserResolver=se(class vg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vi,this._completeRedirectFn=Ii,this._overrideRedirectResult=C}_openPopup(f,g,w,A){var O=this;return(0,h.Z)(function*(){var z;q(null===(z=O.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const le=Md(f,g,w,Oe(),A);return function co(y,f,g,w=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),z=Math.max((window.screen.availWidth-w)/2,0).toString();let le="";const Le=Object.assign(Object.assign({},Sd),{width:w.toString(),height:A.toString(),top:O,left:z}),Je=(0,N.z$)().toLowerCase();g&&(le=Qt(Je)?"_blank":g),He(Je)&&(f=f||"http://localhost",Le.scrollbars="yes");const wt=Object.entries(Le).reduce((an,[ii,$a])=>`${an}${ii}=${$a},`,"");if(function zr(y=(0,N.z$)()){var f;return Bt(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Je)&&"_self"!==le)return function _g(y,f){const g=document.createElement("a");g.href=y,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",le),new sl(null);const pt=window.open(f||"",le,wt);j(pt,y,"popup-blocked");try{pt.focus()}catch{}return new sl(pt)}(f,le,wa())})()}_openRedirect(f,g,w,A){var O=this;return(0,h.Z)(function*(){return yield O._originValidation(f),function _i(y){On().location.href=y}(Md(f,g,w,Oe(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:O}=this.eventManagers[g];return A?Promise.resolve(A):(q(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const w=yield function yg(y){return Oa.apply(this,arguments)}(f),A=new ao(f);return w.register("authEvent",O=>(j(O?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Pa,{type:Pa},A=>{var O;const z=null===(O=A?.[0])||void 0===O?void 0:O[Pa];void 0!==z&&g(!!z),Ae(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Os(y){return yf.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return zs()||ht()||Bt()}}),this.cordovaResolver=se(class Pd{constructor(){this._redirectPersistence=Vi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ii,this._overrideRedirectResult=C}_initialize(f){var g=this;return(0,h.Z)(function*(){const w=f._key();let A=g.eventManagers.get(w);return A||(A=new Cf(f),g.eventManagers.set(w,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){Ae(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,A){var O=this;return(0,h.Z)(function*(){!function b0(y){var f,g,w,A,O,z,le,Le,Je,wt;const pt=ka();j("function"==typeof(null===(f=pt?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(g=pt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(O=null===(A=null===(w=pt?.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Le=null===(le=null===(z=pt?.cordova)||void 0===z?void 0:z.plugins)||void 0===le?void 0:le.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(wt=null===(Je=pt?.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===wt?void 0:wt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield O._initialize(f);yield z.initialized(),z.resetRedirect(),function Xn(){gr.clear()}(),yield O._originValidation(f);const le=function Cg(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Od(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(f,w,A);yield function zu(y,f){return cl()._set(ho(y),f)}(f,le);const Le=yield function zi(y,f,g){return Fa.apply(this,arguments)}(f,le,g),Je=yield function Gy(y){const{cordova:f}=ka();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let A=null;w?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function sr(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Le);return function I0(y,f,g){return bg.apply(this,arguments)}(f,z,Je)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function zo(y){return Gu.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:A,BuildInfo:O}=ka(),z=setTimeout((0,h.Z)(function*(){yield Dg(f),g.onEvent(kd())}),500),le=function(){var wt=(0,h.Z)(function*(pt){clearTimeout(z);const an=yield Dg(f);let ii=null;an&&pt?.url&&(ii=function Tf(y,f){var g,w;const A=function Pn(y){const f=Nd(y),g=f.link?decodeURIComponent(f.link):void 0,w=Nd(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Nd(A).link||A||w||g||y}(f);if(A.includes("/__/auth/callback")){const O=Nd(A),z=O.firebaseError?function qy(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,le=null===(w=null===(g=z?.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Le=le?_e(le):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(an,pt.url)),g.onEvent(ii||kd())});return function(an){return wt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,le);const Le=A,Je=`${O.packageName.toLowerCase()}://`;ka().handleOpenURL=function(){var wt=(0,h.Z)(function*(pt){if(pt.toLowerCase().startsWith(Je)&&le({url:pt}),"function"==typeof Le)try{Le(pt)}catch(an){console.error(an)}});return function(pt){return wt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Vi,this._completeRedirectFn=Ii,this._overrideRedirectResult=C}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,A){var O=this;return(0,h.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(f,g,w,A)})()}_openRedirect(f,g,w,A){var O=this;return(0,h.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(f,g,w,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return ll()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return jd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function D0(){return Bd.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function $d(y){return y.unwrap()}function Og(y){return pl(y)}function pl(y){const{_tokenResponse:f}=y instanceof N.ZR?y.customData:y;if(!f)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return oo.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=du;break;case"facebook.com":w=aa;break;case"github.com":w=Lc;break;case"twitter.com":w=qr;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:z,pendingToken:le,nonce:Le}=f;return O||z||A||le?le?g.startsWith("saml.")?ua._create(g,le):Qi._fromParams({providerId:g,signInMethod:g,pendingToken:le,idToken:A,accessToken:O}):new Fi(g).credential({idToken:A,accessToken:O,rawNonce:Le}):null}return y instanceof N.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function lr(y,f){return f.catch(g=>{throw g instanceof N.ZR&&function xf(y,f){var g,w;const A=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=f)||void 0===w?void 0:w.code))f.resolver=new Zy(y,function An(y,f){var g;const w=(0,N.m9)(y),A=f;return j(f.customData.operationType,w,"argument-error"),j(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),xu._fromError(w,A)}(y,f));else if(A){const O=pl(f),z=f;O&&(z.credential=O,z.tenantId=A.tenantId||void 0,z.email=A.email||void 0,z.phoneNumber=A.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Og(g),additionalUserInfo:Su(g),user:as.getOrCreate(A)}})}function Ba(y,f){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,h.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>lr(y,g.confirm(w))}})).apply(this,arguments)}class Zy{constructor(f,g){this.resolver=g,this.auth=function fl(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return lr($d(this.auth),this.resolver.resolveSignIn(f))}}class as{constructor(f){this._delegate=f,this.multiFactor=function No(y){const f=(0,N.m9)(y);return Oo.has(f)||Oo.set(f,ff._fromUser(f)),Oo.get(f)}(f)}static getOrCreate(f){return as.USER_MAP.has(f)||as.USER_MAP.set(f,new as(f)),as.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return lr(g.auth,yu(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,h.Z)(function*(){return Ba(w.auth,function vn(y,f,g){return wi.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return lr(g.auth,function xa(y,f,g){return Ma.apply(this,arguments)}(g._delegate,f,br))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Wu(En(g.auth)),function Nt(y,f,g){return function Dt(y,f,g){return rt.apply(this,arguments)}(y,f,g)}(g._delegate,f,br)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return lr(g.auth,_u(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Ba(this.auth,function Da(y,f,g){return Nn.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return lr(this.auth,function Bo(y,f,g){return Aa.apply(this,arguments)}(this._delegate,f,br))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Wu(En(g.auth)),function ye(y,f,g){return function Ue(y,f,g){return mt.apply(this,arguments)}(y,f,g)}(g._delegate,f,br)})()}sendEmailVerification(f){return function Gc(y,f){return ga.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function Rr(y,f){return fu.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function gd(y,f){return Js((0,N.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Qs(y,f){return Js((0,N.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function gf(y,f){return Ta.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Wc(y,f){return Zc.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function zc(y,f,g){return Cu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}as.USER_MAP=new WeakMap;const qo=j;let Rf=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;qo(A,"invalid-api-key",{appName:g.name}),qo(A,"invalid-api-key",{appName:g.name});const O=typeof window<"u"?br:void 0;this._delegate=w.initialize({options:{persistence:Ng(A,g.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Ie),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?as.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function au(y,f,g){const w=En(y);j(w._canInitEmulator,w,"emulator-config-failed"),j(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!g?.disableWarnings,O=Pi(f),{host:z,port:le}=function jn(y){const f=Pi(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const O=A[1];return{host:O,port:vs(w.substr(O.length+1))}}{const[O,z]=w.split(":");return{host:O,port:vs(z)}}}(f);w.config.emulator={url:`${O}//${z}${null===le?"":`:${le}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:z,port:le,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function ws(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function ni(y,f){return la.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return da(this._delegate,g)}confirmPasswordReset(g,w){return function Iu(y,f,g){return xo.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var A=this;return(0,h.Z)(function*(){return lr(A._delegate,function ha(y,f,g){return Sn.apply(this,arguments)}(A._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function bu(y,f){return pa.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function rs(y,f){return"EMAIL_SIGNIN"===lu.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){qo(Ud(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function Ht(y,f){return pn.apply(this,arguments)}(g._delegate,br);return w?lr(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Va(y,f){En(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,A){const{next:O,error:z,complete:le}=Hd(g,w,A);return this._delegate.onAuthStateChanged(O,z,le)}onIdTokenChanged(g,w,A){const{next:O,error:z,complete:le}=Hd(g,w,A);return this._delegate.onIdTokenChanged(O,z,le)}sendSignInLinkToEmail(g,w){return function $c(y,f,g){return Ys.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Eu(y,f,g){return Tn.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,h.Z)(function*(){let A;switch(function Rg(y,f){ri(Object.values(Nr).includes(f),y,"invalid-persistence-type"),(0,N.b$)()?ri(f!==Nr.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?ri(f===Nr.NONE,y,"unsupported-persistence-type"):Vd()?ri(f===Nr.NONE||f===Nr.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):ri(f===Nr.NONE||Mg(),y,"unsupported-persistence-type")}(w._delegate,g),g){case Nr.SESSION:A=Vi;break;case Nr.LOCAL:A=(yield se(ko)._isAvailable())?ko:ya;break;case Nr.NONE:A=V;break;default:return Ae("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return lr(this._delegate,function lf(y){return Dn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return lr(this._delegate,In(this._delegate,g))}signInWithCustomToken(g){return lr(this._delegate,function Uc(y,f){return ca.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return lr(this._delegate,function Li(y,f,g){return In((0,N.m9)(y),ki.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return lr(this._delegate,function ug(y,f,g){return fa.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Ba(this._delegate,function Ye(y,f,g){return Ir.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,h.Z)(function*(){return qo(Ud(),w._delegate,"operation-not-supported-in-this-environment"),lr(w._delegate,function mf(y,f,g){return ju.apply(this,arguments)}(w._delegate,g,br))})()}signInWithRedirect(g){var w=this;return(0,h.Z)(function*(){return qo(Ud(),w._delegate,"operation-not-supported-in-this-environment"),yield Wu(w._delegate),function F(y,f,g){return function K(y,f,g){return X.apply(this,arguments)}(y,f,g)}(w._delegate,g,br)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function jc(y,f){return pd.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Nr,y})();function Hd(y,f,g){let w=y;"function"!=typeof y&&({next:w,error:f,complete:g}=y);const A=w;return{next:z=>A(z&&as.getOrCreate(z)),error:f,complete:g}}function Ng(y,f){const g=function Ua(y,f){const g=hl();if(!g)return[];const w=W(Di,y,f);switch(g.getItem(w)){case Nr.NONE:return[V];case Nr.LOCAL:return[ko,Vi];case Nr.SESSION:return[Vi];default:return[]}}(y,f);if(typeof self<"u"&&!g.includes(ko)&&g.push(ko),typeof window<"u")for(const w of[ya,Vi])g.includes(w)||g.push(w);return g.includes(V)||g.push(V),g}class Gd{constructor(){this.providerId="phone",this._delegate=new oo($d(ee.Z.auth()))}static credential(f,g){return oo.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Gd.PHONE_SIGN_IN_METHOD=oo.PHONE_SIGN_IN_METHOD,Gd.PROVIDER_ID=oo.PROVIDER_ID;const zd=j;class qd{constructor(f,g,w=ee.Z.app()){var A;zd(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new cr(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ky(y){y.INTERNAL.registerComponent(new ce.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new Rf(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ki,FacebookAuthProvider:aa,GithubAuthProvider:Lc,GoogleAuthProvider:du,OAuthProvider:Fi,SAMLAuthProvider:ei,PhoneAuthProvider:Gd,PhoneMultiFactorGenerator:Go,RecaptchaVerifier:qd,TwitterAuthProvider:qr,Auth:Rf,AuthCredential:pr,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(ee.Z)},9751:(ut,De,P)=>{P.d(De,{y:()=>oe});var h=P(930),ee=P(727),N=P(8822),ie=P(9635),re=P(2416),he=P(576),ce=P(2806);let oe=(()=>{class Y{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Ie=new Y;return Ie.source=this,Ie.operator=Re,Ie}subscribe(Re,Ie,nt){const ge=function $(Y){return Y&&Y instanceof h.Lv||function B(Y){return Y&&(0,he.m)(Y.next)&&(0,he.m)(Y.error)&&(0,he.m)(Y.complete)}(Y)&&(0,ee.Nn)(Y)}(Re)?Re:new h.Hp(Re,Ie,nt);return(0,ce.x)(()=>{const{operator:fe,source:Xe}=this;ge.add(fe?fe.call(ge,Xe):Xe?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Ie){Re.error(Ie)}}forEach(Re,Ie){return new(Ie=ae(Ie))((nt,ge)=>{const fe=new h.Hp({next:Xe=>{try{Re(Xe)}catch(ot){ge(ot),fe.unsubscribe()}},error:ge,complete:nt});this.subscribe(fe)})}_subscribe(Re){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Re)}[N.L](){return this}pipe(...Re){return(0,ie.U)(Re)(this)}toPromise(Re){return new(Re=ae(Re))((Ie,nt)=>{let ge;this.subscribe(fe=>ge=fe,fe=>nt(fe),()=>Ie(ge))})}}return Y.create=Fe=>new Y(Fe),Y})();function ae(Y){var Fe;return null!==(Fe=Y??re.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(ut,De,P)=>{P.d(De,{x:()=>ce});var h=P(9751),ee=P(727);const ie=(0,P(3888).d)(ae=>function(){ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=P(8737),he=P(2806);let ce=(()=>{class ae extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Y=new oe(this,this);return Y.operator=$,Y}_throwIfClosed(){if(this.closed)throw new ie}next($){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next($)}})}error($){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Y}=this;for(;Y.length;)Y.shift().error($)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Y,isStopped:Fe,observers:Re}=this;return Y||Fe?ee.Lc:(this.currentObservers=null,Re.push($),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(Re,$)}))}_checkFinalizedStatuses($){const{hasError:Y,thrownError:Fe,isStopped:Re}=this;Y?$.error(Fe):Re&&$.complete()}asObservable(){const $=new h.y;return $.source=this,$}}return ae.create=(B,$)=>new oe(B,$),ae})();class oe extends ce{constructor(B,$){super(),this.destination=B,this.source=$}next(B){var $,Y;null===(Y=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Y||Y.call($,B)}error(B){var $,Y;null===(Y=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Y||Y.call($,B)}complete(){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===$||$.call(B)}_subscribe(B){var $,Y;return null!==(Y=null===($=this.source)||void 0===$?void 0:$.subscribe(B))&&void 0!==Y?Y:ee.Lc}}},930:(ut,De,P)=>{P.d(De,{Hp:()=>nt,Lv:()=>Y});var h=P(576),ee=P(727),N=P(2416),ie=P(7849),re=P(5032);const he=ae("C",void 0,void 0);function ae(Ae,_e,be){return{kind:Ae,value:_e,error:be}}var B=P(3410),$=P(2806);class Y extends ee.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,ee.Nn)(_e)&&_e.add(this)):this.destination=ot}static create(_e,be,Be){return new nt(_e,be,Be)}next(_e){this.isStopped?Xe(function oe(Ae){return ae("N",Ae,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Xe(function ce(Ae){return ae("E",void 0,Ae)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Xe(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function Re(Ae,_e){return Fe.call(Ae,_e)}class Ie{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:be}=this;if(be.next)try{be.next(_e)}catch(Be){ge(Be)}}error(_e){const{partialObserver:be}=this;if(be.error)try{be.error(_e)}catch(Be){ge(Be)}else ge(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(be){ge(be)}}}class nt extends Y{constructor(_e,be,Be){let je;if(super(),(0,h.m)(_e)||!_e)je={next:_e??void 0,error:be??void 0,complete:Be??void 0};else{let j;this&&N.v.useDeprecatedNextContext?(j=Object.create(_e),j.unsubscribe=()=>this.unsubscribe(),je={next:_e.next&&Re(_e.next,j),error:_e.error&&Re(_e.error,j),complete:_e.complete&&Re(_e.complete,j)}):je=_e}this.destination=new Ie(je)}}function ge(Ae){N.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Ae):(0,ie.h)(Ae)}function Xe(Ae,_e){const{onStoppedNotification:be}=N.v;be&&B.z.setTimeout(()=>be(Ae,_e))}const ot={closed:!0,next:re.Z,error:function fe(Ae){throw Ae},complete:re.Z}},727:(ut,De,P)=>{P.d(De,{Lc:()=>he,w0:()=>re,Nn:()=>ce});var h=P(576);const N=(0,P(3888).d)(ae=>function($){ae(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Y,Fe)=>`${Fe+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ie=P(8737);class re{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Re of $)Re.remove(this);else $.remove(this);const{initialTeardown:Y}=this;if((0,h.m)(Y))try{Y()}catch(Re){B=Re instanceof N?Re.errors:[Re]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const Re of Fe)try{oe(Re)}catch(Ie){B=B??[],Ie instanceof N?B=[...B,...Ie.errors]:B.push(Ie)}}if(B)throw new N(B)}}add(B){var $;if(B&&B!==this)if(this.closed)oe(B);else{if(B instanceof re){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(B)}}_hasParent(B){const{_parentage:$}=this;return $===B||Array.isArray($)&&$.includes(B)}_addParent(B){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(B),$):$?[$,B]:B}_removeParent(B){const{_parentage:$}=this;$===B?this._parentage=null:Array.isArray($)&&(0,ie.P)($,B)}remove(B){const{_finalizers:$}=this;$&&(0,ie.P)($,B),B instanceof re&&B._removeParent(this)}}re.EMPTY=(()=>{const ae=new re;return ae.closed=!0,ae})();const he=re.EMPTY;function ce(ae){return ae instanceof re||ae&&"closed"in ae&&(0,h.m)(ae.remove)&&(0,h.m)(ae.add)&&(0,h.m)(ae.unsubscribe)}function oe(ae){(0,h.m)(ae)?ae():ae.unsubscribe()}},2416:(ut,De,P)=>{P.d(De,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,De,P)=>{P.d(De,{E:()=>ee});const ee=new(P(9751).y)(re=>re.complete())},8996:(ut,De,P)=>{P.d(De,{D:()=>_e});var h=P(8421),ee=P(5363),N=P(9468),he=P(9751),oe=P(2202),ae=P(576),B=P(9672);function Y(be,Be){if(!be)throw new Error("Iterable cannot be null");return new he.y(je=>{(0,B.f)(je,Be,()=>{const j=be[Symbol.asyncIterator]();(0,B.f)(je,Be,()=>{j.next().then(pe=>{pe.done?je.complete():je.next(pe.value)})},0,!0)})})}var Fe=P(3670),Re=P(8239),Ie=P(1144),nt=P(6495),ge=P(2206),fe=P(4532),Xe=P(3260);function _e(be,Be){return Be?function Ae(be,Be){if(null!=be){if((0,Fe.c)(be))return function ie(be,Be){return(0,h.Xf)(be).pipe((0,N.R)(Be),(0,ee.Q)(Be))}(be,Be);if((0,Ie.z)(be))return function ce(be,Be){return new he.y(je=>{let j=0;return Be.schedule(function(){j===be.length?je.complete():(je.next(be[j++]),je.closed||this.schedule())})})}(be,Be);if((0,Re.t)(be))return function re(be,Be){return(0,h.Xf)(be).pipe((0,N.R)(Be),(0,ee.Q)(Be))}(be,Be);if((0,ge.D)(be))return Y(be,Be);if((0,nt.T)(be))return function $(be,Be){return new he.y(je=>{let j;return(0,B.f)(je,Be,()=>{j=be[oe.h](),(0,B.f)(je,Be,()=>{let pe,q;try{({value:pe,done:q}=j.next())}catch(J){return void je.error(J)}q?je.complete():je.next(pe)},0,!0)}),()=>(0,ae.m)(j?.return)&&j.return()})}(be,Be);if((0,Xe.L)(be))return function ot(be,Be){return Y((0,Xe.Q)(be),Be)}(be,Be)}throw(0,fe.z)(be)}(be,Be):(0,h.Xf)(be)}},8421:(ut,De,P)=>{P.d(De,{Xf:()=>Fe});var h=P(655),ee=P(1144),N=P(8239),ie=P(9751),re=P(3670),he=P(2206),ce=P(4532),oe=P(6495),ae=P(3260),B=P(576),$=P(7849),Y=P(8822);function Fe(Ae){if(Ae instanceof ie.y)return Ae;if(null!=Ae){if((0,re.c)(Ae))return function Re(Ae){return new ie.y(_e=>{const be=Ae[Y.L]();if((0,B.m)(be.subscribe))return be.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,ee.z)(Ae))return function Ie(Ae){return new ie.y(_e=>{for(let be=0;be<Ae.length&&!_e.closed;be++)_e.next(Ae[be]);_e.complete()})}(Ae);if((0,N.t)(Ae))return function nt(Ae){return new ie.y(_e=>{Ae.then(be=>{_e.closed||(_e.next(be),_e.complete())},be=>_e.error(be)).then(null,$.h)})}(Ae);if((0,he.D)(Ae))return fe(Ae);if((0,oe.T)(Ae))return function ge(Ae){return new ie.y(_e=>{for(const be of Ae)if(_e.next(be),_e.closed)return;_e.complete()})}(Ae);if((0,ae.L)(Ae))return function Xe(Ae){return fe((0,ae.Q)(Ae))}(Ae)}throw(0,ce.z)(Ae)}function fe(Ae){return new ie.y(_e=>{(function ot(Ae,_e){var be,Be,je,j;return(0,h.mG)(this,void 0,void 0,function*(){try{for(be=(0,h.KL)(Ae);!(Be=yield be.next()).done;)if(_e.next(Be.value),_e.closed)return}catch(pe){je={error:pe}}finally{try{Be&&!Be.done&&(j=be.return)&&(yield j.call(be))}finally{if(je)throw je.error}}_e.complete()})})(Ae,_e).catch(be=>_e.error(be))})}},6451:(ut,De,P)=>{P.d(De,{T:()=>he});var h=P(8189),ee=P(8421),N=P(515),ie=P(7669),re=P(8996);function he(...ce){const oe=(0,ie.yG)(ce),ae=(0,ie._6)(ce,1/0),B=ce;return B.length?1===B.length?(0,ee.Xf)(B[0]):(0,h.J)(ae)((0,re.D)(B,oe)):N.E}},5403:(ut,De,P)=>{P.d(De,{x:()=>ee});var h=P(930);function ee(ie,re,he,ce,oe){return new N(ie,re,he,ce,oe)}class N extends h.Lv{constructor(re,he,ce,oe,ae,B){super(re),this.onFinalize=ae,this.shouldUnsubscribe=B,this._next=he?function($){try{he($)}catch(Y){re.error(Y)}}:super._next,this._error=oe?function($){try{oe($)}catch(Y){re.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch($){re.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(ut,De,P)=>{P.d(De,{U:()=>N});var h=P(4482),ee=P(5403);function N(ie,re){return(0,h.e)((he,ce)=>{let oe=0;he.subscribe((0,ee.x)(ce,ae=>{ce.next(ie.call(re,ae,oe++))}))})}},8189:(ut,De,P)=>{P.d(De,{J:()=>N});var h=P(5577),ee=P(4671);function N(ie=1/0){return(0,h.z)(ee.y,ie)}},5577:(ut,De,P)=>{P.d(De,{z:()=>oe});var h=P(4004),ee=P(8421),N=P(4482),ie=P(9672),re=P(5403),ce=P(576);function oe(ae,B,$=1/0){return(0,ce.m)(B)?oe((Y,Fe)=>(0,h.U)((Re,Ie)=>B(Y,Re,Fe,Ie))((0,ee.Xf)(ae(Y,Fe))),$):("number"==typeof B&&($=B),(0,N.e)((Y,Fe)=>function he(ae,B,$,Y,Fe,Re,Ie,nt){const ge=[];let fe=0,Xe=0,ot=!1;const Ae=()=>{ot&&!ge.length&&!fe&&B.complete()},_e=Be=>fe<Y?be(Be):ge.push(Be),be=Be=>{Re&&B.next(Be),fe++;let je=!1;(0,ee.Xf)($(Be,Xe++)).subscribe((0,re.x)(B,j=>{Fe?.(j),Re?_e(j):B.next(j)},()=>{je=!0},void 0,()=>{if(je)try{for(fe--;ge.length&&fe<Y;){const j=ge.shift();Ie?(0,ie.f)(B,Ie,()=>be(j)):be(j)}Ae()}catch(j){B.error(j)}}))};return ae.subscribe((0,re.x)(B,_e,()=>{ot=!0,Ae()})),()=>{nt?.()}}(Y,Fe,ae,$)))}},5363:(ut,De,P)=>{P.d(De,{Q:()=>ie});var h=P(9672),ee=P(4482),N=P(5403);function ie(re,he=0){return(0,ee.e)((ce,oe)=>{ce.subscribe((0,N.x)(oe,ae=>(0,h.f)(oe,re,()=>oe.next(ae),he),()=>(0,h.f)(oe,re,()=>oe.complete(),he),ae=>(0,h.f)(oe,re,()=>oe.error(ae),he)))})}},3099:(ut,De,P)=>{P.d(De,{B:()=>re});var h=P(8421),ee=P(7579),N=P(930),ie=P(4482);function re(ce={}){const{connector:oe=(()=>new ee.x),resetOnError:ae=!0,resetOnComplete:B=!0,resetOnRefCountZero:$=!0}=ce;return Y=>{let Fe,Re,Ie,nt=0,ge=!1,fe=!1;const Xe=()=>{Re?.unsubscribe(),Re=void 0},ot=()=>{Xe(),Fe=Ie=void 0,ge=fe=!1},Ae=()=>{const _e=Fe;ot(),_e?.unsubscribe()};return(0,ie.e)((_e,be)=>{nt++,!fe&&!ge&&Xe();const Be=Ie=Ie??oe();be.add(()=>{nt--,0===nt&&!fe&&!ge&&(Re=he(Ae,$))}),Be.subscribe(be),!Fe&&nt>0&&(Fe=new N.Hp({next:je=>Be.next(je),error:je=>{fe=!0,Xe(),Re=he(ot,ae,je),Be.error(je)},complete:()=>{ge=!0,Xe(),Re=he(ot,B),Be.complete()}}),(0,h.Xf)(_e).subscribe(Fe))})(Y)}}function he(ce,oe,...ae){if(!0===oe)return void ce();if(!1===oe)return;const B=new N.Hp({next:()=>{B.unsubscribe(),ce()}});return oe(...ae).subscribe(B)}},9468:(ut,De,P)=>{P.d(De,{R:()=>ee});var h=P(4482);function ee(N,ie=0){return(0,h.e)((re,he)=>{he.add(N.schedule(()=>re.subscribe(he),ie))})}},8505:(ut,De,P)=>{P.d(De,{b:()=>re});var h=P(576),ee=P(4482),N=P(5403),ie=P(4671);function re(he,ce,oe){const ae=(0,h.m)(he)||ce||oe?{next:he,error:ce,complete:oe}:he;return ae?(0,ee.e)((B,$)=>{var Y;null===(Y=ae.subscribe)||void 0===Y||Y.call(ae);let Fe=!0;B.subscribe((0,N.x)($,Re=>{var Ie;null===(Ie=ae.next)||void 0===Ie||Ie.call(ae,Re),$.next(Re)},()=>{var Re;Fe=!1,null===(Re=ae.complete)||void 0===Re||Re.call(ae),$.complete()},Re=>{var Ie;Fe=!1,null===(Ie=ae.error)||void 0===Ie||Ie.call(ae,Re),$.error(Re)},()=>{var Re,Ie;Fe&&(null===(Re=ae.unsubscribe)||void 0===Re||Re.call(ae)),null===(Ie=ae.finalize)||void 0===Ie||Ie.call(ae)}))}):ie.y}},4408:(ut,De,P)=>{P.d(De,{o:()=>re});var h=P(727);class ee extends h.w0{constructor(ce,oe){super()}schedule(ce,oe=0){return this}}const N={setInterval(he,ce,...oe){const{delegate:ae}=N;return ae?.setInterval?ae.setInterval(he,ce,...oe):setInterval(he,ce,...oe)},clearInterval(he){const{delegate:ce}=N;return(ce?.clearInterval||clearInterval)(he)},delegate:void 0};var ie=P(8737);class re extends ee{constructor(ce,oe){super(ce,oe),this.scheduler=ce,this.work=oe,this.pending=!1}schedule(ce,oe=0){var ae;if(this.closed)return this;this.state=ce;const B=this.id,$=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId($,B,oe)),this.pending=!0,this.delay=oe,this.id=null!==(ae=this.id)&&void 0!==ae?ae:this.requestAsyncId($,this.id,oe),this}requestAsyncId(ce,oe,ae=0){return N.setInterval(ce.flush.bind(ce,this),ae)}recycleAsyncId(ce,oe,ae=0){if(null!=ae&&this.delay===ae&&!1===this.pending)return oe;null!=oe&&N.clearInterval(oe)}execute(ce,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ae=this._execute(ce,oe);if(ae)return ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,oe){let B,ae=!1;try{this.work(ce)}catch($){ae=!0,B=$||new Error("Scheduled action threw falsy error")}if(ae)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ce,scheduler:oe}=this,{actions:ae}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(ae,this),null!=ce&&(this.id=this.recycleAsyncId(oe,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,De,P)=>{P.d(De,{v:()=>N});var h=P(6063);class ee{constructor(re,he=ee.now){this.schedulerActionCtor=re,this.now=he}schedule(re,he=0,ce){return new this.schedulerActionCtor(this,re).schedule(ce,he)}}ee.now=h.l.now;class N extends ee{constructor(re,he=ee.now){super(re,he),this.actions=[],this._active=!1}flush(re){const{actions:he}=this;if(this._active)return void he.push(re);let ce;this._active=!0;do{if(ce=re.execute(re.state,re.delay))break}while(re=he.shift());if(this._active=!1,ce){for(;re=he.shift();)re.unsubscribe();throw ce}}}},4986:(ut,De,P)=>{P.d(De,{z:()=>N});var h=P(4408);const N=new(P(7565).v)(h.o)},6063:(ut,De,P)=>{P.d(De,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},233:(ut,De,P)=>{P.d(De,{N:()=>re});var h=P(4408),N=P(7565);const re=new class ie extends N.v{}(class ee extends h.o{constructor(oe,ae){super(oe,ae),this.scheduler=oe,this.work=ae}schedule(oe,ae=0){return ae>0?super.schedule(oe,ae):(this.delay=ae,this.state=oe,this.scheduler.flush(this),this)}execute(oe,ae){return ae>0||this.closed?super.execute(oe,ae):this._execute(oe,ae)}requestAsyncId(oe,ae,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(oe,ae,B):(oe.flush(this),0)}})},3410:(ut,De,P)=>{P.d(De,{z:()=>h});const h={setTimeout(ee,N,...ie){const{delegate:re}=h;return re?.setTimeout?re.setTimeout(ee,N,...ie):setTimeout(ee,N,...ie)},clearTimeout(ee){const{delegate:N}=h;return(N?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(ut,De,P)=>{P.d(De,{h:()=>ee});const ee=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,De,P)=>{P.d(De,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,De,P)=>{P.d(De,{_6:()=>he,jO:()=>ie,yG:()=>re});var h=P(576);function N(ce){return ce[ce.length-1]}function ie(ce){return(0,h.m)(N(ce))?ce.pop():void 0}function re(ce){return function ee(ce){return ce&&(0,h.m)(ce.schedule)}(N(ce))?ce.pop():void 0}function he(ce,oe){return"number"==typeof N(ce)?ce.pop():oe}},8737:(ut,De,P)=>{function h(ee,N){if(ee){const ie=ee.indexOf(N);0<=ie&&ee.splice(ie,1)}}P.d(De,{P:()=>h})},3888:(ut,De,P)=>{function h(ee){const ie=ee(re=>{Error.call(re),re.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}P.d(De,{d:()=>h})},2806:(ut,De,P)=>{P.d(De,{O:()=>ie,x:()=>N});var h=P(2416);let ee=null;function N(re){if(h.v.useDeprecatedSynchronousErrorHandling){const he=!ee;if(he&&(ee={errorThrown:!1,error:null}),re(),he){const{errorThrown:ce,error:oe}=ee;if(ee=null,ce)throw oe}}else re()}function ie(re){h.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(ut,De,P)=>{function h(ee,N,ie,re=0,he=!1){const ce=N.schedule(function(){ie(),he?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(ce),!he)return ce}P.d(De,{f:()=>h})},4671:(ut,De,P)=>{function h(ee){return ee}P.d(De,{y:()=>h})},1144:(ut,De,P)=>{P.d(De,{z:()=>h});const h=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(ut,De,P)=>{P.d(De,{D:()=>ee});var h=P(576);function ee(N){return Symbol.asyncIterator&&(0,h.m)(N?.[Symbol.asyncIterator])}},576:(ut,De,P)=>{function h(ee){return"function"==typeof ee}P.d(De,{m:()=>h})},3670:(ut,De,P)=>{P.d(De,{c:()=>N});var h=P(8822),ee=P(576);function N(ie){return(0,ee.m)(ie[h.L])}},6495:(ut,De,P)=>{P.d(De,{T:()=>N});var h=P(2202),ee=P(576);function N(ie){return(0,ee.m)(ie?.[h.h])}},8239:(ut,De,P)=>{P.d(De,{t:()=>ee});var h=P(576);function ee(N){return(0,h.m)(N?.then)}},3260:(ut,De,P)=>{P.d(De,{L:()=>ie,Q:()=>N});var h=P(655),ee=P(576);function N(re){return(0,h.FC)(this,arguments,function*(){const ce=re.getReader();try{for(;;){const{value:oe,done:ae}=yield(0,h.qq)(ce.read());if(ae)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(oe)}}finally{ce.releaseLock()}})}function ie(re){return(0,ee.m)(re?.getReader)}},4482:(ut,De,P)=>{P.d(De,{A:()=>ee,e:()=>N});var h=P(576);function ee(ie){return(0,h.m)(ie?.lift)}function N(ie){return re=>{if(ee(re))return re.lift(function(he){try{return ie(he,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,De,P)=>{function h(){}P.d(De,{Z:()=>h})},9635:(ut,De,P)=>{P.d(De,{U:()=>N,z:()=>ee});var h=P(4671);function ee(...ie){return N(ie)}function N(ie){return 0===ie.length?h.y:1===ie.length?ie[0]:function(he){return ie.reduce((ce,oe)=>oe(ce),he)}}},7849:(ut,De,P)=>{P.d(De,{h:()=>N});var h=P(2416),ee=P(3410);function N(ie){ee.z.setTimeout(()=>{const{onUnhandledError:re}=h.v;if(!re)throw ie;re(ie)})}},4532:(ut,De,P)=>{function h(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(De,{z:()=>h})},655:(ut,De,P)=>{function ie(q,J){var se={};for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&J.indexOf(ne)<0&&(se[ne]=q[ne]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ne=Object.getOwnPropertySymbols(q);Pe<ne.length;Pe++)J.indexOf(ne[Pe])<0&&Object.prototype.propertyIsEnumerable.call(q,ne[Pe])&&(se[ne[Pe]]=q[ne[Pe]])}return se}function re(q,J,se,ne){var gt,Pe=arguments.length,Oe=Pe<3?J:null===ne?ne=Object.getOwnPropertyDescriptor(J,se):ne;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Oe=Reflect.decorate(q,J,se,ne);else for(var Xt=q.length-1;Xt>=0;Xt--)(gt=q[Xt])&&(Oe=(Pe<3?gt(Oe):Pe>3?gt(J,se,Oe):gt(J,se))||Oe);return Pe>3&&Oe&&Object.defineProperty(J,se,Oe),Oe}function oe(q,J,se,ne){return new(se||(se=Promise))(function(Oe,gt){function Xt(on){try{We(ne.next(on))}catch(mn){gt(mn)}}function jt(on){try{We(ne.throw(on))}catch(mn){gt(mn)}}function We(on){on.done?Oe(on.value):function Pe(Oe){return Oe instanceof se?Oe:new se(function(gt){gt(Oe)})}(on.value).then(Xt,jt)}We((ne=ne.apply(q,J||[])).next())})}function ge(q){return this instanceof ge?(this.v=q,this):new ge(q)}function fe(q,J,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ne=se.apply(q,J||[]),Oe=[];return Pe={},gt("next"),gt("throw"),gt("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function gt(Kt){ne[Kt]&&(Pe[Kt]=function(Yt){return new Promise(function(vr,kt){Oe.push([Kt,Yt,vr,kt])>1||Xt(Kt,Yt)})})}function Xt(Kt,Yt){try{!function jt(Kt){Kt.value instanceof ge?Promise.resolve(Kt.value.v).then(We,on):mn(Oe[0][2],Kt)}(ne[Kt](Yt))}catch(vr){mn(Oe[0][3],vr)}}function We(Kt){Xt("next",Kt)}function on(Kt){Xt("throw",Kt)}function mn(Kt,Yt){Kt(Yt),Oe.shift(),Oe.length&&Xt(Oe[0][0],Oe[0][1])}}function ot(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,J=q[Symbol.asyncIterator];return J?J.call(q):(q=function Y(q){var J="function"==typeof Symbol&&Symbol.iterator,se=J&&q[J],ne=0;if(se)return se.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ne>=q.length&&(q=void 0),{value:q&&q[ne++],done:!q}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),se={},ne("next"),ne("throw"),ne("return"),se[Symbol.asyncIterator]=function(){return this},se);function ne(Oe){se[Oe]=q[Oe]&&function(gt){return new Promise(function(Xt,jt){!function Pe(Oe,gt,Xt,jt){Promise.resolve(jt).then(function(We){Oe({value:We,done:Xt})},gt)}(Xt,jt,(gt=q[Oe](gt)).done,gt.value)})}}}P.d(De,{FC:()=>fe,KL:()=>ot,_T:()=>ie,gn:()=>re,mG:()=>oe,qq:()=>ge})},4650:(ut,De,P)=>{P.d(De,{$8M:()=>Vu,$Z:()=>vl,AFp:()=>Zm,ALo:()=>Ep,AaK:()=>oe,AsE:()=>av,CHM:()=>wu,CRH:()=>sw,CZH:()=>Co,CqO:()=>np,D6c:()=>fS,DdM:()=>zv,EJc:()=>Tr,EpF:()=>OD,Ez6:()=>vr,F4k:()=>ND,FYo:()=>A,FiY:()=>Ht,G48:()=>rS,GfV:()=>Le,Gpc:()=>$,JOm:()=>Zo,KtG:()=>Eu,LFG:()=>F,LSH:()=>Pd,Lbi:()=>ww,Lck:()=>AT,MMx:()=>yp,NdJ:()=>Al,O4$:()=>Kc,OlP:()=>fn,Oqu:()=>ap,PSE:()=>pb,PXZ:()=>ey,Q6J:()=>ep,QGY:()=>G_,QP$:()=>Qt,Qsj:()=>O,R0b:()=>dt,RDi:()=>mg,Rgc:()=>Mh,SBq:()=>f,Sil:()=>ZT,Suo:()=>iw,TTD:()=>Xi,TgZ:()=>tp,VKq:()=>Sh,WLB:()=>_p,X6Q:()=>us,XFs:()=>Ze,Xpm:()=>Te,Xts:()=>Sf,Y36:()=>Ju,YKP:()=>Pm,YNc:()=>Jf,Yjl:()=>we,Yz7:()=>Yt,Z0I:()=>Yi,ZZ4:()=>tu,_Bn:()=>DI,_UZ:()=>mm,_Vd:()=>ja,_c5:()=>dS,_uU:()=>XE,aQg:()=>Gh,c2e:()=>qe,cJS:()=>kt,cg1:()=>pv,dDg:()=>tS,dqk:()=>rn,eFA:()=>ub,ekj:()=>ev,eoX:()=>Lh,f3M:()=>X,g9A:()=>hc,gM2:()=>xh,gxx:()=>Af,h0i:()=>kl,hGG:()=>hS,hij:()=>Im,iGM:()=>rw,ifc:()=>ct,ip1:()=>Hl,jDz:()=>Bv,kL8:()=>Rl,kcU:()=>md,lG2:()=>W,lcZ:()=>Qv,lqb:()=>br,lri:()=>sb,n5z:()=>ss,oAB:()=>Lt,oxw:()=>$E,q4F:()=>Je,qLn:()=>Pf,qOj:()=>dm,qZA:()=>Sl,rWj:()=>kp,sBO:()=>rr,sIi:()=>ch,s_b:()=>Vl,soG:()=>xe,tb:()=>it,tp0:()=>Ii,uIk:()=>Wf,vHH:()=>Ie,vpe:()=>Bs,wAp:()=>Ct,xi3:()=>Jv,xp6:()=>eE,z2F:()=>Mn,zSh:()=>Wu,zs3:()=>za});var h=P(7579),ee=P(727),N=P(9751),ie=P(6451),re=P(3099);function he(s){for(let o in s)if(s[o]===he)return o;throw Error("Could not find renamed property on target object.")}function ce(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function oe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(oe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ae(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const B=he({__forward_ref__:he});function $(s){return s.__forward_ref__=$,s.toString=function(){return oe(this())},s}function Y(s){return Fe(s)?s():s}function Fe(s){return"function"==typeof s&&s.hasOwnProperty(B)&&s.__forward_ref__===$}class Ie extends Error{constructor(o,a){super(function nt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function _e(s,o){throw new Ie(-201,!1)}function jt(s,o){null==s&&function We(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Yt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}const vr=Yt;function kt(s){return{providers:s.providers||[],imports:s.imports||[]}}function ln(s){return fi(s,pi)||fi(s,Jr)}function Yi(s){return null!==ln(s)}function fi(s,o){return s.hasOwnProperty(o)?s[o]:null}function Gs(s){return s&&(s.hasOwnProperty(Qr)||s.hasOwnProperty(ra))?s[Qr]:null}const pi=he({\u0275prov:he}),Qr=he({\u0275inj:he}),Jr=he({ngInjectableDef:he}),ra=he({ngInjectorDef:he});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let wr;function Zn(s){const o=wr;return wr=s,o}function Xr(s,o,a){const c=ln(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ze.Optional?null:void 0!==o?o:void _e(oe(s))}function Rn(s){return{toString:s}.toString()}var Un=(()=>((Un=Un||{})[Un.OnPush=0]="OnPush",Un[Un.Default=1]="Default",Un))(),ct=(()=>{return(s=ct||(ct={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ct;var s})();const rn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Gr={},xt=[],ys=he({\u0275cmp:he}),en=he({\u0275dir:he}),Ni=he({\u0275pipe:he}),tn=he({\u0275mod:he}),Kn=he({\u0275fac:he}),xr=he({__NG_ELEMENT_ID__:he});let tt=0;function Te(s){return Rn(()=>{const a=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Un.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||xt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ct.Emulated,id:"c"+tt++,styles:s.styles||xt,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,_=s.features;return d.inputs=V(s.inputs,c),d.outputs=V(s.outputs),_&&_.forEach(E=>E(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(bt).filter(It):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(ht).filter(It):null,d})}function bt(s){return Q(s)||He(s)}function It(s){return null!==s}function Lt(s){return Rn(()=>({type:s.type,bootstrap:s.bootstrap||xt,declarations:s.declarations||xt,imports:s.imports||xt,exports:s.exports||xt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function V(s,o){if(null==s)return Gr;const a={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,o&&(o[d]=p)}return a}const W=Te;function we(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Q(s){return s[ys]||null}function He(s){return s[en]||null}function ht(s){return s[Ni]||null}function Qt(s){const o=Q(s)||He(s)||ht(s);return null!==o&&o.standalone}function dn(s,o){const a=s[tn]||null;if(!a&&!0===o)throw new Error(`Type ${oe(s)} does not have '\u0275mod' property.`);return a}function or(s){return Array.isArray(s)&&"object"==typeof s[1]}function Mr(s){return Array.isArray(s)&&!0===s[1]}function uu(s){return 0!=(8&s.flags)}function oa(s){return 2==(2&s.flags)}function Nc(s){return 1==(1&s.flags)}function Er(s){return null!==s.template}function rf(s){return 0!=(256&s[2])}function ki(s,o){return s.hasOwnProperty(Kn)?s[Kn]:null}class Ji{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Xi(){return Fi}function Fi(s){return s.type.prototype.ngOnChanges&&(s.setInput=du),aa}function aa(){const s=uf(this),o=s?.current;if(o){const a=s.previous;if(a===Gr)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function du(s,o,a,c){const d=uf(s)||function ua(s,o){return s[Lc]=o}(s,{previous:Gr,current:null}),p=d.current||(d.current={}),_=d.previous,E=this.declaredInputs[a],b=_[E];p[E]=new Ji(b&&b.currentValue,o,_===Gr),s[c]=o}Xi.ngInherit=!0;const Lc="__ngSimpleChanges__";function uf(s){return s[Lc]||null}function Dn(s){for(;Array.isArray(s);)s=s[0];return s}function ti(s,o){return Dn(o[s])}function Rr(s,o){return Dn(o[s.index])}function Zs(s,o){return s.data[o]}function ts(s,o){return s[o]}function Wt(s,o){const a=o[s];return or(a)?a:a[0]}function Ks(s){return 64==(64&s[2])}function yi(s,o){return null==o?null:s[o]}function mu(s){s[18]=0}function In(s,o){s[5]+=o;let a=s,c=s[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const St={lFrame:Wc(null),bindingsEnabled:!0};function ns(){return St.bindingsEnabled}function Se(){return St.lFrame.lView}function $t(){return St.lFrame.tView}function wu(s){return St.lFrame.contextLView=s,s[8]}function Eu(s){return St.lFrame.contextLView=null,s}function Tn(){let s=Iu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Iu(){return St.lFrame.currentTNode}function ni(s,o){const a=St.lFrame;a.currentTNode=s,a.isParent=o}function la(){return St.lFrame.isParent}function Sn(){const s=St.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ys(){return St.lFrame.bindingIndex++}function rs(s){const o=St.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function cg(s,o){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=s,bu(o)}function bu(s){St.lFrame.currentDirectiveIndex=s}function Gc(){return St.lFrame.currentQueryIndex}function ga(s){St.lFrame.currentQueryIndex=s}function zc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Cu(s,o,a){if(a&Ze.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||a&Ze.Host||(d=zc(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=St.lFrame=qc();return c.currentTNode=o,c.lView=s,!0}function Du(s){const o=qc(),a=s[1];St.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function qc(){const s=St.lFrame,o=null===s?null:s.child;return null===o?Wc(s):o}function Wc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Zc(){const s=St.lFrame;return St.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const gd=Zc;function Qs(){const s=Zc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Jn(){return St.lFrame.selectedIndex}function Wr(s){St.lFrame.selectedIndex=s}function _n(){const s=St.lFrame;return Zs(s.tView,s.selectedIndex)}function Kc(){St.lFrame.currentNamespace="svg"}function md(){!function Qc(){St.lFrame.currentNamespace=null}()}function Au(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:S,ngOnDestroy:R}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-a,_),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-a,b),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(a,R)}}function Xs(s,o,a){Ro(s,o,3,a)}function Mo(s,o,a,c){(3&s[2])===a&&Ro(s,o,a,c)}function _d(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Ro(s,o,a,c){const p=c??-1,_=o.length-1;let E=0;for(let b=void 0!==c?65535&s[18]:0;b<_;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(s[18]+=65536),(E<p||-1==p)&&(vd(s,a,o,b),s[18]=(4294901760&s[18])+b+2),b++}function vd(s,o,a,c){const d=a[c]<0,p=a[c+1],E=s[d?-a[c]:a[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Ds{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function No(s,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],_=a[c++],E=a[c++];s.setAttribute(o,_,E,p)}else{const p=d,_=a[++c];Ou(p)?s.setProperty(o,p,_):s.setAttribute(o,p,_),c++}}return c}function to(s){return 3===s||4===s||6===s}function Ou(s){return 64===s.charCodeAt(0)}function ma(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Ed(s,a,d,null,-1===a||2===a?o[++c]:null)}}return s}function Ed(s,o,a,c,d){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,a),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function Id(s){return-1!==s}function ur(s){return 32767&s}function _a(s,o){let a=function ya(s){return s>>16}(s),c=o;for(;a>0;)c=c[15],a--;return c}let Vi=!0;function va(s){const o=Vi;return Vi=s,o}let On=0;const _i={};function no(s,o){const a=Pu(s,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Ea(c.data,s),Ea(o,null),Ea(c.blueprint,null));const d=ku(s,o),p=s.injectorIndex;if(Id(d)){const _=ur(d),E=_a(d,o),b=E[1].data;for(let S=0;S<8;S++)o[p+S]=E[_+S]|b[_+S]}return o[p+8]=d,p}function Ea(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Pu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ku(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Fo(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Ts(s,o,a){!function Nu(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(xr)&&(c=a[xr]),null==c&&(c=a[xr]=On++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Ss(s,o,a){if(a&Ze.Optional||void 0!==s)return s;_e()}function Xc(s,o,a,c){if(a&Ze.Optional&&void 0===c&&(c=null),0==(a&(Ze.Self|Ze.Host))){const d=s[9],p=Zn(void 0);try{return d?d.get(o,c,a&Ze.Optional):Xr(o,c,a&Ze.Optional)}finally{Zn(p)}}return Ss(c,0,a)}function ro(s,o,a,c=Ze.Default,d){if(null!==s){if(1024&o[2]){const _=function ko(s,o,a,c,d){let p=s,_=o;for(;null!==p&&null!==_&&1024&_[2]&&!(256&_[2]);){const E=Ia(p,_,a,c|Ze.Self,_i);if(E!==_i)return E;let b=p.parent;if(!b){const S=_[21];if(S){const R=S.get(a,_i,c);if(R!==_i)return R}b=Fo(_),_=_[15]}p=b}return d}(s,o,a,c,_i);if(_!==_i)return _}const p=Ia(s,o,a,c,_i);if(p!==_i)return p}return Xc(o,a,c,d)}function Ia(s,o,a,c,d){const p=function el(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(xr)?s[xr]:void 0;return"number"==typeof o?o>=0?255&o:tl:o}(a);if("function"==typeof p){if(!Cu(o,s,c))return c&Ze.Host?Ss(d,0,c):Xc(o,a,c,d);try{const _=p(c);if(null!=_||c&Ze.Optional)return _;_e()}finally{gd()}}else if("number"==typeof p){let _=null,E=Pu(s,o),b=-1,S=c&Ze.Host?o[16][6]:null;for((-1===E||c&Ze.SkipSelf)&&(b=-1===E?ku(s,o):o[E+8],-1!==b&&ba(c,!1)?(_=o[1],E=ur(b),o=_a(b,o)):E=-1);-1!==E;){const R=o[1];if(Fu(p,E,R.data)){const k=Dd(E,o,a,_,c,S);if(k!==_i)return k}b=o[E+8],-1!==b&&ba(c,o[1].data[E+8]===S)&&Fu(p,E,o)?(_=R,E=ur(b),o=_a(b,o)):E=-1}}return d}function Dd(s,o,a,c,d,p){const _=o[1],E=_.data[s+8],R=Po(E,_,a,null==c?oa(E)&&Vi:c!=_&&0!=(3&E.type),d&Ze.Host&&p===E);return null!==R?is(o,_,R,E):_i}function Po(s,o,a,c,d){const p=s.providerIndexes,_=o.data,E=1048575&p,b=s.directiveStart,R=p>>20,G=d?E+R:s.directiveEnd;for(let te=c?E:E+R;te<G;te++){const ve=_[te];if(te<b&&a===ve||te>=b&&ve.type===a)return te}if(d){const te=_[b];if(te&&Er(te)&&te.type===a)return b}return null}function is(s,o,a,c){let d=s[a];const p=o.data;if(function eo(s){return s instanceof Ds}(d)){const _=d;_.resolving&&function Xe(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${s}${a}`)}(function fe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}(p[a]));const E=va(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Zn(_.injectImpl):null;Cu(s,c,Ze.Default);try{d=s[a]=_.factory(void 0,p,s,c),o.firstCreatePass&&a>=c.directiveStart&&function yd(s,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const _=Fi(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==b&&Zn(b),va(E),_.resolving=!1,gd()}}return d}function Fu(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function ba(s,o){return!(s&Ze.Self||s&Ze.Host&&o)}class io{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return ro(this._tNode,this._lView,o,c,a)}}function tl(){return new io(Tn(),Se())}function ss(s){return Rn(()=>{const o=s.prototype.constructor,a=o[Kn]||Lu(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[Kn]||Lu(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Lu(s){return Fe(s)?()=>{const o=Lu(Y(s));return o&&o()}:ki(s)}function Fo(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function Vu(s){return function Cd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(to(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(Tn(),s)}const As="__parameters__";function Uo(s,o,a){return Rn(()=>{const c=function Uu(s){return function(...a){if(s){const c=s(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const _=new d(...p);return E.annotation=_,E;function E(b,S,R){const k=b.hasOwnProperty(As)?b[As]:Object.defineProperty(b,As,{value:[]})[As];for(;k.length<=R;)k.push(null);return(k[R]=k[R]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class fn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vn(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let c=s[a];Array.isArray(c)?(o===s&&(o=s.slice(0,a)),vn(c,o)):o!==s&&o.push(c)}return o}function wi(s,o){s.forEach(a=>Array.isArray(a)?wi(a,o):o(a))}function Da(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Nn(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ke(s,o,a){let c=Ms(s,o);return c>=0?s[1|c]=a:(c=~c,function Ta(s,o,a,c){let d=s.length;if(d==o)s.push(a,c);else if(1===d)s.push(c,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=c}}(s,c,o,a)),c}function Sa(s,o){const a=Ms(s,o);if(a>=0)return s[1|a]}function Ms(s,o){return function rl(s,o,a){let c=0,d=s.length>>a;for(;d!==c;){const p=c+(d-c>>1),_=s[p<<a];if(o===_)return p<<a;_>o?d=p:c=p+1}return~(d<<a)}(s,o,1)}const gr={},il="__NG_DI_FLAG__",Ra="ngTempTokenPath",Bi=/\n/gm,Xn="__source";let C;function D(s){const o=C;return C=s,o}function M(s,o=Ze.Default){if(void 0===C)throw new Ie(-203,!1);return null===C?Xr(s,void 0,o):C.get(s,o&Ze.Optional?null:void 0,o)}function F(s,o=Ze.Default){return(function ms(){return wr}()||M)(Y(s),o)}function X(s,o=Ze.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),F(s,o)}function ye(s){const o=[];for(let a=0;a<s.length;a++){const c=Y(s[a]);if(Array.isArray(c)){if(0===c.length)throw new Ie(900,!1);let d,p=Ze.Default;for(let _=0;_<c.length;_++){const E=c[_],b=mt(E);"number"==typeof b?-1===b?d=E.token:p|=b:d=E}o.push(F(d,p))}else o.push(F(c))}return o}function Ue(s,o){return s[il]=o,s.prototype[il]=o,s}function mt(s){return s[il]}const Ht=Ue(Uo("Optional"),8),Ii=Ue(Uo("SkipSelf"),4);let wf;function mg(s){wf=s}class Md{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Gi(s){return s instanceof Md?s.changingThisBreaksApplicationSecurity:s}const ka=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Pn=(()=>((Pn=Pn||{})[Pn.NONE=0]="NONE",Pn[Pn.HTML=1]="HTML",Pn[Pn.STYLE=2]="STYLE",Pn[Pn.SCRIPT=3]="SCRIPT",Pn[Pn.URL=4]="URL",Pn[Pn.RESOURCE_URL=5]="RESOURCE_URL",Pn))();function Pd(s){const o=function qu(){const s=Se();return s&&s[12]}();return o?o.sanitize(Pn.URL,s)||"":function Go(s,o){const a=function If(s){return s instanceof Md&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?Gi(s):function al(s){return(s=String(s)).match(ka)?s:"unsafe:"+s}(ge(s))}const Sf=new fn("ENVIRONMENT_INITIALIZER"),Af=new fn("INJECTOR",-1),Ag=new fn("INJECTOR_DEF_TYPES");class xg{get(o,a=gr){if(a===gr){const c=new Error(`NullInjectorError: No provider for ${oe(o)}!`);throw c.name="NullInjectorError",c}return a}}function Mg(...s){return{\u0275providers:Vd(0,s)}}function Vd(s,...o){const a=[],c=new Set;let d;return wi(o,p=>{const _=p;ll(_,a,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&Ud(d,a),a}function Ud(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];wi(d,p=>{o.push(p)})}}function ll(s,o,a,c){if(!(s=Y(s)))return!1;let d=null,p=Gs(s);const _=!p&&Q(s);if(p||_){if(_&&!_.standalone)return!1;d=s}else{const b=s.ngModule;if(p=Gs(b),!p)return!1;d=b}const E=c.has(d);if(_){if(E)return!1;if(c.add(d),_.dependencies){const b="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const S of b)ll(S,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let S;c.add(d);try{wi(p.imports,R=>{ll(R,o,a,c)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&Ud(S,o)}if(!E){const S=ki(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:xt},{provide:Ag,useValue:d,multi:!0},{provide:Sf,useValue:()=>F(d),multi:!0})}const b=p.providers;null==b||E||wi(b,R=>{o.push(R)})}}return d!==s&&void 0!==s.providers}const Bd=he({provide:String,useValue:he});function dl(s){return null!==s&&"object"==typeof s&&Bd in s}function Di(s){return"function"==typeof s}const Wu=new fn("Set Injector scope."),Zu={},Ua={};let hl;function jd(){return void 0===hl&&(hl=new xg),hl}class br{}class $d extends br{constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qo(o,_=>this.processProvider(_)),this.records.set(Af,lr(void 0,this)),d.has("environment")&&this.records.set(br,lr(void 0,this));const p=this.records.get(Wu);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Ag.multi,xt,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=D(this),c=Zn(void 0);try{return o()}finally{D(a),Zn(c)}}get(o,a=gr,c=Ze.Default){this.assertNotDestroyed();const d=D(this),p=Zn(void 0);try{if(!(c&Ze.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function Zy(s){return"function"==typeof s||"object"==typeof s&&s instanceof fn}(o)&&ln(o);E=b&&this.injectableDefInScope(b)?lr(fl(o),Zu):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&Ze.Self?jd():this.parent).get(o,a=c&Ze.Optional&&a===gr?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Ra]=_[Ra]||[]).unshift(oe(o)),d)throw _;return function Nt(s,o,a,c){const d=s[Ra];throw o[Xn]&&d.unshift(o[Xn]),s.message=function Dt(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=oe(o);if(Array.isArray(o))d=o.map(oe).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):oe(E)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${s.replace(Bi,"\n  ")}`}("\n"+s.message,d,a,c),s.ngTokenPath=d,s[Ra]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{Zn(p),D(d)}}resolveInjectorInitializers(){const o=D(this),a=Zn(void 0);try{const c=this.get(Sf.multi,xt,Ze.Self);for(const d of c)d()}finally{D(o),Zn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(oe(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let a=Di(o=Y(o))?o:Y(o&&o.provide);const c=function xf(s){return dl(s)?lr(void 0,s.useValue):lr(pl(s),Zu)}(o);if(Di(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=lr(void 0,Zu,!0),d.factory=()=>ye(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Zu&&(a.value=Ua,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Mf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Y(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function fl(s){const o=ln(s),a=null!==o?o.factory:ki(s);if(null!==a)return a;if(s instanceof fn)throw new Ie(204,!1);if(s instanceof Function)return function Og(s){const o=s.length;if(o>0)throw function os(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}(o,"?"),new Ie(204,!1);const a=function Ar(s){const o=s&&(s[pi]||s[Jr]);if(o){const a=function Hr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ie(204,!1)}function pl(s,o,a){let c;if(Di(s)){const d=Y(s);return ki(d)||fl(d)}if(dl(s))c=()=>Y(s.useValue);else if(function ri(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...ye(s.deps||[]));else if(function Nr(s){return!(!s||!s.useExisting)}(s))c=()=>F(Y(s.useExisting));else{const d=Y(s&&(s.useClass||s.provide));if(!function Ba(s){return!!s.deps}(s))return ki(d)||fl(d);c=()=>new d(...ye(s.deps))}return c}function lr(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function as(s){return!!s.\u0275providers}function qo(s,o){for(const a of s)Array.isArray(a)?qo(a,o):as(a)?qo(a.\u0275providers,o):o(a)}class Hd{}class qd{resolveComponentFactory(o){throw function Ng(s){const o=Error(`No component factory found for ${oe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let ja=(()=>{class s{}return s.NULL=new qd,s})();function Ky(){return y(Tn(),Se())}function y(s,o){return new f(Rr(s,o))}let f=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Ky,s})();function g(s){return s instanceof f?s.nativeElement:s}class A{}let O=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function z(){const s=Se(),a=Wt(Tn().index,s);return(or(a)?a:s)[11]}(),s})(),le=(()=>{class s{}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:()=>null}),s})();class Le{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Je=new Le("14.2.5"),wt={};function Xy(s){return s.ngOriginalError}class Pf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Xy(o);for(;a&&Xy(a);)a=Xy(a);return a||null}}const e_=new Map;let yC=0;const Ug="__ngContext__";function Pr(s,o){or(o)?(s[Ug]=o[20],function vC(s){e_.set(s[20],s)}(o)):s[Ug]=o}function Ga(s){return s instanceof Function?s():s}var Zo=(()=>((Zo=Zo||{})[Zo.Important=1]="Important",Zo[Zo.DashCase=2]="DashCase",Zo))();function s_(s,o){return undefined(s,o)}function Yd(s){const o=s[3];return Mr(o)?o[3]:o}function $g(s){return F0(s[13])}function Hg(s){return F0(s[4])}function F0(s){for(;null!==s&&!Mr(s);)s=s[4];return s}function Qd(s,o,a,c,d){if(null!=c){let p,_=!1;Mr(c)?p=c:or(c)&&(_=!0,c=c[0]);const E=Dn(c);0===s&&null!==a?null==d?H0(o,a,E):Ko(o,a,E,d||null,!0):1===s&&null!==a?Ko(o,a,E,d||null,!0):2===s?function NC(s,o,a){const c=qg(s,o);c&&function OC(s,o,a,c){s.removeChild(o,a,c)}(s,c,o,a)}(o,E,_):3===s&&o.destroyNode(E),null!=p&&function tM(s,o,a,c,d){const p=a[7];p!==Dn(a)&&Qd(o,s,c,p,d);for(let E=10;E<a.length;E++){const b=a[E];ml(b[1],b,s,o,c,p)}}(o,s,p,a,d)}}function Gg(s,o,a){return s.createElement(o,a)}function B0(s,o){const a=s[9],c=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,In(d,-1)),a.splice(c,1)}function c_(s,o){if(s.length<=10)return;const a=10+o,c=s[a];if(c){const d=c[17];null!==d&&d!==s&&B0(d,c),o>0&&(s[a-1][4]=c[4]);const p=Nn(s,10+o);!function u_(s,o){ml(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=p[19];null!==_&&_.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Lf(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&ml(s,o,a,3,null,null),function Xx(s){let o=s[13];if(!o)return zg(s[1],s);for(;o;){let a=null;if(or(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==s;)or(o)&&zg(o[1],o),o=o[3];null===o&&(o=s),or(o)&&zg(o[1],o),a=o&&o[4]}o=a}}(o)}}function zg(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function d_(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Ds)){const p=a[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=d[p[_]],b=p[_+1];try{b.call(E)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function l_(s,o){const a=s.cleanup,c=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(o):Dn(o[_]),b=c[d=a[p+2]],S=a[p+3];"boolean"==typeof S?E.removeEventListener(a[p],b,S):S>=0?c[d=S]():c[d=-S].unsubscribe(),p+=2}else{const _=c[d=a[p+1]];a[p].call(_)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Mr(o[3])){a!==o[3]&&B0(a,o);const c=o[19];null!==c&&c.detachView(s)}!function wC(s){e_.delete(s[20])}(o)}}function j0(s,o,a){return function $0(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===ct.None||d===ct.Emulated)return null}return Rr(c,a)}(s,o.parent,a)}function Ko(s,o,a,c,d){s.insertBefore(o,a,c,d)}function H0(s,o,a){s.appendChild(o,a)}function G0(s,o,a,c,d){null!==c?Ko(s,o,a,c,d):H0(s,o,a)}function qg(s,o){return s.parentNode(o)}let h_=function q0(s,o,a){return 40&s.type?Rr(s,a):null};function Vf(s,o,a,c){const d=j0(s,c,o),p=o[11],E=function kr(s,o,a){return h_(s,o,a)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)G0(p,d,a[b],E,!1);else G0(p,d,a,E,!1)}function Zg(s,o){if(null!==o){const a=o.type;if(3&a)return Rr(o,s);if(4&a)return W0(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return Zg(s,c);{const d=s[o.index];return Mr(d)?W0(-1,d):Dn(d)}}if(32&a)return s_(o,s)()||Dn(s[o.index]);{const c=f_(s,o);return null!==c?Array.isArray(c)?c[0]:Zg(Yd(s[16]),c):Zg(s,o.next)}}return null}function f_(s,o){return null!==o?s[16][6].projection[o.projection]:null}function W0(s,o){const a=10+s+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return Zg(c,d)}return o[7]}function p_(s,o,a,c,d,p,_){for(;null!=a;){const E=c[a.index],b=a.type;if(_&&0===o&&(E&&Pr(Dn(E),c),a.flags|=4),64!=(64&a.flags))if(8&b)p_(s,o,a.child,c,d,p,!1),Qd(o,s,d,E,p);else if(32&b){const S=s_(a,c);let R;for(;R=S();)Qd(o,s,d,R,p);Qd(o,s,d,E,p)}else 16&b?Uf(s,o,c,a,d,p):Qd(o,s,d,E,p);a=_?a.projectionNext:a.next}}function ml(s,o,a,c,d,p){p_(a,c,s.firstChild,o,d,p,!1)}function Uf(s,o,a,c,d,p){const _=a[16],b=_[6].projection[c.projection];if(Array.isArray(b))for(let S=0;S<b.length;S++)Qd(o,s,d,b[S],p);else p_(s,o,b,_[3],d,p,!0)}function yl(s,o,a){s.setAttribute(o,"style",a)}function Bf(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function PC(s,o,a){let c=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}a=d+1}}const g_="ng-template";function m_(s,o,a){let c=0;for(;c<s.length;){let d=s[c++];if(a&&"class"===d){if(d=s[c],-1!==PC(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Y0(s){return 4===s.type&&s.value!==g_}function FC(s,o,a){return o===(4!==s.type||a?s.value:g_)}function LC(s,o,a){let c=4;const d=s.attrs||[],p=function nM(s){for(let o=0;o<s.length;o++)if(to(s[o]))return o;return s.length}(d);let _=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!_)if(4&c){if(c=2|1&c,""!==b&&!FC(s,b,a)||""===b&&1===o.length){if(Ps(c))return!1;_=!0}}else{const S=8&c?b:o[++E];if(8&c&&null!==s.attrs){if(!m_(s.attrs,S,a)){if(Ps(c))return!1;_=!0}continue}const k=VC(8&c?"class":b,d,Y0(s),a);if(-1===k){if(Ps(c))return!1;_=!0;continue}if(""!==S){let G;G=k>p?"":d[k+1].toLowerCase();const te=8&c?G:null;if(te&&-1!==PC(te,S,0)||2&c&&S!==G){if(Ps(c))return!1;_=!0}}}}else{if(!_&&!Ps(c)&&!Ps(b))return!1;if(_&&Ps(b))continue;_=!1,c=b|1&c}}return Ps(c)||_}function Ps(s){return 0==(1&s)}function VC(s,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let p=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function Q0(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function UC(s,o,a=!1){for(let c=0;c<o.length;c++)if(LC(s,o[c],a))return!0;return!1}function J0(s,o){return s?":not("+o.trim()+")":o}function X0(s){let o=s[0],a=1,c=2,d="",p=!1;for(;a<s.length;){let _=s[a];if("string"==typeof _)if(2&c){const E=s[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!Ps(_)&&(o+=J0(p,d),d=""),c=_,p=p||!Ps(c);a++}return""!==d&&(o+=J0(p,d)),o}const Ut={};function eE(s){tE($t(),Se(),Jn()+s,!1)}function tE(s,o,a,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Xs(o,p,a)}else{const p=s.preOrderHooks;null!==p&&Mo(o,p,0,a)}Wr(a)}function nE(s,o=null,a=null,c){const d=rE(s,o,a,c);return d.resolveInjectorInitializers(),d}function rE(s,o=null,a=null,c,d=new Set){const p=[a||xt,Mg(s)];return c=c||("object"==typeof s?void 0:oe(s)),new $d(p,o||jd(),c||null,d)}let za=(()=>{class s{static create(a,c){if(Array.isArray(a))return nE({name:""},c,a,"");{const d=a.name??"";return nE({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=gr,s.NULL=new xg,s.\u0275prov=Yt({token:s,providedIn:"any",factory:()=>F(Af)}),s.__NG_ELEMENT_ID__=-1,s})();function Ju(s,o=Ze.Default){const a=Se();return null===a?F(s,o):ro(Tn(),a,Y(s),o)}function vl(){throw new Error("invalid")}function C_(s,o){return s<<17|o<<2}function Yo(s){return s>>17&32767}function lE(s){return 2|s}function Xu(s){return(131068&s)>>2}function po(s,o){return-131069&s|o<<2}function T_(s){return 1|s}function th(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],p=a[c+1];if(-1!==p){const _=s.data[p];ga(d),_.contentQueries(2,o[p],p)}}}function M_(s,o,a,c,d,p,_,E,b,S,R){const k=o.blueprint.slice();return k[0]=d,k[2]=76|c,(null!==R||s&&1024&s[2])&&(k[2]|=1024),mu(k),k[3]=k[15]=s,k[8]=a,k[10]=_||s&&s[10],k[11]=E||s&&s[11],k[12]=b||s&&s[12]||null,k[9]=S||s&&s[9]||null,k[6]=p,k[20]=function _C(){return yC++}(),k[21]=R,k[16]=2==o.type?s[16]:k,k}function nh(s,o,a,c,d){let p=s.data[o];if(null===p)p=function rh(s,o,a,c,d){const p=Iu(),_=la(),b=s.data[o]=function sh(s,o,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(s,o,a,c,d),function ug(){return St.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const _=function xo(){const s=St.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ni(p,!0),p}function ih(s,o,a,c){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function em(s,o,a){Du(o);try{const c=s.viewQuery;null!==c&&um(1,c,a);const d=s.template;null!==d&&tm(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&th(s,o),s.staticViewQueries&&um(2,s.viewQuery,a);const p=s.components;null!==p&&function CM(s,o){for(let a=0;a<o.length;a++)xM(s,o[a])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Qs()}}function bl(s,o,a,c){const d=o[2];if(128!=(128&d)){Du(o);try{mu(o),function $c(s){return St.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&tm(s,o,a,2,c);const _=3==(3&d);if(_){const S=s.preOrderCheckHooks;null!==S&&Xs(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Mo(o,S,0,null),_d(o,0)}if(function SM(s){for(let o=$g(s);null!==o;o=Hg(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c],p=d[3];0==(512&d[2])&&In(p,1),d[2]|=512}}}(o),function TM(s){for(let o=$g(s);null!==o;o=Hg(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];Ks(c)&&bl(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&th(s,o),_){const S=s.contentCheckHooks;null!==S&&Xs(o,S)}else{const S=s.contentHooks;null!==S&&Mo(o,S,1),_d(o,1)}!function cD(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Wr(~d);else{const p=d,_=a[++c],E=a[++c];cg(_,p),E(2,o[p])}}}finally{Wr(-1)}}(s,o);const E=s.components;null!==E&&function Xg(s,o){for(let a=0;a<o.length;a++)AM(s,o[a])}(o,E);const b=s.viewQuery;if(null!==b&&um(2,b,c),_){const S=s.viewCheckHooks;null!==S&&Xs(o,S)}else{const S=s.viewHooks;null!==S&&Mo(o,S,2),_d(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,In(o[3],-1))}finally{Qs()}}}function tm(s,o,a,c,d){const p=Jn(),_=2&c;try{Wr(-1),_&&o.length>22&&tE(s,o,22,!1),a(c,d)}finally{Wr(p)}}function rm(s,o,a){!ns()||(function Fs(s,o,a,c){const d=a.directiveStart,p=a.directiveEnd;s.firstCreatePass||no(a,o),Pr(c,o);const _=a.initialInputs;for(let E=d;E<p;E++){const b=s.data[E],S=Er(b);S&&am(o,a,b);const R=is(o,s,E,a);Pr(R,o),null!==_&&vD(0,E-d,R,b,0,_),S&&(Wt(a.index,o)[8]=R)}}(s,o,a,Rr(a,o)),128==(128&a.flags)&&function zf(s,o,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,_=function Hc(){return St.lFrame.currentDirectiveIndex}();try{Wr(p);for(let E=c;E<d;E++){const b=s.data[E],S=o[E];bu(E),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&_E(b,S)}}finally{Wr(-1),bu(_)}}(s,o,a))}function im(s,o,a=Rr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],E=-1===_?a(o,s):s[_];s[d++]=E}}}function Cl(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=gE(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function gE(s,o,a,c,d,p,_,E,b,S){const R=22+c,k=R+d,G=function lD(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:Ut);return a}(R,k),te="function"==typeof S?S():S;return G[1]={type:s,blueprint:G,template:a,queries:null,viewQuery:E,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:te,incompleteFirstPass:!1}}function hD(s,o,a,c){const d=mo(o);null===a?d.push(c):(d.push(a),s.firstCreatePass&&IE(s).push(c,d.length-1))}function sm(s,o,a){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,d):a[c]=[o,d]}return a}function O_(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,_=[];let E=null,b=null;for(let S=o.directiveStart;S<c;S++){const R=d[S],k=R.inputs,G=null===p||Y0(o)?null:wD(k,p);_.push(G),E=sm(k,S,E),b=sm(R.outputs,S,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=b}function fD(s,o){const a=Wt(o,s);16&a[2]||(a[2]|=32)}function N_(s,o,a,c){let d=!1;if(ns()){const p=function mD(s,o,a){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const _=c[p];UC(a,_.selectors,!1)&&(d||(d=[]),Ts(no(a,o),s,_.type),Er(_)?(vE(s,a),d.unshift(_)):d.push(_))}return d}(s,o,a),_=null===c?null:{"":-1};if(null!==p){d=!0,go(a,s.data.length,p.length);for(let R=0;R<p.length;R++){const k=p[R];k.providersResolver&&k.providersResolver(k)}let E=!1,b=!1,S=ih(s,o,p.length,null);for(let R=0;R<p.length;R++){const k=p[R];a.mergedAttrs=ma(a.mergedAttrs,k.hostAttrs),_D(s,a,o,S,k),qi(S,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const G=k.type.prototype;!E&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!b&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),b=!0),S++}O_(s,a)}_&&function yD(s,o,a){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Ie(-301,!1);c.push(o[d],p)}}}(a,c,_)}return a.mergedAttrs=ma(a.mergedAttrs,a.attrs),d}function mE(s,o,a,c,d,p){const _=p.hostBindings;if(_){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function yE(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(c,d,_)}}function _E(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function vE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function qi(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;Er(o)&&(a[""]=s)}}function go(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function _D(s,o,a,c,d){s.data[c]=d;const p=d.factory||(d.factory=ki(d.type)),_=new Ds(p,Er(d),Ju);s.blueprint[c]=_,a[c]=_,mE(s,o,0,c,ih(s,a,d.hostVars,Ut),d)}function am(s,o,a){const c=Rr(o,s),d=Cl(a),p=s[10],_=k_(s,M_(s,d,null,a.onPush?32:16,c,o,p,p.createRenderer(c,a),null,null,null));s[o.index]=_}function Qo(s,o,a,c,d,p){const _=Rr(s,o);!function P_(s,o,a,c,d,p,_){if(null==p)s.removeAttribute(o,d,a);else{const E=null==_?ge(p):_(p,c||"",d);s.setAttribute(o,d,E,a)}}(o[11],_,p,s.value,a,c,d)}function vD(s,o,a,c,d,p){const _=p[o];if(null!==_){const E=c.setInput;for(let b=0;b<_.length;){const S=_[b++],R=_[b++],k=_[b++];null!==E?c.setInput(a,k,S,R):a[R]=k}}}function wD(s,o){let a=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return a}function ED(s,o,a,c){return new Array(s,!0,!1,o,null,0,c,a,null,null)}function AM(s,o){const a=Wt(o,s);if(Ks(a)){const c=a[1];48&a[2]?bl(c,a,c.template,a[8]):a[5]>0&&wE(a)}}function wE(s){for(let c=$g(s);null!==c;c=Hg(c))for(let d=10;d<c.length;d++){const p=c[d];if(Ks(p))if(512&p[2]){const _=p[1];bl(_,p,_.template,p[8])}else p[5]>0&&wE(p)}const a=s[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Wt(a[c],s);Ks(d)&&d[5]>0&&wE(d)}}function xM(s,o){const a=Wt(o,s),c=a[1];(function MM(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),em(c,a,a[8])}function k_(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function EE(s){for(;s;){s[2]|=32;const o=Yd(s);if(rf(s)&&!o)return s;s=o}return null}function Ti(s,o,a,c=!0){const d=o[10];d.begin&&d.begin();try{bl(s,o,s.template,a)}catch(_){throw c&&bE(o,_),_}finally{d.end&&d.end()}}function um(s,o,a){ga(0),o(s,a)}function mo(s){return s[7]||(s[7]=[])}function IE(s){return s.cleanup||(s.cleanup=[])}function bE(s,o){const a=s[9],c=a?a.get(Pf,null):null;c&&c.handleError(o)}function L_(s,o,a,c,d){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],b=o[_],S=s.data[_];null!==S.setInput?S.setInput(b,d,c,E):b[E]=d}}function Wa(s,o,a){const c=ti(o,s);!function L0(s,o,a){s.setValue(o,a)}(s[11],c,a)}function rc(s,o,a){let c=a?s.styles:null,d=a?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?p=E:1==p?d=ae(d,E):2==p&&(c=ae(c,E+": "+o[++_]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=d:s.classesWithoutHost=d}function cm(s,o,a,c,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(Dn(p)),Mr(p))for(let E=10;E<p.length;E++){const b=p[E],S=b[1].firstChild;null!==S&&cm(b[1],b,S,c)}const _=a.type;if(8&_)cm(s,o,a.child,c);else if(32&_){const E=s_(a,o);let b;for(;b=E();)c.push(b)}else if(16&_){const E=f_(o,a);if(Array.isArray(E))c.push(...E);else{const b=Yd(o[16]);cm(b[1],b,E,c,!0)}}a=d?a.projectionNext:a.next}return c}class Ls{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return cm(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Mr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(c_(o,c),Nn(a,c))}this._attachedToViewContainer=!1}Lf(this._lView[1],this._lView)}onDestroy(o){hD(this._lView[1],this._lView,null,o)}markForCheck(){EE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ti(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function U0(s,o){ml(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=o}}class CE extends Ls{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Ti(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Fr extends ja{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Q(o);return new ah(a,this.ngModule)}}function Za(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class lm{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){const d=this.injector.get(o,wt,c);return d!==wt||a===wt?d:this.parentInjector.get(o,a,c)}}class ah extends Hd{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function jC(s){return s.map(X0).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Za(this.componentDef.inputs)}get outputs(){return Za(this.componentDef.outputs)}create(o,a,c,d){let p=(d=d||this.ngModule)instanceof br?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new lm(o,p):o,E=_.get(A,null);if(null===E)throw new Ie(407,!1);const b=_.get(le,null),S=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",k=c?function dD(s,o,a){return s.selectRootElement(o,a===ct.ShadowDom)}(S,c,this.componentDef.encapsulation):Gg(E.createRenderer(null,this.componentDef),R,function ID(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),G=this.componentDef.onPush?288:272,te=gE(0,null,null,1,0,null,null,null,null,null),ve=M_(null,te,null,G,null,null,E,S,b,_,null);let ke,ze;Du(ve);try{const st=function SE(s,o,a,c,d,p){const _=a[1];a[22]=s;const b=nh(_,22,2,"#host",null),S=b.mergedAttrs=o.hostAttrs;null!==S&&(rc(b,S,!0),null!==s&&(No(d,s,S),null!==b.classes&&Bf(d,s,b.classes),null!==b.styles&&yl(d,s,b.styles)));const R=c.createRenderer(s,o),k=M_(a,Cl(o),null,o.onPush?32:16,a[22],b,c,R,p||null,null,null);return _.firstCreatePass&&(Ts(no(b,a),_,o.type),vE(_,b),go(b,a.length,1)),k_(a,k),a[22]=k}(k,this.componentDef,ve,E,S);if(k)if(c)No(S,k,["ng-version",Je.full]);else{const{attrs:vt,classes:Me}=function $C(s){const o=[],a=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&a.push(p);else{if(!Ps(d))break;d=p}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);vt&&No(S,k,vt),Me&&Me.length>0&&Bf(S,k,Me.join(" "))}if(ze=Zs(te,22),void 0!==a){const vt=ze.projection=[];for(let Me=0;Me<this.ngContentSelectors.length;Me++){const At=a[Me];vt.push(null!=At?Array.from(At):null)}}ke=function AE(s,o,a,c){const d=a[1],p=function gD(s,o,a){const c=Tn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),_D(s,c,o,ih(s,o,1,null),a),O_(s,c));const d=is(o,s,c.directiveStart,c);Pr(d,o);const p=Rr(c,o);return p&&Pr(p,o),d}(d,a,o);if(s[8]=a[8]=p,null!==c)for(const E of c)E(p,o);if(o.contentQueries){const E=Tn();o.contentQueries(1,p,E.directiveStart)}const _=Tn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Wr(_.index),mE(a[1],_,0,_.directiveStart,_.directiveEnd,o),_E(o,p)),p}(st,this.componentDef,ve,[xE]),em(te,ve,null)}finally{Qs()}return new TE(this.componentType,ke,y(ze,ve),ve,ze)}}class TE extends class Rf{}{constructor(o,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new CE(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;L_(p[1],p,d,o,a),fD(p,this._tNode.index)}}get injector(){return new io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function xE(){const s=Tn();Au(Se()[1],s)}function dm(s){let o=function qf(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;o;){let d;if(Er(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ie(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const _=s;_.inputs=hm(s.inputs),_.declaredInputs=hm(s.declaredInputs),_.outputs=hm(s.outputs);const E=d.hostBindings;E&&OE(s,E);const b=d.viewQuery,S=d.contentQueries;if(b&&RE(s,b),S&&DD(s,S),ce(s.inputs,d.inputs),ce(s.declaredInputs,d.declaredInputs),ce(s.outputs,d.outputs),Er(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(s),E===dm&&(a=!1)}}o=Object.getPrototypeOf(o)}!function ME(s){let o=0,a=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=ma(d.hostAttrs,a=ma(a,d.hostAttrs))}}(c)}function hm(s){return s===Gr?{}:s===xt?[]:s}function RE(s,o){const a=s.viewQuery;s.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function DD(s,o){const a=s.contentQueries;s.contentQueries=a?(c,d,p)=>{o(c,d,p),a(c,d,p)}:o}function OE(s,o){const a=s.hostBindings;s.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}let uh=null;function ic(){if(!uh){const s=rn.Symbol;if(s&&s.iterator)uh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(uh=c)}}}return uh}function ch(s){return!!pm(s)&&(Array.isArray(s)||!(s instanceof Map)&&ic()in s)}function pm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function yo(s,o,a){return s[o]=a}function Gn(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function sc(s,o,a,c){const d=Gn(s,o,a);return Gn(s,o+1,c)||d}function Wf(s,o,a,c){const d=Se();return Gn(d,Ys(),o)&&($t(),Qo(_n(),d,s,o,a,c)),Wf}function Ka(s,o,a,c,d,p){const E=sc(s,function Li(){return St.lFrame.bindingIndex}(),a,d);return rs(2),E?o+ge(a)+c+ge(d)+p:Ut}function Jf(s,o,a,c,d,p,_,E){const b=Se(),S=$t(),R=s+22,k=S.firstCreatePass?function Qf(s,o,a,c,d,p,_,E,b){const S=o.consts,R=nh(o,s,4,_||null,yi(S,E));N_(o,a,R,yi(S,b)),Au(o,R);const k=R.tViews=gE(2,R,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),k.queries=o.queries.embeddedTView(R)),R}(R,S,b,o,a,c,d,p,_):S.data[R];ni(k,!1);const G=b[11].createComment("");Vf(S,b,G,k),Pr(G,b),k_(b,b[R]=ED(G,b,G,k)),Nc(k)&&rm(S,b,k),null!=_&&im(b,k,E)}function ep(s,o,a){const c=Se();return Gn(c,Ys(),o)&&function ks(s,o,a,c,d,p,_,E){const b=Rr(o,a);let R,S=o.inputs;!E&&null!=S&&(R=S[c])?(L_(s,a,R,c,d),oa(o)&&fD(a,o.index)):3&o.type&&(c=function om(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=_?_(d,o.value||"",c):d,p.setProperty(b,c,d))}($t(),_n(),c,s,o,c[11],a,!1),ep}function gm(s,o,a,c,d){const _=d?"class":"style";L_(s,a,o.inputs[_],_,c)}function tp(s,o,a,c){const d=Se(),p=$t(),_=22+s,E=d[11],b=d[_]=Gg(E,o,function Su(){return St.lFrame.currentNamespace}()),S=p.firstCreatePass?function H_(s,o,a,c,d,p,_){const E=o.consts,S=nh(o,s,2,d,yi(E,p));return N_(o,a,S,yi(E,_)),null!==S.attrs&&rc(S,S.attrs,!1),null!==S.mergedAttrs&&rc(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(_,p,d,0,o,a,c):p.data[_];ni(S,!0);const R=S.mergedAttrs;null!==R&&No(E,b,R);const k=S.classes;null!==k&&Bf(E,b,k);const G=S.styles;return null!==G&&yl(E,b,G),64!=(64&S.flags)&&Vf(p,d,b,S),0===function _u(){return St.lFrame.elementDepthCount}()&&Pr(b,d),function vu(){St.lFrame.elementDepthCount++}(),Nc(S)&&(rm(p,d,S),function nm(s,o,a){if(uu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,S,d)),null!==c&&im(d,S),tp}function Sl(){let s=Tn();la()?function da(){St.lFrame.isParent=!1}():(s=s.parent,ni(s,!1));const o=s;!function Vc(){St.lFrame.elementDepthCount--}();const a=$t();return a.firstCreatePass&&(Au(a,s),uu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ru(s){return 0!=(16&s.flags)}(o)&&gm(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function wd(s){return 0!=(32&s.flags)}(o)&&gm(a,o,Se(),o.stylesWithoutHost,!1),Sl}function mm(s,o,a,c){return tp(s,o,a,c),Sl(),mm}function OD(){return Se()}function G_(s){return!!s&&"function"==typeof s.then}function ND(s){return!!s&&"function"==typeof s.subscribe}const np=ND;function Al(s,o,a,c){const d=Se(),p=$t(),_=Tn();return function jE(s,o,a,c,d,p,_,E){const b=Nc(c),R=s.firstCreatePass&&IE(s),k=o[8],G=mo(o);let te=!0;if(3&c.type||E){const ze=Rr(c,o),st=E?E(ze):ze,vt=G.length,Me=E?un=>E(Dn(un[c.index])):c.index;let At=null;if(!E&&b&&(At=function _m(s,o,a,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===c){const E=o[7],b=d[p+2];return E.length>b?E[b]:null}"string"==typeof _&&(p+=2)}return null}(s,o,d,c.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=p,At.__ngLastListenerFn__=p,te=!1;else{p=ip(c,o,k,p,!1);const un=a.listen(st,d,p);G.push(p,un),R&&R.push(d,Me,vt,vt+1)}}else p=ip(c,o,k,p,!1);const ve=c.outputs;let ke;if(te&&null!==ve&&(ke=ve[d])){const ze=ke.length;if(ze)for(let st=0;st<ze;st+=2){const gn=o[ke[st]][ke[st+1]].subscribe(p),cs=G.length;G.push(p,gn),R&&R.push(d,c.index,cs,-(cs+1))}}}(p,d,d[11],_,s,o,0,c),Al}function vm(s,o,a,c){try{return!1!==a(c)}catch(d){return bE(s,d),!1}}function ip(s,o,a,c,d){return function p(_){if(_===Function)return c;EE(2&s.flags?Wt(s.index,o):o);let b=vm(o,0,c,_),S=p.__ngNextListenerFn__;for(;S;)b=vm(o,0,S,_)&&b,S=S.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function $E(s=1){return function Js(s){return(St.lFrame.contextLView=function Tu(s,o){for(;s>0;)o=o[15],s--;return o}(s,St.lFrame.contextLView))[8]}(s)}function ph(s,o,a,c,d){const p=s[a+1],_=null===o;let E=c?Yo(p):Xu(p),b=!1;for(;0!==E&&(!1===b||_);){const R=s[E+1];K_(s[E],o)&&(b=!0,s[E+1]=c?T_(R):lE(R)),E=c?Yo(R):Xu(R)}b&&(s[a+1]=c?lE(p):T_(p))}function K_(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ms(s,o)>=0}function ev(s,o){return function wo(s,o,a,c){const d=Se(),p=$t(),_=rs(2);p.firstUpdatePass&&function tv(s,o,a,c){const d=s.data;if(null===d[a+1]){const p=d[Jn()],_=function KE(s,o){return o>=s.expandoStartIndex}(s,a);(function ov(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!_&&(o=!1),o=function nv(s,o,a,c){const d=function pa(s){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=op(a=gh(null,s,o,a,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==d)if(a=gh(d,s,o,a,c),null===p){let b=function GD(s,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Xu(c))return s[Yo(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=gh(null,s,o,b[1],c),b=op(b,o.attrs,c),function YE(s,o,a,c){s[Yo(a?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else p=function zD(s,o,a){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=op(c,s[p].hostAttrs,a);return op(c,o.attrs,a)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,c),function OM(s,o,a,c,d,p){let _=p?o.classBindings:o.styleBindings,E=Yo(_),b=Xu(_);s[c]=a;let R,S=!1;if(Array.isArray(a)){const k=a;R=k[1],(null===R||Ms(k,R)>0)&&(S=!0)}else R=a;if(d)if(0!==b){const G=Yo(s[E+1]);s[c+1]=C_(G,E),0!==G&&(s[G+1]=po(s[G+1],c)),s[E+1]=function dM(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=C_(E,0),0!==E&&(s[E+1]=po(s[E+1],c)),E=c;else s[c+1]=C_(b,0),0===E?E=c:s[b+1]=po(s[b+1],c),b=c;S&&(s[c+1]=lE(s[c+1])),ph(s,R,c,!0),ph(s,R,c,!1),function VD(s,o,a,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ms(p,o)>=0&&(a[c+1]=T_(a[c+1]))}(o,R,s,c,p),_=C_(E,b),p?o.classBindings=_:o.styleBindings=_}(d,p,o,a,_,c)}}(p,s,_,c),o!==Ut&&Gn(d,_,o)&&function sv(s,o,a,c,d,p,_,E){if(!(3&o.type))return;const b=s.data,S=b[E+1];mh(function D_(s){return 1==(1&s)}(S)?JE(b,o,a,d,Xu(S),_):void 0)||(mh(p)||function cE(s){return 2==(2&s)}(S)&&(p=JE(b,null,a,d,E,_)),function K0(s,o,a,c,d){if(o)d?s.addClass(a,c):s.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:Zo.DashCase;null==d?s.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Zo.Important),s.setStyle(a,c,d,p))}}(c,_,ti(Jn(),a),d,p))}(p,p.data[Jn()],d,d[11],s,d[_+1]=function qD(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=oe(Gi(s)))),s}(o,a),c,_)}(s,o,null,!0),ev}function gh(s,o,a,c,d){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=o[E],c=op(c,p.hostAttrs,d),p!==s);)E++;return null!==s&&(a.directiveStylingLast=E),c}function op(s,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ke(s,_,!!a||o[++p]))}return void 0===s?null:s}function JE(s,o,a,c,d,p){const _=null===o;let E;for(;d>0;){const b=s[d],S=Array.isArray(b),R=S?b[1]:b,k=null===R;let G=a[d+1];G===Ut&&(G=k?xt:void 0);let te=k?Sa(G,c):R===c?G:void 0;if(S&&!mh(te)&&(te=Sa(b,c)),mh(te)&&(E=te,_))return E;const ve=s[d+1];d=_?Yo(ve):Xu(ve)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(E=Sa(b,c))}return E}function mh(s){return void 0!==s}function XE(s,o=""){const a=Se(),c=$t(),d=s+22,p=c.firstCreatePass?nh(c,d,1,o,null):c.data[d],_=a[d]=function a_(s,o){return s.createText(o)}(a[11],o);Vf(c,a,_,p),ni(p,!1)}function ap(s){return Im("",s,""),ap}function Im(s,o,a){const c=Se(),d=function oc(s,o,a,c){return Gn(s,Ys(),a)?o+ge(a)+c:Ut}(c,s,o,a);return d!==Ut&&Wa(c,Jn(),d),Im}function av(s,o,a,c,d){const p=Se(),_=Ka(p,s,o,a,c,d);return _!==Ut&&Wa(p,Jn(),_),av}const yh=void 0;var cT=["en",[["a","p"],["AM","PM"],yh],[["AM","PM"],yh,yh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yh,"{1} 'at' {0}",yh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function LM(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let _h={};function pv(s){const o=function dI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Eo(o);if(a)return a;const c=o.split("-")[0];if(a=Eo(c),a)return a;if("en"===c)return cT;throw new Ie(701,!1)}function Rl(s){return pv(s)[Ct.PluralCase]}function Eo(s){return s in _h||(_h[s]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[s]),_h[s]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const vh="en-US";let gv=vh;function yr(s,o,a,c,d){if(s=Y(s),Array.isArray(s))for(let p=0;p<s.length;p++)yr(s[p],o,a,c,d);else{const p=$t(),_=Se();let E=Di(s)?s:Y(s.provide),b=pl(s);const S=Tn(),R=1048575&S.providerIndexes,k=S.directiveStart,G=S.providerIndexes>>20;if(Di(s)||!s.multi){const te=new Ds(b,d,Ju),ve=mp(E,o,d?R:R+G,k);-1===ve?(Ts(no(S,_),p,E),Dr(p,s,o.length),o.push(E),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(te),_.push(te)):(a[ve]=te,_[ve]=te)}else{const te=mp(E,o,R+G,k),ve=mp(E,o,R,R+G),ke=te>=0&&a[te],ze=ve>=0&&a[ve];if(d&&!ze||!d&&!ke){Ts(no(S,_),p,E);const st=function ST(s,o,a,c,d){const p=new Ds(s,a,Ju);return p.multi=[],p.index=o,p.componentProviders=0,gp(p,d,c&&!a),p}(d?TT:DT,a.length,d,c,b);!d&&ze&&(a[ve].providerFactory=st),Dr(p,s,o.length,0),o.push(E),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(st),_.push(st)}else Dr(p,s,te>-1?te:ve,gp(a[d?ve:te],b,!d&&c));!d&&c&&ze&&a[ve].componentProviders++}}}function Dr(s,o,a,c){const d=Di(o),p=function Rg(s){return!!s.useClass}(o);if(d||p){const b=(p?Y(o.useClass):o).prototype.ngOnDestroy;if(b){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=S.indexOf(a);-1===R?S.push(a,[c,b]):S[R+1].push(c,b)}else S.push(a,b)}}}function gp(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function mp(s,o,a,c){for(let d=a;d<c;d++)if(o[d]===s)return d;return-1}function DT(s,o,a,c){return Nm(this.multi,[])}function TT(s,o,a,c){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=is(a,a[1],this.providerFactory.index,c);p=E.slice(0,_),Nm(d,p);for(let b=_;b<E.length;b++)p.push(E[b])}else p=[],Nm(d,p);return p}function Nm(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function DI(s,o=[]){return a=>{a.providersResolver=(c,d)=>function Fv(s,o,a){const c=$t();if(c.firstCreatePass){const d=Er(s);yr(a,c.data,c.blueprint,d,!0),yr(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class kl{}class Pm{}function AT(s,o){return new Lv(s,o??null)}class Lv extends kl{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Fr(this);const c=dn(o);this._bootstrapComponents=Ga(c.bootstrap),this._r3Injector=rE(o,a,[{provide:kl,useValue:this},{provide:ja,useValue:this.componentFactoryResolver}],oe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Vv extends Pm{constructor(o){super(),this.moduleType=o}create(o){return new Lv(this.moduleType,o)}}class km extends kl{constructor(o,a,c){super(),this.componentFactoryResolver=new Fr(this),this.instance=null;const d=new $d([...o,{provide:kl,useValue:this},{provide:ja,useValue:this.componentFactoryResolver}],a||jd(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function yp(s,o,a=null){return new km(s,o,a).injector}let Uv=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Vd(0,a.type),d=c.length>0?yp([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Yt({token:s,providedIn:"environment",factory:()=>new s(F(br))}),s})();function Bv(s){s.getStandaloneInjector=o=>o.get(Uv).getOrCreateStandaloneInjector(s)}function zv(s,o,a){const c=Sn()+s,d=Se();return d[c]===Ut?yo(d,c,a?o.call(a):o()):function Cr(s,o){return s[o]}(d,c)}function Sh(s,o,a,c){return wp(Se(),Sn(),s,o,a,c)}function _p(s,o,a,c,d){return Ah(Se(),Sn(),s,o,a,c,d)}function Fl(s,o){const a=s[o];return a===Ut?void 0:a}function wp(s,o,a,c,d,p){const _=o+a;return Gn(s,_,d)?yo(s,_+1,p?c.call(p,d):c(d)):Fl(s,_+1)}function Ah(s,o,a,c,d,p,_){const E=o+a;return sc(s,E,d,p)?yo(s,E+2,_?c.call(_,d,p):c(d,p)):Fl(s,E+2)}function NI(s,o,a,c,d,p,_,E,b){const S=o+a;return function _o(s,o,a,c,d,p){const _=sc(s,o,a,c);return sc(s,o+2,d,p)||_}(s,S,d,p,_,E)?yo(s,S+4,b?c.call(b,d,p,_,E):c(d,p,_,E)):Fl(s,S+4)}function Ep(s,o){const a=$t();let c;const d=s+22;a.firstCreatePass?(c=function Yv(s,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(s===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const p=c.factory||(c.factory=ki(c.type)),_=Zn(Ju);try{const E=va(!1),b=p();return va(E),function hh(s,o,a,c){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=c}(a,Se(),d,b),b}finally{Zn(_)}}function Qv(s,o,a){const c=s+22,d=Se(),p=ts(d,c);return dc(d,c)?wp(d,Sn(),o,p.transform,a,p):p.transform(a)}function Jv(s,o,a,c){const d=s+22,p=Se(),_=ts(p,d);return dc(p,d)?Ah(p,Sn(),o,_.transform,a,c,_):_.transform(a,c)}function xh(s,o,a,c,d,p){const _=s+22,E=Se(),b=ts(E,_);return dc(E,_)?NI(E,Sn(),o,b.transform,a,c,d,p,b):b.transform(a,c,d,p)}function dc(s,o){return s[1].data[o].pure}function Qa(s){return o=>{setTimeout(s,void 0,o)}}const Bs=class Ip extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,p=a||(()=>null),_=c;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),p=b.error?.bind(b),_=b.complete?.bind(b)}this.__isAsync&&(p=Qa(p),d&&(d=Qa(d)),_&&(_=Qa(_)));const E=super.subscribe({next:d,error:p,complete:_});return o instanceof ee.w0&&o.add(E),E}};function PT(){return this._results[ic()]()}class Xv{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ic(),c=Xv.prototype;c[a]||(c[a]=PT)}get changes(){return this._changes||(this._changes=new Bs)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=vn(o);(this._changesDetected=!function Ir(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Mh=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ll,s})();const kI=Mh,kT=class extends kI{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,d=M_(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(c)),em(c,d,o),new Ls(d)}};function Ll(){return js(Tn(),Se())}function js(s,o){return 4&s.type?new kT(o,s,y(s,o)):null}let Vl=(()=>{class s{}return s.__NG_ELEMENT_ID__=Bm,s})();function Bm(){return Rh(Tn(),Se())}const FI=Vl,xn=class extends FI{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new io(this._hostTNode,this._hostLView)}get parentInjector(){const o=ku(this._hostTNode,this._hostLView);if(Id(o)){const a=_a(o,this._hostLView),c=ur(o);return new io(a[1].data[c+8],a)}return new io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=bp(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const _=o.createEmbeddedView(a||{},p);return this.insert(_,d),_}createComponent(o,a,c,d,p){const _=o&&!function vi(s){return"function"==typeof s}(o);let E;if(_)E=a;else{const k=a||{};E=k.index,c=k.injector,d=k.projectableNodes,p=k.environmentInjector||k.ngModuleRef}const b=_?o:new ah(Q(o)),S=c||this.parentInjector;if(!p&&null==b.ngModule){const G=(_?S:this.parentInjector).get(br,null);G&&(p=G)}const R=b.create(S,d,void 0,p);return this.insert(R.hostView,E),R}insert(o,a){const c=o._lView,d=c[1];if(function gu(s){return Mr(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const k=c[3],G=new xn(k,k[6],k[3]);G.detach(G.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function MC(s,o,a,c){const d=10+c,p=a.length;c>0&&(a[d-1][4]=o),c<p-10?(o[4]=a[d],Da(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function RC(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(d,c,_,p);const E=W0(p,_),b=c[11],S=qg(b,_[7]);return null!==S&&function V0(s,o,a,c,d,p){c[0]=d,c[6]=o,ml(s,c,a,1,d,p)}(d,_[6],b,c,S,E),o.attachToViewContainerRef(),Da(Ul(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=bp(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=c_(this._lContainer,a);c&&(Nn(Ul(this._lContainer),a),Lf(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=c_(this._lContainer,a);return c&&null!=Nn(Ul(this._lContainer),a)?new Ls(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function bp(s){return s[8]}function Ul(s){return s[8]||(s[8]=[])}function Rh(s,o){let a;const c=o[s.index];if(Mr(c))a=c;else{let d;if(8&s.type)d=Dn(c);else{const p=o[11];d=p.createComment("");const _=Rr(s,o);Ko(p,qg(p,_),d,function z0(s,o){return s.nextSibling(o)}(p,_),!1)}o[s.index]=a=ED(c,o,d,s),k_(o,a)}return new xn(a,s,o)}class ew{constructor(o){this.queryList=o,this.matches=null}clone(){return new ew(this.queryList)}setDirty(){this.queryList.setDirty()}}class tw{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new tw(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==$m(o,a).matches&&this.queries[a].setDirty()}}class VI{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class Bl{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new Bl(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Xo{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Xo(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,a,UI(a,p)),this.matchTNodeWithReadOption(o,a,Po(a,o,p,!1,!1))}else c===Mh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Po(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===f||d===Vl||d===Mh&&4&a.type)this.addMatch(a.index,-2);else{const p=Po(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function UI(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function jI(s,o,a,c){return-1===a?function BI(s,o){return 11&s.type?y(s,o):4&s.type?js(s,o):null}(o,s):-2===a?function Oh(s,o,a){return a===f?y(o,s):a===Mh?js(o,s):a===Vl?Rh(o,s):void 0}(s,o,c):is(s,s[1],a,o)}function $I(s,o,a,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,_=a.matches,E=[];for(let b=0;b<_.length;b+=2){const S=_[b];E.push(S<0?null:jI(o,p[S],_[b+1],a.metadata.read))}d.matches=E}return d.matches}function nw(s,o,a,c){const d=s.queries.getByIndex(a),p=d.matches;if(null!==p){const _=$I(s,o,d,a);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)c.push(_[E/2]);else{const S=p[E+1],R=o[-b];for(let k=10;k<R.length;k++){const G=R[k];G[17]===G[3]&&nw(G[1],G,S,c)}if(null!==R[9]){const k=R[9];for(let G=0;G<k.length;G++){const te=k[G];nw(te[1],te,S,c)}}}}}return c}function rw(s){const o=Se(),a=$t(),c=Gc();ga(c+1);const d=$m(a,c);if(s.dirty&&function pu(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?nw(a,o,c,[]):$I(a,o,d,c);s.reset(p,g),s.notifyOnChanges()}return!0}return!1}function iw(s,o,a,c){const d=$t();if(d.firstCreatePass){const p=Tn();(function aw(s,o,a){null===s.queries&&(s.queries=new Bl),s.queries.track(new Xo(o,a))})(d,new VI(o,a,c),p.index),function HI(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function jm(s,o,a){const c=new Xv(4==(4&a));hD(s,o,c,c.destroy),null===o[19]&&(o[19]=new tw),o[19].queries.push(new ew(c))}(d,Se(),a)}function sw(){return function ow(s,o){return s[19].queries[o].queryList}(Se(),Gc())}function $m(s,o){return s.queries.getByIndex(o)}function Op(...s){}const Hl=new fn("Application Initializer");let Co=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Op,this.reject=Op,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(G_(p))a.push(p);else if(np(p)){const _=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(F(Hl,8))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Zm=new fn("AppId",{providedIn:"root",factory:function rb(){return`${zn()}${zn()}${zn()}`}});function zn(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hc=new fn("Platform Initializer"),ww=new fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),it=new fn("appBootstrapListener");let qe=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const xe=new fn("LocaleId",{providedIn:"root",factory:()=>X(xe,Ze.Optional|Ze.SkipSelf)||function de(){return typeof $localize<"u"&&$localize.locale||vh}()}),Tr=new fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class WT{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let ZT=(()=>{class s{compileModuleSync(a){return new Vv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Ga(dn(a).declarations).reduce((_,E)=>{const b=Q(E);return b&&_.push(new ah(b)),_},[]);return new WT(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Fh=(()=>Promise.resolve(0))();function Km(s){typeof Zone>"u"?Fh.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class dt{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bs(!1),this.onMicrotaskEmpty=new Bs(!1),this.onStable=new Bs(!1),this.onError=new Bs(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Vn(){let s=rn.requestAnimationFrame,o=rn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function nr(s){const o=()=>{!function eS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(rn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Ge(s),s.isCheckStableRunning=!0,Jt(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Ge(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,_,E)=>{try{return Pp(s),a.invokeTask(d,p,_,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Ym(s)}},onInvoke:(a,c,d,p,_,E,b)=>{try{return Pp(s),a.invoke(d,p,_,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),Ym(s)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Ge(s),Jt(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!dt.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(dt.isInAngularZone())throw new Ie(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,Np,Op,Op);try{return p.runTask(_,a,c)}finally{p.cancelTask(_)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const Np={};function Jt(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Ge(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Pp(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Ym(s){s._nesting--,Jt(s)}class Gl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bs,this.onMicrotaskEmpty=new Bs,this.onStable=new Bs,this.onError=new Bs}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const sb=new fn(""),kp=new fn("");let Qm,tS=(()=>{class s{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qm||(function ob(s){Qm=s}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{dt.assertNotInAngularZone(),Km(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Km(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(F(dt),F(Lh),F(kp))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})(),Lh=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Qm?.findTestabilityInTree(this,a,c)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),_r=null;const Jm=new fn("AllowMultipleToken"),Xm=new fn("PlatformDestroyListeners");class ey{constructor(o,a){this.name=o,this.token=a}}function ub(s,o,a=[]){const c=`Platform: ${o}`,d=new fn(c);return(p=[])=>{let _=Iw();if(!_||_.injector.get(Jm,!1)){const E=[...a,...p,{provide:d,useValue:!0}];s?s(E):function Do(s){if(_r&&!_r.get(Jm,!1))throw new Ie(400,!1);_r=s;const o=s.get(lb);(function Vh(s){const o=s.get(hc,null);o&&o.forEach(a=>a())})(s)}(function Ew(s=[],o){return za.create({name:o,providers:[{provide:Wu,useValue:"platform"},{provide:Xm,useValue:new Set([()=>_r=null])},...s]})}(E,c))}return function ql(s){const o=Iw();if(!o)throw new Ie(401,!1);return o}()}}function Iw(){return _r?.get(lb)??null}let lb=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function bw(s,o){let a;return a="noop"===s?new Gl:("zone.js"===s?void 0:s)||new dt(o),a}(c?.ngZone,function Mi(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:dt,useValue:d}];return d.run(()=>{const _=za.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(_),b=E.injector.get(Pf,null);if(!b)throw new Ie(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:R=>{b.handleError(R)}});E.onDestroy(()=>{Wl(this._modules,E),S.unsubscribe()})}),function pc(s,o,a){try{const c=a();return G_(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(b,d,()=>{const S=E.injector.get(Co);return S.runInitializers(),S.donePromise.then(()=>(function Fn(s){jt(s,"Expected localeId to be defined"),"string"==typeof s&&(gv=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(xe,vh)||vh),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const d=Cw({},c);return function fc(s,o,a){const c=new Vv(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(Mn);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ie(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Xm,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(F(za))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Cw(s,o){return Array.isArray(o)?o.reduce(Cw,s):{...s,...o}}let Mn=(()=>{class s{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new N.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),_=new N.y(E=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{dt.assertNotInAngularZone(),Km(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{dt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{b.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ie.T)(p,_.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Hd;if(!this._injector.get(Co).done)throw!d&&Qt(a),new Ie(405,false);let _;_=d?a:this._injector.get(ja).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const E=function ue(s){return s.isBoundToModule}(_)?void 0:this._injector.get(kl),S=_.create(za.NULL,[],c||_.selector,E),R=S.location.nativeElement,k=S.injector.get(sb,null);return k?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),Wl(this.components,S),k?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Wl(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(it,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Wl(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ie(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(F(dt),F(br),F(Pf))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Wl(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let Dw=!0,Zl=!1;function us(){return Zl=!0,Dw}function rS(){if(Zl)throw new Error("Cannot enable prod mode after platform setup.");Dw=!1}let rr=(()=>{class s{}return s.__NG_ELEMENT_ID__=Kl,s})();function Kl(s){return function Tw(s,o,a){if(oa(s)&&!a){const c=Wt(s.index,o);return new Ls(c,c)}return 47&s.type?new Ls(o[16],o):null}(Tn(),Se(),16==(16&s))}class $h{constructor(){}supports(o){return ch(o)}create(o){return new aS(o)}}const db=(s,o)=>o;class aS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||db}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const _=!c||a&&a.currentIndex<Br(c,d,p)?a:c,E=Br(_,d,p),b=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const S=E-d,R=b-d;if(S!=R){for(let G=0;G<S;G++){const te=G<p.length?p[G]:p[G]=0,ve=te+G;R<=ve&&ve<S&&(p[G]=te+1)}p[_.previousIndex]=R-S}}E!==b&&o(_,E,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!ch(o))throw new Ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),c=!0),a=a._next}else d=0,function fm(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[ic()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new uS(a,c),p,d),o}_verifyReinsertion(o,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Aw),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Aw),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class uS{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Aw{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new hb,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Br(s,o,a){const c=s.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class xw{constructor(){}supports(o){return o instanceof Map||pm(o)}create(){return new bn}}class bn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||pm(o)))throw new Ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const c=new cS(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class cS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Mw(){return new tu([new $h])}let tu=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||Mw()),deps:[[s,new Ii,new Ht]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new Ie(901,!1)}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:Mw}),s})();function Hh(){return new Gh([new xw])}let Gh=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||Hh()),deps:[[s,new Ii,new Ht]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new Ie(901,!1)}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:Hh}),s})();const dS=ub(null,"core",[]);let hS=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(F(Mn))},s.\u0275mod=Lt({type:s}),s.\u0275inj=kt({}),s})();function fS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}const pb=!0},3942:(ut,De,P)=>{P.d(De,{Z:()=>Ie});var h=P(2090),ee=P(4859),N=P(9681),ie=P(1877);class re{constructor(ge,fe){this._delegate=ge,this.firebase=fe,(0,N._addComponent)(ge,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ge,fe=N._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(ge);return!ot.isInitialized()&&"EXPLICIT"===(null===(Xe=ot.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:fe})}_removeServiceInstance(ge,fe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(fe)}_addComponent(ge){(0,N._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,N._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ae(){const nt=function oe(nt){const ge={},fe={__esModule:!0,initializeApp:function Ae(je,j={}){const pe=N.initializeApp(je,j);if((0,h.r3)(ge,pe.name))return ge[pe.name];const q=new nt(pe,fe);return ge[pe.name]=q,q},app:ot,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function be(je){const j=je.name,pe=j.replace("-compat","");if(N._registerComponent(je)&&"PUBLIC"===je.type){const q=(J=ot())=>{if("function"!=typeof J[pe])throw ce.create("invalid-app-argument",{appName:j});return J[pe]()};void 0!==je.serviceProps&&(0,h.ZB)(q,je.serviceProps),fe[pe]=q,nt.prototype[pe]=function(...J){return this._getService.bind(this,j).apply(this,je.multipleInstances?J:[])}}return"PUBLIC"===je.type?fe[pe]:null},removeApp:function Xe(je){delete ge[je]},useAsService:function Be(je,j){return"serverAuth"===j?null:j},modularAPIs:N}};function ot(je){if(!(0,h.r3)(ge,je=je||N._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:je});return ge[je]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function _e(){return Object.keys(ge).map(je=>ge[je])}}),ot.App=nt,fe}(re);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:ae,extendNamespace:function ge(fe){(0,h.ZB)(nt,fe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),nt}(),$=new ie.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=B;!function Re(nt){(0,N.registerVersion)("@firebase/app-compat","0.1.39",nt)}()},9681:(ut,De,P)=>{P.r(De),P.d(De,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Gs,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>Kt,_addOrOverwriteComponent:()=>Yt,_apps:()=>on,_clearComponents:()=>Yi,_components:()=>mn,_getProvider:()=>kt,_registerComponent:()=>vr,_removeServiceInstance:()=>ln,deleteApp:()=>ra,getApp:()=>Qr,getApps:()=>Jr,initializeApp:()=>pi,onLog:()=>ms,registerVersion:()=>wr,setLogLevel:()=>Zn});var h=P(5861),ee=P(4859),N=P(1877),ie=P(2090),re=P(8766);class he{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function ce(tt){return"VERSION"===tt.getComponent()?.type}(et)){const bt=et.getImmediate();return`${bt.library}/${bt.version}`}return null}).filter(et=>et).join(" ")}}const oe="@firebase/app",B=new N.Yd("@firebase/app"),jt="[DEFAULT]",We={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,mn=new Map;function Kt(tt,Te){try{tt.container.addComponent(Te)}catch(et){B.debug(`Component ${Te.name} failed to register with FirebaseApp ${tt.name}`,et)}}function Yt(tt,Te){tt.container.addOrOverwriteComponent(Te)}function vr(tt){const Te=tt.name;if(mn.has(Te))return B.debug(`There were multiple attempts to register component ${Te}.`),!1;mn.set(Te,tt);for(const et of on.values())Kt(et,tt);return!0}function kt(tt,Te){const et=tt.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),tt.container.getProvider(Te)}function ln(tt,Te,et=jt){kt(tt,Te).clearInstance(et)}function Yi(){mn.clear()}const Ar=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Hr{constructor(Te,et,bt){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=bt,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}const Gs="9.14.0";function pi(tt,Te={}){let et=tt;"object"!=typeof Te&&(Te={name:Te});const bt=Object.assign({name:jt,automaticDataCollectionEnabled:!1},Te),It=bt.name;if("string"!=typeof It||!It)throw Ar.create("bad-app-name",{appName:String(It)});if(et||(et=(0,ie.aH)()),!et)throw Ar.create("no-options");const Lt=on.get(It);if(Lt){if((0,ie.vZ)(et,Lt.options)&&(0,ie.vZ)(bt,Lt.config))return Lt;throw Ar.create("duplicate-app",{appName:It})}const H=new ee.H0(It);for(const W of mn.values())H.addComponent(W);const V=new Hr(et,bt,H);return on.set(It,V),V}function Qr(tt=jt){const Te=on.get(tt);if(!Te&&tt===jt)return pi();if(!Te)throw Ar.create("no-app",{appName:tt});return Te}function Jr(){return Array.from(on.values())}function ra(tt){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,h.Z)(function*(tt){const Te=tt.name;on.has(Te)&&(on.delete(Te),yield Promise.all(tt.container.getProviders().map(et=>et.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function wr(tt,Te,et){var bt;let It=null!==(bt=We[tt])&&void 0!==bt?bt:tt;et&&(It+=`-${et}`);const Lt=It.match(/\s|\//),H=Te.match(/\s|\//);if(Lt||H){const V=[`Unable to register library "${It}" with version "${Te}":`];return Lt&&V.push(`library name "${It}" contains illegal characters (whitespace or "/")`),Lt&&H&&V.push("and"),H&&V.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void B.warn(V.join(" "))}vr(new ee.wA(`${It}-version`,()=>({library:It,version:Te}),"VERSION"))}function ms(tt,Te){if(null!==tt&&"function"!=typeof tt)throw Ar.create("invalid-log-argument");(0,N.Am)(tt,Te)}function Zn(tt){(0,N.Ub)(tt)}const Rn="firebase-heartbeat-store";let Un=null;function hn(){return Un||(Un=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(tt,Te)=>{0===Te&&tt.createObjectStore(Rn)}}).catch(tt=>{throw Ar.create("idb-open",{originalErrorMessage:tt.message})})),Un}function ct(){return(ct=(0,h.Z)(function*(tt){var Te;try{return(yield hn()).transaction(Rn).objectStore(Rn).get(Bn(tt))}catch(et){if(et instanceof ie.ZR)B.warn(et.message);else{const bt=Ar.create("idb-get",{originalErrorMessage:null===(Te=et)||void 0===Te?void 0:Te.message});B.warn(bt.message)}}})).apply(this,arguments)}function rn(tt,Te){return fr.apply(this,arguments)}function fr(){return(fr=(0,h.Z)(function*(tt,Te){var et;try{const It=(yield hn()).transaction(Rn,"readwrite");return yield It.objectStore(Rn).put(Te,Bn(tt)),It.done}catch(bt){if(bt instanceof ie.ZR)B.warn(bt.message);else{const It=Ar.create("idb-set",{originalErrorMessage:null===(et=bt)||void 0===et?void 0:et.message});B.warn(It.message)}}})).apply(this,arguments)}function Bn(tt){return`${tt.name}!${tt.options.appId}`}class ys{constructor(Te){this.container=Te,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new tn(et),this._heartbeatsCachePromise=this._storage.read().then(bt=>(this._heartbeatsCache=bt,bt))}triggerHeartbeat(){var Te=this;return(0,h.Z)(function*(){const bt=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=en();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==It&&!Te._heartbeatsCache.heartbeats.some(Lt=>Lt.date===It))return Te._heartbeatsCache.heartbeats.push({date:It,agent:bt}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Lt=>{const H=new Date(Lt.date).valueOf();return Date.now()-H<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,h.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const et=en(),{heartbeatsToSend:bt,unsentEntries:It}=function Ni(tt,Te=1024){const et=[];let bt=tt.slice();for(const It of tt){const Lt=et.find(H=>H.agent===It.agent);if(Lt){if(Lt.dates.push(It.date),Kn(et)>Te){Lt.dates.pop();break}}else if(et.push({agent:It.agent,dates:[It.date]}),Kn(et)>Te){et.pop();break}bt=bt.slice(1)}return{heartbeatsToSend:et,unsentEntries:bt}}(Te._heartbeatsCache.heartbeats),Lt=(0,ie.L)(JSON.stringify({version:2,heartbeats:bt}));return Te._heartbeatsCache.lastSentHeartbeatDate=et,It.length>0?(Te._heartbeatsCache.heartbeats=It,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Lt})()}}function en(){return(new Date).toISOString().substring(0,10)}class tn{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,h.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function _t(tt){return ct.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var et=this;return(0,h.Z)(function*(){var bt;if(yield et._canUseIndexedDBPromise){const Lt=yield et.read();return rn(et.app,{lastSentHeartbeatDate:null!==(bt=Te.lastSentHeartbeatDate)&&void 0!==bt?bt:Lt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var et=this;return(0,h.Z)(function*(){var bt;if(yield et._canUseIndexedDBPromise){const Lt=yield et.read();return rn(et.app,{lastSentHeartbeatDate:null!==(bt=Te.lastSentHeartbeatDate)&&void 0!==bt?bt:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...Te.heartbeats]})}})()}}function Kn(tt){return(0,ie.L)(JSON.stringify({version:2,heartbeats:tt})).length}!function xr(tt){vr(new ee.wA("platform-logger",Te=>new he(Te),"PRIVATE")),vr(new ee.wA("heartbeat",Te=>new ys(Te),"PRIVATE")),wr(oe,"0.8.4",tt),wr(oe,"0.8.4","esm2017"),wr("fire-js","")}("")},4859:(ut,De,P)=>{P.d(De,{H0:()=>oe,wA:()=>N});var h=P(5861),ee=P(2090);class N{constructor(B,$,Y){this.name=B,this.instanceFactory=$,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ie="[DEFAULT]";class re{constructor(B,$){this.name=B,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const $=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has($)){const Y=new ee.BH;if(this.instancesDeferred.set($,Y),this.isInitialized($)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:$});Fe&&Y.resolve(Fe)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(B){var $;const Y=this.normalizeInstanceIdentifier(B?.identifier),Fe=null!==($=B?.optional)&&void 0!==$&&$;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Re){if(Fe)return null;throw Re}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ce(ae){return"EAGER"===ae.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[$,Y]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier($);try{const Re=this.getOrInitializeService({instanceIdentifier:Fe});Y.resolve(Re)}catch{}}}}clearInstance(B=ie){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,h.Z)(function*(){const $=Array.from(B.instances.values());yield Promise.all([...$.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...$.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ie){return this.instances.has(B)}getOptions(B=ie){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:$={}}=B,Y=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:Y,options:$});for(const[Re,Ie]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Re)&&Ie.resolve(Fe);return Fe}onInit(B,$){var Y;const Fe=this.normalizeInstanceIdentifier($),Re=null!==(Y=this.onInitCallbacks.get(Fe))&&void 0!==Y?Y:new Set;Re.add(B),this.onInitCallbacks.set(Fe,Re);const Ie=this.instances.get(Fe);return Ie&&B(Ie,Fe),()=>{Re.delete(B)}}invokeOnInitCallbacks(B,$){const Y=this.onInitCallbacks.get($);if(Y)for(const Fe of Y)try{Fe(B,$)}catch{}}getOrInitializeService({instanceIdentifier:B,options:$={}}){let Y=this.instances.get(B);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ae=B,ae===ie?void 0:ae),options:$}),this.instances.set(B,Y),this.instancesOptions.set(B,$),this.invokeOnInitCallbacks(Y,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Y)}catch{}var ae;return Y||null}normalizeInstanceIdentifier(B=ie){return this.component?this.component.multipleInstances?B:ie:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const $=this.getProvider(B.name);if($.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);$.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const $=new re(B,this);return this.providers.set(B,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,De,P)=>{P.d(De,{Am:()=>ae,Ub:()=>oe,Yd:()=>ce,in:()=>ee});const h=[];var ee=(()=>{return(B=ee||(ee={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",ee;var B})();const N={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ie=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},he=(B,$,...Y)=>{if($<B.logLevel)return;const Fe=(new Date).toISOString(),Re=re[$];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Re](`[${Fe}]  ${B.name}:`,...Y)};class ce{constructor($){this.name=$,this._logLevel=ie,this._logHandler=he,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in ee))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?N[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...$),this._logHandler(this,ee.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...$),this._logHandler(this,ee.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...$),this._logHandler(this,ee.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...$),this._logHandler(this,ee.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...$),this._logHandler(this,ee.ERROR,...$)}}function oe(B){h.forEach($=>{$.setLogLevel(B)})}function ae(B,$){for(const Y of h){let Fe=null;$&&$.level&&(Fe=N[$.level]),Y.userLogHandler=null===B?null:(Re,Ie,...nt)=>{const ge=nt.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");Ie>=(Fe??Re.logLevel)&&B({level:ee[Ie].toLowerCase(),message:ge,args:nt,type:Re.name})}}}},8766:(ut,De,P)=>{P.d(De,{Lj:()=>Ae,X3:()=>ot});var h=P(5861);let N,ie;const ce=new WeakMap,oe=new WeakMap,ae=new WeakMap,B=new WeakMap,$=new WeakMap;let Re={get(j,pe,q){if(j instanceof IDBTransaction){if("done"===pe)return oe.get(j);if("objectStoreNames"===pe)return j.objectStoreNames||ae.get(j);if("store"===pe)return q.objectStoreNames[1]?void 0:q.objectStore(q.objectStoreNames[0])}return fe(j[pe])},set:(j,pe,q)=>(j[pe]=q,!0),has:(j,pe)=>j instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in j};function ge(j){return"function"==typeof j?function nt(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...pe){return j.apply(Xe(this),pe),fe(ce.get(this))}:function(...pe){return fe(j.apply(Xe(this),pe))}:function(pe,...q){const J=j.call(Xe(this),pe,...q);return ae.set(J,pe.sort?pe.sort():[pe]),fe(J)}}(j):(j instanceof IDBTransaction&&function Fe(j){if(oe.has(j))return;const pe=new Promise((q,J)=>{const se=()=>{j.removeEventListener("complete",ne),j.removeEventListener("error",Pe),j.removeEventListener("abort",Pe)},ne=()=>{q(),se()},Pe=()=>{J(j.error||new DOMException("AbortError","AbortError")),se()};j.addEventListener("complete",ne),j.addEventListener("error",Pe),j.addEventListener("abort",Pe)});oe.set(j,pe)}(j),((j,pe)=>pe.some(q=>j instanceof q))(j,function re(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Re):j)}function fe(j){if(j instanceof IDBRequest)return function Y(j){const pe=new Promise((q,J)=>{const se=()=>{j.removeEventListener("success",ne),j.removeEventListener("error",Pe)},ne=()=>{q(fe(j.result)),se()},Pe=()=>{J(j.error),se()};j.addEventListener("success",ne),j.addEventListener("error",Pe)});return pe.then(q=>{q instanceof IDBCursor&&ce.set(q,j)}).catch(()=>{}),$.set(pe,j),pe}(j);if(B.has(j))return B.get(j);const pe=ge(j);return pe!==j&&(B.set(j,pe),$.set(pe,j)),pe}const Xe=j=>$.get(j);function ot(j,pe,{blocked:q,upgrade:J,blocking:se,terminated:ne}={}){const Pe=indexedDB.open(j,pe),Oe=fe(Pe);return J&&Pe.addEventListener("upgradeneeded",gt=>{J(fe(Pe.result),gt.oldVersion,gt.newVersion,fe(Pe.transaction))}),q&&Pe.addEventListener("blocked",()=>q()),Oe.then(gt=>{ne&&gt.addEventListener("close",()=>ne()),se&&gt.addEventListener("versionchange",()=>se())}).catch(()=>{}),Oe}function Ae(j,{blocked:pe}={}){const q=indexedDB.deleteDatabase(j);return pe&&q.addEventListener("blocked",()=>pe()),fe(q).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],Be=new Map;function je(j,pe){if(!(j instanceof IDBDatabase)||pe in j||"string"!=typeof pe)return;if(Be.get(pe))return Be.get(pe);const q=pe.replace(/FromIndex$/,""),J=pe!==q,se=be.includes(q);if(!(q in(J?IDBIndex:IDBObjectStore).prototype)||!se&&!_e.includes(q))return;const ne=function(){var Pe=(0,h.Z)(function*(Oe,...gt){const Xt=this.transaction(Oe,se?"readwrite":"readonly");let jt=Xt.store;return J&&(jt=jt.index(gt.shift())),(yield Promise.all([jt[q](...gt),se&&Xt.done]))[0]});return function(gt){return Pe.apply(this,arguments)}}();return Be.set(pe,ne),ne}!function Ie(j){Re=j(Re)}(j=>({...j,get:(pe,q,J)=>je(pe,q)||j.get(pe,q,J),has:(pe,q)=>!!je(pe,q)||j.has(pe,q)}))},5861:(ut,De,P)=>{function h(N,ie,re,he,ce,oe,ae){try{var B=N[oe](ae),$=B.value}catch(Y){return void re(Y)}B.done?ie($):Promise.resolve($).then(he,ce)}function ee(N){return function(){var ie=this,re=arguments;return new Promise(function(he,ce){var oe=N.apply(ie,re);function ae($){h(oe,he,ce,ae,B,"next",$)}function B($){h(oe,he,ce,ae,B,"throw",$)}ae(void 0)})}}P.d(De,{Z:()=>ee})}},ut=>{ut(ut.s=3030)}]);